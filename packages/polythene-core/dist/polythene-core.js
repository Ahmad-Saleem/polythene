!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("mithril"),require("flyd")):"function"==typeof define&&define.amd?define(["exports","mithril","flyd"],n):n(e.polythene=e.polythene||{},e.m,e.flyd)}(this,function(e,n,t){"use strict";n="default"in n?n.default:n,t="default"in t?t.default:t;var i={rgba:function(e){return"rgba("+e+","+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)+")"},hex:function(e){var n=parseInt(e.substring(1),16);return(n>>16&255)+","+(n>>8&255)+","+(255&n)},grid_unit:4,grid_unit_component:8,grid_unit_menu:56,grid_unit_icon_button:48,unit_block_border_radius:2,unit_item_border_radius:2,unit_indent:72,unit_side_padding:window.innerWidth>=1024?24:16,unit_touch_height:48,unit_icon_size_small:16,unit_icon_size:24,unit_icon_size_medium:32,unit_icon_size_large:40,unit_screen_size_extra_large:1280,unit_screen_size_large:960,unit_screen_size_medium:480,unit_screen_size_small:320,animation_duration:".18s",animation_curve_slow_in_fast_out:"cubic-bezier(.4, 0, .2, 1)",animation_curve_slow_in_linear_out:"cubic-bezier(0, 0, .2, 1)",animation_curve_linear_in_fast_out:"cubic-bezier(.4, 0, 1, 1)",animation_curve_default:"ease-out",font_weight_light:300,font_weight_normal:400,font_weight_medium:500,font_weight_bold:700,font_size_title:20,line_height:1.3,color_primary:"33, 150, 243",color_primary_active:"30, 136, 229",color_primary_dark:"25, 118, 210",color_primary_faded:"100, 181, 249",color_primary_foreground:"255, 255, 255",color_light_background:"255, 255, 255",color_light_foreground:"0, 0, 0",color_dark_background:"34, 34, 34",color_dark_foreground:"255, 255, 255",blend_light_text_primary:.87,blend_light_text_regular:.73,blend_light_text_secondary:.54,blend_light_text_tertiary:.4,blend_light_text_disabled:.26,blend_light_border_light:.11,blend_light_background_active:.14,blend_light_background_hover:.06,blend_light_background_hover_medium:.12,blend_light_background_disabled:.09,blend_light_overlay_background:.3,blend_dark_text_primary:1,blend_dark_text_regular:.87,blend_dark_text_secondary:.7,blend_dark_text_tertiary:.4,blend_dark_text_disabled:.26,blend_dark_border_light:.1,blend_dark_background_active:.14,blend_dark_background_hover:.08,blend_dark_background_hoverMedium:.12,blend_dark_background_disabled:.12,blend_dark_overlay_background:.3,breakpoint_small_handset_portrait:0,breakpoint_medium_handset_portrait:360,breakpoint_large_handset_portrait:400,breakpoint_small_tablet_portrait:600,breakpoint_large_tablet_portrait:720,breakpoint_small_handset_landscape:480,breakpoint_medium_handset_landscape:600,breakpoint_large_handset_landscape:720,env_tablet:window.innerWidth>=600,env_desktop:window.innerWidth>=1024,z_menu:1,z_header_container:2e3,z_fixed_header_container:3e3,z_notification:4e3,z_dialog:5e3},o="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,r=o?"click":"mousedown",u=o?"click":"mouseup",a=window.PointerEvent?"pointermove":"ontouchmove"in window||window.DocumentTouch&&document instanceof window.DocumentTouch?"touchmove":"mousemove",d=window.PointerEvent?"pointerup":"ontouchend"in window||window.DocumentTouch&&document instanceof window.DocumentTouch?"touchend":"mouseup";document.querySelector("html").classList.add(o?"pe-touch":"pe-no-touch");var c={},_=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.05,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,i=!1;return function(){for(var o=arguments.length,r=Array(o),u=0;u<o;u++)r[u]=arguments[u];i||(!function(){e.apply(t,r)}(),i=!0,setTimeout(function(){i=!1},n))}},l=function(e,n,t){c[e]=c[e]||[],c[e].push(t?_(n,t):n)},s=function(e,n){if(c[e]){var t=c[e].indexOf(n);t>-1&&c[e].splice(t,1)}},f=function(e,n){c[e]&&c[e].forEach(function(e){e(n)})};window.addEventListener("resize",function(e){return f("resize",e)}),window.addEventListener("scroll",function(e){return f("scroll",e)}),window.addEventListener("keydown",function(e){return f("keydown",e)}),window.addEventListener(u,function(e){return f(u,e)});var h={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"},m=function(){return document.createElement("fakeelement")},v=function(){var e=m();for(var n in h)if(void 0!==e.style[n])return h[n]},b=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},w=function(e){var t=[],i=function(e){var n=u(e);return t.indexOf(n)},o=function(e){var n=i(e);-1!==n&&t.splice(n,1)},r=function(e,n){var o=i(e);-1!==o&&(t[o]=n)},u=function(e){for(var n=0;n<t.length;n++)if(t[n].instanceId===e)return t[n]},a=function(e){var n=u(e);return void 0===n||n.cancelled},d=function(){t.length&&(t[0].show=!0,n.redraw())},c=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.defaultId;e.queue?(t.shift(),setTimeout(d,0)):o(n)},_=function(){for(var e=0;e<t.length;e++)t[e].cancelled=!0;t.length=0,setTimeout(n.redraw)},l=function(e,n){var t=u(n);t&&(t.pause=e,t.unpause=!e)},s=function(n,t,i){var o=void 0,r=function(){if(!a(t)){var e="function"==typeof n?n():n;return e.didShow&&e.didShow(t),o(t)}},u=new Promise(function(e){return o=e}),d=void 0,_=function(){if(!a(t)){var i="function"==typeof n?n():n;return i.didHide&&i.didHide(t),e.queue&&c(t),d(t)}},l=new Promise(function(e){return d=e});return b({},e,{instanceId:t,spawn:i,opts:n,show:!e.queue,cancelled:!1,showPromise:u,hidePromise:l,didShow:r,didHide:_})};return{count:function(){return t.length},clear:function(){return _()},show:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.id||e.defaultId,a=i.spawn||e.defaultId,c=void 0;if(e.queue)c=s(n,o,a),t.push(c),1===t.length&&d();else{var _=u(o);c=s(n,o,a),_?r(o,c):t.push(c)}return c.showPromise},hide:function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id||e.defaultId,i=e.queue&&t.length?t[0]:u(n);return i?(i.hide=!0,i.hidePromise):Promise.resolve(n)},remove:c,pause:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.defaultId;return l(!0,n)},unpause:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.defaultId;return l(!1,n)},view:function(i){var o=i.attrs,r=o.spawn||e.defaultId,u=t.filter(function(e){return e.show&&e.spawn===r});return document.body.classList[u.length?"add":"remove"](e.bodyShowClass),u.length?n(e.element,{class:"container"===o.position?"pe-multiple--container":"pe-multiple--screen"},u.map(function(t){return n(e.instance,b({},t,{transitions:e.transitions,key:t.key||t.instanceId}))})):n(e.placeholder)},theme:e.instance.theme}},p=function(e){return z(e,"show")},g=function(e){return z(e,"hide")},k=function(e,n,t,i,o,r){var u=e.transition||"both";return"none"===u?0:"show"===u&&"hide"===n?0:"hide"===u&&"show"===n?0:"show"===n?void 0!==e[t]?e[t]:o:void 0!==e[i]?e[i]:r},y=function(e,n){return k(e,n,"showDuration","hideDuration",.22,.2)},x=function(e,n){return k(e,n,"showDelay","hideDelay",0,0)},z=function(e,n){var t=e.el;return t?new Promise(function(i){var o=1e3*y(e,n),r=1e3*x(e,n),u=t.style,a=function(){u.transitionDuration="0ms",u.transitionDelay="0ms"},d=e.beforeShow&&"show"===n?function(){a(),e.beforeShow()}:null,c=e.afterHide&&"hide"===n?function(){a(),e.afterHide()}:null,_=function(){u.transitionDuration=o+"ms",u.transitionDelay=r+"ms",e.showClass&&t.classList["show"===n?"add":"remove"](e.showClass),e.show&&"function"==typeof e.show&&"show"===n&&e.show(),e.hide&&"function"==typeof e.hide&&"hide"===n&&e.hide()},l=function(){_(),setTimeout(function(){c&&c(),i()},o+r)},s=function(){0===o?l():setTimeout(l,0)};d?(d(),setTimeout(s,0)):s()}):Promise.resolve()},E=function(e,n){return e[n]=1,e},P=["key","oninit","oncreate","onupdate","onbeforeremove","onremove","onbeforeupdate","style","href","id","tabindex"],T=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.add,i=void 0===t?[]:t,o=n.remove,r=(void 0===o?[]:o).reduce(E,{}),u=P.concat(i).filter(function(e){return!r[e]}).reduce(E,{});return Object.keys(e).reduce(function(n,t){return u[t]&&(n[t]=e[t]),n},{})},D=function(e){var n=e;return function(e){if(void 0===e)return n;n=e}},I=t.stream,S=function(e){return function(n,t){var i=t(n);return e(),i}},q=function(e,n,i){return t.scan(S(i),e,n)};e.defaultVariables=i,e.isTouch=o,e.touchStartEvent=r,e.touchEndEvent=u,e.moveEvent=a,e.endEvent=d,e.throttle=_,e.subscribe=l,e.unsubscribe=s,e.emit=f,e.animationEndEvent=v,e.multiple=w,e.show=p,e.hide=g,e.filterSupportedAttributes=T,e.prop=D,e.getUpdate=I,e.getModels=q,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core.js.map
