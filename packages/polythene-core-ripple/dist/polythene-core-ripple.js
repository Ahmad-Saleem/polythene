!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core"),require("polythene-core-css"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-core-css","polythene-theme"],t):t(e.polythene=e.polythene||{},e["polythene-core"],e["polythene-core-css"],e["polythene-theme"])}(this,function(e,t,n,i){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s={component:"pe-ripple",mask:"pe-ripple__mask",waves:"pe-ripple__waves",constrained:"pe-ripple--constrained",wavesAnimating:"pe-ripple__waves--animating"},l={color:"inherit"},c=function(e){return[r({},e,[n.mixin.fit(),{color:"inherit",borderRadius:"inherit",pointerEvents:"none",".pe-ripple--constrained":{borderRadius:"inherit"," .pe-ripple__mask":{overflow:"hidden",borderRadius:"inherit"}}," .pe-ripple__mask":[n.mixin.fit(),{transform:"translate3d(0,0,0)"}]," .pe-ripple__waves":{outline:"1px solid transparent",position:"absolute",borderRadius:"50%",pointerEvents:"none",display:"none"}," .pe-ripple__waves--animating":{display:"block"}}])]},p=function(e,t,n,i){return[o({},e.map(function(e){return e+t}).join(","),{color:n["color_"+i]||n.color||"inherit"})]},u=function(e,t){return[p([".pe-dark-tone",".pe-dark-tone "],e,t,"dark"),p(["",".pe-light-tone",".pe-light-tone "],e,t,"light")]},d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m=[c,u],f="."+s.component,v=function(e,t){return n.styler.generateStyles([e,f],d({},l,t),m)};n.styler.generateStyles([f],l,m);var h=t.animationEndEvent,y=function(e){var r=e.e,o=e.el,s=e.attrs,l=e.classes,c=e.onEndCallback,p=document.createElement("div");p.setAttribute("class",l.mask),o.appendChild(p);var u=document.createElement("div");u.setAttribute("class",l.waves),p.appendChild(u);var d=o.getBoundingClientRect(),m=t.isTouch&&r.touches?r.touches[0].pageX:r.clientX,f=t.isTouch&&r.touches?r.touches[0].pageY:r.clientY,v=o.offsetWidth,y=o.offsetHeight,g=Math.sqrt(v*v+y*y),b=s.center?d.left+d.width/2:m,w=s.center?d.top+d.height/2:f,_=b-d.left-g/2,E=w-d.top-g/2,k=void 0!==s.startOpacity?s.startOpacity:.2,O=void 0!==s.opacityDecayVelocity?s.opacityDecayVelocity:.35,j=s.endOpacity||0,x=s.startScale||.1,C=s.endScale||2,L=s.duration?s.duration:1/O*.2,P=window.getComputedStyle(o).color,S="ripple_animation_"+(new Date).getTime(),A=u.style;A.width=A.height=g+"px",A.top=E+"px",A.left=_+"px",A["animation-duration"]=A["-webkit-animation-duration"]=A["-moz-animation-duration"]=A["-o-animation-duration"]=L+"s",A.backgroundColor=P,A.opacity=k,A.animationName=S,A.animationTimingFunction=s.animationTimingFunction||i.vars.animation_curve_default;var R=[a({},"@keyframes "+S,{" 0%":{transform:"scale("+x+")",opacity:k}," 100%":{transform:"scale("+C+")",opacity:j}})];n.styler.add(S,R);var T=function(){u.classList.remove(l.wavesAnimating),p.removeChild(u),o.removeChild(p)},q=function e(t){n.styler.remove(S),u.removeEventListener(h,e,!1),s.end&&s.end(t),s.persistent?(A.opacity=j,A.transform="scale("+C+")"):(c(),T())};u.addEventListener(h,q,!1),s.start&&s.start(r),u.classList.add(l.wavesAnimating)},g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},b=v,w=function(e,t){return{animating:t(!1),removeEventListeners:t(!1)}},_=function(e,n){var i=n.keys,r=e.attrs;return g({},t.filterSupportedAttributes(r),{className:[s.component,!1!==r.constrained?s.constrained:null,"dark"===r.tone?"pe-dark-tone":null,"light"===r.tone?"pe-light-tone":null,r.className||r[i.class]].join(" ")})},E=function(e){if(e.dom){var n=e.state,i=e.attrs,r=e.dom,o=function(e){i.disabled||n.animating()&&!i.multi||(y({e:e,el:r,attrs:i,classes:s,onEndCallback:function(){return n.animating(!1)}}),n.animating(!0))},a=i.target?i.target():e.dom&&e.dom.parentElement;a.addEventListener(t.touchEndEvent,o,!1),n.removeEventListeners(function(){return a.removeEventListener(t.touchEndEvent,o,!1)})}},k=function(e){return e.state.removeEventListeners()()},O=Object.freeze({element:"div",theme:b,getInitialState:w,createProps:_,onMount:E,onUnmount:k});e.coreRipple=O,e.classes=s,e.vars=l,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-ripple.js.map
