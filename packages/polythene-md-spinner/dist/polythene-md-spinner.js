!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("mithril"),require("polythene-core"),require("polythene-css"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","mithril","polythene-core","polythene-css","polythene-theme"],n):n(e.polythene=e.polythene||{},e.m,e["polythene-core"],e["polythene-css"],e["polythene-theme"])}(this,function(e,n,t,i,r){"use strict";function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}n="default"in n?n.default:n;var p="default"in t?t.default:t,l={component:"pe-shadow",topShadow:"pe-shadow__top",bottomShadow:"pe-shadow__bottom",animated:"pe-shadow--animated",depth_n:"pe-shadow--z-"},d={transition:"box-shadow "+r.vars.animation_duration+" ease-out","shadow-top-z-1":"initial","shadow-bottom-z-1":"0 1px 4px 0 rgba(0, 0, 0, 0.37)","shadow-top-z-2":"0 2px 2px 0 rgba(0, 0, 0, 0.2)","shadow-bottom-z-2":"0 6px 10px 0 rgba(0, 0, 0, 0.3)","shadow-top-z-3":"0 11px 7px 0 rgba(0, 0, 0, 0.19)","shadow-bottom-z-3":"0 13px 25px 0 rgba(0, 0, 0, 0.3)","shadow-top-z-4":"0 14px 12px 0 rgba(0, 0, 0, 0.17)","shadow-bottom-z-4":"0 20px 40px 0 rgba(0, 0, 0, 0.3)","shadow-top-z-5":"0 17px 17px 0 rgba(0, 0, 0, 0.15)","shadow-bottom-z-5":"0 27px 55px 0 rgba(0, 0, 0, 0.3)","shadow-down-z-1":"inset 0px 1px 2px -1px rgba(0, 0, 0, 0.15)","shadow-down-z-2":"inset 0px 4px 6px -3px rgba(0, 0, 0, 0.25)"},u=function(e){return{boxShadow:e}},c=function(e,n){return[o({},e,[i.mixin.fit(),{borderRadius:"inherit",pointerEvents:"none"," .pe-shadow__bottom, .pe-shadow__top":[i.mixin.fit(),{borderRadius:"inherit"}],".pe-shadow--animated":{" .pe-shadow__bottom, .pe-shadow__top":{transition:n.transition}}},[1,2,3,4,5].map(function(e){var t;return t={},o(t," .pe-shadow__top.pe-shadow--z-"+e,u(n["shadow-top-z-"+e])),o(t," .pe-shadow__bottom.pe-shadow--z-"+e,u(n["shadow-bottom-z-"+e])),t})])]},h=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},m=[c],f="."+l.component,g=function(e,n){return i.styler.generateStyles([e,f],h({},d,n),m)};i.styler.generateStyles([f],d,m);var b=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},v=function(e){var i=e.attrs,r=""+l.depth_n+Math.min(5,void 0!==i.z?i.z:1),o=i.element||"div",a=b({},t.filterSupportedAttributes(i),{class:[l.component,i.animated&&l.animated,i.class].join(" ")}),s=i.content?i.content:i.children||e.children,p=[s,n("div",{class:[l.bottomShadow,r].join(" ")}),n("div",{class:[l.topShadow,r].join(" ")})];return n(o,a,[i.before,p,i.after])},_={theme:g,view:v},w={component:"pe-spinner",placeholder:"pe-spinner__placeholder",animation:"pe-spinner__animation",visible:"pe-spinner--visible",small:"pe-spinner--small",regular:"pe-spinner--regular",medium:"pe-spinner--medium",large:"pe-spinner--large",fab:"pe-spinner--fab",raised:"pe-spinner--raised",permanent:"pe-spinner--permanent",singleColor:"pe-spinner--single-color",animated:"pe-spinner--animated"},y=r.vars.rgba,x={size_small:3*r.vars.grid_unit_component,size_regular:4*r.vars.grid_unit_component,size_medium:5*r.vars.grid_unit_component,size_large:6*r.vars.grid_unit_component,size_fab:7*r.vars.grid_unit_component,color_light_raised_background:y(r.vars.color_light_background),color_dark_raised_background:y(r.vars.color_light_background)},z=function(e){return{width:e+"px",height:e+"px"}},j=function(e){var n=e/4,t=e+2*n;return{width:t+"px",height:t+"px",padding:n+"px"}},O=function(e,n){return[a({},e,{transitionTimingFunction:"ease-out",transitionProperty:"opacity",opacity:0,".pe-spinner--visible, &.pe-spinner--permanent":{opacity:1},".pe-spinner--small":z(n.size_small),".pe-spinner--regular":z(n.size_regular),".pe-spinner--medium":z(n.size_medium),".pe-spinner--large":z(n.size_large),".pe-spinner--fab":z(n.size_fab),".pe-spinner--raised":{position:"relative",borderRadius:"50%",".pe-spinner--small":j(n.size_small),".pe-spinner--regular":j(n.size_regular),".pe-spinner--medium":j(n.size_medium),".pe-spinner--large":j(n.size_large),".pe-spinner--fab":j(n.size_fab)}})]},S=function(e,n,t,i){return[s({},e.map(function(e){return e+n}).join(","),{".pe-spinner--raised":{backgroundColor:t["color_"+i+"_raised_background"]}})]},T=function(e,n){return[S([".pe-dark-tone",".pe-dark-tone "],e,n,"dark"),S(["",".pe-light-tone",".pe-light-tone "],e,n,"light")]},P=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},k=[O,T],C="."+w.component,q=function(e,n){return i.styler.generateStyles([e,C],P({},x,n),k)};i.styler.generateStyles([C],x,k);var R=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},A={small:w.small,regular:w.regular,medium:w.medium,large:w.large,fab:w.fab},F=function(){return A[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"regular"]},M=function(e,n){if(!e.isTransitioning)return e.isTransitioning=!0,p.show(R({},n,{el:e.el,showClass:w.visible})).then(function(){e.isTransitioning=!1,e.visible=!0})},N=function(e,t){if(!e.isTransitioning)return e.isTransitioning=!0,p.hide(R({},t,{el:e.el,afterHide:function(){return e.el.style.display="none"},showClass:w.visible})).then(function(){e.isTransitioning=!1,e.visible=!1,e.hide=!1,n.redraw()})},E=function(e,n){var t=e[n];return t!==!0&&!isNaN(t)&&1e3*parseFloat(t,10)},H=function(e,n){if(n.percentage&&n.getPercentage){var t="function"==typeof n.percentage?n.percentage():n.percentage;n.getPercentage(t,e,n)}},B=function(e,i){var r=i.element||"div",o=R({},t.filterSupportedAttributes(i),{class:[w.component,F(i.type),i.singleColor?w.singleColor:null,i.raised?w.raised:null,i.animated?w.animated:null,i.permanent?w.permanent:null,i.class].join(" "),oncreate:function(n){var t=n.dom;e.el=t,H(e,i),i.permanent||setTimeout(function(){return M(e,i)},0)}},i.events?i.events:null);H(e,i),e.hide&&setTimeout(function(){N(e,i)},0);var a=[i.raised&&i.content?n.component(_,{z:i.z}):null,i.content||n("div",{class:w.animation},"Specific spinner missing")];return n(r,o,[i.before,a,i.after])},D=function(e,t){if(e.visible){if(void 0!==t.show&&!t.show||t.hide){var i=E(t,"hide");i?setTimeout(function(){e.hide=!0,n.redraw()},i):e.hide=!0}}else if(void 0!==t.hide&&!t.hide||t.show){var r=E(t,"show");r?setTimeout(function(){e.visible=!0,n.redraw()},r):e.visible=!0}return e.visible?B(e,t):n("span",{class:w.placeholder})},G={theme:q,oninit:function(e){e.state=R(e.state,{el:null,isTransitioning:!1,visible:e.attrs.permanent||!1,hide:!1,percentage:0})},view:D};e.default=G,e.classes=w,e.vars=x,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-md-spinner.js.map
