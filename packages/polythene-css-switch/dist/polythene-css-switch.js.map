{"version":3,"file":"polythene-css-switch.js","sources":["../../polythene-css-classes/switch.js","../src/layout.js","../src/color.js","../src/index.js"],"sourcesContent":["\nexport default {\n  component: \"pe-switch-control\",\n\n  // elements\n  knob:      \"pe-switch-control__knob\",\n  thumb:     \"pe-switch-control__thumb\",\n  track:     \"pe-switch-control__track\",\n};\n","import { layout as selectionControlLayout } from \"polythene-css-selection-control\";\nimport { vars } from \"polythene-theme\";\nimport { mixin } from \"polythene-core-css\";\n\nconst transition = (componentVars, properties, duration = componentVars.animation_duration) => [\n  mixin.defaultTransition(properties, duration, \"ease-out\")\n];\n\nconst customSize = (componentVars, size) => {\n  const factor = size / vars.unit_icon_size;\n  const thumbSize = Math.floor(0.5 * componentVars.thumb_size * factor) * 2; // round to even\n  const scaledTrackHeight = Math.floor(0.5 * componentVars.track_height * factor) * 2; // round to even\n  const scaledTrackWidth = Math.floor(0.5 * componentVars.track_length * factor) * 2;\n  const scaledThumbSize = Math.floor(0.5 * componentVars.thumb_size * factor) * 2;\n  const trackTop = ((componentVars.label_height * factor - scaledTrackHeight) / 2);\n  const thumbPadding = componentVars.icon_button_padding;\n  const thumbMargin = (size - scaledThumbSize) / 2;\n  const thumbOuterSize = size + 2 * thumbPadding;\n  const thumbOffsetMin = -(thumbOuterSize / 2) + (thumbSize / 2);\n  const thumbOffsetMax = thumbOffsetMin + scaledTrackWidth - thumbSize;\n  const thumbOffsetY = thumbOffsetMin + thumbMargin;\n  const trackVisualOffset = 0.3; // prevent sub pixel of track to shine through knob border\n\n  return {\n    \" .pe-control__form-label\": {\n      height: size + \"px\",\n      minWidth: scaledTrackWidth + \"px\",\n    },\n    \" .pe-control__label\": [\n      mixin.defaultTransition(\"all\", componentVars.animation_duration),\n      {\n        paddingLeft: (componentVars.padding * factor + 8 + scaledTrackWidth) + \"px\"\n      }\n    ],\n    \" .pe-switch-control__track\": {\n      left: trackVisualOffset + \"px\",\n      height: scaledTrackHeight + \"px\",\n      width: (scaledTrackWidth - 2 * trackVisualOffset) + \"px\",\n      top: trackTop + \"px\",\n      borderRadius: scaledTrackHeight + \"px\"\n    },\n    \" .pe-switch-control__thumb\": {\n      top: thumbOffsetY + \"px\",\n      left: thumbOffsetMin + \"px\"\n    },\n\n    \" .pe-switch-control__knob\": {\n      width: scaledThumbSize + \"px\",\n      height: scaledThumbSize + \"px\",\n      margin: thumbMargin + \"px\"\n    },\n\n    \" .pe-button__content\": {\n      padding: thumbPadding + \"px\"\n    },\n\n    \".pe-control--on\": {\n      \" .pe-switch-control__thumb\": {\n        left: thumbOffsetMax + \"px\"\n      }\n    }\n  };\n};\n\nexport default (selector, componentVars) =>\n  selectionControlLayout(selector, componentVars, \"checkbox\")\n    .concat(\n      [{\n        [selector]: {\n          \" .pe-switch-control__track\": [\n            transition(componentVars, \"background, opacity\"),\n            {\n              position: \"absolute\",\n              left: 0\n            }\n          ],\n\n          \" .pe-switch-control__thumb\": [\n            transition(componentVars, \"left, color\"),\n            {\n              position: \"absolute\",\n              zIndex: 1, // Prevents flickering of text label when toggling\n              color: \"inherit\",\n\n              \":focus\": {\n                outline: 0\n              }\n            }\n          ],\n\n          \" .pe-switch-control__knob\": {\n            position: \"relative\",\n            borderRadius: \"50%\"\n          },\n\n          \" .pe-button__content .pe-switch-control__knob .pe-icon\": [\n            mixin.fit(),\n            transition(componentVars, \"color\"),\n            {\n              width: \"100%\",\n              height: \"100%\"\n            }\n          ],\n\n          \" .pe-button__focus\": [\n            transition(componentVars, \"all\")\n          ],\n\n          \".pe-control--small\":   customSize(componentVars, vars.unit_icon_size_small),\n          \".pe-control--regular\": customSize(componentVars, vars.unit_icon_size),\n          \".pe-control--medium\":  customSize(componentVars, vars.unit_icon_size_medium),\n          \".pe-control--large\":   customSize(componentVars, vars.unit_icon_size_large)\n        }\n      },\n      {\n        // For IE 11, to catch mouse events place checkbox element on top stretching to all sides\n        [`_:-ms-fullscreen, :root ${selector}`]: {\n          \" input\": {\n            position: \"absolute\",\n            zIndex: 1,\n            width: \"100%\",\n            height: \"100%\",\n            left: 0,\n            top: 0,\n            right: 0,\n            bottom: 0,\n            display: \"block\",\n            opacity: 0,\n            cursor: \"pointer\"\n          },\n          \" label\": {\n            cursor: \"auto\"\n          }\n        }\n      }]\n    );\n\n    \n\n","\nconst style = (scopes, selector, componentVars, tint) => [{\n  [scopes.map(s => s + selector).join(\",\")]: {\n\n    \" .pe-control__label\": {\n      color: componentVars[\"color_\" + tint + \"_label\"]\n    },\n\n    \".pe-control--off\": {\n      \" .pe-switch-control__track\": {\n        opacity: componentVars[\"color_\" + tint + \"_track_off_opacity\"],\n        backgroundColor: componentVars[\"color_\" + tint + \"_track_off\"]\n      },\n      \" .pe-switch-control__thumb\": {\n        color: componentVars[\"color_\" + tint + \"_thumb_off\"]\n      },\n      \" .pe-switch-control__knob\": {\n        backgroundColor: \"currentcolor\"\n      },\n      \" .pe-button--focus\": {\n        \" .pe-button__focus\": {\n          opacity: componentVars[\"color_\" + tint + \"_focus_off_opacity\"],\n          backgroundColor: componentVars[\"color_\" + tint + \"_focus_off\"]\n        }\n      },\n      \" .pe-icon\": {\n        color: componentVars[\"color_\" + tint + \"_icon_off\"] || \"currentcolor\"\n      },\n      \" .pe-control__label\": {\n        color: componentVars[\"color_\" + tint + \"_off_label\"]\n      },\n    },\n\n    \".pe-control--on\": {\n      \" .pe-switch-control__track\": {\n        opacity: componentVars[\"color_\" + tint + \"_track_on_opacity\"],\n        backgroundColor: componentVars[\"color_\" + tint + \"_track_on\"]\n      },\n      \" .pe-switch-control__thumb\": {\n        color: componentVars[\"color_\" + tint + \"_thumb_on\"]\n      },\n      \" .pe-switch-control__knob\": {\n        backgroundColor: \"currentcolor\"\n      },\n      \" .pe-button--focus\": {\n        \" .pe-button__focus\": {\n          opacity: componentVars[\"color_\" + tint + \"_focus_on_opacity\"],\n          backgroundColor: componentVars[\"color_\" + tint + \"_focus_on\"]\n        }\n      },\n      \" .pe-icon\": {\n        color: componentVars[\"color_\" + tint + \"_icon_on\"] || \"currentcolor\"\n      },\n      \" .pe-control__label\": {\n        color: componentVars[\"color_\" + tint + \"_on_label\"]\n      },\n    },\n\n    \".pe-control--on.pe-control--disabled, &.pe-control--off.pe-control--disabled\": {\n      \" .pe-control__label\": {\n        color: componentVars[\"color_\" + tint + \"_disabled\"]\n      },\n      \" .pe-switch-control__track\": {\n        opacity: componentVars[\"color_\" + tint + \"_track_disabled_opacity\"],\n        backgroundColor: componentVars[\"color_\" + tint + \"_track_disabled\"]\n      },\n      \" .pe-switch-control__thumb\": {\n        color: componentVars[\"color_\" + tint + \"_thumb_disabled\"]\n      },\n    },\n  }\n}];\n\nconst noTouchStyle = (scopes, selector, componentVars, tint) => [{\n  [scopes.map(s => s + selector + \":hover\").join(\",\")]: {\n    \".pe-control--on\": {\n      \" .pe-button__wash\": {\n        backgroundColor: componentVars[\"color_\" + tint + \"_wash_on\"]\n      }\n    },\n    \".pe-control--off\": {\n      \" .pe-button__wash\": {\n        backgroundColor: componentVars[\"color_\" + tint + \"_wash_off\"]\n      }\n    }\n  }\n}];\n\nexport default (selector, componentVars) => [\n  style([\".pe-dark-tone\", \".pe-dark-tone \"], selector, componentVars, \"dark\"), // has/inside dark tone\n  style([\"\", \".pe-light-tone\", \".pe-light-tone \"], selector, componentVars, \"light\"), // normal, has/inside light tone\n  noTouchStyle([\"html.pe-no-touch .pe-dark-tone \"], selector, componentVars, \"dark\"), // inside dark tone\n  noTouchStyle([\"html.pe-no-touch \", \"html.pe-no-touch .pe-light-tone \"], selector, componentVars, \"light\"),\n];\n\n","import { styler } from \"polythene-core-css\";\nimport { vars } from \"polythene-core-switch\";\nimport classes from \"polythene-css-classes/switch\";\nimport layout from \"./layout\";\nimport color from \"./color\";\n\nconst fns = [layout, color];\nconst selector = `.${classes.component}`;\n\nexport const addStyle = (customSelector, customVars) => \n  styler.generateStyles([customSelector, selector], {...vars, ...customVars}, fns);\n\nexport const getStyle = (customSelector, customVars) => \n  customSelector\n    ? styler.createStyleSheets([customSelector, selector], {...vars, ...customVars}, fns)\n    : styler.createStyleSheets([selector], vars, fns);\n\nstyler.generateStyles([selector], vars, fns);\n"],"names":["transition","componentVars","properties","duration","animation_duration","mixin","defaultTransition","customSize","size","factor","vars","unit_icon_size","thumbSize","Math","floor","thumb_size","scaledTrackHeight","track_height","scaledTrackWidth","track_length","scaledThumbSize","trackTop","label_height","thumbPadding","icon_button_padding","thumbMargin","thumbOuterSize","thumbOffsetMin","thumbOffsetMax","thumbOffsetY","trackVisualOffset","padding","selector","selectionControlLayout","concat","fit","unit_icon_size_small","unit_icon_size_medium","unit_icon_size_large","style","scopes","tint","map","s","join","noTouchStyle","fns","layout","color","classes","component","addStyle","customSelector","customVars","styler","generateStyles","getStyle","createStyleSheets"],"mappings":"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"}