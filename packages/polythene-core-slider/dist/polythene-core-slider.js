!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core"),require("polythene-core-css"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-core-css","polythene-theme"],t):t(e.polythene={},e["polythene-core"],e["polythene-core-css"],e["polythene-theme"])}(this,function(e,t,r,i){"use strict";function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={component:"pe-slider",control:"pe-slider__control",label:"pe-slider__label",pin:"pe-slider__pin",thumb:"pe-slider__thumb",tick:"pe-slider__ticks-tick",ticks:"pe-slider__ticks",track:"pe-slider__track",trackBar:"pe-slider__track-bar",trackBarValue:"pe-slider__track-bar-value",trackPart:"pe-slider__track-part",trackPartRest:"pe-slider__track-rest",trackPartValue:"pe-slider__track-value",hasFocus:"pe-slider--focus",hasPin:"pe-slider--pin",hasTicks:"pe-slider--ticks",hasTrack:"pe-slider--track",isActive:"pe-slider--active",isAtMin:"pe-slider--min",isDisabled:"pe-slider--disabled"},c=i.vars.color_light_foreground,s=i.vars.color_dark_foreground,_=i.vars.color_primary,d=Math.max(40,12),u=Math.max(d,18),p=Math.max(52,18),h=Math.max(10,u/2-6),f={height:p,side_spacing:h,horizontal_layout_side_spacing:h+4,thumb_size:12,thumb_touch_size:d,track_height:p,bar_height:2,thumb_border_width:2,active_thumb_scale:1.5,animation_duration:i.vars.animation_duration,disabled_thumb_scale:.5,active_pin_thumb_scale:2/6,step_width:2,pin_height:32,pin_width:26,pin_font_size:10,color_light_track_active:r.rgba(c,.38),color_light_track_inactive:r.rgba(c,.26),color_light_track_value:r.rgba(_),color_light_thumb_off:r.rgba(c,.26),color_light_thumb_off_focus:r.rgba(c),color_light_thumb_off_focus_opacity:.08,color_light_thumb_on:r.rgba(_),color_light_thumb_on_focus_opacity:.11,color_light_thumb_inactive:r.rgba(c,.26),color_light_tick:r.rgba(c,1),color_light_icon:r.rgba(i.vars.color_light_foreground,i.vars.blend_light_text_secondary),color_light_disabled_icon:r.rgba(i.vars.color_light_foreground,i.vars.blend_light_text_disabled),color_light_label:r.rgba(i.vars.color_light_foreground,i.vars.blend_light_text_secondary),color_light_disabled_label:r.rgba(i.vars.color_light_foreground,i.vars.blend_light_text_disabled),color_dark_track_active:r.rgba(s,.3),color_dark_track_inactive:r.rgba(s,.2),color_dark_track_value:r.rgba(_),color_dark_thumb_off:r.rgba(s,.2),color_dark_thumb_off_focus:r.rgba(s),color_dark_thumb_off_focus_opacity:.08,color_dark_thumb_on:r.rgba(_),color_dark_thumb_on_focus_opacity:.11,color_dark_thumb_inactive:r.rgba(s,.2),color_dark_tick:r.rgba(s,1),color_dark_icon:r.rgba(i.vars.color_dark_foreground,i.vars.blend_dark_text_secondary),color_dark_disabled_icon:r.rgba(i.vars.color_dark_foreground,i.vars.blend_dark_text_disabled),color_dark_label:r.rgba(i.vars.color_dark_foreground,i.vars.blend_dark_text_secondary),color_dark_disabled_label:r.rgba(i.vars.color_dark_foreground,i.vars.blend_dark_text_disabled)},b=function(e,t,r){var i=r?e-2*t:e;return{borderWidth:t+"px",width:i+"px",height:i+"px",left:e-i+"px",top:e-i+"px"}},g=function(e,t){var a=Math.max(t.thumb_size,2*t.thumb_border_width),n=(t.active_thumb_scale-1)*a/2,l=a/2,c=Math.max(1,t.thumb_border_width/t.active_thumb_scale),s=t.thumb_touch_size,_=l-1;return[o({},e,[r.flex.layoutHorizontal,r.flex.flexGrow(1),{userSelect:"none",height:t.height+"px",marginTop:(t.height-t.track_height)/2+"px ",alignItems:"center"," > .pe-icon":[r.flex.layoutCenter,{height:t.height+"px"}]," .pe-slider__track":[r.flex.layoutHorizontal,r.flex.flexGrow(1),r.mixin.defaultTransition("transform",t.animation_duration),{userSelect:"none",position:"relative",height:t.track_height+"px",margin:"0 "+t.side_spacing+"px",outline:0}]," div + .pe-slider__track":{margin:"0 "+t.horizontal_layout_side_spacing+"px"}," .pe-slider__control":[r.flex.selfCenter,r.mixin.defaultTransition("transform, background",".200s"),{userSelect:"none",width:a+"px",height:a+"px",lineHeight:0,borderRadius:"50%",outline:0,zIndex:1,position:"relative",":before":[r.mixin.defaultTransition("background-color",t.animation_duration),{content:'""',position:"absolute",borderRadius:"50%",left:-s/2+a/2+"px",top:-s/2+a/2+"px",width:s+"px",height:s+"px"}],":after":[r.mixin.defaultTransition("border",t.animation_duration),b(a,t.thumb_border_width,!1),{content:'""',position:"absolute",borderRadius:"50%",borderStyle:"solid"}]}]," .pe-slider__thumb":[r.mixin.defaultTransition("opacity",t.animation_duration),r.mixin.fit(),{"&, .pe-icon":{width:"inherit",height:"inherit"}}]," .pe-slider__label":{height:t.height+"px",lineHeight:t.height+"px",minWidth:i.vars.unit_icon_size+"px",textAlign:"center",fontSize:"16px",fontWeight:i.vars.font_weight_medium}," .pe-slider__track-part":[r.flex.flex(),{userSelect:"none",height:t.bar_height+"px",margin:(t.track_height-t.bar_height)/2+"px 0",overflow:"hidden"}]," .pe-slider__track-value, .pe-slider__track-rest":r.flex.layoutHorizontal," .pe-slider__track-bar":[r.flex.flex(),{position:"relative",overflow:"hidden"}]," .pe-slider__track-bar-value":[r.flex.flex(),r.mixin.defaultTransition("transform, background-color",t.animation_duration),{height:t.bar_height+"px"}]," .pe-slider__track-value .pe-slider__track-bar":{marginLeft:l+"px"}," .pe-slider__track-rest .pe-slider__track-bar":{marginRight:l+"px"}," .pe-slider__ticks":[r.flex.layoutJustified,{userSelect:"none",position:"absolute",width:"calc(100% - "+2*_+"px)",height:t.bar_height+"px",left:0,top:t.height/2-1+"px",margin:"0 "+_+"px",pointerEvents:"none"}]," .pe-slider__ticks-tick":{width:t.step_width+"px",height:t.bar_height+"px"}," .pe-slider__pin":[r.mixin.defaultTransition("transform",".11s"),{transform:"translateZ(0) scale(0) translate(0, 0)",transformOrigin:"bottom",position:"absolute",zIndex:1,width:t.pin_width+"px",height:0,left:0,top:0,margin:"0 "+_+"px 0 "+(_-t.pin_width/2+1)+"px",pointerEvents:"none","::before":{transform:"rotate(-45deg)",content:'""',position:"absolute",top:0,left:0,width:t.pin_width+"px",height:t.pin_width+"px",borderRadius:"50% 50% 50% 0",backgroundColor:"inherit"},"::after":{content:"attr(value)",position:"absolute",top:0,left:0,width:t.pin_width+"px",height:t.pin_height+"px",textAlign:"center",color:"#fff",fontSize:t.pin_font_size+"px",lineHeight:t.pin_width+"px"}}],".pe-slider--active:not(.pe-slider--ticks)":{" .pe-slider__control":{transform:"scale("+t.active_thumb_scale+")",borderWidth:c+"px"}," .pe-slider__track-value .pe-slider__track-bar-value":{transform:"translateX("+-n+"px)"}," .pe-slider__track-rest .pe-slider__track-bar-value":{transform:"translateX("+n+"px)"}},".pe-slider--pin.pe-slider--active, &.pe-slider--pin.pe-slider--focus":{" .pe-slider__pin":{transform:"translateZ(0) scale(1) translate(0, -24px)"}," .pe-slider__control":{transform:"scale("+t.active_pin_thumb_scale+")"}},":not(.pe-slider--disabled)":{" .pe-slider__control":{cursor:"pointer"},".pe-slider--track":{" .pe-slider__track":{cursor:"pointer"}}},".pe-slider--disabled":{" .pe-slider__control":{transform:"scale("+t.disabled_thumb_scale+")",borderWidth:0}," .pe-slider__control:after":[b(a,1/t.disabled_thumb_scale*t.thumb_border_width,!0)]}}])]},k=function(e,t,r,i){return[a({},e.map(function(e){return e+t}).join(","),{color:r["color_"+i+"_thumb_on"]," .pe-slider__control":{"&:after":{borderColor:"transparent"}}," .pe-slider__track-bar-value":{background:r["color_"+i+"_track_inactive"]}," .pe-slider__ticks-tick":{background:r["color_"+i+"_tick"]}," .pe-slider__pin":{backgroundColor:"currentcolor"}," .pe-icon":{color:r["color_"+i+"_disabled_icon"]}," .pe-slider__label":{color:r["color_"+i+"_disabled_label"]},"&.pe-slider--active":{" .pe-slider__track-bar-value":{background:r["color_"+i+"_track_active"]}},".pe-slider--disabled":{" .pe-slider__control":{background:r["color_"+i+"_thumb_inactive"]}},"&:not(.pe-slider--disabled)":{" .pe-slider__control":{backgroundColor:r["color_"+i+"_thumb_background"]||"currentcolor","&:before":{opacity:r["color_"+i+"_thumb_off_focus_opacity"]}}," .pe-slider__track-value .pe-slider__track-bar-value":{background:"currentcolor"},"&.pe-slider--focus.pe-slider--min:not(.pe-slider--pin) .pe-slider__control:before,      &.pe-slider--min:not(.pe-slider--pin) .pe-slider__control:focus:before":{backgroundColor:r["color_"+i+"_thumb_off_focus"]},"&.pe-slider--focus:not(.pe-slider--min):not(.pe-slider--pin) .pe-slider__control:before,      &:not(.pe-slider--min):not(.pe-slider--pin) .pe-slider__control:focus:before":{backgroundColor:"currentcolor",opacity:r["color_"+i+"_thumb_on_focus_opacity"]}," .pe-icon":{color:r["color_"+i+"_icon"]}," .pe-slider__label":{color:r["color_"+i+"_label"]}},"&.pe-slider--min:not(.pe-slider--disabled)":{" .pe-slider__control":{backgroundColor:"transparent"}," .pe-slider__thumb":{opacity:0}," .pe-slider__control:after":{borderColor:r["color_"+i+"_track_inactive"]},"&.pe-slider--active .pe-slider__control:after":{borderColor:r["color_"+i+"_track_active"]},"&.pe-slider--ticks":{" .pe-slider__control":{backgroundColor:r["color_"+i+"_tick"]}," .pe-slider__control:after":{borderColor:"transparent"}}," .pe-slider__pin":{backgroundColor:r["color_"+i+"_track_inactive"]}}})]},v=function(e,t){return[k([".pe-dark-tone",".pe-dark-tone "],e,t,"dark"),k(["",".pe-light-tone",".pe-light-tone "],e,t,"light")]},m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},x=[g,v],y="."+l.component,w=function(e,t){return r.styler.generateStyles([e,y],m({},f,t),x)};r.styler.generateStyles([y],f,x);var E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},C=w,T=void 0,M=function(e){T&&T.blur(),T=void 0,e.hasFocus(!1)},O=function(e,t){M(e),T=t,e.hasFocus(!0)},P=function(e,r){return t.isTouch&&e.touches?r?e.touches[0].pageY:e.touches[0].pageX:r?e.pageY:e.pageX},S=function(e){if(e.controlEl&&e.pinEl){var t=e.fraction()*e.rangeWidth;e.pinEl.style.left=t+"px"}},z=function(e,t){e.setValue(t),S(e)},V=function(e,t,r,i){for(var o=[],a=Math.round((r-t)/i)+1;a>0;)o.push(e("div",{className:l.tick,key:"tick-"+a})),a--;return o},W=function(e){if(e.controlEl&&t.isClient){e.controlWidth=f.thumb_size,e.rangeWidth=e.trackEl.getBoundingClientRect().width-e.controlWidth;var r=window.getComputedStyle(e.trackEl);e.rangeOffset=parseFloat(r.marginLeft)}},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.clickOffset=e.trackEl.getBoundingClientRect().left-(e.rangeOffset-e.controlWidth/2)+t},D=function(e,t){var r=e.controlEl.getBoundingClientRect().left,i=P(t)-r-e.controlWidth/2;A(e,i)},N=function(e){return A(e,0)},j=function(e,t){var r=P(t)-e.clickOffset,i=e.min+(r-e.rangeOffset)/e.rangeWidth*(e.max-e.min);z(e,i)},R=function(e,r,i){if(!e.isDragging()){i.preventDefault(),e.isDragging(!0),e.isActive(!0),M(e);var o=function(t){e.isDragging()&&j(e,t)},a=function r(){e.isDragging()&&(M(e),t.isClient&&(window.removeEventListener(t.pointerMoveEvent,o),window.removeEventListener(t.pointerEndMoveEvent,r)),e.isDragging(!1),e.isActive(!1))};t.isClient&&(window.addEventListener(t.pointerMoveEvent,o),window.addEventListener(t.pointerEndMoveEvent,a)),W(e),r.pin&&S(e)}},F=function(e,t,r){r.preventDefault(),e.isDragging()||(W(e),N(e),j(e,r),R(e,t,r))},B=function(e,r){var i,o=r.h,a=r.k,c=r.hasTicks,s=r.interactiveTrack,_=e.state,d=e.attrs,u=_.fraction(),p=Math.max(10,parseInt(d.step,10)||1),h=function(e){return F(_,d,e)},f=function(e){W(_),D(_,e),R(_,d,e)},b=u+" 1 0%",g=1-u,k=g+" 1 0%";return o("div",E({},{className:l.track},s&&!d.disabled&&n({},a["on"+t.pointerStartMoveEvent],h)),[o("div",{className:l.trackPart+" "+l.trackPartValue,key:"trackPartValue",style:{flex:b,msFlex:b,WebkitFlex:b}},o("div",{className:l.trackBar},o("div",{className:l.trackBarValue}))),o("div",E({},{className:l.control,key:"control"},d.disabled?{disabled:!0}:(i={},n(i,a.tabindex,d[a.tabindex]||0),n(i,a.onfocus,function(){return O(_,_.controlEl)}),n(i,a.onblur,function(){return M(_)}),n(i,a.onkeydown,function(e){"Tab"!==e.key&&e.preventDefault(),"Escape"===e.key?_.controlEl.blur(e):"ArrowLeft"===e.key||"ArrowDown"===e.key?_.decrement(e.shiftKey):"ArrowRight"===e.key||"ArrowUp"===e.key?_.increment(e.shiftKey):"Home"===e.key?_.setValue(_.min):"End"===e.key?_.setValue(_.max):"PageDown"===e.key?_.decrement(!0):"PageUp"===e.key&&_.increment(!0),W(_),S(_)}),i),!d.disabled&&n({},a["on"+t.pointerStartMoveEvent],f),d.events?d.events:null,c?{step:p}:null),d.icon?o("div",{className:l.thumb,key:"icon"},d.icon):null),o("div",{className:l.trackPart+" "+l.trackPartRest,key:"trackPartRest",style:{flex:k,msFlex:k,WebkitFlex:k,maxWidth:100*g+"%"}},o("div",{className:l.trackBar},o("div",{className:l.trackBarValue}))),c&&!d.disabled?o("div",{className:l.ticks,key:"ticks"},V(o,_.min,_.max,p)):null,c&&d.pin&&!d.disabled?o("div",{className:l.pin,key:"pin",value:Math.round(_.value())}):null])},H=function(e,t){var r=e.attrs,i=void 0!==r.min?r.min:0,o=void 0!==r.max?r.max:100,a=void 0!==r.step?r.step:1,n=void 0!==r.defaultValue?r.defaultValue:void 0!==r.value?r.value:0,l=t(void 0),c=t(!1),s=t(!1),_=t(!1),d=t(i),u=t(0),p=function(e){e<i&&(e=i),e>o&&(e=o),u(a?Math.round(e/a)*a:e),d((u()-i)/(o-i)),r.onChange&&r.onChange({value:u()}),l(e)},h=function(e){return p(u()+(e?10:1)*(a||1))},f=function(e){return p(u()-(e?10:1)*(a||1))};return p(n),{min:i,max:o,fraction:d,trackEl:null,controlEl:null,pinEl:null,setValue:p,increment:h,decrement:f,isDragging:_,isActive:c,value:u,previousValue:l,hasFocus:s,controlWidth:0,rangeWidth:0,rangeOffset:0,clickOffset:0,redrawOnUpdate:t.merge([c,u])}},L=function(e){var t=e.dom,r=e.state,i=e.attrs;r.trackEl=t.querySelector("."+l.track),r.controlEl=t.querySelector("."+l.control),r.pinEl=t.querySelector("."+l.pin),i.pin&&setTimeout(function(){S(r)},0)},q=function(e,r){var i=r.keys,o=e.state,a=e.attrs;void 0!==a.value&&o.previousValue()!==a.value&&(o.previousValue(a.value),setTimeout(function(){return o.setValue(o.previousValue())},0));var n=void 0!==a.ticks&&!1!==a.ticks,c=void 0===a.interactiveTrack||a.interactiveTrack;return E({},t.filterSupportedAttributes(a),{className:[l.component,a.disabled?l.isDisabled:null,a.pin?l.hasPin:null,c?l.hasTrack:null,o.isActive()?l.isActive:null,o.hasFocus()?l.hasFocus:null,0===o.fraction()?l.isAtMin:null,n?l.hasTicks:null,"dark"===a.tone?"pe-dark-tone":null,"light"===a.tone?"pe-light-tone":null,a.className||a[i.class]].join(" ")})},I=function(e,t){var r=t.renderer,i=t.keys,o=e.attrs,a=void 0!==o.ticks&&!1!==o.ticks,n=void 0===o.interactiveTrack||o.interactiveTrack;return B(e,{h:r,k:i,hasTicks:a,interactiveTrack:n})},X=Object.freeze({theme:C,getInitialState:H,onMount:L,createProps:q,createContent:I});e.coreSlider=X,e.classes=l,e.vars=f,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-slider.js.map
