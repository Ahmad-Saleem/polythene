!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("mithril"),require("polythene-mithril"),require("polythene-list-tile"),require("polythene-core"),require("polythene-core-css"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","mithril","polythene-mithril","polythene-list-tile","polythene-core","polythene-core-css","polythene-theme"],t):t(e.polythene=e.polythene||{},e.m,e["polythene-mithril"],e["polythene-list-tile"],e["polythene-core"],e["polythene-core-css"],e["polythene-theme"])}(this,function(e,t,i,a,r,o,n){"use strict";function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}t="default"in t?t.default:t,a="default"in a?a.default:a;var p={component:"pe-card",actions:"pe-card__actions",content:"pe-card__content",header:"pe-card__header",headerTitle:"pe-card__header-title",media:"pe-card__media",mediaDimmer:"pe-card__media__dimmer",overlay:"pe-card__overlay",overlayContent:"pe-card__overlay__content",primary:"pe-card__primary",primaryMedia:"pe-card__primary-media",subtitle:"pe-card__subtitle",text:"pe-card__text",title:"pe-card__title",actionsBordered:"pe-card__actions--borders",actionsHorizontal:"pe-card__actions--horizontal",actionsJustified:"pe-card__actions--justified",actionsTight:"pe-card__actions--tight",actionsVertical:"pe-card__actions--vertical",mediaCropX:"pe-card__media--crop-x",mediaCropY:"pe-card__media--crop-y",mediaLarge:"pe-card__media--large",mediaMedium:"pe-card__media--medium",mediaRatioLandscape:"pe-card__media--landscape",mediaRatioSquare:"pe-card__media--square",mediaRegular:"pe-card__media--regular",mediaSmall:"pe-card__media--small",overlaySheet:"pe-card__overlay--sheet",primaryHasMedia:"pe-card__primary--media",primaryTight:"pe-card__primary--tight",textTight:"pe-card__text--tight"},s=n.vars.rgba,g={image_size_small:80,image_size_regular:112,image_size_medium:160,image_size_large:240,border_radius:n.vars.unit_block_border_radius,padding_h:16,offset_small_padding_v:8,padding_actions_h:8,title_padding_h:16,title_padding_v:24,tight_title_padding_bottom:16,text_padding_h:16,text_padding_v:16,text_padding_bottom:24,tight_text_padding_bottom:16,subtitle_line_height_padding_bottom:7,text_line_height_padding_top:6,text_line_height_padding_bottom:7,one_line_height_with_icon:72,icon_element_width:68,one_line_padding_v:8,actions_padding_v:2,actions_button_margin_v:2,actions_vertical_padding_v:6,color_light_main_background:s(n.vars.color_light_background),color_light_title_text:s(n.vars.color_light_foreground,n.vars.blend_light_text_primary),color_light_subtitle_text:s(n.vars.color_light_foreground,n.vars.blend_light_text_secondary),color_light_text:s(n.vars.color_light_foreground,n.vars.blend_light_text_regular),color_light_actions_border:s(n.vars.color_light_foreground,n.vars.blend_light_border_light),color_light_overlay_background:s(n.vars.color_light_background,n.vars.blend_light_overlay_background),color_dark_main_background:s(n.vars.color_dark_background),color_dark_title_text:s(n.vars.color_dark_foreground,n.vars.blend_dark_text_primary),color_dark_subtitle_text:s(n.vars.color_dark_foreground,n.vars.blend_dark_text_secondary),color_dark_text:s(n.vars.color_dark_foreground,n.vars.blend_dark_text_regular),color_dark_actions_border:s(n.vars.color_dark_foreground,n.vars.blend_dark_border_light),color_dark_overlay_background:s(n.vars.color_dark_background,n.vars.blend_dark_overlay_background)},u=function(e,t){return[d({},e,{display:"block",position:"relative",borderRadius:t.border_radius+"px","&, a:link, a:visited":{textDecoration:"none"}," .pe-card__content":{position:"relative",borderRadius:"inherit",overflow:"hidden",width:"inherit",height:"inherit"}," .pe-card__media":{position:"relative",overflow:"hidden",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit",zIndex:1,"&.pe-card__media--landscape":{paddingBottom:"56.25%"},"&.pe-card__media--square":{paddingBottom:"100%"},"&:last-child":{"&, img":{borderBottomLeftRadius:t.border_radius+"px",borderBottomRightRadius:t.border_radius+"px"}}," img":[o.mixin.fit(),{display:"none",width:"100%",maxWidth:"none","&.pe-card__media--crop-x":{width:"100%",height:"auto",display:"block"},"&.pe-card__media--crop-y":{height:"100%",width:"auto",display:"block"}}]}," .pe-card__header + .pe-card__media":{borderTopLeftRadius:0,borderTopRightRadius:0}," .pe-card__primary-media":{margin:"16px 16px 0 16px"," .pe-card__media--small":{width:t.image_size_small+"px"}," .pe-card__media--regular":{width:t.image_size_regular+"px"}," .pe-card__media--medium":{width:t.image_size_medium+"px"}," .pe-card__media--large":{width:t.image_size_large+"px",marginBottom:"16px"}," .pe-card__media":{"&, img":{borderRadius:0}}," .shadow + &":{"&, img":{borderTopLeftRadius:t.border_radius+"px",borderTopRightRadius:t.border_radius+"px"}}}," .pe-card__overlay":o.mixin.fit()," .pe-card__media__dimmer":[o.mixin.fit(),{zIndex:1}]," .pe-card__overlay__content":{position:"absolute",bottom:0,top:"auto",right:0,left:0,zIndex:2}," .pe-card__header":{height:t.one_line_height_with_icon+"px"," .pe-list-tile__title":{fontSize:"14px",fontWeight:n.vars.font_weight_normal,lineHeight:"20px",marginTop:"2px"}," .pe-list-tile__subtitle":{marginTop:"-1px"}}," .pe-card__primary":[o.flex.layoutHorizontal,{position:"relative","&.pe-card__primary--media:not(:last-child)":{paddingBottom:"16px"},"&.pe-card__primary--media + .pe-card__actions":{marginTop:"-16px"},"& + .pe-card__text":{marginTop:"-16px"},"&.pe-card__primary--tight":{" .pe-card__title":{paddingBottom:t.tight_title_padding_bottom-t.subtitle_line_height_padding_bottom+"px"}}}]," .pe-card__title":[o.flex.flex(),{padding:[t.title_padding_v,t.title_padding_h,t.title_padding_v-t.subtitle_line_height_padding_bottom,t.title_padding_h].map(function(e){return e+"px"}).join(" "),fontSize:"24px",lineHeight:"29px"}]," .pe-card__subtitle":{fontSize:"14px",lineHeight:"24px"}," .pe-card__actions":[{minHeight:"52px",padding:t.actions_padding_v+"px "+t.padding_actions_h+"px","&.pe-card__actions--tight":{minHeight:0,padding:0},"&.pe-card__actions--horizontal:not(.pe-card__actions--justified)":[o.flex.layoutHorizontal,o.flex.layoutCenter,{" :first-child":{marginLeft:0}," .pe-button":{minWidth:0}," .pe-button--icon":{marginRight:"8px"}}],"&.pe-card__actions--justified":[o.flex.layoutJustified],"&.pe-card__actions--vertical":[o.flex.layoutVertical,{":not(.pe-card__actions--tight)":{paddingTop:t.actions_vertical_padding_v+"px",paddingBottom:t.actions_vertical_padding_v+"px"}," .pe-card__actions":[{marginLeft:-t.padding_actions_h+"px",marginRight:-t.padding_actions_h+"px",minHeight:0,"&:first-child":{marginTop:-t.actions_vertical_padding_v+"px"},"&:last-child":{marginBottom:-t.actions_vertical_padding_v+"px"}}]," .pe-button":{height:"36px",padding:0,marginTop:t.actions_button_margin_v+"px",marginBottom:t.actions_button_margin_v+"px"}," .pe-list":{padding:0}}]}]," .pe-card__text":{paddingTop:t.text_padding_v-t.text_line_height_padding_top+"px",paddingRight:t.text_padding_h+"px",paddingLeft:t.text_padding_h+"px",paddingBottom:t.tight_text_padding_bottom-t.text_line_height_padding_bottom+"px",fontSize:"14px",lineHeight:"24px","&:last-child":{paddingBottom:t.text_padding_bottom-t.text_line_height_padding_bottom+"px"},"&.pe-card__text--tight, &.pe-card__text--tight:last-child":{paddingBottom:t.tight_text_padding_bottom-t.text_line_height_padding_bottom+"px"}," .pe-card__actions + &":{marginTop:"8px"}}," .pe-card__text, .pe-card__primary":{"& + .pe-card__actions:not(:last-child)":{marginTop:-(t.offset_small_padding_v+1)+"px",marginBottom:-(t.offset_small_padding_v-1)+"px"}}})]},m=function(e,t,i,a){return[_({},e.map(function(e){return e+t}).join(","),{backgroundColor:i["color_"+a+"_main_background"]})]},h=function(e,t){return[m([".pe-dark-tone",".pe-dark-tone "],e,t,"dark"),m(["",".pe-light-tone",".pe-light-tone "],e,t,"light")]},v=function(e,t,i,a){return[l({},e.map(function(e){return e+t}).join(","),{" .pe-card__title":{color:i["color_"+a+"_title_text"]}," .pe-card__subtitle":{color:i["color_"+a+"_subtitle_text"]}," .pe-card__text":{color:i["color_"+a+"_text"]}," .pe-card__actions--borders":{borderTop:"1px solid "+i["color_"+a+"_actions_border"]}})]},b=function(e,t){return[v([".pe-dark-tone",".pe-dark-tone "],e,t,"dark"),v(["",".pe-light-tone",".pe-light-tone "],e,t,"light")]},f=function(e,t,i,a){return[c({},e.map(function(e){return e+t}).join(","),{" .pe-card__overlay__content":{backgroundColor:i["color_"+a+"_overlay_background"]}})]},y=function(e,t){return[f([".pe-dark-tone",".pe-dark-tone "],e,t,"dark"),f(["",".pe-light-tone",".pe-light-tone "],e,t,"light")]},x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},k="."+p.component,j="."+p.content,z="."+p.overlaySheet,T="."+p.overlayContent,w=function(e,t){return o.styler.generateStyles([e,k],x({},g,t),[u,h]),o.styler.generateStyles([e,z],x({},g,t),[y]),o.styler.generateStyles([e,j],x({},g,t),[b]),o.styler.generateStyles([e,T],x({},g,t),[b])};o.styler.generateStyles([k],g,[u,h]),o.styler.generateStyles([z],g,[y]),o.styler.generateStyles([j],g,[b]),o.styler.generateStyles([T],g,[b]);var R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},S={landscape:16/9,square:1},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.element||"div",a=e.content.map(function(e){return D[Object.keys(e)[0]](e)});return t("div",{class:[p.overlay,e.sheet?p.overlaySheet:null,"light"===e.tone?null:"pe-dark-tone","light"===e.tone?"pe-light-tone":null].join(" ")},[t(i,{class:[p.overlayContent,e.class].join(" ")},a),t("div",{class:p.mediaDimmer})])},H=function(e){var i=e.text||{};return t(i.element||"div",{class:[p.text,i.tight?p.textTight:null,i.class].join(" ")},i.content)},O={small:p.mediaSmall,regular:p.mediaRegular,medium:p.mediaMedium,large:p.mediaLarge},q=function(){return O[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"regular"]},L=function(e){var i=e.media||{},a=i.ratio||"landscape",r=i.origin||"center",o=i.element||"div",n=function(e){var t=e.dom,i=t.querySelector("img");i&&(i.onload=function(){var e=this.naturalWidth,o=this.naturalHeight,n=e/o,d=n<S[a]?p.mediaCropX:p.mediaCropY;i.className=d;var _=t.clientWidth,l=t.clientHeight;if(n<S[a])if("center"===r){var c=_/n,s=l-c,g=s/2;this.style.marginTop=g+"px"}else"start"===r?(this.style.top=0,this.style.bottom="auto"):(this.style.top="auto",this.style.bottom=0);else if("center"===r){var u=l*n,m=_-u,h=m/2;this.style.marginLeft=h+"px"}else"start"===r?(this.style.left=0,this.style.right="auto"):(this.style.left="auto",this.style.right=0)})};return t(o,{class:[p.media,q(i.type),"landscape"===a?p.mediaRatioLandscape:p.mediaRatioSquare,i.class].join(" "),oncreate:n},[i.content,i.overlay?B(i.overlay):t("div",{class:p.mediaDimmer})])},C=function(e){var r=e.header||{};return t(a,R({},r,{class:[p.header,r.class].join(" ")},r.icon?{front:t(i.Icon,r.icon)}:null))},M={horizontal:p.actionsHorizontal,vertical:p.actionsVertical,justified:p.actionsJustified},P=function(){return M[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"horizontal"]},A=function(e){var i=e.actions||{};return t(i.element||"div",{class:[p.actions,P(i.layout),i.bordered?p.actionsBordered:null,i.tight?p.actionsTight:null,i.class].join(" ")},i.content)},W=function(e){var i=void 0,a=void 0,r=void 0,o=e.primary||{},n=o.element||"div",d=!1,_={title:function(e){return e.attrs?e:t("div",{class:p.title},[e.title?e.title:null,e.subtitle?t("div",{class:p.subtitle},e.subtitle):null])},media:function(e){return d=!0,t("div",{class:p.primaryMedia},L({media:e}))},actions:function(e){return A({actions:e})}};return i=Array.isArray(o.content)?o.content.map(function(e){return a=Object.keys(e)[0],r=e[a],_[a]?_[a](r):e}):[o.title?_.title({title:o.title,subtitle:o.subtitle}):null,o.media?_.media(o.media):null,o.actions?_.actions(o.actions):null,o.content],t(n,{class:[p.primary,o.tight?p.primaryTight:null,d?p.primaryHasMedia:null].join(" ")},i)},D={text:H,media:L,header:C,primary:W,actions:A},I=function(e){var a=e.attrs,o=a.element||a.url?"a":"div",n=R({},r.filterSupportedAttributes(a),{class:[p.component,"dark"===a.tone?"pe-dark-tone":null,"light"===a.tone?"pe-light-tone":null,a.class].join(" ")},a.url?a.url:null,a.events?a.events:null),d=Array.isArray(a.content)?a.content.map(function(e){var t=Object.keys(e)[0];if(!D[t])throw'Content type "'+t+'" does not exist';return D[t](e)}):a.content,_=[t(i.Shadow,{z:void 0!==a.z?a.z:1,animated:!0}),t("div",{class:p.content},d)];return t(o,n,[a.before,_,a.after])},J={theme:w,view:I};e.default=J,e.classes=p,e.vars=g,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-card.js.map
