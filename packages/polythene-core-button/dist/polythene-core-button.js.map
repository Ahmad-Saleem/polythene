{"version":3,"file":"polythene-core-button.js","sources":["../src/classes.js","../src/button.js","../src/vars.js"],"sourcesContent":["\nconst baseClass = \"pe-button\";\n\nexport default {\n  base:       baseClass,\n  component:  `${baseClass} pe-text-button`,\n\n  // elements\n  content:    \"pe-button__content\",\n  focus:      \"pe-button__focus\",\n  label:      \"pe-button__label\",\n  wash:       \"pe-button__wash\",\n\n  // states\n  borders:    \"pe-button--borders\",\n  disabled:   \"pe-button--disabled\",\n  focused:    \"pe-button--focus\",\n  inactive:   \"pe-button--inactive\",\n  selected:   \"pe-button--selected\",\n};\n","import { filterSupportedAttributes, isClient } from \"polythene-core\";\nimport classes from \"./classes\";\n\nexport const getElement = vnode =>\n  vnode.attrs.element || \"a\";\n\nexport const getInitialState = (vnode, createStream) => {\n  const dom = createStream();\n  const click = createStream(false);\n  const focus = createStream(false);\n  const inactive = createStream(false);\n  const mouseover = createStream(false);\n  return {\n    dom,\n    click,\n    focus,\n    inactive,\n    mouseover,\n    redrawOnUpdate: createStream.merge([dom, click, focus, inactive, mouseover])\n  };\n};\n\nexport const onMount = (vnode, { keys: k }) => {\n  if (!vnode.dom) {\n    return;\n  }\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  state.dom(vnode.dom);\n  \n  if (isClient) {\n    const handleInactivate = () => (\n      state.inactive(true),\n      setTimeout(() => (\n        state.inactive(false)\n      ), attrs.inactivate * 1000)\n    );\n    const onClickHandler = attrs.events\n      ? attrs.events[k.onclick]\n      : null;\n\n    const onFocus = () => state.focus(!state.mouseover());\n    const onBlur = () => state.focus(false);\n    const onMouseOver = () => state.mouseover(true);\n    const onMouseOut = () => state.mouseover(false);\n    const onClick = e => (\n      state.click(e),\n      attrs.inactivate !== undefined && handleInactivate(),\n      onClickHandler\n        ? onClickHandler(e)\n        : true\n    );\n    vnode.dom.addEventListener(\"focus\", onFocus, false);\n    vnode.dom.addEventListener(\"blur\", onBlur, false);\n    vnode.dom.addEventListener(\"mouseover\", onMouseOver, false);\n    vnode.dom.addEventListener(\"mouseout\", onMouseOut, false);\n    vnode.dom.addEventListener(\"click\", onClick, false);\n\n    state.removeEventListeners = () => (\n      vnode.dom.removeEventListener(\"focus\", onFocus, false),\n      vnode.dom.removeEventListener(\"blur\", onBlur, false),\n      vnode.dom.removeEventListener(\"mouseover\", onBlur, false),\n      vnode.dom.removeEventListener(\"mouseout\", onMouseOut, false),\n      vnode.dom.removeEventListener(\"click\", onClick, false)\n    );\n  }\n};\n\nexport const onUnMount = vnode =>\n  vnode.state.removeEventListeners && vnode.state.removeEventListeners();\n\nexport const createProps = (vnode, { keys: k }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const disabled = attrs.disabled;\n  const inactive = attrs.inactive || state.inactive();\n  const onClickHandler = attrs.events && attrs.events[k.onclick];\n  const onKeyDownHandler = (attrs.events && attrs.events[k.onkeydown]) || onClickHandler;\n\n  return Object.assign(\n    {}, \n    filterSupportedAttributes(attrs, { add: [k.formaction, \"type\"], remove: [\"style\"] }), // Set style on content, not on component\n    {\n      className: [\n        attrs.parentClassName || classes.component,\n        attrs.selected ? classes.selected : null,\n        disabled ? classes.disabled : null,\n        inactive ? classes.inactive : null,\n        attrs.borders ? classes.borders : null,\n        state.focus() ? classes.focused : null,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \")\n    },\n    inactive ? null : {\n      [k.tabindex]: disabled || inactive\n        ? -1\n        : attrs[k.tabindex] || 0,\n      [k.onkeydown]: e => {\n        if (e.key === \"Enter\" && state.focus()) {\n          state.focus(false);\n          if (onKeyDownHandler) {\n            onKeyDownHandler(e);\n          }\n        }\n      }\n    },\n    attrs.events\n      ? Object.assign(\n        {},\n        attrs.events,\n        {\n          [k.onclick]: null // handled by event listener\n        }\n      )\n      : null,\n    attrs.url,\n    disabled ? { disabled: true } : null\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, keys: k, Ripple }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const noink = attrs.ink !== undefined && attrs.ink === false;\n  const disabled = attrs.disabled;\n  const children = attrs.children || vnode.children;\n  const label = attrs.content\n    ? attrs.content\n    : attrs.label\n      ? typeof attrs.label === \"object\"\n        ? attrs.label\n        : h(\"div\", { className: classes.label }, attrs.label)\n      : children\n        ? children\n        : null;\n  const noWash = disabled || (attrs.wash !== undefined && !attrs.wash);\n  return label\n    ? h(\"div\",\n      {\n        [k.class]: classes.content,\n        style: attrs.style\n      },\n      [\n        attrs.shadowComponent // \"protected\" option, used by raised-button\n          ? attrs.shadowComponent\n          : null,\n        // Ripple\n        disabled || noink\n          ? null\n          : Ripple /*&& state.dom()*/\n            ? h(Ripple, Object.assign({},\n              {\n                key: \"ripple\",\n                target: state.dom()\n              },\n              attrs.ripple\n            ))\n            : null,\n        // hover\n        noWash ? null : h(\"div\", { key: \"wash\", className: classes.wash }),\n        // focus\n        disabled ? null : h(\"div\", { key: \"focus\", className: classes.focus }),\n        label\n      ]\n    )\n    : null;\n};\n","import { vars } from \"polythene-theme\";\n\nconst rgba = (colorStr, opacity = 1) =>\n  `rgba(${colorStr}, ${opacity})`;\n\nconst touch_height = vars.unit_touch_height;\nconst height = 36;\n\nexport default {\n  margin_h:           vars.grid_unit,\n  border_radius:      vars.unit_item_border_radius,\n  font_size:          14,\n  font_weight:        500,\n  outer_padding_v:    (touch_height - height) / 2,\n  padding_h:          2 * vars.grid_unit,\n  padding_v:          11,\n  min_width:          8 * vars.grid_unit_component,\n  text_transform:     \"uppercase\",\n  border_width:       0, // no border in MD, but used to correctly set the height when a theme does set a border\n  animation_duration: vars.animation_duration,\n\n  color_light_background:          \"transparent\",\n  color_light_text:                rgba(vars.color_light_foreground, vars.blend_light_text_primary),\n  color_light_hover_background:    rgba(vars.color_light_foreground, vars.blend_light_background_hover),\n  color_light_focus_background:    rgba(vars.color_light_foreground, vars.blend_light_background_hover),\n  color_light_active_background:   rgba(vars.color_light_foreground, vars.blend_light_background_active),\n  color_light_disabled_background: \"transparent\",\n  color_light_disabled_text:       rgba(vars.color_light_foreground, vars.blend_light_text_disabled),\n\n  // border colors may be set in theme; disabled by default\n  // color_light_border:              \"transparent\", // only specify this variable to get all 4 states\n  // color_light_hover_border:        \"transparent\",\n  // color_light_active_border:       \"transparent\",\n  // color_light_disabled_border:     \"transparent\",\n\n  color_dark_background:           \"transparent\",\n  color_dark_text:                 rgba(vars.color_dark_foreground, vars.blend_dark_text_primary),\n  color_dark_hover_background:     rgba(vars.color_dark_foreground, vars.blend_dark_background_hover),\n  color_dark_focus_background:     rgba(vars.color_dark_foreground, vars.blend_dark_background_hover),\n  color_dark_active_background:    rgba(vars.color_dark_foreground, vars.blend_dark_background_active),\n  color_dark_disabled_background:  \"transparent\",\n  color_dark_disabled_text:        rgba(vars.color_dark_foreground, vars.blend_dark_text_disabled),\n\n  // border colors may be set in theme; disabled by default\n  // color_dark_border:               \"transparent\", // only specify this variable to get all 4 states\n  // color_dark_hover_border:         \"transparent\",\n  // color_dark_active_border:        \"transparent\",\n  // color_dark_disabled_border:      \"transparent\"\n};"],"names":["baseClass","getElement","vnode","attrs","element","getInitialState","createStream","dom","click","focus","inactive","mouseover","merge","onMount","k","keys","state","isClient","handleInactivate","setTimeout","inactivate","onClickHandler","events","onclick","onFocus","onBlur","onMouseOver","onMouseOut","onClick","e","undefined","addEventListener","removeEventListeners","removeEventListener","onUnMount","createProps","disabled","onKeyDownHandler","onkeydown","_extends","filterSupportedAttributes","add","formaction","remove","parentClassName","classes","component","selected","borders","focused","tone","className","class","join","tabindex","key","url","createContent","h","renderer","Ripple","noink","ink","children","label","content","_typeof","noWash","wash","style","shadowComponent","ripple","rgba","colorStr","touch_height","vars","unit_touch_height","grid_unit","unit_item_border_radius","grid_unit_component","animation_duration","color_light_foreground","blend_light_text_primary","blend_light_background_hover","blend_light_background_active","blend_light_text_disabled","color_dark_foreground","blend_dark_text_primary","blend_dark_background_hover","blend_dark_background_active","blend_dark_text_disabled"],"mappings":"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"}