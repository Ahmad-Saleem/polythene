{"version":3,"file":"polythene-utilities.js","sources":["../src/easing.js","../src/scroll-to.js","../src/timer.js","../src/layout-styles/flex-classes.js","../src/layout-styles/common-classes.js","../src/layout-styles/index.js","../src/fastclick.js"],"sourcesContent":["/*\nhttps://gist.github.com/gre/1650294\nEasing Functions - inspired from http://gizma.com/easing/\nOnly considering the t value for the range [0, 1] => [0, 1]\n*/\n\nexport const easing = {\n  // no easing, no acceleration\n  linear: t => t,\n  // accelerating from zero velocity\n  easeInQuad: t => t * t,\n  // decelerating to zero velocity\n  easeOutQuad: t => t * (2 - t),\n  // acceleration until halfway, then deceleration\n  easeInOutQuad: t => t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t,\n  // accelerating from zero velocity\n  easeInCubic: t => t * t * t,\n  // decelerating to zero velocity\n  easeOutCubic: t => (--t) * t * t + 1,\n  // acceleration until halfway, then deceleration\n  easeInOutCubic: t => t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1,\n  // accelerating from zero velocity\n  easeInQuart: t => t * t * t * t,\n  // decelerating to zero velocity\n  easeOutQuart: t => 1 - (--t) * t * t * t,\n  // acceleration until halfway, then deceleration\n  easeInOutQuart: t => t < .5 ? 8 * t * t * t * t : 1 - 8* (--t) * t * t * t,\n  // accelerating from zero velocity\n  easeInQuint: t => t * t * t * t * t,\n  // decelerating to zero velocity\n  easeOutQuint: t => 1 + (--t) * t * t * t * t,\n  // acceleration until halfway, then deceleration\n  easeInOutQuint: t => t < .5 ? 16 * t * t * t * t * t : 1 + 16 * (--t) * t * t * t * t\n};\n","/*\n Animated scroll to a position.\n Derived from https://github.com/madebysource/animated-scrollto\n Adapted to Mithril and rewritten to es6.\n*/\n\nimport { easing } from \"./easing\";\n\nexport const scrollTo = opts => {\n  const element = opts.element;\n  const which = (opts.direction === \"horizontal\") ? \"scrollLeft\" : \"scrollTop\";\n  const to = opts.to;\n  const duration = opts.duration * 1000;\n  const easingFn = opts.easing || easing.easeInOutCubic;\n  const start = element[which];\n  const change = to - start;\n  const animationStart = new Date().getTime();\n  let animating = true;\n  return new Promise(resolve => {\n    const animateScroll = () => {\n      if (!animating) {\n        return;\n      }\n      requestAnimFrame(animateScroll);\n      const now = new Date().getTime();\n      const percentage = ((now - animationStart) / duration);\n      const val = start + change * easingFn(percentage);\n      element[which] = val;\n      if (percentage >= 1) {\n        element[which] = to;\n        animating = false;\n        resolve();\n      }\n    };\n    requestAnimFrame(animateScroll);\n  });\n};\n\nconst requestAnimFrame = (() =>\n  window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || (callback =>\n    window.setTimeout(callback, 1000 / 60)\n  )\n)();\n","\nexport const Timer = () => {\n  let timerId, startTime, remaining, cb;\n\n  const stop = () =>\n    window.clearTimeout(timerId);\n\n  const pause = () => (\n    stop(),\n    remaining -= new Date() - startTime\n  );\n\n  const startTimer = () => (\n    stop(),\n    startTime = new Date(),\n    timerId = window.setTimeout(cb, remaining)\n  );\n\n  const start = (callback, delaySeconds) => (\n    cb = callback,\n    remaining = delaySeconds * 1000,\n    startTimer()\n  );\n\n  const resume = () =>\n    startTimer();\n\n  return {\n    start,\n    pause,\n    resume,\n    stop\n  };\n};\n","import { flex } from \"polythene-core-css\";\n\nexport default [{\n  \".layout, .layout.horizontal\": flex.layout,\n  \".layout.horizontal.inline, .layout.vertical.inline\": flex.layoutInline,\n  \".layout.horizontal\": flex.layoutHorizontal,\n  \".layout.horizontal.reverse\": flex.layoutHorizontalReverse,\n  \".layout.vertical\": flex.layoutVertical,\n  \".layout.vertical.reverse\": flex.layoutVerticalReverse,\n  \".layout.wrap\": flex.layoutWrap,\n  \".layout.wrap.reverse\": flex.layoutWrapReverse,\n  \".flex\": flex.flex(1),\n  \".span.flex\": { \"display\": \"block\" }, // for IE 10\n  \".flex.auto-vertical\": flex.flexAutoVertical,\n  \".flex.auto\": flex.flexAuto,\n  \".flex.none\": flex.flexIndex(\"none\"),\n  \".flex.one\": flex.flexIndex(1),\n  \".flex.two\": flex.flexIndex(2),\n  \".flex.three\": flex.flexIndex(3),\n  \".flex.four\": flex.flexIndex(4),\n  \".flex.five\": flex.flexIndex(5),\n  \".flex.six\": flex.flexIndex(6),\n  \".flex.seven\": flex.flexIndex(7),\n  \".flex.eight\": flex.flexIndex(8),\n  \".flex.nine\": flex.flexIndex(9),\n  \".flex.ten\": flex.flexIndex(10),\n  \".flex.eleven\": flex.flexIndex(11),\n  \".flex.twelve\": flex.flexIndex(12),\n\n  // alignment in cross axis\n  \".layout.start\": flex.layoutStart,\n  \".layout.center, .layout.center-center\": flex.layoutCenter,\n  \".layout.end\": flex.layoutEnd,\n\n  // alignment in main axis\n  \".layout.start-justified\": flex.layoutStartJustified,\n  \".layout.center-justified, .layout.center-center\": flex.layoutCenterJustified,\n  \".layout.end-justified\": flex.layoutEndJustified,\n  \".layout.around-justified\": flex.layoutAroundJustified,\n  \".layout.justified\": flex.layoutJustified,\n\n  // self alignment\n  \".self-start\": flex.selfStart,\n  \".self-center\": flex.selfCenter,\n  \".self-end\": flex.selfEnd,\n  \".self-stretch\": flex.selfStretch\n}];\n\n","export default [{\n  \".pe-block\": {\n    display: \"block\"\n  },\n\n  \".pe-inline-block\": {\n    display: \"inline-block\"\n  },\n\n  // ie support for hidden\n  \".pe-hidden\": {\n    display: \"none !important\"\n  },\n\n  \".pe-relative\": {\n    position: \"relative\"\n  },\n\n  \".pe-absolute\": {\n    position: \"absolute\"\n  },\n\n  \".pe-fit\": {\n    position: \"absolute\",\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  },\n  \n  \".pe-fullbleed\": {\n    margin: 0,\n    height: \"100vh\"\n  }\n}];\n","import { styler } from \"polythene-core-css\";\nimport flex from \"./flex-classes\";\nimport commonStyle from \"./common-classes\";\n\nexport const layoutStyles = Object.assign({}, flex, commonStyle);\n\nexport const addLayoutStyles = () => \n  styler.add(\"pe-layout\", flex, commonStyle);\n","import FastClick from \"fastclick\";\nimport { isTouch, subscribe } from \"polythene-core\";\n\nconst THROTTLE_DELAY = 100;\nconst REINIT_DELAY = THROTTLE_DELAY + 50;\nconst layer = document.body;\n\nlet fastClick;\nlet timeoutId;\nlet enabled;\n\nconst add = () => {\n  if (!enabled) {\n    fastClick = new FastClick(layer);\n    enabled = true;\n  }\n};\n\nconst remove = () => {\n  if (enabled) {\n    fastClick.destroy();\n    enabled = false;\n  }\n};\n\nconst handleScroll = () => {\n  remove();\n  if (timeoutId) {\n    window.clearTimeout(timeoutId);\n  }\n  timeoutId = window.setTimeout(add, REINIT_DELAY);\n};\n\nexport const addFastClick = () => {\n  if (isTouch) {\n    subscribe(\"scroll\", handleScroll, THROTTLE_DELAY);\n    add();\n  }\n};\n"],"names":["easing","t","scrollTo","element","opts","which","direction","to","duration","easingFn","easeInOutCubic","start","change","animationStart","Date","getTime","animating","Promise","animateScroll","percentage","val","requestAnimFrame","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","setTimeout","callback","Timer","timerId","startTime","remaining","cb","stop","clearTimeout","startTimer","delaySeconds","flex","layout","layoutInline","layoutHorizontal","layoutHorizontalReverse","layoutVertical","layoutVerticalReverse","layoutWrap","layoutWrapReverse","display","flexAutoVertical","flexAuto","flexIndex","layoutStart","layoutCenter","layoutEnd","layoutStartJustified","layoutCenterJustified","layoutEndJustified","layoutAroundJustified","layoutJustified","selfStart","selfCenter","selfEnd","selfStretch","layoutStyles","commonStyle","addLayoutStyles","styler","add","layer","document","body","fastClick","timeoutId","enabled","FastClick","remove","destroy","handleScroll","THROTTLE_DELAY","addFastClick","isTouch"],"mappings":"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"}