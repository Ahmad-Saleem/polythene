{"version":3,"file":null,"sources":["../src/theme/vars.js","../src/theme/color.js","../src/theme/index.js","../src/raised-button.js"],"sourcesContent":["import { vars } from \"polythene-theme\";\n\nconst rgba = vars.rgba;\n\nexport default {\n  color_light_background:          \"#E0E0E0\",\n  color_light_text:                rgba(vars.color_light_foreground, vars.blend_light_text_primary),\n  color_light_hover_background:    \"transparent\",\n  color_light_focus_background:    rgba(vars.color_light_foreground, vars.blend_light_background_hover),\n  color_light_active_background:   rgba(vars.color_light_foreground, vars.blend_light_background_hover), // same as hover\n  color_light_disabled_background: rgba(vars.color_light_foreground, vars.blend_light_background_disabled),\n  color_light_disabled_text:       rgba(vars.color_light_foreground, vars.blend_light_text_disabled),\n\n  color_dark_background:           rgba(vars.color_primary),\n  color_dark_text:                 rgba(vars.color_dark_foreground, vars.blend_dark_text_primary),\n  color_dark_hover_background:     vars.color_primary_active,\n  color_dark_focus_background:     vars.color_primary_active,\n  color_dark_active_background:    vars.color_primary_dark,\n  color_dark_disabled_background:  rgba(vars.color_dark_foreground, vars.blend_dark_background_disabled),\n  color_dark_disabled_text:        rgba(vars.color_dark_foreground, vars.blend_dark_text_disabled)\n};","import { mixin } from \"polythene-css\";\n\nconst style = (componentVars, tint, scope = \"\") => {\n  const normalBorder = componentVars[\"color_\" + tint + \"_border\"] || \"transparent\";\n  const activeBorder = componentVars[\"color_\" + tint + \"_active_border\"] || normalBorder;\n  const disabledBorder = componentVars[\"color_\" + tint + \"_disabled_border\"] || normalBorder;\n  return [{\n    [scope + \".pe-button\"]: {\n      \"&, &:link, &:visited\": {\n        color: componentVars[\"color_\" + tint + \"_text\"]\n      },\n\n      \" .pe-button__content\": {\n        \"background-color\": componentVars[\"color_\" + tint + \"_background\"],\n        \"border-color\": normalBorder\n      },\n\n      \"&.pe-button--disabled\": {\n        color: componentVars[\"color_\" + tint + \"_disabled_text\"],\n\n        \" .pe-button__content\": {\n          \"background-color\": componentVars[\"color_\" + tint + \"_disabled_background\"],\n          \"border-color\": disabledBorder\n        }\n      },\n\n      \"&.pe-button--selected\": {\n        \" .pe-button__content\": {\n          \"background-color\": componentVars[\"color_\" + tint + \"_active_background\"],\n          \"border-color\": activeBorder\n        },\n        \" .pe-button__focus\": {\n          opacity: 1,\n          \"background-color\": componentVars[\"color_\" + tint + \"_focus_background\"]\n        }\n      },\n\n      \"&.pe-button--focus\": {\n        \" .pe-button__focus\": {\n          opacity: 1,\n          \"background-color\": componentVars[\"color_\" + tint + \"_focus_background\"]\n        }\n      }\n    }\n  }];\n};\n\nconst noTouch = (componentVars, tint, type, scope = \"\") => {\n  const normalBorder = componentVars[\"color_\" + tint + \"_border\"];\n  const hoverBorder = componentVars[\"color_\" + tint + \"_border\"] || normalBorder;\n  return [{\n    [scope + \".pe-button:hover\"]: {\n      \"&:not(.pe-button--selected):not(.pe-button--inactive) .pe-button__wash\": {\n        \"background-color\": componentVars[\"color_\" + tint + \"_hover_background\"],\n        \"border-color\": hoverBorder\n      }\n    }\n  }];\n};\n\nconst createStyles = componentVars => [\n  style(componentVars, \"light\", \".pe-button--raised\"),\n  {\n    \"html.pe-no-touch\": [\n      noTouch(componentVars, \"light\", \" .pe-button--raised\")\n    ]\n  }, {\n    \".pe-dark-theme\": [\n      style(componentVars, \"dark\", \" .pe-button--raised\")\n    ]\n  }, {\n    \"html.pe-no-touch .pe-dark-theme\": [\n      noTouch(componentVars, \"dark\", \" .pe-button--raised\")\n    ]\n  }\n];\n\nexport default componentVars => mixin.createStyles(componentVars, createStyles);\n\n","import { styler } from \"polythene-css\";\nimport { styles } from \"polythene-theme\";\nimport vars from \"./vars\";\n// No layout\nimport color from \"./color\";\n\nconst key = \"raised-button\";\nconst className = \"pe-button--raised\";\n\nconst styleComponent = (className, styles) =>\n  styler.styleComponent(className, styles, key, vars, color);\n\nexport const customTheme = (className, vars) =>\n  // Inject additional styles as use className as key\n  styleComponent(className, styler.addComponentStyle(\n    className, styles, key, vars\n  ));\n\nstyleComponent(className, styles);","import m from \"mithril\";\nimport { button } from \"polythene-button\";\nimport { shadow } from \"polythene-shadow\";\nimport { isTouch, touchStartEvent, touchEndEvent, subscribe } from \"polythene-core\";\nimport { customTheme } from \"./theme\";\n\nconst classes = {\n  component: \"pe-button pe-button--text pe-button--raised\"\n};\n\nconst MAX_Z = 5;\n\nlet tapStart,\n  tapEndAll = () => {},\n  downButtons = [];\n\nsubscribe(touchEndEvent, () => tapEndAll());\n\nconst animateZ = (state, attrs, name) => {\n  const zBase = state.zBase;\n  const increase = attrs.increase || 1;\n  let z = state.z;\n  if (name === \"down\" && zBase !== 5) {\n    z = Math.min(z + increase, MAX_Z);\n  } else if (name === \"up\") {\n    z = Math.max(z - increase, zBase);\n  }\n  if (z !== state.z) {\n    state.z = z;\n    m.redraw(); // show shadow animation\n  }\n};\n\nconst inactivate = (state, attrs) => {\n  state.inactive = true;\n  m.redraw();\n  setTimeout(() => {\n    state.inactive = false;\n    m.redraw();\n  }, attrs.inactivate * 1000);\n};\n\nconst initTapEvents = (el, state, attrs) => {\n  const tapHandler = (state, attrs, name) => {\n    if (name === \"down\") {\n      downButtons.push({\n        state,\n        attrs\n      });\n    } else\n    if (name === \"up\") {\n      if (attrs.inactivate && !state.inactive) {\n        inactivate(state, attrs);\n      }\n    }\n    // no z animation on touch\n    const animateOnTap = attrs.animateOnTap !== false ? true : false;\n    if (animateOnTap && !isTouch) {\n      animateZ(state, attrs, name);\n    }\n  };\n  tapStart = () => tapHandler(state, attrs, \"down\");\n  tapEndAll = () => {\n    downButtons.map((btn) => {\n      tapHandler(btn.state, btn.attrs, \"up\");\n    });\n    downButtons = [];\n  };\n  el.addEventListener(touchStartEvent, tapStart);\n};\n\nconst clearTapEvents = el => {\n  el.removeEventListener(touchStartEvent, tapStart);\n};\n\nconst view = vnode => {\n  const attrs = vnode.attrs;\n  const state = vnode.state;\n  const children = vnode.children.length && vnode.children || attrs.children;\n  return m(button, Object.assign(\n    {},\n    {\n      parentClass: [\n        attrs.parentClass || classes.component\n      ].join(\" \"),\n      animateOnTap: false,\n      shadowComponent: m(shadow, {z: state.z, animated: true}),\n      children\n    },\n    attrs\n  ));\n};\n\nexport const raisedButton = {\n  theme: customTheme, // accepts (className, vars)\n  oninit: vnode => {\n    const z = (vnode.attrs.z !== undefined) ? vnode.attrs.z : 1;\n    vnode.state = {\n      el: undefined,\n      zBase: z,\n      z: z,\n      tapEventsInited: false\n    };\n  },\n  oncreate: vnode => {\n    if (!vnode.attrs.disabled && !vnode.state.inactive && !vnode.state.tapEventsInited) {\n      vnode.state.el = vnode.dom;\n      initTapEvents(vnode.dom, vnode.state, vnode.attrs);\n      vnode.state.tapEventsInited = true;\n    }\n  },\n  onremove: vnode => {\n    if (vnode.state.tapEventsInited) {\n      clearTapEvents(vnode.dom);\n    }\n  },\n  view\n};\n"],"names":["rgba","vars","color_light_foreground","blend_light_text_primary","blend_light_background_hover","blend_light_background_disabled","blend_light_text_disabled","color_primary","color_dark_foreground","blend_dark_text_primary","color_primary_active","color_primary_dark","blend_dark_background_disabled","blend_dark_text_disabled","style","componentVars","tint","scope","normalBorder","activeBorder","disabledBorder","noTouch","type","hoverBorder","createStyles","mixin","key","className","styleComponent","styles","styler","color","customTheme","addComponentStyle","classes","MAX_Z","tapStart","tapEndAll","downButtons","subscribe","touchEndEvent","animateZ","state","attrs","name","zBase","increase","z","Math","min","max","redraw","inactivate","inactive","initTapEvents","el","tapHandler","push","animateOnTap","isTouch","map","btn","addEventListener","touchStartEvent","clearTapEvents","removeEventListener","view","vnode","children","length","m","button","babelHelpers.extends","parentClass","component","join","shadow","animated","raisedButton","undefined","disabled","tapEventsInited","dom"],"mappings":"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"}