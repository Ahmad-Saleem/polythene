{"version":3,"file":"polythene-core.js","sources":["../src/variables.js","../src/pointer.js","../src/events.js","../src/animation-event.js","../src/multiple.js","../src/attrs.js","../src/multiple-hoc.js","../src/transition.js","../src/prop.js"],"sourcesContent":["// Theme variables\n// How to change these variables for your app - see the README.\n\nconst hex = hex => {\n  const bigint = parseInt(hex.substring(1), 16);\n  const r = (bigint >> 16) & 255;\n  const g = (bigint >> 8) & 255;\n  const b = bigint & 255;\n  return r + \",\" + g + \",\" + b;\n};\n\nconst rgba = (colorStr, opacity = 1) => (\"rgba(\" + colorStr + \",\" + opacity + \")\");\n\n//const isTablet = window.innerWidth >= 600;\nconst isDesktop = window.innerWidth >= 1024;\n\nconst grid_unit = 4;\nconst grid_unit_component = 8;\n\nconst animation_curve_slow_in_fast_out = \"cubic-bezier(.4, 0, .2, 1)\";\nconst animation_curve_slow_in_linear_out = \"cubic-bezier(0, 0, .2, 1)\";\nconst animation_curve_linear_in_fast_out = \"cubic-bezier(.4, 0, 1, 1)\";\n\nexport default {\n  // util functions\n  rgba,\n  hex,\n\n  grid_unit,\n  grid_unit_component,\n  grid_unit_menu: 56,\n  grid_unit_icon_button: 6 * grid_unit_component, // 48\n\n  // common sizes\n  unit_block_border_radius: 2,\n  unit_item_border_radius: 2,\n  unit_indent: 72,\n  unit_side_padding: isDesktop ? 24 : 16,\n\n  // buttons\n  unit_touch_height: 48,\n  unit_icon_size_small: 2 * grid_unit_component, // 16\n  unit_icon_size: 3 * grid_unit_component, // 24\n  unit_icon_size_medium: 4 * grid_unit_component, // 32\n  unit_icon_size_large: 5 * grid_unit_component, // 40\n\n  // screen dimensions\n  unit_screen_size_extra_large: 1280,\n  unit_screen_size_large: 960,\n  unit_screen_size_medium: 480,\n  unit_screen_size_small: 320,\n\n  // transitions\n  animation_duration: \".18s\",\n  animation_curve_slow_in_fast_out,\n  animation_curve_slow_in_linear_out,\n  animation_curve_linear_in_fast_out,\n  animation_curve_default: \"ease-out\",\n\n  // font\n  font_weight_light: 300,\n  font_weight_normal: 400,\n  font_weight_medium: 500,\n  font_weight_bold: 700,\n  font_size_title: 20,\n  line_height: 1.3,\n\n  // base colors\n  color_primary: \"33, 150, 243\", // blue 500\n  color_primary_active: \"30, 136, 229\", // blue 600\n  color_primary_dark: \"25, 118, 210\", // blue 700\n  color_primary_faded: \"100, 181, 249\", // blue 300\n  color_primary_foreground: \"255, 255, 255\",\n\n  color_light_background: \"255, 255, 255\",\n  color_light_foreground: \"0, 0, 0\",\n  color_dark_background: \"34, 34, 34\",\n  color_dark_foreground: \"255, 255, 255\",\n\n  // blends\n  blend_light_text_primary: .87,\n  blend_light_text_regular: .73,\n  blend_light_text_secondary: .54,\n  blend_light_text_tertiary: .40,\n  blend_light_text_disabled: .26,\n  blend_light_border_light: .11,\n  blend_light_background_active: .14,\n  blend_light_background_hover: .06,\n  blend_light_background_hover_medium: .12, // for the lighter tinted icon buttons\n  blend_light_background_disabled: .09,\n  blend_light_overlay_background: .3,\n\n  blend_dark_text_primary: 1,\n  blend_dark_text_regular: .87,\n  blend_dark_text_secondary: .70,\n  blend_dark_text_tertiary: .40,\n  blend_dark_text_disabled: .26,\n  blend_dark_border_light: .10,\n  blend_dark_background_active: .14,\n  blend_dark_background_hover: .08,\n  blend_dark_background_hoverMedium: .12, // for the lighter tinted icon buttons\n  blend_dark_background_disabled: .12,\n  blend_dark_overlay_background: .3,\n\n  // breakpoints\n  breakpoint_small_handset_portrait: 0,\n  breakpoint_medium_handset_portrait: 360,\n  breakpoint_large_handset_portrait: 400,\n  breakpoint_small_tablet_portrait: 600,\n  breakpoint_large_tablet_portrait: 720,\n  // landscape\n  breakpoint_small_handset_landscape: 480,\n  breakpoint_medium_handset_landscape: 600,\n  breakpoint_large_handset_landscape: 720,\n\n  // environment\n  env_tablet: window.innerWidth >= 600,\n  env_desktop: window.innerWidth >= 1024,\n\n  // z-index\n  z_menu: 1,\n  z_header_container: 2000,\n  z_fixed_header_container: 3000,\n  z_notification: 4000,\n  z_dialog: 5000\n};","\nexport const isTouch = \"ontouchstart\" in window || navigator.MaxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;\n\nexport const touchStartEvent = isTouch ? \"click\" : \"mousedown\";\n\nexport const touchEndEvent = isTouch ? \"click\" : \"mouseup\";\n\nexport const moveEvent = window.PointerEvent\n  ? \"pointermove\"\n  : (\"ontouchmove\" in window) || (window.DocumentTouch && document instanceof window.DocumentTouch)\n    ? \"touchmove\"\n    : \"mousemove\";\n\nexport const endEvent = window.PointerEvent\n  ? \"pointerup\"\n  : (\"ontouchend\" in window) || (window.DocumentTouch && document instanceof window.DocumentTouch)\n    ? \"touchend\"\n    : \"mouseup\";\n\n\ndocument.querySelector(\"html\").classList.add(isTouch ? \"pe-touch\" : \"pe-no-touch\");\n\n","import { touchEndEvent } from \"./pointer\";\n\nconst listeners = {};\n\n// https://gist.github.com/Eartz/fe651f2fadcc11444549\nexport const throttle = (func, s = 0.05, context = window) => {\n  let wait = false;\n  return (...args) => {\n    const later = () => func.apply(context, args);\n    if (!wait) {\n      later();\n      wait = true;\n      setTimeout(() => wait = false, s);\n    }\n  };\n};\n\nexport const subscribe = (eventName, listener, delay) => {\n  listeners[eventName] = listeners[eventName] || [];\n  listeners[eventName].push(delay ? throttle(listener, delay) : listener);\n};\n\nexport const unsubscribe = (eventName, listener) => {\n  if (!listeners[eventName]) {\n    return;\n  }\n  const index = listeners[eventName].indexOf(listener);\n  if (index > -1) {\n    listeners[eventName].splice(index, 1);\n  }\n};\n\nexport const emit = (eventName, event) => {\n  if (!listeners[eventName]) {\n    return;\n  }\n  listeners[eventName].forEach(listener => listener(event));\n};\n\nwindow.addEventListener(\"resize\",      e => emit(\"resize\", e));\nwindow.addEventListener(\"scroll\",      e => emit(\"scroll\", e));\nwindow.addEventListener(\"keydown\",     e => emit(\"keydown\", e));\nwindow.addEventListener(touchEndEvent, e => emit(touchEndEvent, e));\n","\nconst evts = {\n  \"animation\": \"animationend\",\n  \"OAnimation\": \"oAnimationEnd\",\n  \"MozAnimation\": \"animationend\",\n  \"WebkitAnimation\": \"webkitAnimationEnd\"\n};\n\nconst findAnimationEndEvent = () => {\n  const el = document.createElement(\"fakeelement\");\n  for (let a in evts) {\n    if (el.style[a] !== undefined) {\n      return evts[a];\n    }\n  }\n};\n\nexport const animationEndEvent = findAnimationEndEvent();\n","/*\nHelper module to manage multiple items of the same component type.\n*/\nimport m from \"mithril\";\n\n/*\nmOpts:\n- instance\n- defaultId\n- element\n- placeholder\n- bodyShowClass\n*/\nexport const multiple = mOpts => {\n\n  const items = [];\n\n  const itemIndex = id => {\n    const item = findItem(id);\n    return items.indexOf(item);\n  };\n\n  const removeItem = id => {\n    const index = itemIndex(id);\n    if (index !== -1) {\n      items.splice(index, 1);\n    }\n  };\n\n  const replaceItem = (id, newItem) => {\n    const index = itemIndex(id);\n    if (index !== -1) {\n      items[index] = newItem;\n    }\n  };\n\n  const findItem = id => {\n    // traditional for loop for IE10\n    for (let i = 0; i < items.length; i++) {\n      if (items[i].instanceId === id) {\n        return items[i];\n      }\n    }\n  };\n\n  const isCancelled = id => {\n    const item = findItem(id);\n    return item !== undefined\n      ? item.cancelled\n      : true;\n  };\n\n  const next = () => {\n    if (items.length) {\n      items[0].show = true;\n      m.redraw();\n    }\n  };\n\n  const remove = (instanceId = mOpts.defaultId) => {\n    if (mOpts.queue) {\n      items.shift();\n      // add time to remove the previous instance before drawing the next one\n      setTimeout(next, 0);\n    } else {\n      removeItem(instanceId);\n    }\n  };\n\n  const removeAll = () => {\n    // traditional for loop for IE10\n    for (let i = 0; i < items.length; i++) {\n      items[i].cancelled = true;\n    }\n    items.length = 0;\n    setTimeout(m.redraw);\n  };\n\n  const setPauseState = (pause, instanceId) => {\n    const item = findItem(instanceId);\n    if (item) {\n      item.pause = pause;\n      item.unpause = !pause;\n    }\n  };\n\n  const makeItem = (itemOpts, instanceId, spawn) => {\n    let resolveShow;\n    const didShow = () => {\n      if (isCancelled(instanceId)) {\n        return;\n      }\n      const opts = (typeof itemOpts === \"function\")\n        ? itemOpts()\n        : itemOpts;\n      if (opts.didShow) {\n        opts.didShow(instanceId);\n      }\n      return resolveShow(instanceId);\n    };\n    const showPromise = new Promise(resolve => \n      resolveShow = resolve\n    );\n\n    let resolveHide;\n    const didHide = () => {\n      if (isCancelled(instanceId)) {\n        return;\n      }\n      const opts = (typeof itemOpts === \"function\")\n        ? itemOpts()\n        : itemOpts;\n      if (opts.didHide) {\n        opts.didHide(instanceId);\n      }\n      if (mOpts.queue) {\n        remove(instanceId);\n      }\n      return resolveHide(instanceId);\n    };\n\n    const hidePromise = new Promise(resolve => resolveHide = resolve);\n\n    return Object.assign(\n      {},\n      mOpts,\n      {\n        instanceId,\n        spawn,\n        opts: itemOpts,\n        show: mOpts.queue ? false : true,\n        cancelled: false,\n        showPromise,\n        hidePromise,\n        didShow,\n        didHide\n      }\n    );\n  };\n\n  const show = (opts = {}, spawnOpts = {}) => {\n    const instanceId = spawnOpts.id || mOpts.defaultId;\n    const spawn = spawnOpts.spawn || mOpts.defaultId;\n    let item;\n    if (mOpts.queue) {\n      item = makeItem(opts, instanceId, spawn);\n      items.push(item);\n      if (items.length === 1) {\n        next();\n      }\n    } else {\n      const storedItem = findItem(instanceId);\n      item = makeItem(opts, instanceId, spawn);\n      if (!storedItem) {\n        items.push(item);\n      } else {\n        replaceItem(instanceId, item);\n      }\n    }\n    return item.showPromise;\n  };\n\n  const hide = (spawnOpts = {}) => {\n    const instanceId = spawnOpts.id || mOpts.defaultId;\n    const item = mOpts.queue && items.length\n      ? items[0]\n      : findItem(instanceId);\n    if (item) {\n      item.hide = true;\n      return item.hidePromise;\n    }\n    return Promise.resolve(instanceId);\n  };\n\n  const clear = () => removeAll();\n\n  const view = ({ attrs }) => {\n    const spawn = attrs.spawn || mOpts.defaultId;\n    const candidates = items.filter(item => \n      item.show && item.spawn === spawn\n    );\n    document.body.classList[candidates.length ? \"add\" : \"remove\"](mOpts.bodyShowClass);\n    return !candidates.length\n      ? m(mOpts.placeholder) // placeholder because we cannot return null\n      : m(mOpts.element, {\n        class: attrs.position === \"container\"\n          ? \"pe-multiple--container\"\n          : \"pe-multiple--screen\"\n      }, candidates.map(itemData =>\n          m(mOpts.instance, Object.assign(\n            {},\n            itemData,\n            {\n              transitions: mOpts.transitions,\n              key: itemData.key || itemData.instanceId\n            }\n          ))\n        )\n      );\n  };\n\n  return {\n    count: () => items.length,\n    clear,\n    show,\n    hide,\n    remove,\n    pause: (instanceId = mOpts.defaultId) => setPauseState(true, instanceId),\n    unpause: (instanceId = mOpts.defaultId) => setPauseState(false, instanceId),\n    view,\n    theme: mOpts.instance.theme\n  };\n};\n","\nconst r = (acc, p) => (acc[p] = 1, acc);\n\n/* \nSeparately handled props:\n- class\n- element\n*/\n\nconst defaultAttrs = [\n  // Universal\n  \"key\",\n  \"style\",\n  \"href\",\n  \"id\",\n  \"tabindex\",\n\n  // Mithril\n  \"oninit\",\n  \"oncreate\",\n  \"onupdate\",\n  \"onbeforeremove\",\n  \"onremove\",\n  \"onbeforeupdate\",\n];\n\nexport const filterSupportedAttributes = (attrs, { add: addAttrs = [], remove: removeAttrs = []} = {} ) => {\n  const removeLookup = removeAttrs.reduce(r, {});\n  const supported = defaultAttrs.concat(addAttrs).filter(item => !removeLookup[item]).reduce(r, {});\n  return Object.keys(attrs).reduce((acc, key) => (\n    supported[key]\n      ? acc[key] = attrs[key]\n      : null,\n    acc\n  ), {});\n};\n\nexport const unpackAttrs = attrs =>\n  typeof attrs === \"function\"\n    ? attrs()\n    : attrs;\n","/*\nHelper module to manage multiple items of the same component type.\n\nmOptions:\n- instance\n- defaultId\n- holder\n- placeholder\n- bodyShowClass\n*/\n\nimport { unpackAttrs } from \"./attrs\";\nimport { emit } from \"./events\";\n\nexport const multipleHOC = ({ options: mOptions, renderer }) => {\n\n  const items = []; // This is shared between all instances of a type (Dialog, Notification, ...)\n  let current;\n  \n  const getInitialState = (vnode, createStream) => {\n    current = createStream();\n    return {\n      current,\n      redrawOnUpdate: createStream.merge([current])\n    };\n  };\n\n  /*\n  @param e: { id, eventName }\n  */\n  const onChange = e => {\n    current(e.id);\n    emit(mOptions.name, e);\n  };\n\n  const itemIndex = id => {\n    const item = findItem(id);\n    return items.indexOf(item);\n  };\n\n  const removeItem = id => {\n    const index = itemIndex(id);\n    if (index !== -1) {\n      items.splice(index, 1);\n    }\n  };\n\n  const replaceItem = (id, newItem) => {\n    const index = itemIndex(id);\n    if (index !== -1) {\n      items[index] = newItem;\n    }\n  };\n\n  const findItem = id => {\n    // traditional for loop for IE10\n    for (let i = 0; i < items.length; i++) {\n      if (items[i].instanceId === id) {\n        return items[i];\n      }\n    }\n  };\n\n  const next = () => {\n    if (items.length) {\n      items[0].show = true;\n    }\n    onChange({ id: items.length ? items[0].instanceId : null, name: \"next\" });\n  };\n\n  const remove = (instanceId = mOptions.defaultId) => {\n    if (mOptions.queue) {\n      items.shift();\n      // add time to remove the previous instance before drawing the next one\n      //setTimeout(next, 0);\n      next();\n    } else {\n      removeItem(instanceId);\n    }\n  };\n\n  const removeAll = () => {\n    // traditional for loop for IE10\n    for (let i = 0; i < items.length; i++) {\n      items[i].cancelled = true;\n    }\n    items.length = 0;\n    onChange({ id: null, name: \"removeAll\" });\n  };\n\n  const setPauseState = (pause, instanceId) => {\n    const item = findItem(instanceId);\n    if (item) {\n      item.pause = pause;\n      item.unpause = !pause;\n    }\n  };\n\n  const makeItem = (itemAttrs, instanceId, spawn) => {\n    let resolveShow;\n    let resolveHide;\n\n    const didShow = () => {\n      const attrs = unpackAttrs(itemAttrs);\n      if (attrs.didShow) {\n        attrs.didShow(instanceId);\n      }\n      onChange({ id: instanceId, name: \"didShow\" });\n      return resolveShow(instanceId);\n    };\n    const showPromise = new Promise(resolve => \n      resolveShow = resolve\n    );\n\n    const didHide = () => {\n      const attrs = unpackAttrs(itemAttrs);\n      if (attrs.didHide) {\n        attrs.didHide(instanceId);\n      }\n      onChange({ id: instanceId, name: \"didHide\" });\n      remove(instanceId);\n      return resolveHide(instanceId);\n    };\n\n    const hidePromise = new Promise(resolve => resolveHide = resolve);\n\n    return Object.assign(\n      {},\n      mOptions,\n      {\n        instanceId,\n        spawn,\n        attrs: itemAttrs,\n        show: mOptions.queue ? false : true,\n        cancelled: false,\n        showPromise,\n        hidePromise,\n        didShow,\n        didHide\n      }\n    );\n  };\n\n  const count = () => items.length;\n  const pause = (instanceId = mOptions.defaultId) => setPauseState(true, instanceId);\n  const unpause = (instanceId = mOptions.defaultId) => setPauseState(false, instanceId);\n\n  const show = (attrs = {}, spawnOpts = {}) => {\n    const instanceId = spawnOpts.id || mOptions.defaultId;\n    const spawn = spawnOpts.spawn || mOptions.defaultId;\n    const item = makeItem(attrs, instanceId, spawn);\n    onChange({ id: instanceId, name: \"show\" });\n    if (mOptions.queue) {\n      items.push(item);\n      if (items.length === 1) {\n        next();\n      }\n    } else {\n      const storedItem = findItem(instanceId);\n      if (!storedItem) {\n        items.push(item);\n      } else {\n        replaceItem(instanceId, item);\n      }\n    }\n    return item.showPromise;\n  };\n\n  const hide = (spawnOpts = {}) => {\n    const instanceId = spawnOpts.id || mOptions.defaultId;\n    const item = mOptions.queue && items.length\n      ? items[0]\n      : findItem(instanceId);\n    if (item) {\n      item.hide = true;\n    }\n    onChange({ id: instanceId, name: \"hide\" });\n    return item\n      ? item.hidePromise\n      : Promise.resolve(instanceId);\n  };\n\n  const clear = () => removeAll();\n\n  const view = ({ attrs }) => {\n    const spawn = attrs.spawn || mOptions.defaultId;\n    const candidates = items.filter(item => \n      item.show && item.spawn === spawn\n    );\n    if (mOptions.bodyShowClass) {\n      document.body.classList[candidates.length ? \"add\" : \"remove\"](mOptions.bodyShowClass);\n    }\n    return !candidates.length\n      ? renderer(mOptions.placeholder) // placeholder because we cannot return null\n      : renderer(mOptions.holder,\n        {\n          className: attrs.position === \"container\"\n            ? \"pe-multiple--container\"\n            : \"pe-multiple--screen\"\n        },\n        candidates.map(itemData => {\n          return renderer(mOptions.instance, Object.assign(\n            {},\n            {\n              key: itemData.key || itemData.instanceId,\n              transitions: mOptions.transitions,\n              holder: mOptions.holder,\n              show: itemData.show,\n              hide: itemData.hide,\n              pause: itemData.pause,\n              unpause: itemData.unpause,\n              multipleDidShow: itemData.didShow,\n              multipleDidHide: itemData.didHide\n            },\n            unpackAttrs(itemData.attrs)\n          ));\n        })\n      );\n  };\n\n  return {\n    clear,\n    count,\n    getInitialState,  \n    hide,\n    pause,\n    remove,\n    show,\n    unpause,\n    view,\n  };\n};\n","/*\nGeneric show/hide transition module\n*/\n\n// defaults\nconst SHOW_DURATION = .220; // default dialog timing\nconst HIDE_DURATION = .200; // default dialog timing\nconst SHOW_DELAY =    0;\nconst HIDE_DELAY =    0;\nconst TRANSITION =    \"both\";\n\n// See: transition\nexport const show = opts =>\n  transition(opts, \"show\");\n\nexport const hide = opts =>\n  transition(opts, \"hide\");\n\nconst getTiming = (opts, state, showAttr, hideAttr, defaultShowTiming, defaultHideTiming) => {\n  const transition = opts.transition || TRANSITION;\n  if (transition === \"none\") {\n    return 0;\n  } else if (transition === \"show\" && state === \"hide\") {\n    return 0;\n  } else if (transition === \"hide\" && state === \"show\") {\n    return 0;\n  } else {\n    // both\n    return state === \"show\"\n      ? opts[showAttr] !== undefined\n        ? opts[showAttr]\n        : defaultShowTiming\n      : opts[hideAttr] !== undefined\n        ? opts[hideAttr]\n        : defaultHideTiming;\n  }\n};\n\n/*\nopts:\n- transition\n- showDuration\n- hideDuration\n\n- state (show, hide)\n*/\nconst getDuration = (opts, state) => \n  getTiming(opts, state, \"showDuration\", \"hideDuration\", SHOW_DURATION, HIDE_DURATION);\n\n/*\nopts:\n- transition (show, hide, both)\n- showDelay\n- hideDelay\n\n- state (show, hide)\n*/\nconst getDelay = (opts, state) =>\n  getTiming(opts, state, \"showDelay\", \"hideDelay\", SHOW_DELAY, HIDE_DELAY);\n\n/*\nopts:\n- el\n- duration\n- delay\n- showClass\n- beforeShow\n- show\n- hide\n- afterHide\n- showDelay\n- hideDelay\n\n- state (show, hide)\n*/\nconst transition = (opts, state) => {\n  const el = opts.el;\n  if (!el) {\n    return Promise.resolve();\n  } else {\n    return new Promise(resolve => {\n      const transitionDuration = getDuration(opts, state) * 1000;\n      const delay = getDelay(opts, state) * 1000;\n      const style = el.style;\n\n      const resetTransition = () => {\n        style.transitionDuration = \"0ms\";\n        style.transitionDelay = \"0ms\";\n      };\n\n      const beforeTransition = opts.beforeShow && state === \"show\"\n        ? () => {\n          resetTransition();\n          opts.beforeShow();\n        }\n        : null;\n\n      const afterTransition = opts.afterHide && state === \"hide\"\n        ? () => {\n          resetTransition();\n          opts.afterHide();\n        }\n        : null;\n\n      const applyTransition = () => {\n        style.transitionDuration = transitionDuration + \"ms\";\n        style.transitionDelay = delay + \"ms\";\n        if (opts.showClass) {\n          el.classList[(state === \"show\") ? \"add\" : \"remove\"](opts.showClass);\n        }\n        if (opts.show && typeof opts.show === \"function\" && state === \"show\") {\n          opts.show();\n        }\n        if (opts.hide && typeof opts.hide === \"function\" && state === \"hide\") {\n          opts.hide();\n        }\n      };\n\n      const doTransition = () => {\n        applyTransition();\n        setTimeout(() => {\n          if (afterTransition) {\n            afterTransition();\n          }\n          resolve();\n        }, transitionDuration + delay);\n      };\n\n      const maybeDelayTransition = () => {\n        if (transitionDuration === 0) {\n          doTransition();\n        } else {\n          setTimeout(doTransition, 0);\n        }\n      };\n\n      if (beforeTransition) {\n        beforeTransition();\n        setTimeout(maybeDelayTransition, 0);\n      } else {\n        maybeDelayTransition();\n      }\n    });\n  }\n};\n\n","/*\nThe most simple prop function to emulate m.prop from Mithril 0.2.\n*/\nexport const prop = x => {\n  let p = x;\n  return args => {\n    if (args === undefined) {\n      return p;\n    } else {\n      p = args;\n    }\n  };\n};\n"],"names":["colorStr","bigint","parseInt","hex","substring","window","innerWidth","isTouch","navigator","MaxTouchPoints","msMaxTouchPoints","touchStartEvent","touchEndEvent","moveEvent","PointerEvent","DocumentTouch","document","endEvent","querySelector","classList","add","listeners","throttle","func","s","context","wait","args","apply","subscribe","eventName","listener","delay","push","unsubscribe","index","indexOf","splice","emit","event","forEach","addEventListener","e","evts","animationEndEvent","el","createElement","a","undefined","style","multiple","items","itemIndex","item","findItem","id","removeItem","replaceItem","newItem","i","length","instanceId","isCancelled","cancelled","next","show","redraw","remove","mOpts","defaultId","queue","shift","removeAll","m","setPauseState","pause","unpause","makeItem","itemOpts","spawn","resolveShow","didShow","opts","showPromise","Promise","resolve","resolveHide","didHide","hidePromise","_extends","spawnOpts","storedItem","hide","attrs","candidates","filter","body","bodyShowClass","element","position","map","instance","itemData","transitions","key","placeholder","theme","r","acc","p","defaultAttrs","filterSupportedAttributes","addAttrs","removeLookup","reduce","supported","concat","Object","keys","unpackAttrs","multipleHOC","mOptions","options","renderer","current","onChange","name","itemAttrs","vnode","createStream","merge","holder","transition","getTiming","state","showAttr","hideAttr","defaultShowTiming","defaultHideTiming","getDuration","getDelay","transitionDuration","resetTransition","transitionDelay","beforeTransition","beforeShow","afterTransition","afterHide","applyTransition","showClass","doTransition","maybeDelayTransition","prop","x"],"mappings":"uQAGA,aAQa,SAACA,SAA2B,QAAUA,EAAW,4DAA5B,GAA4C,SARlE,eACJC,GAASC,SAASC,EAAIC,UAAU,GAAI,WAC/BH,GAAU,GAAM,KAGhB,KAFAA,GAAU,EAAK,KAEL,KADF,IAATA,cASM,sBACU,iBAaV,yBACO,4BAGG,0BACD,cACZ,qBAtBGI,OAAOC,YAAc,KAuBN,GAAK,qBAGjB,wBACG,kBACN,yBACO,wBACD,gCAGQ,4BACN,4BACC,2BACD,uBAGJ,wCAlCmB,gEACE,+DACA,oDAoChB,6BAGN,uBACC,uBACA,qBACF,oBACD,eACJ,kBAGE,oCACO,kCACF,mCACC,yCACK,uCAEF,uCACA,gCACD,mCACA,yCAGG,6BACA,+BACE,8BACD,6BACA,6BACD,kCACK,iCACD,wCACO,oCACJ,mCACD,2BAEP,0BACA,8BACE,4BACD,4BACA,4BACD,gCACK,gCACD,sCACM,mCACH,kCACD,qCAGI,qCACC,sCACD,qCACD,qCACA,uCAEE,wCACC,uCACD,eAGxBD,OAAOC,YAAc,gBACpBD,OAAOC,YAAc,YAG1B,qBACY,6BACM,mBACV,aACN,KC3HCC,EAAU,gBAAkBF,SAAUG,UAAUC,eAAiB,GAAKD,UAAUE,iBAAmB,EAEnGC,EAAkBJ,EAAU,QAAU,YAEtCK,EAAgBL,EAAU,QAAU,UAEpCM,EAAYR,OAAOS,aAC5B,cACC,eAAiBT,SAAYA,OAAOU,eAAiBC,mBAAoBX,QAAOU,cAC/E,YACA,YAEOE,EAAWZ,OAAOS,aAC3B,YACC,cAAgBT,SAAYA,OAAOU,eAAiBC,mBAAoBX,QAAOU,cAC9E,WACA,SAGNC,UAASE,cAAc,QAAQC,UAAUC,IAAIb,EAAU,WAAa,cClBpE,IAAMc,MAGOC,EAAW,SAACC,MAAMC,0DAAI,IAAMC,yDAAUpB,OAC7CqB,GAAO,QACJ,uCAAIC,wCAEJD,MADS,WAAMH,EAAKK,MAAMH,EAASE,SAG/B,aACI,iBAAMD,IAAO,GAAOF,MAKxBK,EAAY,SAACC,EAAWC,EAAUC,KACnCF,GAAaT,EAAUS,SACvBA,GAAWG,KAAKD,EAAQV,EAASS,EAAUC,GAASD,IAGnDG,EAAc,SAACJ,EAAWC,MAChCV,EAAUS,OAGTK,GAAQd,EAAUS,GAAWM,QAAQL,EACvCI,IAAS,KACDL,GAAWO,OAAOF,EAAO,KAI1BG,EAAO,SAACR,EAAWS,GACzBlB,EAAUS,MAGLA,GAAWU,QAAQ,kBAAYT,GAASQ,KAGpDlC,QAAOoC,iBAAiB,SAAe,kBAAKH,GAAK,SAAUI,KAC3DrC,OAAOoC,iBAAiB,SAAe,kBAAKH,GAAK,SAAUI,KAC3DrC,OAAOoC,iBAAiB,UAAe,kBAAKH,GAAK,UAAWI,KAC5DrC,OAAOoC,iBAAiB7B,EAAe,kBAAK0B,GAAK1B,EAAe8B,ICzChE,IAAMC,cACS,0BACC,6BACE,+BACG,sBAYRC,EATiB,cACtBC,GAAK7B,SAAS8B,cAAc,mBAC7B,GAAIC,KAAKJ,UACQK,KAAhBH,EAAGI,MAAMF,SACJJ,GAAKI,0KCCLG,EAAW,eAEhBC,MAEAC,EAAY,eACVC,GAAOC,EAASC,SACfJ,GAAMf,QAAQiB,IAGjBG,EAAa,eACXrB,GAAQiB,EAAUG,IACT,IAAXpB,KACIE,OAAOF,EAAO,IAIlBsB,EAAc,SAACF,EAAIG,MACjBvB,GAAQiB,EAAUG,IACT,IAAXpB,MACIA,GAASuB,IAIbJ,EAAW,gBAEV,GAAIK,GAAI,EAAGA,EAAIR,EAAMS,OAAQD,OAC5BR,EAAMQ,GAAGE,aAAeN,QACnBJ,GAAMQ,IAKbG,EAAc,eACZT,GAAOC,EAASC,cACNP,KAATK,GACHA,EAAKU,WAILC,EAAO,WACPb,EAAMS,WACF,GAAGK,MAAO,IACdC,WAIAC,EAAS,cAACN,0DAAaO,EAAMC,SAC7BD,GAAME,SACFC,mBAEKP,EAAM,MAENH,IAITW,EAAY,eAEX,GAAIb,GAAI,EAAGA,EAAIR,EAAMS,OAAQD,MAC1BA,GAAGI,WAAY,IAEjBH,OAAS,aACJa,EAAEP,SAGTQ,EAAgB,SAACC,EAAOd,MACtBR,GAAOC,EAASO,EAClBR,OACGsB,MAAQA,IACRC,SAAWD,IAIdE,EAAW,SAACC,EAAUjB,EAAYkB,MAClCC,UACEC,EAAU,eACVnB,EAAYD,OAGVqB,GAA4B,kBAAbJ,GACjBA,IACAA,QACAI,GAAKD,WACFA,QAAQpB,GAERmB,EAAYnB,KAEfsB,EAAc,GAAIC,SAAQ,kBAC9BJ,GAAcK,IAGZC,SACEC,EAAU,eACVzB,EAAYD,OAGVqB,GAA4B,kBAAbJ,GACjBA,IACAA,QACAI,GAAKK,WACFA,QAAQ1B,GAEXO,EAAME,SACDT,GAEFyB,EAAYzB,KAGf2B,EAAc,GAAIJ,SAAQ,kBAAWE,GAAcD,UAElDI,MAELrB,6BAIQU,QACAV,EAAME,iBACD,kEAuER,iBAAMnB,GAAMS,cA5BP,iBAAMY,WAlCP,cAACU,6DAAWQ,4DACjB7B,EAAa6B,EAAUnC,IAAMa,EAAMC,UACnCU,EAAQW,EAAUX,OAASX,EAAMC,UACnChB,YACAe,EAAME,QACDO,EAASK,EAAMrB,EAAYkB,KAC5B9C,KAAKoB,GACU,IAAjBF,EAAMS,gBAGL,IACC+B,GAAarC,EAASO,KACrBgB,EAASK,EAAMrB,EAAYkB,GAC7BY,IAGS9B,EAAYR,KAFlBpB,KAAKoB,SAKRA,GAAK8B,kBAGD,cACLtB,+DAAuBN,IAAMa,EAAMC,UACnChB,EAAOe,EAAME,OAASnB,EAAMS,OAC9BT,EAAM,GACNG,EAASO,SACTR,MACGuC,MAAO,EACLvC,EAAKmC,aAEPJ,QAAQC,QAAQxB,mBAoChB,cAACA,0DAAaO,EAAMC,gBAAcK,IAAc,EAAMb,YACpD,cAACA,0DAAaO,EAAMC,gBAAcK,IAAc,EAAOb,SAhCrD,eAAGgC,KAAAA,MACRd,EAAQc,EAAMd,OAASX,EAAMC,UAC7ByB,EAAa3C,EAAM4C,OAAO,kBAC9B1C,GAAKY,MAAQZ,EAAK0B,QAAUA,oBAErBiB,KAAK7E,UAAU2E,EAAWlC,OAAS,MAAQ,UAAUQ,EAAM6B,eAC5DH,EAAWlC,OAEfa,EAAEL,EAAM8B,eACkB,cAAnBL,EAAMM,SACT,yBACA,uBACHL,EAAWM,IAAI,kBACd3B,GAAEL,EAAMiC,SAAUZ,KAEhBa,eAEelC,EAAMmC,gBACdD,EAASE,KAAOF,EAASzC,iBAXpCY,EAAEL,EAAMqC,oBA2BLrC,EAAMiC,SAASK,QCjNpBC,EAAI,SAACC,EAAKC,SAAOD,GAAIC,GAAK,EAAGD,GAQ7BE,GAEJ,MACA,QACA,OACA,KACA,WAGA,SACA,WACA,WACA,iBACA,WACA,kBAGWC,EAA4B,SAAClB,uEAASzE,IAAK4F,sBAAe7C,OAC/D8C,oBAA2BC,OAAOP,MAClCQ,EAAYL,EAAaM,OAAOJ,GAAUjB,OAAO,mBAASkB,EAAa5D,KAAO6D,OAAOP,YACpFU,QAAOC,KAAKzB,GAAOqB,OAAO,SAACN,EAAKJ,SACrCW,GAAUX,KACNI,EAAIJ,GAAOX,EAAMW,IAErBI,QAISW,EAAc,kBACR,kBAAV1B,GACHA,IACAA,uKC1BO2B,EAAc,eAAYC,KAATC,QAAmBC,IAAAA,SAEzCxE,KACFyE,SAaEC,EAAW,cACPnF,EAAEa,MACLkE,EAASK,KAAMpF,IAGhBU,EAAY,eACVC,GAAOC,EAASC,SACfJ,GAAMf,QAAQiB,IAGjBG,EAAa,eACXrB,GAAQiB,EAAUG,IACT,IAAXpB,KACIE,OAAOF,EAAO,IAIlBsB,EAAc,SAACF,EAAIG,MACjBvB,GAAQiB,EAAUG,IACT,IAAXpB,MACIA,GAASuB,IAIbJ,EAAW,gBAEV,GAAIK,GAAI,EAAGA,EAAIR,EAAMS,OAAQD,OAC5BR,EAAMQ,GAAGE,aAAeN,QACnBJ,GAAMQ,IAKbK,EAAO,WACPb,EAAMS,WACF,GAAGK,MAAO,MAEPV,GAAIJ,EAAMS,OAAST,EAAM,GAAGU,WAAa,KAAMiE,KAAM,UAG5D3D,EAAS,cAACN,0DAAa4D,EAASpD,SAChCoD,GAASnD,SACLC,eAKKV,IAITW,EAAY,eAEX,GAAIb,GAAI,EAAGA,EAAIR,EAAMS,OAAQD,MAC1BA,GAAGI,WAAY,IAEjBH,OAAS,KACJL,GAAI,KAAMuE,KAAM,eAGvBpD,EAAgB,SAACC,EAAOd,MACtBR,GAAOC,EAASO,EAClBR,OACGsB,MAAQA,IACRC,SAAWD,IAIdE,EAAW,SAACkD,EAAWlE,EAAYkB,MACnCC,UACAM,SAEEL,EAAU,cACRY,GAAQ0B,EAAYQ,SACtBlC,GAAMZ,WACFA,QAAQpB,MAELN,GAAIM,EAAYiE,KAAM,YAC1B9C,EAAYnB,IAEfsB,EAAc,GAAIC,SAAQ,kBAC9BJ,GAAcK,IAGVE,EAAU,cACRM,GAAQ0B,EAAYQ,SACtBlC,GAAMN,WACFA,QAAQ1B,MAELN,GAAIM,EAAYiE,KAAM,cAC1BjE,GACAyB,EAAYzB,IAGf2B,EAAc,GAAIJ,SAAQ,kBAAWE,GAAcD,UAElDI,MAELgC,8BAISM,QACDN,EAASnD,iBACJ,kEAgDH,iBAAME,YAvCN,iBAAMrB,GAAMS,wBA5HF,SAACoE,EAAOC,YACpBA,8BAGQA,EAAaC,OAAON,WAiJ3B,cACL/D,+DAAuBN,IAAMkE,EAASpD,UACtChB,EAAOoE,EAASnD,OAASnB,EAAMS,OACjCT,EAAM,GACNG,EAASO,SACTR,OACGuC,MAAO,MAEHrC,GAAIM,EAAYiE,KAAM,SAC1BzE,EACHA,EAAKmC,YACLJ,QAAQC,QAAQxB,UAnCR,cAACA,0DAAa4D,EAASpD,gBAAcK,IAAc,EAAMb,kBAG1D,cAACgC,6DAAYH,4DAClB7B,EAAa6B,EAAUnC,IAAMkE,EAASpD,UACtCU,EAAQW,EAAUX,OAAS0C,EAASpD,UACpChB,EAAOwB,EAASgB,EAAOhC,EAAYkB,aAC9BxB,GAAIM,EAAYiE,KAAM,SAC7BL,EAASnD,SACLrC,KAAKoB,GACU,IAAjBF,EAAMS,aAISN,EAASO,KAIdA,EAAYR,KAFlBpB,KAAKoB,GAKRA,EAAK8B,qBApBE,cAACtB,0DAAa4D,EAASpD,gBAAcK,IAAc,EAAOb,SAuC7D,eAAGgC,KAAAA,MACRd,EAAQc,EAAMd,OAAS0C,EAASpD,UAChCyB,EAAa3C,EAAM4C,OAAO,kBAC9B1C,GAAKY,MAAQZ,EAAK0B,QAAUA,UAE1B0C,GAASxB,wBACFD,KAAK7E,UAAU2E,EAAWlC,OAAS,MAAQ,UAAU6D,EAASxB,eAEjEH,EAAWlC,OAEf+D,EAASF,EAASU,kBAEc,cAAnBtC,EAAMM,SACb,yBACA,uBAENL,EAAWM,IAAI,kBACNuB,GAASF,EAASpB,SAAUZ,UAG1Ba,EAASE,KAAOF,EAASzC,uBACjB4D,EAASlB,mBACdkB,EAASU,YACX7B,EAASrC,UACTqC,EAASV,WACRU,EAAS3B,cACP2B,EAAS1B,wBACD0B,EAASrB,wBACTqB,EAASf,SAE5BgC,EAAYjB,EAAST,YArBzB8B,EAASF,EAAShB,gBCrLbxC,EAAO,kBAClBmE,GAAWlD,EAAM,SAENU,EAAO,kBAClBwC,GAAWlD,EAAM,SAEbmD,EAAY,SAACnD,EAAMoD,EAAOC,EAAUC,EAAUC,EAAmBC,MAC/DN,GAAalD,EAAKkD,YAVJ,aAWD,SAAfA,EACK,EACiB,SAAfA,GAAmC,SAAVE,EAC3B,EACiB,SAAfF,GAAmC,SAAVE,EAC3B,EAGU,SAAVA,MACgBtF,KAAnBkC,EAAKqD,GACHrD,EAAKqD,GACLE,MACiBzF,KAAnBkC,EAAKsD,GACHtD,EAAKsD,GACLE,GAYJC,EAAc,SAACzD,EAAMoD,SACzBD,GAAUnD,EAAMoD,EAAO,eAAgB,eA1CnB,IACA,KAmDhBM,EAAW,SAAC1D,EAAMoD,SACtBD,GAAUnD,EAAMoD,EAAO,YAAa,YAnDhB,EACA,IAmEhBF,EAAa,SAAClD,EAAMoD,MAClBzF,GAAKqC,EAAKrC,SACXA,GAGI,GAAIuC,SAAQ,eACXyD,GAAgD,IAA3BF,EAAYzD,EAAMoD,GACvCtG,EAAgC,IAAxB4G,EAAS1D,EAAMoD,GACvBrF,EAAQJ,EAAGI,MAEX6F,EAAkB,aAChBD,mBAAqB,QACrBE,gBAAkB,OAGpBC,EAAmB9D,EAAK+D,YAAwB,SAAVX,EACxC,iBAEKW,cAEL,KAEEC,EAAkBhE,EAAKiE,WAAuB,SAAVb,EACtC,iBAEKa,aAEL,KAEEC,EAAkB,aAChBP,mBAAqBA,EAAqB,OAC1CE,gBAAkB/G,EAAQ,KAC5BkD,EAAKmE,aACJlI,UAAqB,SAAVmH,EAAoB,MAAQ,UAAUpD,EAAKmE,WAEvDnE,EAAKjB,MAA6B,kBAAdiB,GAAKjB,MAAiC,SAAVqE,KAC7CrE,OAEHiB,EAAKU,MAA6B,kBAAdV,GAAKU,MAAiC,SAAV0C,KAC7C1C,QAIH0D,EAAe,0BAER,WACLJ,YAIHL,EAAqB7G,IAGpBuH,EAAuB,WACA,IAAvBV,iBAGSS,EAAc,GAIzBN,mBAESO,EAAsB,UA5D9BnE,QAAQC,WC3ENmE,EAAO,eACd3C,GAAI4C,QACD,oBACQzG,KAATrB,QACKkF,KAEHlF"}