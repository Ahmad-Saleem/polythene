!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core"),require("polythene-core-css"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-core-css","polythene-theme"],t):t(e.polythene=e.polythene||{},e["polythene-core"],e["polythene-core-css"],e["polythene-theme"])}(this,function(e,t,n,r){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s={component:"pe-ripple",mask:"pe-ripple__mask",waves:"pe-ripple__waves",constrained:"pe-ripple--constrained",wavesAnimating:"pe-ripple__waves--animating"},l={color:"inherit"},c=function(e){return[i({},e,[n.mixin.fit(),{color:"inherit",borderRadius:"inherit",pointerEvents:"none",".pe-ripple--constrained":{borderRadius:"inherit"," .pe-ripple__mask":{overflow:"hidden",borderRadius:"inherit"}}," .pe-ripple__mask":[n.mixin.fit(),{transform:"translate3d(0,0,0)"}]," .pe-ripple__waves":{outline:"1px solid transparent",position:"absolute",borderRadius:"50%",pointerEvents:"none",display:"none"}," .pe-ripple__waves--animating":{display:"block"}}])]},p=function(e,t,n,r){return[o({},e.map(function(e){return e+t}).join(","),{color:n["color_"+r]||n.color||"inherit"})]},u=function(e,t){return[p([".pe-dark-tone",".pe-dark-tone "],e,t,"dark"),p(["",".pe-light-tone",".pe-light-tone "],e,t,"light")]},d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=[c,u],f="."+s.component,v=function(e,t){return n.styler.generateStyles([e,f],d({},l,t),m)};n.styler.generateStyles([f],l,m);var h=t.animationEndEvent(),y=function(e,i,o,s,l,c){var p=i.getBoundingClientRect(),u=t.isTouch&&e.touches?e.touches[0].pageX:e.clientX,d=t.isTouch&&e.touches?e.touches[0].pageY:e.clientY,m=i.offsetWidth,f=i.offsetHeight,v=Math.sqrt(m*m+f*f),y=s.center?p.left+p.width/2:u,g=s.center?p.top+p.height/2:d,b=y-p.left-v/2,w=g-p.top-v/2,_=void 0!==s.startOpacity?s.startOpacity:.2,k=void 0!==s.opacityDecayVelocity?s.opacityDecayVelocity:.35,E=s.endOpacity||0,O=s.startScale||.1,j=s.endScale||2,x=s.duration?s.duration:1/k*.2,L=window.getComputedStyle(i).color,P="ripple_animation_"+(new Date).getTime(),S=o.style;S.width=S.height=v+"px",S.top=w+"px",S.left=b+"px",S["animation-duration"]=S["-webkit-animation-duration"]=S["-moz-animation-duration"]=S["-o-animation-duration"]=x+"s",S.backgroundColor=L,S.opacity=_,S.animationName=P,S.animationTimingFunction=s.animationTimingFunction||r.vars.animation_curve_default;var R=[a({},"@keyframes "+P,{" 0%":{transform:"scale("+O+")",opacity:_}," 100%":{transform:"scale("+j+")",opacity:E}})];n.styler.add(P,R);var q=function e(t){s.persistent?(S.opacity=E,S.transform="scale("+j+")"):(c(),o.classList.remove(l.wavesAnimating)),o.removeEventListener(h,e,!1),n.styler.remove(P),s.end&&s.end(t)};o.addEventListener(h,q,!1),s.start&&s.start(e),o.classList.add(l.wavesAnimating)},g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b=v,w=function(e,n){var r=n.keys,i=e.attrs;return g({},t.filterSupportedAttributes(i),{className:[s.component,i.constrained!==!1?s.constrained:null,"dark"===i.tone?"pe-dark-tone":null,"light"===i.tone?"pe-light-tone":null,i.className||i[r.class]].join(" ")})},_=function(e){var n=e.state,r=e.attrs;if(e.dom){var i=e.dom,o=e.dom.querySelector("."+s.waves),a=function(e){n.animating||r.disabled||(y(e,i,o,r,s,function(){return n.animating=!1}),n.animating=!0)},l=r.target?r.target():e.dom.parentElement;l.addEventListener(t.touchEndEvent,a,!1),n.removeEventListeners=function(){return l.removeEventListener(t.touchEndEvent,a,!1)}}},k=function(e){return e.state.removeEventListeners()},E=function(e,t){var n=t.renderer;return e.attrs.disabled?null:n("div",{className:s.mask},n("div",{className:s.waves}))},O={createProps:w,createContent:E,onMount:_,onUnmount:k,theme:b,element:"div",classes:s,vars:l};e.Ripple=O,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-ripple.js.map
