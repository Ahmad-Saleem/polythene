{"version":3,"file":"polythene-core-list-tile.js","sources":["../src/classes.js","../src/list-tile.js","../src/vars.js"],"sourcesContent":["\nexport default {\n  component:       \"pe-list-tile\",\n\n  // elements\n  content:         \"pe-list-tile__content\",\n  highSubtitle:    \"pe-list-tile__high-subtitle\",\n  primary:         \"pe-list-tile__primary\",\n  secondary:       \"pe-list-tile__secondary\",\n  subtitle:        \"pe-list-tile__subtitle\",\n  title:           \"pe-list-tile__title\",\n  contentFront:    \"pe-list-tile__content-front\",\n\n  // states\n  compact:         \"pe-list-tile--compact\",\n  compactFront:    \"pe-list-tile--compact-front\",\n  disabled:        \"pe-list-tile--disabled\",\n  hasFront:        \"pe-list-tile--front\",\n  hasHighSubtitle: \"pe-list-tile--high-subtitle\",\n  hasSubtitle:     \"pe-list-tile--subtitle\",\n  header:          \"pe-list-tile--header\",\n  hoverable:       \"pe-list-tile--hoverable\",\n  selectable:      \"pe-list-tile--selectable\",\n  selected:        \"pe-list-tile--selected\",\n  highlight:       \"pe-list-tile--highlight\",\n  sticky:          \"pe-list-tile--sticky\",\n};\n","import { filterSupportedAttributes, isClient } from \"polythene-core\";\nimport classes from \"./classes\";\n\nexport const getElement = () => \"div\"; // because primary or secondary content can be an \"a\", the container is always defined as \"div\", and option `element` is passed to primary content\n\nconst primaryContent = (h, k, requiresKeys, attrs, children) => {\n  const url = attrs.keyboardControl\n    ? null\n    : attrs.url;\n  const element = attrs.element\n    ? attrs.element\n    : url\n      ? \"a\"\n      : \"div\";\n  const contentFrontClass = [\n    classes.content,\n    classes.contentFront,\n    attrs.compactFront ? classes.compactFront : null,\n  ].join(\" \");\n  const frontComp = attrs.front\n    ? h(\"div\", Object.assign(\n      {},\n      requiresKeys ? { key: \"front\" } : null,\n      { className: contentFrontClass }\n    ), attrs.front)\n    : attrs.indent\n      ? h(\"div\", Object.assign(\n        {},\n        requiresKeys ? { key: \"front\" } : null,\n        { className: contentFrontClass }\n      ))\n      : null;\n  const hasTabIndex = !attrs.header && attrs.url;\n  const props = Object.assign(\n    {},\n    filterSupportedAttributes(attrs),\n    attrs.events,\n    {\n      className: classes.primary,\n      style: null\n    },\n    hasTabIndex && { [k.tabindex]: attrs[k.tabindex] || 0 },\n    url\n  );\n  return h(element, props, [\n    frontComp,\n    h(\"div\",\n      {\n        className: classes.content,\n        style: attrs.style\n      },\n      [\n        attrs.content\n          ? Object.assign(\n            {},\n            requiresKeys ? { key: \"content\" } : null,\n            attrs.content\n          )\n          : children,\n        attrs.title && !attrs.content\n          ? h(\"div\", Object.assign(\n            {},\n            requiresKeys ? { key: \"title\" } : null,\n            { className: classes.title }\n          ), attrs.title)\n          : null,\n        attrs.subtitle\n          ? h(\"div\", Object.assign(\n            {},\n            requiresKeys ? { key: \"subtitle\" } : null,\n            { className: classes.subtitle }\n          ), attrs.subtitle)\n          : null,\n        attrs.highSubtitle\n          ? h(\"div\", Object.assign(\n            {},\n            requiresKeys ? { key: \"highSubtitle\" } : null,\n            { className: classes.subtitle + \" \" + classes.highSubtitle }\n          ), attrs.highSubtitle)\n          : null,\n        attrs.subContent\n          ? h(\"div\", Object.assign(\n            {},\n            requiresKeys ? { key: \"subContent\" } : null,\n            { className: classes.subContent }\n          ), attrs.subContent)\n          : null\n      ]\n    )\n  ]);\n};\n\nconst secondaryContent = (h, k, requiresKeys, Icon, attrs = {}) => {\n  const url = attrs.keyboardControl\n    ? null\n    : attrs.url;\n  const element = attrs.element\n    ? attrs.element\n    : url\n      ? \"a\"\n      : \"div\";\n  const hasTabIndex = attrs.url;\n  return h(element,\n    Object.assign(\n      {},\n      url,\n      {\n        className: classes.secondary,\n      },\n      requiresKeys ? { key: \"secondary\" } : null,\n      filterSupportedAttributes(attrs),\n      hasTabIndex && { [k.tabindex]: attrs[k.tabindex] || 0 }\n    ),\n    h(\"div\",\n      { className: classes.content },\n      [\n        attrs.icon ? h(Icon, attrs.icon) : null,\n        attrs.content ? attrs.content : null\n      ]\n    )\n  );\n};\n\nexport const getInitialState = (vnode, createStream) => {\n  const attrs = vnode.attrs;\n  const highlight = createStream(attrs.defaultHighlight);\n  return {\n    highlight,\n    redrawOnUpdate: createStream.merge([highlight])\n  };\n};\n\nexport const onMount = vnode => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const dom = vnode.dom;\n  if (!dom) {\n    return;\n  }\n  if (isClient) {\n    if (attrs.register) {\n      const primaryDom = dom; //.querySelector(`.${classes.primary}`);\n\n      const onFocus = () => state.highlight(true);\n      const onBlur = () => state.highlight(false);\n      \n      primaryDom.addEventListener(\"focus\", onFocus, false);\n      primaryDom.addEventListener(\"blur\", onBlur, false);\n\n      state.removeEventListeners = () => (\n        primaryDom.removeEventListener(\"focus\", onFocus, false),\n        primaryDom.removeEventListener(\"blur\", onBlur, false)\n      );\n\n      attrs.register(attrs.index, {\n        dom: primaryDom,\n        attrs\n      });\n\n      state.highlight.map(hasHighlight => {\n        if (attrs.setHighlightIndex && hasHighlight) {\n          attrs.setHighlightIndex(attrs.index);\n        }\n      });\n    }\n  }\n};\n\nexport const onUnMount = vnode =>\n  vnode.state.removeEventListeners && vnode.state.removeEventListeners();\n\nexport const createProps = (vnode, { keys: k }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const highlight = state.highlight();\n  const hasTabIndex = !attrs.header && !attrs.url && !(attrs.secondary && attrs.secondary.url);\n  const heightClass = attrs.subtitle\n    ? classes.hasSubtitle\n    : attrs.highSubtitle\n      ? classes.hasHighSubtitle\n      : attrs.front || attrs.indent\n        ? classes.hasFront\n        : null;\n  return Object.assign(\n    {},\n    filterSupportedAttributes(attrs, { remove: [\"tabindex\", \"tabIndex\"] }), // tabindex is set elsewhere\n    {\n      className: [\n        classes.component,\n        attrs.selected     ? classes.selected : null,\n        attrs.disabled     ? classes.disabled : null,\n        attrs.sticky       ? classes.sticky : null,\n        attrs.compact      ? classes.compact : null,\n        attrs.hoverable    ? classes.hoverable : null,\n        attrs.selectable   ? classes.selectable : null,\n        highlight          ? classes.highlight : null,\n        attrs.header       ? classes.header : null,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        heightClass,\n        attrs.className || attrs[k.class],\n      ].join(\" \"),\n    },\n    hasTabIndex && { [k.tabindex]: attrs[k.tabindex] || 0 }\n    // events and url are attached to primary content to not interfere with controls\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, requiresKeys, keys: k, Ripple, Icon }) => {\n  const attrs = vnode.attrs;\n  const primaryAttrs = Object.assign(\n    {},\n    requiresKeys ? { key: \"primary\" } : null,\n    attrs\n  );\n  delete primaryAttrs.id;\n  delete primaryAttrs[k.class];\n  return [\n    attrs.ink && !attrs.disabled\n      ? h(Ripple, Object.assign({}, attrs.ripple, requiresKeys ? { key: \"ripple\" } : null))\n      : null,\n    primaryContent(h, k, requiresKeys, primaryAttrs, attrs.children || vnode.children),\n    attrs.secondary\n      ? secondaryContent(h, k, requiresKeys, Icon, attrs.secondary)\n      : null\n  ];\n};\n\n","import { vars } from \"polythene-theme\";\n\nconst rgba = (colorStr, opacity = 1) =>\n  `rgba(${colorStr}, ${opacity})`;\n\n// SPECS\n//\n// heights:\n// single line: 48\n// single line, dense: 40\n// single line, with icon: 48\n// single line, with icon, dense: 40\n// single line, with avatar: 56\n// single line, with avatar, dense: 48\n// two-line: 72\n// two-line, dense: 60\n// three-line: 88\n// three-line, dense: 76\n\nconst single_height = 48;\nconst padding = 8;\nconst single_with_icon_height = 56;\n\nexport default {\n  single_height,\n  single_line_height:                 single_height - 2 * padding - (2 * 5 + 1),\n  single_with_icon_height,      \n  single_with_icon_line_height:       single_with_icon_height - 2 * padding - (2 * 5 + 1),\n  padding:                            13,\n  compact_padding:                    9,\n  subtitle_line_count:                1,\n  has_subtitle_padding:               15,\n  high_subtitle_line_count:           2,\n  has_high_subtitle_padding:          13,\n  front_item_width:                   72,\n  compact_front_item_width:           64,\n  side_padding:                       2 * vars.grid_unit_component,\n  compact_side_padding:               1 * vars.grid_unit_component,\n  font_size_title:                    16,\n  font_size_subtitle:                 14,\n  line_height_subtitle:               20,\n  font_size_list_header:              14,\n  font_size_small:                    12,\n   \n  color_light_title:                  rgba(vars.color_light_foreground, vars.blend_light_text_primary),\n  color_light_subtitle:               rgba(vars.color_light_foreground, vars.blend_light_text_secondary),\n  color_light_info:                   rgba(vars.color_light_foreground, vars.blend_light_text_tertiary),\n  color_light_text_disabled:          rgba(vars.color_light_foreground, vars.blend_light_text_disabled),\n  color_light_list_header:            rgba(vars.color_light_foreground, vars.blend_light_text_tertiary),\n  color_light_secondary:              rgba(vars.color_light_foreground, vars.blend_light_text_secondary),\n  color_light_hover_background:       rgba(vars.color_light_foreground, vars.blend_light_background_hover),\n  color_light_focus_background:       rgba(vars.color_light_foreground, vars.blend_light_background_hover),\n  color_light_selected_background:    rgba(vars.color_light_foreground, vars.blend_light_background_hover),\n  color_light_highlight_background:   rgba(vars.color_light_foreground, vars.blend_light_background_hover),\n  // background color may be set in theme; disabled by default\n  // color_light_background:          \"inherit\",\n\n  color_dark_title:                   rgba(vars.color_dark_foreground, vars.blend_dark_text_primary),\n  color_dark_subtitle:                rgba(vars.color_dark_foreground, vars.blend_dark_text_secondary),\n  color_dark_info:                    rgba(vars.color_dark_foreground, vars.blend_dark_text_tertiary),\n  color_dark_text_disabled:           rgba(vars.color_dark_foreground, vars.blend_dark_text_disabled),\n  color_dark_list_header:             rgba(vars.color_dark_foreground, vars.blend_dark_text_tertiary),\n  color_dark_secondary:               rgba(vars.color_dark_foreground, vars.blend_dark_text_secondary),\n  color_dark_hover_background:        rgba(vars.color_dark_foreground, vars.blend_dark_background_hover),\n  color_dark_selected_background:     rgba(vars.color_dark_foreground, vars.blend_dark_background_hover),\n  color_dark_highlight_background:    rgba(vars.color_dark_foreground, vars.blend_dark_background_hover),\n  // background color may be set in theme; disabled by default\n  // color_dark_background:           \"inherit\",\n};\n"],"names":["getElement","primaryContent","h","k","requiresKeys","attrs","children","url","keyboardControl","element","contentFrontClass","classes","content","contentFront","compactFront","join","frontComp","front","_extends","key","className","indent","hasTabIndex","header","filterSupportedAttributes","events","primary","tabindex","style","title","subtitle","highSubtitle","subContent","secondaryContent","Icon","secondary","icon","getInitialState","vnode","createStream","highlight","defaultHighlight","merge","onMount","state","dom","isClient","register","primaryDom","onFocus","onBlur","addEventListener","removeEventListeners","removeEventListener","index","map","setHighlightIndex","hasHighlight","onUnMount","createProps","keys","heightClass","hasSubtitle","hasHighSubtitle","hasFront","remove","component","selected","disabled","sticky","compact","hoverable","selectable","tone","class","createContent","renderer","Ripple","primaryAttrs","id","ink","ripple","rgba","colorStr","single_height","single_with_icon_height","vars","grid_unit_component","color_light_foreground","blend_light_text_primary","blend_light_text_secondary","blend_light_text_tertiary","blend_light_text_disabled","blend_light_background_hover","color_dark_foreground","blend_dark_text_primary","blend_dark_text_secondary","blend_dark_text_tertiary","blend_dark_text_disabled","blend_dark_background_hover"],"mappings":"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"}