!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("mithril")):"function"==typeof define&&define.amd?define(["exports","mithril"],e):e(t.polythene=t.polythene||{},t.m)}(this,function(t,e){"use strict";var n={autofocus:"autofocus",class:"class",className:"class",enctype:"enctype",formaction:"formaction",maxlength:"maxlength",minlength:"minlength",onblur:"onblur",onclick:"onclick",onchange:"onchange",onfocus:"onfocus",oninput:"oninput",onkeydown:"onkeydown",onkeyup:"onkeyup",onmousedown:"onmousedown",onmouseout:"onmouseout",onmouseover:"onmouseover",onmouseup:"onmouseup",onscroll:"onscroll",onsubmit:"onsubmit",readonly:"readonly",tabindex:"tabindex"},r=e="default"in e?e.default:e,o=function(t,e){return e={exports:{}},t(e,e.exports),e.exports}(function(t){!function(){function e(){function t(){return arguments.length>0&&arguments[0]!==x&&r(t,arguments[0]),t._state.value}return n(t),arguments.length>0&&arguments[0]!==x&&r(t,arguments[0]),t}function n(t){t.constructor=e,t._state={id:O++,value:void 0,state:0,derive:void 0,recover:void 0,deps:{},parents:[],endStream:void 0,unregister:void 0},t.map=t["fantasy-land/map"]=d,t["fantasy-land/ap"]=v,t["fantasy-land/of"]=e,t.valueOf=l,t.toJSON=p,t.toString=l,Object.defineProperties(t,{end:{get:function(){if(!t._state.endStream){var n=e();n.map(function(e){return!0===e&&(f(t),n._state.unregister=function(){f(n)}),e}),t._state.endStream=n}return t._state.endStream}}})}function r(t,e){o(t,e);for(var n in t._state.deps)a(t._state.deps[n],!1);null!=t._state.unregister&&t._state.unregister(),i(t)}function o(t,e){t._state.value=e,t._state.changed=!0,2!==t._state.state&&(t._state.state=1)}function a(t,e){var n=t._state.parents;if(n.length>0&&n.every(_)&&(e||n.some(g))){var r=t._state.derive();if(r===x)return!1;o(t,r)}}function i(t){t._state.changed=!1;for(var e in t._state.deps)t._state.deps[e]._state.changed=!1}function s(t,n){if(!n.every(m))throw new Error("Ensure that each item passed to stream.combine/stream.merge is a stream");return u(e(),n,function(){return t.apply(this,n.concat([n.filter(g)]))})}function u(t,e,n){var r=t._state;return r.derive=n,r.parents=e.filter(h),c(t,r.parents),a(t,!0),t}function c(t,e){for(var n=0;n<e.length;n++)e[n]._state.deps[t._state.id]=t,c(t,e[n]._state.parents)}function f(t){for(var e=0;e<t._state.parents.length;e++)delete t._state.parents[e]._state.deps[t._state.id];for(var n in t._state.deps){var r=t._state.deps[n],o=r._state.parents.indexOf(t);o>-1&&r._state.parents.splice(o,1)}t._state.state=2,t._state.deps={}}function d(t){return s(function(e){return t(e())},[this])}function v(t){return s(function(t,e){return t()(e())},[t,this])}function l(){return this._state.value}function p(){return null!=this._state.value&&"function"==typeof this._state.value.toJSON?this._state.value.toJSON():this._state.value}function m(t){return t._state}function _(t){return 1===t._state.state}function g(t){return t._state.changed}function h(t){return 2!==t._state.state}function y(t){return s(function(){return t.map(function(t){return t()})},t)}function b(t,e,n){var r=s(function(n){return e=t(e,n._state.value)},[n]);return 0===r._state.state&&r(e),r}function w(t,e){var n=t.map(function(t){var e=t[0];return 0===e._state.state&&e(void 0),e});return s(function(){var r=arguments[arguments.length-1];return n.forEach(function(n,o){r.indexOf(n)>-1&&(e=t[o][1](e,n._state.value))}),e},n)}var O=0,x={};e["fantasy-land/of"]=e,e.merge=y,e.combine=s,e.scan=b,e.scanMerge=w,e.HALT=x,t.exports=e}()}),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=function(t){var e=t.createContent,i=void 0===e?function(){}:e,s=t.createProps,u=void 0===s?function(){}:s,c=t.component,f=t.getElement,d=void 0===f?function(){return"div"}:f,v=t.getInitialState,l=void 0===v?function(){return{}}:v,p=t.onMount,m=void 0===p?function(){}:p,_=t.onUnMount,g=void 0===_?function(){}:_,h=t.view,y=function(t){var e=a({},t),n=l(e,o);t.state=n,t.state.redrawOnUpdate&&t.state.redrawOnUpdate.map(function(){return setTimeout(r.redraw)})},b=function(t){return r(c||d(t),u(t,{renderer:r,requiresKeys:!1,keys:n}),[t.attrs.before,i(t,{renderer:r,requiresKeys:!1,keys:n}),t.attrs.after])};return{view:(void 0===h?null:h)||b,oninit:y,oncreate:m,onremove:g}},s=function(t){var e=t.createContent,o=void 0===e?function(){}:e,a=t.createProps,i=void 0===a?function(){}:a,s=t.getElement,u=void 0===s?function(){return"div"}:s,c=t.component,f=t.renderView,d=t.onMount,v=void 0===d?function(){}:d,l=t.onUnMount,p=void 0===l?function(){}:l,m=function(t){return r(c||u(t),i(t,{renderer:r,requiresKeys:!1,keys:n}),[t.attrs.before,o(t,{renderer:r,requiresKeys:!1,keys:n}),t.attrs.after])};return{view:f||m,oncreate:v,onremove:p}},u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(t){t.attrs.getState&&t.attrs.getState({visible:t.state.visible,transitioning:t.state.transitioning})},f={oninit:function(t){t.state={visible:t.attrs.permanent||t.attrs.show||!1,transitioning:!1}},view:function(t){var e=t.attrs,n=t.state;return e.permanent||n.transitioning||(e.show?n.visible=!0:e.hide&&(n.visible=!1)),n.visible?r(e.instance,u({},e,{setDisplayState:function(e){var o=e.transitioning,a=e.visible;void 0!==o&&(n.transitioning=o),void 0!==a&&(n.visible=a,n.transitioning=!1),c(t),setTimeout(r.redraw)}})):r("span",{className:e.placeholderClassName})}};t.keys=n,t.renderer=r,t.StateComponent=i,t.ViewComponent=s,t.Toggle=f,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-mithril-base.js.map
