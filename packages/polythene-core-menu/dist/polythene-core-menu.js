!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-theme"],t):t(e.polythene={},e["polythene-core"],e["polythene-theme"])}(this,function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o={component:"pe-list-tile",content:"pe-list-tile__content",highSubtitle:"pe-list-tile__high-subtitle",primary:"pe-list-tile__primary",secondary:"pe-list-tile__secondary",subtitle:"pe-list-tile__subtitle",title:"pe-list-tile__title",contentFront:"pe-list-tile__content-front",compact:"pe-list-tile--compact",compactFront:"pe-list-tile--compact-front",disabled:"pe-list-tile--disabled",hasFront:"pe-list-tile--front",hasHighSubtitle:"pe-list-tile--high-subtitle",hasSubtitle:"pe-list-tile--subtitle",header:"pe-list-tile--header",hoverable:"pe-list-tile--hoverable",selectable:"pe-list-tile--selectable",selected:"pe-list-tile--selected",highlight:"pe-list-tile--highlight",sticky:"pe-list-tile--sticky"},r={component:"pe-menu",content:"pe-menu__content",placeholder:"pe-menu__placeholder",target:"pe-menu__target",permanent:"pe-menu--permanent",visible:"pe-menu--visible",width_auto:"pe-menu--width-auto",width_n:"pe-menu--width-",listTile:o.component,selectedListTile:o.selected},l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(e){return e.attrs.element||"div"},a=function(e,n){if(!t.isServer){var i=document.querySelector(n.target);if(i){var o=void 0!==n.offset?n.offset:0,l=e.dom();if(l){var s=e.dom().querySelector("."+r.content),a=n.origin||"top-left",c=0;if(n.reposition){var u=s.querySelectorAll("."+r.listTile)[0],d=s.querySelector("."+r.selectedListTile);if(u&&d){var p=u.getBoundingClientRect(),h=d.getBoundingClientRect();c=h.top-p.top}var m=(d||u).getBoundingClientRect(),f=i.getBoundingClientRect(),g=m.height-f.height;c+=g/2}var v=i.getBoundingClientRect();if(l.parentNode){var b=l.parentNode.getBoundingClientRect(),_=function(){return l.style.left=v.left-b.left+o+"px"},y=function(){return l.style.right=v.right-b.right+o+"px"},k=function(){return l.style.top=v.top-b.top-c-8+"px"},w=function(){return l.style.bottom=v.bottom-b.bottom-c+"px"};({"top-left":function(){return k()&&_()},"top-right":function(){return k()&&y()},"bottom-left":function(){return w()&&_()},"bottom-right":function(){return w()&&y()}})[a].call()}}}}},c=function(e,n){n.onChange&&n.onChange({visible:!1,transitioning:!0}),a(e,n);var i=n.transitions,o=e.dom();return t.show(l({},n,i?i.show(o,n):{el:o,showClass:r.visible})).then(function(){n.onChange&&n.onChange({visible:!0,transitioning:!1}),n.didShow&&n.didShow(n.id),e.visible(!1)})},u=function(e,n){n.onChange&&n.onChange({visible:!0,transitioning:!0});var i=n.transitions,o=e.dom();return t.hide(l({},n,i?i.hide(o,n):{el:o,showClass:r.visible})).then(function(){n.onChange&&n.onChange({visible:!1,transitioning:!1}),n.didHide&&n.didHide(n.id),e.visible(!1)})},d=function(e){return e<1.5?1.5:e},p=function(e){return r.width_n+e.toString().replace(".","-")},h=function(e,n){var i=e.state,o=e.attrs;"mount"===n?(t.subscribe("resize",i.update),t.subscribe("keydown",i.handleEscape),setTimeout(function(){i.activateDismissTap(),c(i,o)},0)):(t.unsubscribe("resize",i.update),t.unsubscribe("keydown",i.handleEscape),i.deActivateDismissTap())},m=function(e){if(e.dom){var t=e.state,n=e.attrs;t.dom(e.dom),n.permanent||(t.handleDismissTap=function(e){e.target!==t.dom()&&(e.defaultPrevented?u(t,n):u(t,l({},n,{hideDelay:0})))},t.update=function(){a(t,n)},t.activateDismissTap=function(){document.addEventListener("click",t.handleDismissTap)},t.deActivateDismissTap=function(){document.removeEventListener("click",t.handleDismissTap)},t.handleEscape=function(e){"Escape"===e.key&&u(t,l({},n,{hideDelay:0}))},h(e,"mount"))}},f=function(e){e.attrs.permanent||h(e,"unmount")},g=function(e,t){var n=t(null),i=t(!1);return{dom:n,visible:i,activateDismissTap:void 0,deActivateDismissTap:void 0,handleDismissTap:void 0,handleEscape:void 0,update:void 0,redrawOnUpdate:t.merge([i])}},v=function(e,n){var i=n.keys,o=e.attrs;return l({},t.filterSupportedAttributes(o),{className:[r.component,o.permanent?r.permanent:null,o.target?r.target:null,o.size?p(d(o.size)):null,"dark"===o.tone?"pe-dark-tone":null,"light"===o.tone?"pe-light-tone":null,o.className||o[i.class]].join(" ")})},b=function(e,t){var n,o=t.renderer,l=t.keys,s=t.Shadow,a=e.attrs,c=void 0!==a.z?a.z:1;return o("div",(n={className:r.content},i(n,l.onclick,function(e){return e.preventDefault()}),i(n,"style",a.style),n),[c>0&&o(s,{z:c,animated:!0}),a.content?a.content:e.children])},_=Object.freeze({getElement:s,onMount:m,onUnMount:f,getInitialState:g,createProps:v,createContent:b}),y=function(e){return"rgba("+e+", "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)+")"},k={sizes:[1,1.5,2,3,4,5,6,7],min_size:1.5,max_size_small_screen:5,size_factor:n.vars.grid_unit_menu,border_radius:n.vars.unit_block_border_radius,color_light_background:y(n.vars.color_light_background),color_dark_background:y(n.vars.color_dark_background)};e.coreMenu=_,e.vars=k,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-menu.js.map
