!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core"),require("polythene-core-css"),require("polythene-core-list-tile"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-core-css","polythene-core-list-tile","polythene-theme"],t):t(e.polythene={},e["polythene-core"],e["polythene-core-css"],e["polythene-core-list-tile"],e["polythene-theme"])}(this,function(e,t,r,n,o){"use strict";function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a={component:"pe-list",header:n.classes.header,borders:"pe-list--borders",compact:"pe-list--compact",hasHeader:"pe-list--header",indentedBorders:"pe-list--indented-borders"},s={padding:o.vars.grid_unit_component,padding_compact:3*o.vars.grid_unit_component/4,border_width_stacked:1,border_width_bordered:1,color_light_border:r.rgba(o.vars.color_light_foreground,o.vars.blend_light_border_light),color_dark_border:r.rgba(o.vars.color_dark_foreground,o.vars.blend_dark_border_light)},c=function(e){return{borderStyle:"none none solid none",borderWidth:e.border_width_bordered+"px"}},h=function(e,t){return[i({},e,{padding:t.padding+"px 0",".pe-list--header":{paddingTop:0},".pe-list--compact":{padding:t.padding_compact+"px 0"},"& + &":{borderStyle:"solid none none none",borderWidth:t.border_width_stacked+"px"},".pe-list--borders":{" .pe-list-tile":{":not(.pe-list-tile--header):not(:last-child)":{"&":c(t)}}},".pe-list--indented-borders":{borderTop:"none"," .pe-list-tile":{":not(.pe-list-tile--header):not(:last-child)":{" .pe-list-tile__content:not(.pe-list-tile__content-front)":c(t)}}}})]},p=function(e,t,r,n){var o;return[l({},e.map(function(e){return e+t}).join(","),(o={backgroundColor:r["color_"+n+"_background"]},l(o,"& + .pe-list",{borderTopColor:r["color_"+n+"_border"]}),l(o,".pe-list--borders",{" .pe-list-tile":{":not(:last-child)":{borderColor:r["color_"+n+"_border"]}}}),l(o,".pe-list--indented-borders",{" .pe-list-tile":{" .pe-list-tile__content:not(.pe-list-tile__content-front)":{borderColor:r["color_"+n+"_border"]}}}),o))]},u=function(e,t){return[p([".pe-dark-tone",".pe-dark-tone "],e,t,"dark"),p(["",".pe-light-tone",".pe-light-tone "],e,t,"light")]},g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b=[h,u],f="."+a.component,_=function(e,t){return r.styler.generateStyles([e,f],g({},s,t),b)};r.styler.generateStyles([f],s,b);var y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v=function(e){return e.attrs.element||"div"},m=_,k=function(e){var t=e.state,r=e.attrs;if(r.onSelect){var n=t.highlightIndex(),o={index:n,dom:t.tiles[n].dom,attrs:t.tiles[n].attrs};r.onSelect(o)}},x=function(e,t){var r=e.attrs,n=t(void 0!==r.highlightIndex?r.highlightIndex:-1);return{tiles:[],highlightIndex:n,registerTile:function(e){return function(t,r){return e.tiles[t]=r}},redrawOnUpdate:t.merge([n])}},w=function(e){var t=e.state;e.attrs.keyboardControl&&t.highlightIndex.map(function(e){t.tiles[e]&&t.tiles[e].dom.focus()})},j=function(e,r){var n=r.keys,o=e.state,i=e.attrs;return y({},t.filterSupportedAttributes(i),{className:[a.component,i.borders?a.borders:null,i.indentedBorders?a.indentedBorders:null,i.header?a.hasHeader:null,i.compact?a.compact:null,"dark"===i.tone?"pe-dark-tone":null,"light"===i.tone?"pe-light-tone":null,i.className||i[n.class]].join(" ")},i.keyboardControl&&d({},n.onkeydown,function(t){var r=o.highlightIndex();if("ArrowDown"===t.key||"ArrowRight"===t.key){t.preventDefault();var n=Math.min(o.tiles.length-1,r+1);o.tiles[n].dom.focus()}else if("ArrowUp"===t.key||"ArrowLeft"===t.key){t.preventDefault();var i=Math.max(0,r-1);o.tiles[i].dom.focus()}else"Enter"===t.key?k(e):"Escape"===t.key&&(o.tiles[r].dom.blur(),o.highlightIndex(-1))}))},O=function(e,t){var r=t.renderer,n=t.requiresKeys,o=t.keys,i=t.ListTile,l=e.state,s=e.attrs,c=void 0;s.header&&((c=y({},s.header))[o.class]=[a.header,c[o.class]||null].join(" "));var h=l.highlightIndex(),p=s.tiles?s.tiles:s.content?s.content:s.children||e.children,u=-1;return[c?r(i,y({},n?{key:"header"}:null,c,{header:!0})):null,s.keyboardControl?p.map(function(t){return t.header||u++,void 0!==t.tag?t:r(i,y({},t,!t.header&&{keyboardControl:!0,register:l.registerTile(l),setHighlightIndex:l.highlightIndex,index:u,defaultHighlight:h===u,events:y({},t.events,d({},o.onclick,function(){return k(e)}))}))}):p]},I=Object.freeze({getElement:v,theme:m,getInitialState:x,onMount:w,createProps:j,createContent:O});e.coreList=I,e.classes=a,e.vars=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-list.js.map
