{"version":3,"file":"polythene-core-raised-button.js","sources":["../../polythene-css-classes/raised-button.js","../src/raised-button.js","../src/vars.js"],"sourcesContent":["\nexport default {\n  component: \"pe-button pe-text-button pe-raised-button\"\n};\n","import { isServer, pointerStartMoveEvent, pointerEndEvent, subscribe } from \"polythene-core\";\nimport classes from \"polythene-css-classes/raised-button\";\n\n// Don't export 'getElement': it will be the wrapped button component (set in polythene-xxx-raised-button)\n\nconst MAX_Z = 5;\n\nlet tapStart,\n  tapEndAll = () => {},\n  downButtons = [];\n\nsubscribe(pointerEndEvent, () => tapEndAll());\n\nconst animateZ = (which, vnode) => {\n  const zBase = vnode.state.zBase;\n  const increase = vnode.attrs.increase || 1;\n  const z = vnode.state.z();\n  const newZ = which === \"down\" && zBase < MAX_Z\n    ? Math.min(zBase + increase, MAX_Z)\n    : which === \"up\"\n      ? Math.max(z - increase, zBase)\n      : z;\n  if (newZ !== z) {\n    vnode.state.z(newZ);\n  }\n};\n\nconst tapHandler = (which, vnode) => {\n  if (which === \"down\") {\n    downButtons.push(Object.assign({}, vnode));\n  }\n  const animateOnTap = vnode.attrs.animateOnTap !== false ? true : false;\n  if (animateOnTap) {\n    animateZ(which, vnode);\n  }\n};\n\nconst initTapEvents = vnode => {\n  if (isServer) return;\n  tapStart = () => tapHandler(\"down\", vnode);\n  tapEndAll = () => {\n    downButtons.map(buttonVnode =>\n      tapHandler(\"up\", buttonVnode));\n    downButtons = [];\n  };\n  vnode.dom.addEventListener(pointerStartMoveEvent, tapStart);\n};\n\nconst clearTapEvents = vnode =>\n  vnode.dom.removeEventListener(pointerStartMoveEvent, tapStart);\n\nexport const getInitialState = (vnode, createStream) => {\n  const attrs = vnode.attrs;\n  const zBase = attrs.z !== undefined ? attrs.z : 1;\n  const z = createStream(zBase);\n  const tapEventsInited = createStream(false);\n  return {\n    zBase,\n    z,\n    tapEventsInited,\n    redrawOnUpdate: createStream.merge([z])\n  };\n};\n\nexport const onMount = vnode => {\n  const state = vnode.state;\n  if (vnode.dom && !state.tapEventsInited()) {\n    initTapEvents(vnode);\n    state.tapEventsInited(true);\n  }\n};\n\nexport const onUnMount = vnode => {\n  if (vnode.state.tapEventsInited()) {\n    clearTapEvents(vnode);\n  }\n};\n\nexport const createProps = (vnode, { renderer: h, Shadow }) => {\n  const attrs = vnode.attrs;\n  const state = vnode.state;\n  const children = attrs.children || vnode.children || [];\n  return Object.assign(\n    {},\n    {\n      parentClassName: [\n        attrs.parentClassName || classes.component\n      ].join(\" \"),\n      animateOnTap: false,\n      shadowComponent: h(Shadow, {\n        z: attrs.disabled ? 0 : state.z,\n        animated: true\n      }),\n      children\n    },\n    attrs\n  );\n};\n\nexport const createContent = () => null;\n","import { vars } from \"polythene-theme\";\n\nconst rgba = (colorStr, opacity = 1) =>\n  `rgba(${colorStr}, ${opacity})`;\n\nexport default {\n  color_light_background:          \"#fff\",\n  color_light_text:                rgba(vars.color_light_foreground, vars.blend_light_text_primary),\n  color_light_hover_background:    \"transparent\",\n  color_light_focus_background:    rgba(vars.color_light_foreground, vars.blend_light_background_hover),\n  color_light_active_background:   rgba(vars.color_light_foreground, vars.blend_light_background_hover), // same as hover\n  color_light_disabled_background: rgba(vars.color_light_foreground, vars.blend_light_background_disabled),\n  color_light_disabled_text:       rgba(vars.color_light_foreground, vars.blend_light_text_disabled),\n\n  color_dark_background:           rgba(vars.color_primary),\n  color_dark_text:                 rgba(vars.color_dark_foreground, vars.blend_dark_text_primary),\n  color_dark_hover_background:     vars.color_primary_active,\n  color_dark_focus_background:     vars.color_primary_active,\n  color_dark_active_background:    vars.color_primary_dark,\n  color_dark_disabled_background:  rgba(vars.color_dark_foreground, vars.blend_dark_background_disabled),\n  color_dark_disabled_text:        rgba(vars.color_dark_foreground, vars.blend_dark_text_disabled)\n};\n"],"names":["MAX_Z","tapStart","tapEndAll","downButtons","subscribe","pointerEndEvent","animateZ","which","vnode","zBase","state","increase","attrs","z","newZ","Math","min","max","tapHandler","push","animateOnTap","initTapEvents","isServer","map","buttonVnode","dom","addEventListener","pointerStartMoveEvent","clearTapEvents","removeEventListener","getInitialState","createStream","undefined","tapEventsInited","merge","onMount","onUnMount","createProps","h","renderer","Shadow","children","parentClassName","classes","component","join","disabled","createContent","rgba","colorStr","opacity","vars","color_light_foreground","blend_light_text_primary","blend_light_background_hover","blend_light_background_disabled","blend_light_text_disabled","color_primary","color_dark_foreground","blend_dark_text_primary","color_primary_active","color_primary_dark","blend_dark_background_disabled","blend_dark_text_disabled"],"mappings":"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"}