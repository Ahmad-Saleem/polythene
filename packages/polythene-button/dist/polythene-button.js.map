{"version":3,"file":"polythene-button.js","sources":["../src/classes.js","../src/theme/vars.js","../src/theme/base.js","../src/theme/layout.js","../src/theme/color.js","../src/theme/index.js","../src/button.js"],"sourcesContent":["\nconst baseClass = \"pe-button\";\n\nexport default {\n  base:       baseClass,\n  component:  `${baseClass} pe-text-button`,\n  content:    \"pe-button__content\",\n  label:      \"pe-button__label\",\n  wash:       \"pe-button__wash\",\n  focus:      \"pe-button__focus\",\n  selected:   \"pe-button--selected\",\n  disabled:   \"pe-button--disabled\",\n  borders:    \"pe-button--borders\",\n  inactive:   \"pe-button--inactive\",\n  focused:    \"pe-button--focus\"\n};\n","import { vars } from \"polythene-theme\";\n\nconst rgba = vars.rgba;\nconst touch_height = vars.unit_touch_height;\nconst height = 36;\n\nexport default {\n  margin_h:        vars.grid_unit,\n  border_radius:   vars.unit_item_border_radius,\n  font_size:       14,\n  font_weight:     500,\n  outer_padding_v: (touch_height - height) / 2,\n  padding_h:       2 * vars.grid_unit,\n  padding_v:       11,\n  min_width:       8 * vars.grid_unit_component,\n  text_transform:  \"uppercase\",\n  border_width:    0, // no border in MD, but used to correctly set the height when a theme does set a border\n\n  color_light_background:          \"transparent\",\n  color_light_text:                rgba(vars.color_light_foreground, vars.blend_light_text_primary),\n  color_light_hover_background:    rgba(vars.color_light_foreground, vars.blend_light_background_hover),\n  color_light_focus_background:    rgba(vars.color_light_foreground, vars.blend_light_background_hover),\n  color_light_active_background:   rgba(vars.color_light_foreground, vars.blend_light_background_active),\n  color_light_disabled_background: \"transparent\",\n  color_light_disabled_text:       rgba(vars.color_light_foreground, vars.blend_light_text_disabled),\n\n  // border colors may be set in theme; disabled by default\n  // color_light_border:              \"transparent\", // only specify this variable to get all 4 states\n  // color_light_hover_border:        \"transparent\",\n  // color_light_active_border:       \"transparent\",\n  // color_light_disabled_border:     \"transparent\",\n\n  color_dark_background:           \"transparent\",\n  color_dark_text:                 rgba(vars.color_dark_foreground, vars.blend_dark_text_primary),\n  color_dark_hover_background:     rgba(vars.color_dark_foreground, vars.blend_dark_background_hover),\n  color_dark_focus_background:     rgba(vars.color_dark_foreground, vars.blend_dark_background_hover),\n  color_dark_active_background:    rgba(vars.color_dark_foreground, vars.blend_dark_background_active),\n  color_dark_disabled_background:  \"transparent\",\n  color_dark_disabled_text:        rgba(vars.color_dark_foreground, vars.blend_dark_text_disabled),\n\n  // border colors may be set in theme; disabled by default\n  // color_dark_border:               \"transparent\", // only specify this variable to get all 4 states\n  // color_dark_hover_border:         \"transparent\",\n  // color_dark_active_border:        \"transparent\",\n  // color_dark_disabled_border:      \"transparent\"\n};","import { mixin } from \"polythene-css\";\n\nexport default (selector) => [{\n  [selector]: {\n    userSelect: \"none\",\n    outline: \"none\",\n    padding: 0,\n    textDecoration: \"none\",\n    textAlign: \"center\",\n    cursor: \"pointer\",\n\n    \".pe-button--selected, &.pe-button--disabled, &.pe-button--inactive\": {\n      cursor: \"default\",\n      pointerEvents: \"none\"\n    },\n\n    \".pe-button--focus\": {\n      \" .pe-button__focus\": {\n        opacity: 1\n      }\n    },\n\n    \" .pe-button__content\": {\n      position: \"relative\",\n      borderRadius: \"inherit\"\n    },\n\n    \" .pe-button__label\": [\n      mixin.fontSmoothing(),\n      {\n        position: \"relative\",\n        display: \"block\",\n        borderRadius: \"inherit\",\n        pointerEvents: \"none\"\n      }\n    ],\n\n    \" .pe-button__wash, .pe-button__focus\": [\n      mixin.defaultTransition(\"background-color\"),\n      mixin.fit(),\n      {\n        borderRadius: \"inherit\",\n        pointerEvents: \"none\"\n      }\n    ],\n\n    \" .pe-button__focus\": {\n      opacity: 0\n    },\n\n    \" .pe-button__wash\": {\n      zIndex: 0\n    }\n  }\n}];\n\n","import { mixin } from \"polythene-css\";\n\nexport default (selector, componentVars) => [{\n  [selector]: [\n    {\n      display: \"inline-block\",\n      minWidth: componentVars.min_width + \"px\",\n      margin: \"0 \" + componentVars.margin_h + \"px\",\n      padding: componentVars.outer_padding_v + \"px 0\",\n      background: \"transparent\",\n      border: \"none\",\n\n      \" .pe-button__content\": {\n        position: \"relative\",\n        borderWidth: 0,\n        padding: \"0 \" + componentVars.padding_h + \"px\",\n        borderRadius: componentVars.border_radius + \"px\"\n      },\n\n      \" .pe-button__label\": {\n        padding: componentVars.padding_v + \"px 0\",\n        fontSize: componentVars.font_size + \"px\",\n        lineHeight: componentVars.font_size + \"px\",\n        fontWeight: componentVars.font_weight,\n        textTransform: componentVars.text_transform,\n        whiteSpace: \"pre\"\n      },\n\n      \".pe-button--borders\": {\n        \" .pe-button__wash, pe-button__focus, .pe-ripple\": mixin.fit(-1),\n\n        \" .pe-button__content\": {\n          borderStyle: \"solid\",\n          borderWidth: \"1px\"\n        },\n        \" .pe-button__label\": {\n          padding: (componentVars.padding_v - 1) + \"px 0\",\n        }\n      }\n    }\n  ]\n}];\n","const style = (scopes, selector, componentVars, tint) => {\n  const normalBorder   = componentVars[\"color_\" + tint + \"_border\"]          || \"transparent\";\n  const activeBorder   = componentVars[\"color_\" + tint + \"_active_border\"]   || normalBorder;\n  const disabledBorder = componentVars[\"color_\" + tint + \"_disabled_border\"] || normalBorder;\n  return [{\n    [scopes.map(s => s + selector).join(\",\")]: {\n      \"&, &:link, &:visited\": {\n        color: componentVars[\"color_\" + tint + \"_text\"]\n      },\n\n      \" .pe-button__content\": {\n        backgroundColor: componentVars[\"color_\" + tint + \"_background\"],\n        borderColor: normalBorder\n      },\n\n      \".pe-button--disabled\": {\n        color: componentVars[\"color_\" + tint + \"_disabled_text\"],\n\n        \" .pe-button__content\": {\n          backgroundColor: componentVars[\"color_\" + tint + \"_disabled_background\"],\n          borderColor: disabledBorder\n        }\n      },\n\n      \".pe-button--selected\": {\n        \" .pe-button__content\": {\n          backgroundColor: componentVars[\"color_\" + tint + \"_active_background\"],\n          borderColor: activeBorder\n        },\n        \" .pe-button__focus\": {\n          opacity: 1,\n          backgroundColor: componentVars[\"color_\" + tint + \"_focus_background\"]\n        }\n      },\n\n      \".pe-button--focus\": {\n        \" .pe-button__focus\": {\n          opacity: 1,\n          backgroundColor: componentVars[\"color_\" + tint + \"_focus_background\"]\n        }\n      }\n    }\n  }];\n};\n\nconst noTouchStyle = (scopes, selector, componentVars, tint) => {\n  const normalBorder = componentVars[\"color_\" + tint + \"_border\"] || \"transparent\";\n  const hoverBorder  = componentVars[\"color_\" + tint + \"_border\"] || normalBorder;\n  return [{\n    [scopes.map(s => s + selector + \":hover\").join(\",\")]: {\n      \":not(.pe-button--selected):not(.pe-button--inactive) .pe-button__wash\": {\n        backgroundColor: componentVars[\"color_\" + tint + \"_hover_background\"],\n        borderColor: hoverBorder\n      }\n    }\n  }];\n};\n\nexport default (selector, componentVars) => [\n  style([\".pe-dark-tone\", \".pe-dark-tone \"], selector, componentVars, \"dark\"), // has/inside dark theme\n  style([\"\", \".pe-light-tone\", \".pe-light-tone \"], selector, componentVars, \"light\"), // normal, has/inside light theme\n  noTouchStyle([\"html.pe-no-touch .pe-dark-tone \"], selector, componentVars, \"dark\"), // inside dark theme\n  noTouchStyle([\"html.pe-no-touch \", \"html.pe-no-touch .pe-light-tone \"], selector, componentVars, \"light\"),\n];\n\n","import { styler } from \"polythene-css\";\nimport classes from \"../classes\";\nimport vars from \"./vars\";\nimport baseLayout from \"./base\";\nimport layout from \"./layout\";\nimport color from \"./color\";\n\nconst fns = [layout, color];\nconst baseSelector = `.${classes.base}`;\nconst selector = `.${classes.component.replace(/ /g, \".\")}`;\n\nexport const customTheme = (customSelector, customVars) => \n  styler.generateStyles([customSelector, selector], {...vars, ...customVars}, fns);\n\nstyler.generateStyles([baseSelector], vars, [baseLayout]);\nstyler.generateStyles([selector], vars, fns);","import m from \"mithril\";\nimport ripple from \"polythene-ripple\";\nimport { filterSupportedAttributes } from \"polythene-core\";\nimport { customTheme } from \"./theme\";\nimport classes from \"./classes\";\n\nconst inactivate = (state, attrs) => {\n  state.inactive = true;\n  m.redraw();\n  setTimeout(() => {\n    state.inactive = false;\n    m.redraw();\n  }, attrs.inactivate * 1000);\n};\n\nconst view = vnode => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const noink = (attrs.ink !== undefined && attrs.ink === false);\n  const disabled = attrs.disabled;\n  const element = attrs.element || \"a\";\n  const inactive = attrs.inactive || state.inactive;\n  const tabIndex = disabled || inactive\n    ? -1\n    : attrs.tabindex || 0;\n  const onClickHandler = attrs.events && attrs.events.onclick;\n  const props = Object.assign(\n    {}, \n    filterSupportedAttributes(attrs, { add: [\"formaction\", \"type\"] }),\n    {\n      class: [\n        attrs.parentClass || classes.component,\n        attrs.selected ? classes.selected : null,\n        disabled ? classes.disabled : null,\n        inactive ? classes.inactive : null,\n        attrs.borders ? classes.borders : null,\n        state.focus ? classes.focused : null,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.class\n      ].join(\" \")\n    },\n    inactive ? null : {\n      tabIndex,\n      // handle focus events\n      onfocus: () => state.focus = !state.mouseover,\n      onblur: () => state.focus = false,\n      // don't show focus on click (detected by not being in mouse over state)\n      onmouseover: () => state.mouseover = true,\n      onmouseout: () => state.mouseover = false,\n      // if focus, dispatch click event on ENTER\n      onkeydown: e => {\n        if (e.which === 13 && state.focus) {\n          state.focus = false;\n          if (onClickHandler) {\n            onClickHandler(e);\n          }\n        }\n      },\n      onclick: inactive || disabled\n        ? null\n        : () => {\n          if (attrs.inactivate) {\n            inactivate(state, attrs);\n          }\n        }\n    },\n    attrs.style ? { style: {}} : null,\n    attrs.events,\n    attrs.url,\n    disabled ? { disabled: true } : null\n  );\n  const children = attrs.children || vnode.children;\n  const label = attrs.content\n    ? attrs.content\n    : attrs.label\n      ? typeof attrs.label === \"object\"\n        ? attrs.label\n        : m(\"div\", {class: classes.label}, attrs.label)\n      : children && children[0]\n        ? children\n        : null;\n  const noWash = disabled || (attrs.wash !== undefined && !attrs.wash);\n  const content = label\n    ? m(\"div\", {\n      class: classes.content,\n      style: attrs.style || {}\n    }, [\n      !disabled && attrs.shadowComponent // \"protected\" option, used by raised-button\n        ? attrs.shadowComponent\n        : null,\n      // ripple\n      disabled || noink\n        ? null\n        : m(ripple, {\n          ...attrs.ripple,\n          getTarget: () => vnode.dom\n        }),\n      // hover\n      noWash ? null : m(\"div\", {class: classes.wash}),\n      // focus\n      disabled ? null : m(\"div\", {class: classes.focus}),\n      label\n    ])\n    : null;\n  return m(element, props, [attrs.before, content, attrs.after]);\n};\n\nexport default {\n  theme: customTheme, // accepts (selector, vars)\n  oninit: vnode => {\n    vnode.state = Object.assign(\n      vnode.state, \n      {\n        focus: false,\n        mouseover: false,\n        inactive: false\n      }\n    );\n  },\n  view\n};\n"],"names":["baseClass","rgba","vars","touch_height","unit_touch_height","grid_unit","unit_item_border_radius","grid_unit_component","color_light_foreground","blend_light_text_primary","blend_light_background_hover","blend_light_background_active","blend_light_text_disabled","color_dark_foreground","blend_dark_text_primary","blend_dark_background_hover","blend_dark_background_active","blend_dark_text_disabled","selector","mixin","fontSmoothing","defaultTransition","fit","componentVars","min_width","margin_h","outer_padding_v","padding_h","border_radius","padding_v","font_size","font_weight","text_transform","style","scopes","tint","normalBorder","activeBorder","disabledBorder","map","s","join","noTouchStyle","hoverBorder","fns","layout","color","baseSelector","classes","base","component","replace","customTheme","customSelector","customVars","styler","generateStyles","baseLayout","inactivate","state","attrs","inactive","redraw","view","vnode","noink","undefined","ink","disabled","element","tabIndex","tabindex","onClickHandler","events","onclick","props","_extends","filterSupportedAttributes","add","parentClass","selected","borders","focus","focused","tone","class","mouseover","e","which","url","children","label","content","_typeof","m","noWash","wash","shadowComponent","ripple","dom","before","after"],"mappings":"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"}