{"version":3,"file":"polythene-switch-button.js","sources":["../src/control-view.js","../src/theme/vars.js","../src/theme/layout.js","../src/theme/color.js","../src/theme/index.js","../src/switch-button.js"],"sourcesContent":["import m from \"mithril\";\nimport shadow from \"polythene-shadow\";\nimport iconButton from \"polythene-icon-button\";\n\nexport const classes = {\n  track:  \"pe-switch-control__track\",\n  thumb:  \"pe-switch-control__thumb\",\n  knob:   \"pe-switch-control__knob\"\n};\n\nexport const controlView = (checked, attrs) => {\n  const zOff = attrs.zOff !== undefined ? attrs.zOff : 1;\n  const zOn = attrs.zOn !== undefined ? attrs.zOn : 2;\n  const z = checked ? zOn : zOff;\n  const raised = attrs.disabled\n    ? false\n    : attrs.raised !== undefined ? attrs.raised : true;\n  return [\n    m(\"div\", {\n      class: classes.track\n    }),\n    m(iconButton, Object.assign(\n      {},\n      {\n        class: classes.thumb,\n        content: [\n          m(\"div\", {\n            class: classes.knob\n          }, [\n            attrs.icon ? attrs.icon : null,\n            raised\n              ? m(shadow, {\n                z: z,\n                animated: true\n              })\n              : null\n          ])\n        ],\n        style: attrs.style,\n        disabled: attrs.disabled,\n        events: attrs.events,\n        ink: attrs.ink || false\n      },\n      attrs.selectable !== undefined\n        ? { inactive: !attrs.selectable(checked) }\n        : null,\n      attrs.iconButton\n    ))\n  ];\n};\n","import { vars } from \"polythene-theme\";\nimport { vars as selectionControlVars } from \"polythene-selection-control\";\nimport { vars as iconButtonVars } from \"polythene-icon-button\";\n\nconst rgba = vars.rgba;\nconst hit_area_padding = (vars.grid_unit_icon_button - vars.unit_icon_size) / 2; // 12\n\nexport default Object.assign(\n  {},\n  selectionControlVars,\n  {\n    track_height:                       14,\n    track_length:                       36,\n    thumb_size:                         20,\n    padding:                            vars.grid_unit_component,\n    icon_button_padding:                iconButtonVars.padding,\n    hit_area_padding,\n\n    animation_duration:                 vars.animation_duration,\n\n    color_light_thumb_on:               rgba(vars.color_primary),\n    color_light_thumb_off:              \"#f1f1f1\",\n    color_light_thumb_disabled:         \"#bdbdbd\",\n\n    color_light_track_on:               rgba(vars.color_primary_faded),\n    color_light_track_on_opacity:       .55,\n    color_light_track_off:              rgba(vars.color_light_foreground, vars.blend_light_text_regular),\n    color_light_track_off_opacity:      .55,\n    color_light_track_disabled:         rgba(vars.color_light_foreground, vars.blend_light_background_disabled),\n    color_light_track_disabled_opacity: 1,\n\n    // icon color may be set in theme; default \"currentcolor\"\n    // color_light_icon_on:                   \"currentcolor\",\n    // color_light_icon_off:                  \"currentcolor\",\n\n    // color_light_focus_on and so on taken from selectionControlVars\n\n    color_dark_thumb_on:                rgba(vars.color_primary), // or \"#80cbc4\"\n    color_dark_thumb_off:               \"#bdbdbd\",\n    color_dark_thumb_disabled:          \"#555\",\n\n    color_dark_track_on:                rgba(vars.color_primary_faded, vars.blend_dark_text_tertiary), // or \"#5a7f7c\"\n    color_dark_track_on_opacity:        9,\n    color_dark_track_off:               \"#717171\",\n    color_dark_track_off_opacity:       .55,\n    color_dark_track_disabled:          \"#717171\",\n    color_dark_track_disabled_opacity:  .3,\n\n    // icon color may be set in theme; default \"currentcolor\"\n    // color_dark_icon_on:                    \"currentcolor\"\n    // color_dark_icon_off:                   \"currentcolor\"\n\n    // color_dark_focus_on and so on taken from selectionControlVars\n  }\n);\n","import { layout as selectionControlLayout } from \"polythene-selection-control\";\nimport { vars } from \"polythene-theme\";\nimport { mixin } from \"polythene-css\";\n\nconst transition = (componentVars, properties, duration = componentVars.animation_duration) => [\n  mixin.defaultTransition(properties, duration, \"ease-out\")\n];\n\nconst customSize = (componentVars, size) => {\n  const factor = size / vars.unit_icon_size;\n  const thumbSize = Math.floor(0.5 * componentVars.thumb_size * factor) * 2; // round to even\n  const scaledTrackHeight = Math.floor(0.5 * componentVars.track_height * factor) * 2; // round to even\n  const scaledTrackWidth = Math.floor(0.5 * componentVars.track_length * factor) * 2;\n  const scaledThumbSize = Math.floor(0.5 * componentVars.thumb_size * factor) * 2;\n  const trackTop = ((componentVars.label_height * factor - scaledTrackHeight) / 2);\n  const thumbPadding = componentVars.icon_button_padding;\n  const thumbMargin = (size - scaledThumbSize) / 2;\n  const thumbOuterSize = size + 2 * thumbPadding;\n  const thumbOffsetMin = -(thumbOuterSize / 2) + (thumbSize / 2);\n  const thumbOffsetMax = thumbOffsetMin + scaledTrackWidth - thumbSize;\n  const thumbOffsetY = thumbOffsetMin + thumbMargin;\n  const trackVisualOffset = 0.3; // prevent sub pixel of track to shine through knob border\n\n  return {\n    \" .pe-control__form-label\": {\n      height: size + \"px\",\n      minWidth: scaledTrackWidth + \"px\",\n    },\n    \" .pe-control__label\": {\n      paddingLeft: (componentVars.padding * factor + 8 + scaledTrackWidth) + \"px\"\n    },\n    \" .pe-switch-control__track\": {\n      left: trackVisualOffset + \"px\",\n      height: scaledTrackHeight + \"px\",\n      width: (scaledTrackWidth - 2 * trackVisualOffset) + \"px\",\n      top: trackTop + \"px\",\n      borderRadius: scaledTrackHeight + \"px\"\n    },\n    \" .pe-switch-control__thumb\": {\n      top: thumbOffsetY + \"px\",\n      left: thumbOffsetMin + \"px\"\n    },\n\n    \" .pe-switch-control__knob\": {\n      width: scaledThumbSize + \"px\",\n      height: scaledThumbSize + \"px\",\n      margin: thumbMargin + \"px\"\n    },\n\n    \" .pe-button__content\": {\n      padding: thumbPadding + \"px\"\n    },\n\n    \".pe-control--on\": {\n      \" .pe-switch-control__thumb\": {\n        left: thumbOffsetMax + \"px\"\n      }\n    }\n  };\n};\n\nexport default (selector, componentVars) =>\n  selectionControlLayout(selector, componentVars, \"checkbox\").concat(\n    [{\n      [selector]: {\n        \" .pe-switch-control__track\": [\n          transition(componentVars, \"background, opacity\"),\n          {\n            position: \"absolute\",\n            left: 0\n          }\n        ],\n\n        \" .pe-switch-control__thumb\": [\n          transition(componentVars, \"left, color\"),\n          {\n            position: \"absolute\",\n            zIndex: 1, // Prevents flickering of text label when toggling\n            color: \"inherit\",\n\n            \":focus\": {\n              outline: 0\n            }\n          }\n        ],\n\n        \" .pe-switch-control__knob\": {\n          position: \"relative\",\n          borderRadius: \"50%\"\n        },\n\n        \" .pe-button__content .pe-switch-control__knob .pe-icon\": [\n          mixin.fit(),\n          transition(componentVars, \"color\"),\n          {\n            width: \"100%\",\n            height: \"100%\"\n          }\n        ],\n\n        \" .pe-button__focus\": [\n          transition(componentVars, \"all\")\n        ],\n\n        \".pe-control--small\":   customSize(componentVars, vars.unit_icon_size_small),\n        \".pe-control--regular\": customSize(componentVars, vars.unit_icon_size),\n        \".pe-control--medium\":  customSize(componentVars, vars.unit_icon_size_medium),\n        \".pe-control--large\":   customSize(componentVars, vars.unit_icon_size_large)\n      }\n    }]\n  );\n\n","import { color as selectionControlColor } from \"polythene-selection-control\";\n\nconst style = (scope, selector, componentVars, tint) => [{\n  [scope + selector]: {\n    \".pe-control--off\": {\n      \" .pe-switch-control__track\": {\n        opacity: componentVars[\"color_\" + tint + \"_track_off_opacity\"],\n        backgroundColor: componentVars[\"color_\" + tint + \"_track_off\"]\n      },\n      \" .pe-switch-control__thumb\": {\n        color: componentVars[\"color_\" + tint + \"_thumb_off\"]\n      },\n      \" .pe-switch-control__knob\": {\n        backgroundColor: \"currentcolor\"\n      },\n      \" .pe-button--focus\": {\n        \" .pe-button__focus\": {\n          opacity: componentVars[\"color_\" + tint + \"_focus_off_opacity\"],\n          backgroundColor: componentVars[\"color_\" + tint + \"_focus_off\"]\n        }\n      },\n      \" .pe-icon\": {\n        color: componentVars[\"color_\" + tint + \"_icon_off\"] || \"currentcolor\"\n      }\n    },\n\n    \".pe-control--on\": {\n      \" .pe-switch-control__track\": {\n        opacity: componentVars[\"color_\" + tint + \"_track_on_opacity\"],\n        backgroundColor: componentVars[\"color_\" + tint + \"_track_on\"]\n      },\n      \" .pe-switch-control__thumb\": {\n        color: componentVars[\"color_\" + tint + \"_thumb_on\"]\n      },\n      \" .pe-switch-control__knob\": {\n        backgroundColor: \"currentcolor\"\n      },\n      \" .pe-button--focus\": {\n        \" .pe-button__focus\": {\n          opacity: componentVars[\"color_\" + tint + \"_focus_on_opacity\"],\n          backgroundColor: componentVars[\"color_\" + tint + \"_focus_on\"]\n        }\n      },\n      \" .pe-icon\": {\n        color: componentVars[\"color_\" + tint + \"_icon_on\"] || \"currentcolor\"\n      }\n    },\n\n    \".pe-control--on.pe-control--disabled, &.pe-control--off.pe-control--disabled\": {\n      \" .pe-switch-control__track\": {\n        opacity: componentVars[\"color_\" + tint + \"_track_disabled_opacity\"],\n        backgroundColor: componentVars[\"color_\" + tint + \"_track_disabled\"]\n      },\n      \" .pe-switch-control__thumb\": {\n        color: componentVars[\"color_\" + tint + \"_thumb_disabled\"]\n      },\n    },\n  }\n}];\n\nexport default (selector, componentVars) =>\n  [selectionControlColor(selector, componentVars)].concat(\n    [\n      style(\"\",                selector, componentVars, \"light\"),\n      style(\".pe-dark-theme \", selector, componentVars, \"dark\" ) // inside dark theme\n    ]\n  );\n","import { styler } from \"polythene-css\";\nimport vars from \"./vars\";\nimport layout from \"./layout\";\nimport color from \"./color\";\n\nconst fns = [layout, color];\nconst selector = \".pe-control.pe-switch-control\";\n\nexport const customTheme = (customSelector, customVars) => \n  styler.generateStyles([customSelector, selector], {...vars, ...customVars}, fns);\n\nstyler.generateStyles([selector], vars, fns);\n","import m from \"mithril\";\nimport { selectionControl } from \"polythene-selection-control\";\nimport { controlView } from \"./control-view\";\nimport { customTheme } from \"./theme\";\n\nexport const classes = {\n  component: \"pe-switch-control\"\n};\n\nconst view = vnode => {\n  return m(selectionControl, {\n    ...vnode.attrs,\n    controlView,\n    selectable: vnode.attrs.selectable || (() => true), // default: always selectable, regardless the checked state\n    defaultClass: classes.component,\n    type: \"checkbox\"\n  });\n};\n\nexport default {\n  theme: customTheme, // accepts (selector, vars)\n  view\n};\n"],"names":["classes","controlView","checked","attrs","zOff","undefined","zOn","z","raised","disabled","m","track","iconButton","_extends","thumb","knob","icon","shadow","style","events","ink","selectable","inactive","rgba","vars","hit_area_padding","grid_unit_icon_button","unit_icon_size","selectionControlVars","grid_unit_component","iconButtonVars","padding","animation_duration","color_primary","color_primary_faded","color_light_foreground","blend_light_text_regular","blend_light_background_disabled","blend_dark_text_tertiary","transition","componentVars","properties","duration","mixin","defaultTransition","customSize","size","factor","thumbSize","Math","floor","thumb_size","scaledTrackHeight","track_height","scaledTrackWidth","track_length","scaledThumbSize","trackTop","label_height","thumbPadding","icon_button_padding","thumbMargin","thumbOuterSize","thumbOffsetMin","thumbOffsetMax","thumbOffsetY","trackVisualOffset","selector","selectionControlLayout","concat","fit","unit_icon_size_small","unit_icon_size_medium","unit_icon_size_large","scope","tint","selectionControlColor","fns","layout","color","customTheme","customSelector","customVars","styler","generateStyles","view","selectionControl","vnode","component"],"mappings":"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"}