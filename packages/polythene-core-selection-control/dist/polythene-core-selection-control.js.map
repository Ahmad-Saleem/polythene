{"version":3,"file":"polythene-core-selection-control.js","sources":["../src/classes.js","../src/selection-control.js","../src/view-control.js","../src/theme/vars.js","../src/theme/layout.js","../src/theme/color.js"],"sourcesContent":["\nexport default {\n  component: \"pe-control\",\n\n  // elements\n  formLabel: \"pe-control__form-label\",\n  input:     \"pe-control__input\",\n  label:     \"pe-control__label\",\n\n  // states\n  disabled:  \"pe-control--disabled\",\n  inactive:  \"pe-control--inactive\",\n  large:     \"pe-control--large\",\n  medium:    \"pe-control--medium\",\n  off:       \"pe-control--off\",\n  on:        \"pe-control--on\",\n  regular:   \"pe-control--regular\",\n  small:     \"pe-control--small\",\n\n  // control view elements\n  box:       \"pe-control__box\",\n  button:    \"pe-control__button\",\n\n  // control view states\n  buttonOff: \"pe-control__button--off\",\n  buttonOn:  \"pe-control__button--on\",\n};\n","import { filterSupportedAttributes } from \"polythene-core\";\n// Does not export theme\nimport classes from \"./classes\";\n\nexport const getElement = vnode =>\n  vnode.attrs.element || \"div\";\n\nexport const getInitialState = (vnode, createStream) => {\n  const attrs = vnode.attrs;\n\n  const defaultChecked = attrs.checked !== undefined\n    ? !!attrs.checked\n    : !!attrs.defaultChecked || false;\n\n  const checked = createStream(defaultChecked);\n  const redrawOnChange = createStream(defaultChecked);\n\n  const toggle = () => {\n    const oldChecked = attrs.checked !== undefined\n      ? attrs.checked\n      : checked();\n    checked(!oldChecked);\n    redrawOnChange(!oldChecked);\n  };\n\n  const onChange = attrs.onChange !== undefined\n    ? e => (\n        toggle(),\n        attrs.onChange({\n          event: e,\n          checked: checked(),\n          value: attrs.value\n        })\n      )\n    : () => toggle();\n\n  return {\n    checked,\n    onChange,\n    redrawOnUpdate: createStream.merge([redrawOnChange])\n  };\n};\n\nconst sizeClasses = {\n  small:   classes.small,\n  regular: classes.regular,\n  medium:  classes.medium,\n  large:   classes.large\n};\n\nconst classForSize = (size = \"regular\") => sizeClasses[size];\n\nconst currentState = (attrs, state) => {\n  const checked = attrs.checked !== undefined\n    ? attrs.checked\n    : state.checked();\n  const selectable = attrs.selectable !== undefined\n    ? attrs.selectable(checked)\n    : false;\n  const inactive = attrs.disabled || !selectable;\n  return { checked, inactive };\n};\n\nexport const createProps = (vnode, { keys: k }) => {\n  const attrs = vnode.attrs;\n  const state = vnode.state;\n  const { checked, inactive } = currentState(attrs, state);\n  return Object.assign(\n    {},\n    filterSupportedAttributes(attrs),\n    {\n      className: [\n        classes.component,\n        attrs.instanceClass, // for instance pe-checkbox-control\n        checked ? classes.on : classes.off,\n        attrs.disabled ? classes.disabled : null,\n        inactive ? classes.inactive : null,\n        classForSize(attrs.size),\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \")\n    },\n    attrs.events\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, keys: k, ViewControl }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const { checked, inactive } = currentState(attrs, state);\n  return h(\"label\",\n    { className: classes.formLabel },\n    [\n      h(ViewControl, Object.assign(\n        {},\n        attrs,\n        {\n          inactive,\n          checked,\n          onChange: state.onChange,\n          key: \"control\"\n        }\n      )),\n      attrs.label\n        ? h(`.${classes.label}`,\n            Object.assign(\n              {},\n              {\n                key: \"label\"\n              },\n              inactive\n                ? null\n                : { [k.onclick]: state.onChange }\n            ),\n            attrs.label\n          )\n        : null\n    ]\n  );\n};\n","import classes from \"./classes\";\n\nexport const element = `.${classes.box}`;\n\nconst createIcon = (h, iconType, attrs, className) => (\n  // if attrs.iconOn/attrs.iconOff is passed, use that icon options object and ignore size\n  // otherwise create a new object\n  Object.assign(\n    {},\n    {\n      className,\n      key: iconType\n    },\n    attrs[iconType]\n      ? attrs[iconType]\n      : { svg: h.trust(attrs.icons[iconType]) },\n    attrs.icon,\n    attrs.size\n      ? { size: attrs.size }\n      : null\n  )\n);\n\nexport const createContent = (vnode, { renderer: h, keys: k, Icon, IconButton }) => {\n  const attrs = vnode.attrs;\n  return h(IconButton, Object.assign(\n    {},\n    {\n      element: \"div\",\n      key: attrs.key,\n      className: classes.button,\n      content: [\n        { iconType: \"iconOn\", className: classes.buttonOn},\n        { iconType: \"iconOff\", className: classes.buttonOff}\n      ].map(o =>\n        h(Icon, createIcon(h, o.iconType, attrs, o.className))\n      ),\n      ripple: { center: true },\n      disabled: attrs.disabled,\n      events: { [k.onclick]: attrs.onChange },\n      inactive: attrs.inactive\n    },\n    attrs.iconButton // for example for hover behaviour\n  ));\n};\n","import { vars } from \"polythene-theme\";\n\nconst rgba = vars.rgba;\n\nexport default {\n  label_font_size:                     2 * vars.grid_unit_component, // 16\n  label_height:                        3 * vars.grid_unit_component, // 24\n  label_padding_before:                vars.grid_unit * 4, // 16\n  label_padding_after:                 0,\n  button_size:                         6 * vars.grid_unit_component,\n  icon_size:                           3 * vars.grid_unit_component,\n  animation_duration:                  vars.animation_duration,\n\n  color_light_on:                      vars.rgba(vars.color_primary),\n  color_light_off:                     rgba(vars.color_light_foreground, vars.blend_light_text_secondary),\n  color_light_label:                   rgba(vars.color_light_foreground, vars.blend_light_text_secondary),\n  color_light_disabled:                rgba(vars.color_light_foreground, vars.blend_light_text_disabled),\n  color_light_thumb_off_focus_opacity: .08,\n  color_light_thumb_on_focus_opacity:  .11,\n\n  // icon colors may be set in theme; set to \"inherit\" by default\n  // color_light_on_icon\n  // color_light_off_icon\n\n  // label on/off colors may be set in theme; set to color_light_label by default\n  // color_light_on_label\n  // color_light_off_label\n\n  color_light_focus_on:                rgba(vars.color_primary),\n  color_light_focus_on_opacity:        .11,\n  color_light_focus_off:                rgba(vars.color_light_foreground),\n  color_light_focus_off_opacity:       .07,\n\n  color_dark_on:                       vars.rgba(vars.color_primary),\n  color_dark_off:                      rgba(vars.color_dark_foreground, vars.blend_dark_text_secondary),\n  color_dark_label:                    rgba(vars.color_dark_foreground, vars.blend_dark_text_secondary),\n  color_dark_disabled:                 rgba(vars.color_dark_foreground, vars.blend_dark_text_disabled),\n  color_dark_thumb_off_focus_opacity:  .08,\n  color_dark_thumb_on_focus_opacity:   .11,\n\n  // icon color may be set in theme; set to \"inherit\" by default\n  // color_dark_on_icon\n  // color_dark_off_icon\n  \n  // label on/off colors may be set in theme; set to color_dark_label by default\n  // color_dark_on_label\n  // color_dark_off_label\n\n  color_dark_focus_on:                 rgba(vars.color_primary), // or '#80cbc4'\n  color_dark_focus_on_opacity:         .14,\n  color_dark_focus_off:                rgba(vars.color_dark_foreground),\n  color_dark_focus_off_opacity:        .09\n};\n","// Returns a style function to be used by checkbox and radio-button\n\nimport { mixin, flex } from \"polythene-core-css\";\nimport { vars } from \"polythene-theme\";\n\nconst makeSize = (componentVars, height, iconSize = vars.unit_icon_size) => {\n  const labelSize = iconSize + componentVars.label_height;\n  const iconOffset = (labelSize - iconSize) / 2;\n  return {\n    \" .pe-control__form-label\": {\n      height: height + \"px\"\n    },\n    \" .pe-control__box\": {\n      width: iconSize + \"px\",\n      height: iconSize + \"px\"\n    },\n    \" .pe-button__content\": {\n      width: labelSize + \"px\",\n      height: labelSize + \"px\",\n\n      \" .pe-icon\": [\n        mixin.fit(iconOffset)\n      ]\n    }\n  };\n};\n\nconst activeButton = () => ({\n  opacity: 1,\n  zIndex: 1\n});\n\nconst inactiveButton = () => ({\n  opacity: 0,\n  zIndex: 0\n});\n\nexport default (selector, componentVars) => [{\n  [selector]: {\n    display: \"inline-block\",\n    boxSizing: \"border-box\",\n    margin: 0,\n    padding: 0,\n\n    \" .pe-control__form-label\": [\n      flex.layoutHorizontal,\n      flex.layoutCenter,\n      {\n        position: \"relative\",\n        cursor: \"pointer\",\n        fontSize: componentVars.label_font_size + \"px\",\n        lineHeight: componentVars.label_height + \"px\",\n        margin: 0,\n        color: \"inherit\",\n\n        \":focus\": {\n          outline: 0\n        },\n      }\n    ],\n\n    \".pe-control--inactive\": {\n      \" .pe-control__form-label\": {\n        cursor: \"default\"\n      }\n    },\n\n    \" .pe-control__box\": {\n      position: \"relative\",\n      display: \"inline-block\",\n      boxSizing: \"border-box\",\n      width: componentVars.label_height + \"px\",\n      height: componentVars.label_height + \"px\",\n      color: \"inherit\",\n\n      \":focus\": {\n        outline: 0,\n      }\n    },\n\n    \" .pe-button.pe-control__button\": [\n      mixin.defaultTransition(\"opacity\", componentVars.animation_duration),\n      {\n        position: \"absolute\",\n        left: -((componentVars.button_size - componentVars.icon_size) / 2) + \"px\",\n        top: -((componentVars.button_size - componentVars.icon_size) / 2) + \"px\",\n        zIndex: 1\n      }\n    ],\n\n    \".pe-control--off\": {\n      \" .pe-control__button--on\": inactiveButton(),\n      \" .pe-control__button--off\": activeButton()\n    },\n\n    \".pe-control--on\": {\n      \" .pe-control__button--on\": activeButton(),\n      \" .pe-control__button--off\": inactiveButton()\n    },\n\n    \" .pe-control__label\": [\n      mixin.defaultTransition(\"all\", componentVars.animation_duration),\n      {\n        paddingLeft: componentVars.label_padding_before + \"px\",\n        paddingRight: componentVars.label_padding_after + \"px\"\n      }\n    ],\n\n    \".pe-control--disabled\": {\n      \" .pe-control__form-label\": {\n        cursor: \"auto\"\n      },\n      \" .pe-control__button\": {\n        pointerEvents: \"none\"\n      }\n    },\n\n    \" .pe-button__content\": {\n      \" .pe-icon\": {\n        position: \"absolute\"\n      }\n    },\n\n    \".pe-control--small\":   makeSize(componentVars, vars.unit_icon_size_small, vars.unit_icon_size_small),\n    \".pe-control--regular\": makeSize(componentVars, componentVars.label_height, vars.unit_icon_size),\n    \".pe-control--medium\":  makeSize(componentVars, vars.unit_icon_size_medium, vars.unit_icon_size_medium),\n    \".pe-control--large\":   makeSize(componentVars, vars.unit_icon_size_large, vars.unit_icon_size_large)\n  }\n}];\n","\nconst style = (scopes, selector, componentVars, tint) => [{\n  [scopes.map(s => s + selector).join(\",\")]: {\n    color: componentVars[\"color_\" + tint + \"_on\"], // override by specifying \"color\"\n\n    \" .pe-control__label\": {\n      color: componentVars[\"color_\" + tint + \"_label\"]\n    },\n    \" .pe-control__box\": {\n      \" .pe-control__button\": {\n        color: \"inherit\",\n\n        \" .pe-control__button--on\": {\n          color: componentVars[\"color_\" + tint + \"_on_icon\"] ||  \"inherit\"\n        },\n\n        \" .pe-control__button--off\": {\n          color: componentVars[\"color_\" + tint + \"_off_icon\"] || componentVars[\"color_\" + tint + \"_off\"]\n        }\n      }\n    },\n    \".pe-control--off\": {\n      \" .pe-button--focus .pe-button__focus\": {\n        opacity: componentVars[\"color_\" + tint + \"_focus_off_opacity\"],\n        backgroundColor: componentVars[\"color_\" + tint + \"_focus_off\"]\n      },\n      \" .pe-control__label\": {\n        color: componentVars[\"color_\" + tint + \"_off_label\"] || componentVars[\"color_\" + tint + \"_label\"]\n      },\n    },\n    \".pe-control--on\": {\n      \" .pe-button--focus .pe-button__focus\": {\n        opacity: componentVars[\"color_\" + tint + \"_focus_on_opacity\"],\n        backgroundColor: componentVars[\"color_\" + tint + \"_focus_on\"]\n      },\n      \" .pe-control__label\": {\n        color: componentVars[\"color_\" + tint + \"_on_label\"] || componentVars[\"color_\" + tint + \"_label\"]\n      },\n    },\n\n    \".pe-control--disabled\": {\n      \" .pe-control__label\": {\n        color: componentVars[\"color_\" + tint + \"_disabled\"]\n      },\n      \" .pe-control__box\": {\n        \" .pe-control__button--on, .pe-control__button--off\": {\n          color: componentVars[\"color_\" + tint + \"_disabled\"]\n        }\n      }\n    }\n  }\n}];\n\nexport default (selector, componentVars) => [\n  style([\".pe-dark-tone\", \".pe-dark-tone \"], selector, componentVars, \"dark\"), // has/inside dark tone\n  style([\"\", \".pe-light-tone\", \".pe-light-tone \"], selector, componentVars, \"light\"), // normal, has/inside light tone\n];\n\n"],"names":["getElement","vnode","attrs","element","getInitialState","createStream","defaultChecked","undefined","checked","redrawOnChange","toggle","oldChecked","onChange","e","value","merge","sizeClasses","classes","small","regular","medium","large","classForSize","size","currentState","state","selectable","inactive","disabled","createProps","k","keys","_extends","filterSupportedAttributes","component","instanceClass","on","off","tone","className","class","join","events","createContent","h","renderer","ViewControl","formLabel","label","onclick","box","createIcon","iconType","svg","trust","icons","icon","Icon","IconButton","key","button","buttonOn","buttonOff","map","o","center","iconButton","rgba","vars","grid_unit_component","grid_unit","animation_duration","color_primary","color_light_foreground","blend_light_text_secondary","blend_light_text_disabled","color_dark_foreground","blend_dark_text_secondary","blend_dark_text_disabled","makeSize","componentVars","height","iconSize","unit_icon_size","labelSize","label_height","iconOffset","mixin","fit","selector","flex","layoutHorizontal","layoutCenter","label_font_size","defaultTransition","button_size","icon_size","label_padding_before","label_padding_after","unit_icon_size_small","unit_icon_size_medium","unit_icon_size_large","style","scopes","tint","s"],"mappings":"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"}