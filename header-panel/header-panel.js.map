{"version":3,"sources":["header-panel.es6"],"names":["require","_polythene","_events","_mithril","_toolbar","CSS_CLASSES","panel","header","dropShadow","outerContainer","headerContainer","backgroundContainer","condensedBackground","headerBackground","mediaDimmer","mainContainer","headerAnimated","fixed","cascaded","modeCover","modeScroll","modeSeamed","modeStandard","modeTall","modeWaterfallTall","modeWaterfall","toolbar","toolbarTopbar","headerTall","DEFAULT_SHADOW_HEIGTH","DEFAULT_HEADER_HEIGHT","DEFAULT_CONDENSED_HEADER_HEIGHT","SCROLL_WATCH_TIMER","scroller","scrollPositions","modeConfigs","shadowAfterScroll","waterfall","waterfall-tall","alwaysShadow","standard","tall","noShadow","seamed","cover","scroll","tallMode","outerScroll","modeClasses","classForMode","mode","arguments","length","undefined","setTransform","document","documentElement","style","transform","string","webkitTransform","translateY","y","t","createHeaderComponent","opts","tallClass","toolbarOpts","join","topBar","_mithril2","component","_toolbar2","content","class","animated","createViewHeader","ctrl","initHeaderContainer","inited","headerContainerElem","Object","assign","headerConfig","config","shadow","createViewContent","scrollConfig","initMainContainer","main","scrollerElem","onscroll","e","_events2","emit","storeScrollPosition","target","scrollTop","createView","configs","init","updateContentOnScroll","ignoreContent","isScrolling","scrollerType","handleScroll","bind","tag","initOuterContainer","headerElem","querySelector","topBarElem","headerBg","condensedHeaderBg","outerContainerElem","headerTopBarElem","setHeight","clientHeight","outer","restoreScrollPosition","props","id","el","headerPanelElem","subtree","before","after","controller","scrolled","prevScrollTop","headerMargin","headerHeight","condenses","scrollAwayTopbar","noReveal","keepCondensedHeader","noDissolve","backgroundScrollSpeed","shadowHeight","condensedHeaderHeight","handleScrollFns","isScrolled","showShadow","classList","dynamicHeader","sy","sTop","scrollInited","initialScrollPosition","Math","min","max","transformHeader","_polythene2","isTouch","enlargeImage","handleScrollFn","scrollWatchId","h","paddingTop","clearTimeout","setTimeout","condenseHeader","hy","reset","hbg","opacity","chbg","height","condensedHeight","abs","restoreScrollPositionId","restore","view"],"mappings":"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","file":"header-panel.js"}