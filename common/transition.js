"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _mithril=require("mithril");var _mithril2=_interopRequireDefault(_mithril);var SHOW_DURATION=200;var HIDE_DURATION=180;var SHOW_DELAY=10;var HIDE_DELAY=50;var TRANSITION="both";var show=function show(opts){return transition(opts,"show")};var hide=function hide(opts){return transition(opts,"hide")};var getDuration=function getDuration(opts,state){var transition=opts.transition||TRANSITION;if(transition==="none"){return 0}else if(transition==="show"&&state==="hide"){return 0}else if(transition==="hide"&&state==="show"){return 0}else{return state==="show"?opts.showDuration!==undefined?opts.showDuration:SHOW_DURATION:opts.hideDuration!==undefined?opts.hideDuration:HIDE_DURATION}return 0};var getDelay=function getDelay(opts,state){var transition=opts.transition||TRANSITION;if(transition==="none"){return 0}else if(transition==="show"&&state==="hide"){return 0}else if(transition==="hide"&&state==="show"){return 0}else{return state==="show"?opts.showDelay!==undefined?opts.showDelay:SHOW_DELAY:opts.hideDelay!==undefined?opts.hideDelay:HIDE_DELAY}return 0};var transition=function transition(opts,state){var deferred=_mithril2["default"].deferred();var el=opts.el;var transitionDuration=getDuration(opts,state);var delay=getDelay(opts,state);var style=el.style;var beforeTransition=function beforeTransition(){if(opts.beforeShow&&state==="show"){style.transitionDuration="0ms";style.transitionDelay="0ms";opts.beforeShow()}};var applyTransition=function applyTransition(){style.transitionDuration=transitionDuration+"ms";style.transitionDelay=delay+"ms";if(opts.showClass){el.classList[state==="show"?"add":"remove"](opts.showClass)}if(opts.show&&state==="show"){opts.show()}if(opts.hide&&state==="hide"){opts.hide()}};var applyAfterTransition=function applyAfterTransition(){if(opts.afterHide&&state==="hide"){style.transitionDuration="0ms";style.transitionDelay="0ms";opts.afterHide()}};beforeTransition();setTimeout(function(){applyTransition();setTimeout(function(){applyAfterTransition();deferred.resolve()},transitionDuration+delay)},0);return deferred.promise};exports["default"]={show:show,hide:hide};module.exports=exports["default"];