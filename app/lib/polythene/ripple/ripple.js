define(["polythene/polythene/polythene","mithril","css!./ripple"],function(t,e){"use strict";var n,i,o,a,s;return n=.2,i=.36,o=function(t,n){var i,o,r,l,c;return n=n||{},n.disabled?e(""):(l=function(e,i,o){i||(t.ripple(e),a(e,t,n),o.onunload=function(){s(e)})},c=function(e,n){n||t.waves(e)},i=n.tag||"div[fit]",o={"class":["ripple",n.constrained!==!1?"constrained":null,n["class"]].join(" "),config:l},r=e(".ripple-mask",e(".ripple-waves",{config:c})),e(i,o,r))},a=function(t,e,n){t.addEventListener("mousedown",function(t){e.start(t,e,n)}),t.addEventListener("mouseup",function(t){e.stop(t,e,n)})},s=function(t){t.removeEventListener("mousedown"),t.removeEventListener("mouseup")},{controller:function(o){return o=o||{},{view:e.prop(),ripple:e.prop(),waves:e.prop(),delegate:e.prop(),start:function(e,o,a){var s,r,l,c,p,d,u,f,v,y,m,h,w,g,L,E,b,k;s=o.ripple(),r=o.waves(),r.classList.remove("animated"),y=s.offsetWidth,m=s.offsetHeight,h=Math.sqrt(y*y+m*m),r.style.width=r.style.height=h+"px",u=s.getBoundingClientRect(),a.center?(l=u.left+u.width/2,c=u.top+u.height/2):(l=e.clientX,c=e.clientY),f=u.top-document.body.scrollTop,v=u.left-document.body.scrollLeft,p=l-u.left-h/2,d=c-u.top-h/2,r.style.top=d+"px",r.style.left=p+"px",b=void 0!==a.initialOpacity?a.initialOpacity:n,k=void 0!==a.opacityDecayVelocity?a.opacityDecayVelocity:i,g=1/k*b,r.style["animation-duration"]=r.style["-webkit-animation-duration"]=r.style["-moz-animation-duration"]=r.style["-o-animation-duration"]=g+"s",L=window.getComputedStyle(s).color,r.style.backgroundColor=L,r.style.opacity=b,w=t.whichTransitionEvent(),E=function(t){r.classList.remove("animated"),r.removeEventListener(w,E,!1),a.end&&a.end(t)},r.addEventListener(w,E,!1),a.start&&a.start(e),r.classList.add("animated")},stop:function(){}}},view:function(t,e){var n;return e=e||{},n=t.view(),n&&e.cache?n:(n=o(t,e),e.cache&&t.view(n),n)}}});