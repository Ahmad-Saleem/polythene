!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core"),require("polythene-css-classes"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-css-classes","polythene-theme"],t):t(e.polythene={},e["polythene-core"],e["polythene-css-classes"],e["polythene-theme"])}(this,function(e,t,r,a){"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},n=function(e){var t=e.dispatcher,a=e.attrs,s=e.h,n=e.k,o=a.element||"div",i=a.content.map(t);return s("div",{key:a.key||"card-overlay",className:[r.cardClasses.overlay,a.sheet?r.cardClasses.overlaySheet:null,"light"===a.tone?null:"pe-dark-tone","light"===a.tone?"pe-light-tone":null].join(" ")},[s(o,{key:"content",className:[r.cardClasses.overlayContent,a.className||a[n.class]].join(" ")},i),s("div",{key:"dimmer",className:r.cardClasses.mediaDimmer})])},o=function(e){var t=e.attrs,a=e.h,s=e.k;return a(t.element||"div",{key:t.key||"card-text",className:[r.cardClasses.text,t.tight?r.cardClasses.textTight:null,t.className||t[s.class]].join(" ")},t.content)},i=function(e){var t=e.attrs,a=e.h,n=e.k,o=e.Icon;return a(e.ListTile,s({},t,{key:t.key||"card-header",className:[r.cardClasses.header,t.className||t[n.class]].join(" ")},t.icon?{front:a(o,t.icon)}:null))},l=function(e){return e.attrs.element||e.attrs.url?"a":"div"},c=function(e,a){var n=a.keys,o=e.attrs;return s({},t.filterSupportedAttributes(o),{className:[r.cardClasses.component,"dark"===o.tone?"pe-dark-tone":null,"light"===o.tone?"pe-light-tone":null,o.className||o[n.class]].join(" ")},o.url,o.events)},d=function(e,t){var a=t.renderer,l=t.keys,c=t.CardActions,d=t.CardMedia,_=t.CardPrimary,u=t.Icon,h=t.Shadow,g=t.ListTile,m=function e(t){var r=Object.keys(t)[0],h=s({},t[r],{dispatcher:e,key:r});switch(r){case"actions":return a(c,h);case"header":return i({dispatcher:e,attrs:h,h:a,k:l,Icon:u,ListTile:g});case"media":return a(d,h);case"overlay":return n({dispatcher:e,attrs:h,h:a,k:l});case"primary":return a(_,h);case"text":return o({dispatcher:e,attrs:h,h:a,k:l});default:throw'Content type "'+r+'" does not exist'}},p=e.attrs,v=Array.isArray(p.content)?p.content.map(m):p.content;return[a(h,{z:void 0!==p.z?p.z:1,animated:!0,key:"shadow"}),a("div",{className:r.cardClasses.content,key:"content"},v)]},_=Object.freeze({getElement:l,createProps:c,createContent:d}),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},h={horizontal:r.cardClasses.actionsHorizontal,vertical:r.cardClasses.actionsVertical,justified:r.cardClasses.actionsJustified},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"horizontal";return h[e]},m=function(e,a){var s=a.keys,n=e.attrs;return u({},t.filterSupportedAttributes(n),{key:"card-actions",className:[r.cardClasses.actions,g(n.layout),n.bordered?r.cardClasses.actionsBordered:null,n.tight?r.cardClasses.actionsTight:null,n.className||n[s.class]].join(" ")})},p=function(e){return e.attrs.content},v=Object.freeze({createProps:m,createContent:p}),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},f={landscape:16/9,square:1},b={small:r.cardClasses.mediaSmall,regular:r.cardClasses.mediaRegular,medium:r.cardClasses.mediaMedium,large:r.cardClasses.mediaLarge},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"regular";return b[e]},C=function(e){var t=e.dom,a=e.img,s=e.ratio,n=e.origin;a.onload=function(){var e=this.naturalWidth/this.naturalHeight,o=e<f[s]?r.cardClasses.mediaCropX:r.cardClasses.mediaCropY;a.className=o;var i=t.clientWidth,l=t.clientHeight;if(e<f[s])if("center"===n){var c=(l-i/e)/2;this.style.marginTop=c+"px"}else"start"===n?(this.style.top=0,this.style.bottom="auto"):(this.style.top="auto",this.style.bottom=0);else if("center"===n){var d=(i-l*e)/2;this.style.marginLeft=d+"px"}else"start"===n?(this.style.left=0,this.style.right="auto"):(this.style.left="auto",this.style.right=0)}},x=function(e){if(e.dom){var t=e.attrs,r=t.ratio||"landscape",a=t.origin||"center",s=e.dom,n=s.querySelector("img");C({dom:s,img:n,ratio:r,origin:a})}},j=function(e,a){var s=a.keys,n=e.attrs,o=n.ratio||"landscape";return y({},t.filterSupportedAttributes(n),{key:"card-media",className:[r.cardClasses.media,k(n.size),"landscape"===o?r.cardClasses.mediaRatioLandscape:r.cardClasses.mediaRatioSquare,n.className||n[s.class]].join(" ")})},N=function(e,t){var a=t.renderer,s=e.attrs,n=s.dispatcher;return[y({},s.content,{key:"content"}),s.overlay?n({overlay:s.overlay,key:"overlay"}):a("div",{className:r.cardClasses.mediaDimmer,key:"dimmer"})]},O=Object.freeze({onMount:x,createProps:j,createContent:N}),z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},A=function(e){var a=e.attrs,s=Array.isArray(a.content)?a.content.reduce(function(e,t){return"media"===Object.keys(t)[0]||e},!1):a.media||!1;return z({},t.filterSupportedAttributes(a),{key:"card-primary",className:[r.cardClasses.primary,a.tight?r.cardClasses.primaryTight:null,s?r.cardClasses.primaryHasMedia:null].join(" ")})},P=function(e,t){var a=t.renderer,s=e.attrs,n=s.dispatcher,o={title:function(e){return e.attrs||e.props?e||e.props:a("div",{className:r.cardClasses.title,key:"title"},[e.title,e.subtitle?a("div",{className:r.cardClasses.subtitle,key:"subtitle"},e.subtitle):null])},media:function(e){return a("div",{className:r.cardClasses.primaryMedia,key:"media"},n({media:e}))},actions:function(e){return n({actions:e})}};return Array.isArray(s.content)?s.content.map(function(e){var t=Object.keys(e)[0],r=e[t];return o[t]?o[t](r):e}):[s.title?o.title({title:s.title,subtitle:s.subtitle,key:"title"}):null,s.media?o.media(s.media):null,s.actions?o.actions(s.actions):null,s.content]},w=Object.freeze({createProps:A,createContent:P}),S=function(e){return"rgba("+e+", "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)+")"},M={image_size_small:80,image_size_regular:112,image_size_medium:160,image_size_large:240,border_radius:a.vars.unit_block_border_radius,padding_h:16,offset_small_padding_v:8,padding_actions_h:8,title_padding_h:16,title_padding_v:24,tight_title_padding_bottom:16,text_padding_h:16,text_padding_v:16,text_padding_bottom:24,tight_text_padding_bottom:16,subtitle_line_height_padding_bottom:7,text_line_height_padding_top:6,text_line_height_padding_bottom:7,one_line_height_with_icon:72,icon_element_width:68,one_line_padding_v:8,actions_padding_v:2,actions_button_margin_v:2,actions_vertical_padding_v:6,color_light_main_background:S(a.vars.color_light_background),color_light_title_text:S(a.vars.color_light_foreground,a.vars.blend_light_text_primary),color_light_subtitle_text:S(a.vars.color_light_foreground,a.vars.blend_light_text_secondary),color_light_text:S(a.vars.color_light_foreground,a.vars.blend_light_text_regular),color_light_actions_border:S(a.vars.color_light_foreground,a.vars.blend_light_border_light),color_light_overlay_background:S(a.vars.color_light_background,a.vars.blend_light_overlay_background),color_dark_main_background:S(a.vars.color_dark_background),color_dark_title_text:S(a.vars.color_dark_foreground,a.vars.blend_dark_text_primary),color_dark_subtitle_text:S(a.vars.color_dark_foreground,a.vars.blend_dark_text_secondary),color_dark_text:S(a.vars.color_dark_foreground,a.vars.blend_dark_text_regular),color_dark_actions_border:S(a.vars.color_dark_foreground,a.vars.blend_dark_border_light),color_dark_overlay_background:S(a.vars.color_dark_background,a.vars.blend_dark_overlay_background)};e.coreCard=_,e.coreCardActions=v,e.coreCardMedia=O,e.coreCardPrimary=w,e.classes=r.cardClasses,e.vars=M,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-card.js.map
