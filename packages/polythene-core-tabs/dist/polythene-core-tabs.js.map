{"version":3,"file":"polythene-core-tabs.js","sources":["../src/vars.js","../../polythene-css-classes/button.js","../../polythene-css-classes/tabs.js","../src/tabs.js","../src/tab.js","../src/scroll-button.js"],"sourcesContent":["import { vars } from \"polythene-theme\";\nimport { vars as buttonVars } from \"polythene-core-button\";\nimport { vars as iconButtonVars } from \"polythene-core-icon-button\";\n\nconst rgba = (colorStr, opacity = 1) =>\n  `rgba(${colorStr}, ${opacity})`;\n\nconst fontSize = buttonVars.font_size;\nconst tab_label_line_height = 1.1 * fontSize;\n\nexport default {\n  tab_min_width:                    72,\n  tab_min_width_tablet:             160,\n  tab_max_width:                    \"initial\",\n  tab_height:                       48,\n  label_max_width:                  264,\n  menu_tab_height:                  44,\n  menu_tab_icon_label_height:       44,\n  tab_icon_label_height:            72,\n  tab_icon_label_icon_spacing:      7,\n  indicator_slide_speed:            600, // px per second\n  indicator_slide_min_duration:     .250,\n  tabs_indent:                      vars.unit_indent,\n  tabs_scroll_speed:                600, // px per second\n  tabs_scroll_delay:                .15,\n  tabs_scroll_min_duration:         .5,\n  scroll_button_fade_duration:      .2,\n  scroll_button_fade_delay:         .25,\n  tab_content_padding_v:            12,\n  tab_menu_content_padding_v:       6,\n  tab_indicator_height:             2,\n  scrollbar_offset:                 20,\n  scroll_button_opacity:            .7,\n  label_opacity:                    .7,\n\n  tab_label_line_height,\n  tab_label_vertical_offset:        tab_label_line_height - fontSize,\n  tab_label_transition_property:    \"opacity, color, backgroundColor\",\n \n  color_light:                      \"inherit\",\n  color_light_selected:             rgba(vars.color_primary),\n  color_light_selected_background:  \"transparent\",\n  color_light_tab_indicator:        rgba(vars.color_primary),\n  color_light_icon:                 iconButtonVars.color_light,\n \n  color_dark:                       \"inherit\",\n  color_dark_selected:              rgba(vars.color_primary),\n  color_dark_selected_background:   \"transparent\",\n  color_dark_tab_indicator:         rgba(vars.color_primary),\n  color_dark_icon:                  iconButtonVars.color_dark\n};\n","\nexport default {\n  base:       \"pe-button\",\n  component:  \"pe-button pe-text-button\",\n  row:        \"pe-button-row\",\n\n  // elements\n  content:    \"pe-button__content\",\n  focus:      \"pe-button__focus\",\n  label:      \"pe-button__label\",\n  wash:       \"pe-button__wash\",\n\n  // states\n  border:     \"pe-button--border\",\n  disabled:   \"pe-button--disabled\",\n  focused:    \"pe-button--focus\",\n  inactive:   \"pe-button--inactive\",\n  selected:   \"pe-button--selected\",\n};\n","import buttonClasses from \"./button\";\n\nexport default {\n  component:            \"pe-tabs\",\n\n  // elements\n  indicator:            \"pe-tabs__indicator\",\n  scrollButton:         \"pe-tabs__scroll-button\",\n  scrollButtonAtEnd:    \"pe-tabs__scroll-button-end\",\n  scrollButtonAtStart:  \"pe-tabs__scroll-button-start\",\n  scrollButtonOffset:   \"pe-tabs__scroll-button-offset\",\n  tab:                  \"pe-tabs__tab\",\n  tabContent:           \"pe-tabs__tab-content\",\n  tabRow:               \"pe-tabs__row\",\n\n  // states\n  activeSelectable:     \"pe-tabs__active--selectable\",\n  isAtEnd:              \"pe-tabs--end\",\n  isAtStart:            \"pe-tabs--start\",\n  isAutofit:            \"pe-tabs--autofit\",\n  isMenu:               \"pe-tabs--menu\",\n  scrollable:           \"pe-tabs--scrollable\",\n  compactTabs:          \"pe-tabs--compact\",\n  tabHasIcon:           \"pe-tabs__tab--icon\",\n  tabRowCentered:       \"pe-tabs__row--centered\",\n  tabRowIndent:         \"pe-tabs__row--indent\",\n\n  // lookup\n  label:                buttonClasses.label\n};","import { filterSupportedAttributes } from \"polythene-core\";\nimport { isTouch, subscribe, unsubscribe } from \"polythene-core\";\nimport { scrollTo } from \"polythene-utilities\";\nimport vars from \"./vars\";\nimport classes from \"polythene-css-classes/tabs\";\n\nconst whenCreateDone = () => Promise.resolve();\n\nconst getNewIndex = (index, tabs) => {\n  const minTabIndex = 0;\n  const maxTabIndex = tabs.length - 1;\n  return {\n    backward: Math.max(index - 1, minTabIndex),\n    forward: Math.min(index + 1, maxTabIndex)\n  };\n};\n\nconst handleScrollButtonClick = (state, attrs, e, direction) => {\n  e.stopPropagation();\n  e.preventDefault();\n  const currentTabIndex = state.selectedTabIndex();\n  const newIndex = getNewIndex(currentTabIndex, state.tabs)[direction];\n  if (newIndex !== currentTabIndex) {\n    setSelectedTab(state, attrs, newIndex, true);\n  } else {\n    scrollToTab(state, newIndex);\n  }\n};\n\n/*\nMoves the first tab to the left so that the text label is as position 0. \n*/\nconst alignToTitle = (state) => {\n  const firstTab = state.tabs[0].dom;\n  const firstInnerLabel = firstTab.querySelector(`.${classes.label} span`);\n  const firstOuterLabelWidth = firstTab.getBoundingClientRect().width;\n  const firstInnerLabelWidth = firstInnerLabel.getBoundingClientRect().width;\n  const firstTabOffset = (firstOuterLabelWidth - firstInnerLabelWidth) / 2;\n  firstTab.style.marginLeft = `${-firstTabOffset}px`;\n};\n\nconst createRightButtonOffset = (state) => {\n  // add padding to right so that last item is not hidden behind scroll button\n  const scrollButtonAtEndWidth = state.scrollButtons[\"end\"].getBoundingClientRect().width;\n  const scrollButtonOffsetEl = state.tabsEl.querySelector(`.${classes.scrollButtonOffset}`);\n  scrollButtonOffsetEl.style.width = `${scrollButtonAtEndWidth}px`;\n};\n\nconst scrollToTab = (state, tabIndex) => {\n  const tabs = state.tabs;\n  const scroller = state.scrollerEl;\n  // Scroll to position of selected tab\n  const tabLeft = tabs.slice(0, tabIndex).reduce((totalWidth, tabData) =>\n    totalWidth + tabData.dom.getBoundingClientRect().width, 0);\n  // Tabs at the far right will not fully move to the left\n  // because the scrollable row will stick to the right \n  // to get the max scroll left, we subtract the visible viewport from the scroll width\n  const scrollerWidth = scroller.getBoundingClientRect().width; // frame width\n  const scrollingWidth = scroller.scrollWidth;\n  const maxScroll = scrollingWidth - scrollerWidth;\n  const left = Math.min(tabLeft, maxScroll);\n  const currentLeft = scroller.scrollLeft;\n  if (currentLeft !== left) {\n    const duration = Math.abs(currentLeft - left) / vars.tabs_scroll_speed;\n    const delaySeconds = vars.tabs_scroll_delay || 0;\n    setTimeout(() => {\n      scrollTo({\n        element: scroller,\n        to: left,\n        duration: Math.max(vars.tabs_scroll_min_duration, duration),\n        direction: \"horizontal\"\n      }).then(() => updateScrollButtons(state));\n    }, delaySeconds * 1000);\n  }\n};\n\nconst updateScrollButtons = state => {\n  const scrollerEl = state.scrollerEl;\n  const scrollLeft = scrollerEl.scrollLeft;\n  const currentTabIndex = state.selectedTabIndex();\n  const tabsEl = state.tabsEl;\n  const minTabIndex = 0;\n  const maxTabIndex = state.tabs.length - 1;\n  const isAtStart = (scrollerEl.scrollLeft === 0) && (currentTabIndex === minTabIndex);\n  const isAtEnd = (scrollLeft >= (scrollerEl.scrollWidth - tabsEl.getBoundingClientRect().width - 1)) && (currentTabIndex === maxTabIndex);\n  state.scrollButtonAtStart(isAtStart);\n  state.scrollButtonAtEnd(isAtEnd);\n};\n\nconst animateIndicator = (selectedTabEl, animate, state) => {\n  const parentRect = state.tabsEl.getBoundingClientRect();\n  const rect = selectedTabEl.getBoundingClientRect();\n  const style = state.tabIndicatorEl.style;\n  const translateX = rect.left - parentRect.left + state.scrollerEl.scrollLeft;\n  const scaleX = 1 / parentRect.width * rect.width;\n  const transformCmd = `translate(${translateX}px, 0) scaleX(${scaleX})`;\n  const duration = animate ? vars.indicator_slide_min_duration : 0;\n  style[\"transition-duration\"] = duration + \"s\";\n  style.transform = transformCmd;\n};\n\nconst setSelectedTab = (state, attrs, index, animate) => {\n  state.selectedTabIndex(index);\n  if (!state.tabs.length) return;\n  const selectedTabEl = state.tabs[index].dom;\n  if (selectedTabEl && state.tabIndicatorEl && state.tabsEl) {\n    animateIndicator(selectedTabEl, animate, state);\n  }\n  if (state.managesScroll) {\n    updateScrollButtons(state);\n  }\n  scrollToTab(state, index);\n  if (attrs.onChange) {\n    attrs.onChange({\n      index,\n      options: state.tabs[index].attrs,\n      el: selectedTabEl\n    });\n  }\n};\n\nconst sortByLargestWidth = (a, b) =>\n  a < b\n    ? 1\n    : a > b\n      ? -1\n      : 0;\n\nexport const getInitialState = (vnode, createStream) => {\n  const attrs = vnode.attrs;\n  const selectedTabIndex = createStream(vnode.attrs.selectedTab || 0);\n  const scrollButtonAtStart = createStream(true);\n  const scrollButtonAtEnd = createStream(true);\n  const registerTabButton = state => (index, data) => state.tabs[index] = data;\n  const registerScrollButton = state => (position, dom) => state.scrollButtons[position] = dom;\n  return {\n    tabsEl:              undefined,\n    scrollerEl:          undefined,\n    tabs:                [], // {data, el}\n    tabRow:              undefined,\n    tabIndicatorEl:      undefined,\n    selectedTabIndex,\n    previousSelectedTab: undefined,\n    managesScroll:       attrs.scrollable && !isTouch,\n    scrollButtonAtStart,\n    scrollButtonAtEnd,\n    scrollButtons: {\n      start: undefined,\n      end: undefined\n    },\n    registerTabButton,\n    registerScrollButton,\n    cleanUp: undefined, // set in onMount\n    redrawOnUpdate: createStream.merge([selectedTabIndex, scrollButtonAtStart, scrollButtonAtEnd])\n  };\n};\n\nexport const onMount = vnode => {\n  const dom = vnode.dom;\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  state.tabsEl = dom;\n  if (!attrs.hideIndicator) {\n    state.tabIndicatorEl = dom.querySelector(`.${classes.indicator}`);\n  }\n  state.scrollerEl = dom.querySelector(`.${classes.tabRow}`);\n\n  // A promise can't resolve during the oncreate loop\n  // The Mithril draw loop is synchronous - there is no delay between one this oncreate and the tab button's oncreate\n  whenCreateDone().then(() => {\n    if (state.tabs && attrs.largestWidth) {\n      const widths = state.tabs.map(tabData => tabData.dom.getBoundingClientRect().width);\n      const largest = widths.sort(sortByLargestWidth)[0];\n      state.tabs.forEach(tabData => tabData.dom.style.width = largest + \"px\");\n    }\n    // Align first scrollable tab to title\n    if (attrs.scrollable) {\n      alignToTitle(state);\n    }\n    // Handle scroll\n    if (state.managesScroll) {\n      createRightButtonOffset(state);\n    }\n    setSelectedTab(state, attrs, state.selectedTabIndex(), false);\n  });\n\n  const onResize = () =>\n    setSelectedTab(state, attrs, state.selectedTabIndex(), false);\n\n  subscribe(\"resize\", onResize),\n\n  state.cleanUp = () => (\n    unsubscribe(\"resize\", onResize)\n  );\n};\n\nexport const onUnMount = ({ state }) =>\n  state.cleanUp();\n\nexport const createProps = (vnode, { keys: k }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const autofit = attrs.scrollable || attrs.centered\n    ? false\n    : attrs.autofit\n      ? true\n      : false;\n\n  // Keep selected tab up to date\n  if (attrs.selectedTab !== undefined && state.previousSelectedTab !== attrs.selectedTab) {\n    setSelectedTab(state, attrs, attrs.selectedTab, true);\n  }\n  state.previousSelectedTab = attrs.selectedTab;\n\n  return Object.assign(\n    {},\n    filterSupportedAttributes(attrs),\n    {\n      className: [\n        classes.component,\n        attrs.scrollable ? classes.scrollable : null,\n        state.scrollButtonAtStart() ? classes.isAtStart : null,\n        state.scrollButtonAtEnd() ? classes.isAtEnd : null,\n        attrs.activeSelected ? classes.activeSelectable : null,\n        autofit ? classes.isAutofit : null,\n        attrs.compact ? classes.compactTabs : null,\n        attrs.menu ? classes.isMenu : null,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \")\n    }\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, keys: k, Tab, ScrollButton }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  const buttons = attrs.content\n    ? attrs.content\n    : attrs.tabs\n      ? attrs.tabs\n      : attrs.children || vnode.children || [];\n\n  if (buttons.length === 0) {\n    console.error(\"No tabs specified\"); // eslint-disable-line no-console\n  }\n\n  const tabRowButtons = buttons.map((buttonOpts = {}, index) => {\n    const buttonOptsCombined = Object.assign(\n      {},\n      buttonOpts,\n      {\n        // These options can be overridden by `all`\n        selected: index === state.selectedTabIndex(),\n        animateOnTap: (attrs.animateOnTap !== false) ? true : false\n      },\n      attrs.all,\n      {\n        // Internal options, should not get overridden\n        index,\n        key: `tab-${index}`,\n        register: state.registerTabButton(state),\n        onSelect: () =>\n          setSelectedTab(state, attrs, index, attrs.noIndicatorSlide ? false : true)\n      }\n    );\n    return h(Tab, buttonOptsCombined);\n  });\n\n  const tabRow = attrs.scrollable\n    ? tabRowButtons.concat([\n      // offset for right scroll button\n      h(\"div\",\n        {\n          key: \"offset\",\n          className: classes.scrollButtonOffset\n        }\n      )\n    ])\n    : tabRowButtons;\n\n  let scrollButtonAtStart, scrollButtonAtEnd;\n  if (attrs.scrollable) {\n    scrollButtonAtStart = h(ScrollButton, Object.assign(\n      {},\n      {\n        key: \"backward\",\n        icon: attrs.scrollIconBackward,\n        className: classes.scrollButtonAtStart,\n        position: \"start\",\n        register: state.registerScrollButton(state),\n        events: { [k.onclick]: e => handleScrollButtonClick(state, attrs, e, \"backward\") }\n      }\n    ));\n    scrollButtonAtEnd = h(ScrollButton, Object.assign(\n      {},\n      {\n        key: \"forward\",\n        icon: attrs.scrollIconForward,\n        className: classes.scrollButtonAtEnd,\n        position: \"end\",\n        register: state.registerScrollButton(state),\n        events: { [k.onclick]: e => handleScrollButtonClick(state, attrs, e, \"forward\") }\n      }\n    ));\n  }\n\n  const tabIndicator = attrs.hideIndicator\n    ? null\n    : h(\"div\",\n      {\n        key: \"indicator\",\n        className: classes.indicator\n      }\n    );\n\n  return [\n    attrs.scrollable ? scrollButtonAtStart : null,\n    h(\"div\",\n      {\n        key: \"tabrow\",\n        className: [\n          classes.tabRow,\n          attrs.centered ? classes.tabRowCentered : null,\n          attrs.scrollable ? classes.tabRowIndent : null\n        ].join(\" \")\n      },\n      [\n        tabRow,\n        tabIndicator\n      ]\n    ),\n    attrs.scrollable ? scrollButtonAtEnd : null\n  ];\n};\n\n","import classes from \"polythene-css-classes/tabs\";\n\n// Don't export 'element': it will be the wrapped Button component (set in polythene-xxx-tabs/tab)\n\nexport const onMount = vnode => {\n  const dom = vnode.dom;\n  if (!dom) {\n    return;\n  }\n  const attrs = vnode.attrs;\n  attrs.register(attrs.index, {\n    attrs,\n    dom\n  });\n};\n\nexport const createProps = (vnode, { renderer: h, keys: k, Icon }) => {\n  const attrs = vnode.attrs;\n  // Let internal onclick function co-exist with passed button option\n  attrs.events = attrs.events || {};\n  attrs.events[k.onclick] = attrs.events[k.onclick] || (() => {});\n  return Object.assign(\n    {},\n    attrs,\n    {\n      content: h(\"div\",\n        { className: classes.tabContent },\n        [\n          attrs.icon ? h(Icon, attrs.icon) : null,\n          attrs.label\n            ? h(\"div\",\n              { className: classes.label },\n              h(\"span\", attrs.label)\n            )\n            : null,\n        ]),\n      className: [\n        classes.tab,\n        attrs.icon && attrs.label ? classes.tabHasIcon : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \"),\n      selected: attrs.selected,\n      wash: false,\n      ripple: true,\n      events: Object.assign(\n        {},\n        attrs.events,\n        {\n          [k.onclick]: e => {\n            attrs.onSelect();\n            attrs.events[k.onclick](e);\n          }\n        }\n      )\n    }\n  );\n};\n\nexport const createContent = vnode =>\n  vnode.children;\n","import classes from \"polythene-css-classes/tabs\";\n\n// Don't export 'element': it will be the wrapped IconButton component (set in polythene-xxx-tabs/scroll-button)\n\nconst arrowBackward = \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\\\"/></svg>\";\nconst arrowForward = \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\\\"/></svg>\";\n\nexport const onMount = vnode => {\n  const dom = vnode.dom;\n  if (!dom) {\n    return;\n  }\n  const attrs = vnode.attrs;\n  attrs.register(attrs.position, dom);\n};\n\nexport const createProps = (vnode, { renderer: h, keys: k }) => {\n  const attrs = vnode.attrs;\n  const icon = attrs.position === \"start\"\n    ? attrs.icon || { svg: { content: h.trust(arrowBackward) } }\n    : attrs.icon || { svg: { content: h.trust(arrowForward) } };\n  return {\n    className: [\n      classes.scrollButton,\n      attrs.className || attrs[k.class]\n    ].join(\" \"),\n    icon,\n    ripple: { center: true },\n    events: attrs.events,\n  };\n};\n"],"names":["rgba","colorStr","opacity","fontSize","buttonVars","font_size","tab_label_line_height","tab_min_width","tab_min_width_tablet","tab_max_width","tab_height","label_max_width","menu_tab_height","menu_tab_icon_label_height","tab_icon_label_height","tab_icon_label_icon_spacing","indicator_slide_speed","indicator_slide_min_duration","tabs_indent","vars","unit_indent","tabs_scroll_speed","tabs_scroll_delay","tabs_scroll_min_duration","scroll_button_fade_duration","scroll_button_fade_delay","tab_content_padding_v","tab_menu_content_padding_v","tab_indicator_height","scrollbar_offset","scroll_button_opacity","label_opacity","tab_label_vertical_offset","tab_label_transition_property","color_light","color_light_selected","color_primary","color_light_selected_background","color_light_tab_indicator","color_light_icon","iconButtonVars","color_dark","color_dark_selected","color_dark_selected_background","color_dark_tab_indicator","color_dark_icon","base","component","row","content","focus","label","wash","border","disabled","focused","inactive","selected","indicator","scrollButton","scrollButtonAtEnd","scrollButtonAtStart","scrollButtonOffset","tab","tabContent","tabRow","activeSelectable","isAtEnd","isAtStart","isAutofit","isMenu","scrollable","compactTabs","tabHasIcon","tabRowCentered","tabRowIndent","buttonClasses","whenCreateDone","Promise","resolve","getNewIndex","index","tabs","minTabIndex","maxTabIndex","length","backward","Math","max","forward","min","handleScrollButtonClick","state","attrs","e","direction","stopPropagation","preventDefault","currentTabIndex","selectedTabIndex","newIndex","setSelectedTab","scrollToTab","alignToTitle","firstTab","dom","firstInnerLabel","querySelector","classes","firstOuterLabelWidth","getBoundingClientRect","width","firstInnerLabelWidth","firstTabOffset","style","marginLeft","createRightButtonOffset","scrollButtonAtEndWidth","scrollButtons","scrollButtonOffsetEl","tabsEl","tabIndex","scroller","scrollerEl","tabLeft","slice","reduce","totalWidth","tabData","scrollerWidth","scrollingWidth","scrollWidth","maxScroll","left","currentLeft","scrollLeft","duration","abs","delaySeconds","setTimeout","scrollTo","element","to","then","updateScrollButtons","animateIndicator","selectedTabEl","animate","parentRect","rect","tabIndicatorEl","translateX","scaleX","transformCmd","transform","managesScroll","onChange","options","el","sortByLargestWidth","a","b","getInitialState","vnode","createStream","selectedTab","registerTabButton","data","registerScrollButton","position","undefined","previousSelectedTab","isTouch","start","end","cleanUp","redrawOnUpdate","merge","onMount","hideIndicator","largestWidth","widths","map","largest","sort","forEach","onResize","subscribe","unsubscribe","onUnMount","createProps","k","keys","autofit","centered","filterSupportedAttributes","className","activeSelected","compact","menu","tone","class","join","createContent","h","renderer","Tab","ScrollButton","buttons","children","console","error","tabRowButtons","buttonOpts","buttonOptsCombined","animateOnTap","all","key","register","onSelect","noIndicatorSlide","concat","icon","scrollIconBackward","events","onclick","scrollIconForward","tabIndicator","Icon","_extends","ripple","arrowBackward","arrowForward","svg","trust","center"],"mappings":"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"}