!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core"),require("polythene-utilities"),require("polythene-theme"),require("polythene-core-button"),require("polythene-core-icon-button"),require("polythene-css-classes")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-utilities","polythene-theme","polythene-core-button","polythene-core-icon-button","polythene-css-classes"],t):t(e.polythene={},e["polythene-core"],e["polythene-utilities"],e["polythene-theme"],e["polythene-core-button"],e["polythene-core-icon-button"],e["polythene-css-classes"])}(this,function(e,t,n,a,o,l,r){"use strict";function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(e){return"rgba("+e+", "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)+")"},d=o.vars.font_size,u=1.1*d,b={tab_min_width:72,tab_max_width:"initial",tab_height:48,label_max_width:264,menu_tab_height:44,menu_tab_icon_label_height:44,tab_icon_label_height:72,tab_icon_label_icon_spacing:7,indicator_slide_speed:600,indicator_slide_min_duration:.25,tabs_indent:a.vars.unit_indent,tabs_scroll_speed:600,tabs_scroll_delay:.15,tabs_scroll_min_duration:.5,scroll_button_fade_duration:.2,scroll_button_fade_delay:.5,tab_content_padding_v:12,tab_menu_content_padding_v:6,tab_indicator_height:2,scrollbar_offset:20,scroll_button_opacity:.7,label_opacity:.7,tab_label_line_height:u,tab_label_vertical_offset:u-d,tab_label_transition_property:"opacity, color, backgroundColor",color_light:"inherit",color_light_selected:c(a.vars.color_primary),color_light_selected_background:"transparent",color_light_tab_indicator:c(a.vars.color_primary),color_light_icon:l.vars.color_light,color_dark:"inherit",color_dark_selected:c(a.vars.color_primary),color_dark_selected_background:"transparent",color_dark_tab_indicator:c(a.vars.color_primary),color_dark_icon:l.vars.color_dark},_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},f=function(){return Promise.resolve()},h=function(e,t){var n=t.length-1;return{backward:Math.max(e-1,0),forward:Math.min(e+1,n)}},p=function(e,t,n,a){n.stopPropagation(),n.preventDefault();var o=e.selectedTabIndex(),l=h(o,e.tabs)[a];l!==o?w(e,t,l,!0):m(e,l)},v=function(e){var t=e.tabs[0].dom,n=t.querySelector("."+r.tabsClasses.label+" span"),a=(t.getBoundingClientRect().width-n.getBoundingClientRect().width)/2;t.style.marginLeft=-a+"px"},g=function(e){var t=e.scrollButtons.end.getBoundingClientRect().width;e.tabsEl.querySelector("."+r.tabsClasses.scrollButtonOffset).style.width=t+"px"},m=function(e,t){var a=e.tabs,o=e.scrollerEl,l=a.slice(0,t).reduce(function(e,t){return e+t.dom.getBoundingClientRect().width},0),r=o.getBoundingClientRect().width,s=o.scrollWidth-r,i=Math.min(l,s),c=o.scrollLeft;if(c!==i){var d=Math.abs(c-i)/b.tabs_scroll_speed,u=b.tabs_scroll_delay||0;setTimeout(function(){n.scrollTo({element:o,to:i,duration:Math.max(b.tabs_scroll_min_duration,d),direction:"horizontal"})},1e3*u)}},y=function(e){var t=e.scrollerEl,n=t.scrollLeft,a=e.selectedTabIndex(),o=e.tabsEl,l=e.tabs.length-1,r=0===t.scrollLeft&&0===a,s=n>=t.scrollWidth-o.getBoundingClientRect().width-1&&a===l;e.scrollButtonStates.start=!r,e.scrollButtonStates.end=!s},C=function(e,t,n){var a=n.tabsEl.getBoundingClientRect(),o=e.getBoundingClientRect(),l=n.tabIndicatorEl.style,r="translate("+(o.left-a.left+n.scrollerEl.scrollLeft)+"px, 0)",s=t?b.indicator_slide_min_duration:0;l.width=o.width+"px",l["transition-duration"]=s+"s",l.transform=r},w=function(e,t,n,a){if(e.selectedTabIndex(n),e.tabs.length){var o=e.tabs[n].dom;o&&e.tabIndicatorEl&&e.tabsEl&&C(o,a,e),e.managesScroll&&(y(e),m(e,n)),t.onChange&&t.onChange({index:n,options:e.tabs[n].attrs,el:o})}},k=function(e,t){return e<t?1:e>t?-1:0},B=function(e,n){var a=e.attrs,o=n(e.attrs.selectedTab||0),l=function(e){return function(t,n){return e.tabs[t]=n}},r=function(e){return function(t,n){return e.scrollButtons[t]=n}};return{tabsEl:void 0,scrollerEl:void 0,tabs:[],tabRow:void 0,tabIndicatorEl:void 0,selectedTabIndex:o,previousSelectedTab:void 0,managesScroll:a.scrollable&&!t.isTouch,scrollButtonStates:{start:!1,end:!1},scrollButtons:{start:void 0,end:void 0},registerTabButton:l,registerScrollButton:r,cleanUp:void 0,redrawOnUpdate:n.merge([o])}},T=function(e){var n=e.dom,a=e.state,o=e.attrs;a.tabsEl=n,o.hideIndicator||(a.tabIndicatorEl=n.querySelector("."+r.tabsClasses.indicator)),a.scrollerEl=n.querySelector("."+r.tabsClasses.tabRow),f().then(function(){if(a.tabs&&o.largestWidth){var e=a.tabs.map(function(e){return e.dom.getBoundingClientRect().width}).sort(k)[0];a.tabs.forEach(function(t){return t.dom.style.width=e+"px"})}o.scrollable&&v(a),a.managesScroll&&g(a),w(a,o,a.selectedTabIndex(),!1)});var l=function(){return w(a,o,a.selectedTabIndex(),!1)};t.subscribe("resize",l),a.cleanUp=function(){return t.unsubscribe("resize",l)}},S=function(e){return e.state.cleanUp()},x=function(e,n){var a=n.keys,o=e.state,l=e.attrs,s=!l.scrollable&&!l.centered&&!!l.autofit;return void 0!==l.selectedTab&&o.previousSelectedTab!==l.selectedTab&&w(o,l,l.selectedTab,!0),o.previousSelectedTab=l.selectedTab,_({},t.filterSupportedAttributes(l),{className:[r.tabsClasses.component,l.scrollable?r.tabsClasses.scrollable:null,0===o.selectedTabIndex?r.tabsClasses.isAtStart:null,o.selectedTabIndex===o.tabs.length-1?r.tabsClasses.isAtEnd:null,l.activeSelected?r.tabsClasses.activeSelectable:null,s?r.tabsClasses.isAutofit:null,l.compact?r.tabsClasses.compactTabs:null,l.menu?r.tabsClasses.isMenu:null,"dark"===l.tone?"pe-dark-tone":null,"light"===l.tone?"pe-light-tone":null,l.className||l[a.class]].join(" ")})},I=function(e,t){var n=t.renderer,a=t.keys,o=t.Tab,l=t.ScrollButton,i=e.state,c=e.attrs,d=c.content?c.content:c.tabs?c.tabs:c.children||e.children||[];0===d.length&&console.error("No tabs specified");var u=d.map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],a=_({},e,{selected:t===i.selectedTabIndex(),animateOnTap:!1!==c.animateOnTap},c.all,{index:t,key:"tab-"+t,register:i.registerTabButton(i),onSelect:function(){return w(i,c,t,!c.noIndicatorSlide)}});return n(o,a)}),b=c.scrollable?u.concat([n("div",{key:"offset",className:r.tabsClasses.scrollButtonOffset})]):u,f=void 0,h=void 0;c.scrollable&&(f=n(l,_({},{key:"backward",icon:c.scrollIconBackward,className:r.tabsClasses.scrollButtonAtStart,position:"start",register:i.registerScrollButton(i),events:s({},a.onclick,function(e){return p(i,c,e,"backward")})})),h=n(l,_({},{key:"forward",icon:c.scrollIconForward,className:r.tabsClasses.scrollButtonAtEnd,position:"end",register:i.registerScrollButton(i),events:s({},a.onclick,function(e){return p(i,c,e,"forward")})})));var v=c.hideIndicator?null:n("div",{key:"indicator",className:r.tabsClasses.indicator});return[c.scrollable?f:null,n("div",{key:"tabrow",className:[r.tabsClasses.tabRow,c.centered?r.tabsClasses.tabRowCentered:null,c.scrollable?r.tabsClasses.tabRowIndent:null].join(" ")},[b,v]),c.scrollable?h:null]},E=Object.freeze({getInitialState:B,onMount:T,onUnMount:S,createProps:x,createContent:I}),O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},j=function(e){var t=e.dom;if(t){var n=e.attrs;n.register(n.index,{attrs:n,dom:t})}},N=function(e,t){var n=t.renderer,a=t.keys,o=t.Icon,l=e.attrs;return l.events=l.events||{},l.events[a.onclick]=l.events[a.onclick]||function(){},O({},l,{content:n("div",{className:r.tabsClasses.tabContent},[l.icon?n(o,l.icon):null,l.label?n("div",{className:r.tabsClasses.label},n("span",l.label)):null]),className:[r.tabsClasses.tab,l.icon&&l.label?r.tabsClasses.tabHasIcon:null,l.className||l[a.class]].join(" "),selected:l.selected,wash:!1,ripple:!0,events:O({},l.events,i({},a.onclick,function(e){l.onSelect(),l.events[a.onclick](e)}))})},R=function(){return null},M=Object.freeze({onMount:j,createProps:N,createContent:R}),q=function(e){var t=e.dom;if(t){var n=e.attrs;n.register(n.position,t)}},P=function(e,t){var n=t.renderer,a=t.keys,o=e.attrs,l="start"===o.position?o.icon||{svg:{content:n.trust('<svg width="24" height="24" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>')}}:o.icon||{svg:{content:n.trust('<svg width="24" height="24" viewBox="0 0 24 24"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>')}};return{className:[r.tabsClasses.scrollButton,o.className||o[a.class]].join(" "),icon:l,ripple:{center:!0},events:o.events}},z=Object.freeze({onMount:q,createProps:P});e.coreTabs=E,e.coreTab=M,e.coreScrollButton=z,e.classes=r.tabsClasses,e.vars=b,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-tabs.js.map
