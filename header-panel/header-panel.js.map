{"version":3,"sources":["header-panel.es6"],"names":["require","_polythene","_events","_mithril","_toolbar","CSS_CLASSES","panel","header","dropShadow","outerContainer","headerContainer","backgroundContainer","condensedBackground","headerBackground","mediaDimmer","mainContainer","headerAnimated","fixed","cascaded","modeCover","modeScroll","modeSeamed","modeStandard","modeTall","modeWaterfallTall","modeWaterfall","toolbar","toolbarTopbar","headerTall","DEFAULT_SHADOW_HEIGTH","DEFAULT_HEADER_HEIGHT","DEFAULT_CONDENSED_HEADER_HEIGHT","SCROLL_WATCH_TIMER","scroller","scrollPositions","modeConfigs","shadowAfterScroll","waterfall","waterfall-tall","alwaysShadow","standard","tall","noShadow","seamed","cover","scroll","tallMode","outerScroll","modeClasses","classForMode","mode","arguments","length","undefined","setTransform","document","documentElement","style","transform","string","webkitTransform","translateY","y","t","createHeaderComponent","opts","tallClass","toolbarOpts","join","topBar","_mithril2","component","_toolbar2","content","class","animated","createViewHeader","ctrl","initHeaderContainer","inited","headerContainerElem","Object","assign","headerConfig","config","shadow","createViewContent","scrollConfig","initMainContainer","main","scrollerElem","onscroll","e","_events2","emit","storeScrollPosition","target","scrollTop","createView","configs","init","updateContentOnScroll","ignoreContent","isScrolling","scrollerType","handleScroll","bind","tag","initOuterContainer","headerElem","querySelector","topBarElem","headerBg","condensedHeaderBg","outerContainerElem","headerTopBarElem","setHeight","clientHeight","outer","restoreScrollPosition","props","id","el","headerPanelElem","subtree","before","after","controller","scrolled","prevScrollTop","headerMargin","headerHeight","condenses","scrollAwayTopbar","noReveal","keepCondensedHeader","noDissolve","backgroundScrollSpeed","shadowHeight","condensedHeaderHeight","handleScrollFns","sTop","isScrolled","showShadow","classList","dynamicHeader","sy","Math","min","max","transformHeader","_polythene2","isTouch","enlargeImage","scrollWatchId","h","paddingTop","fn","clearTimeout","setTimeout","_this","call","condenseHeader","hy","hbg","chbg","reset","opacity","height","condensedHeight","abs","restoreScrollPositionId","restore","view"],"mappings":"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","file":"header-panel.js"}