!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-mithril"),require("mithril"),require("polythene-react")):"function"==typeof define&&define.amd?define(["exports","polythene-mithril","mithril","polythene-react"],t):t(e.polythene=e.polythene||{},e["polythene-mithril"],e.m,e["polythene-react"])}(this,function(e,t,n,r){"use strict";var o=function(e){var t=e.button;return t.theme(".tests-button-themed-button",{color_light_background:"#2196F3",color_dark_background:"#2196F3",color_light_text:"#fff"}),t.theme(".blue-on-dark-button",{color_dark_text:"#2196F3"}),t.theme(".tests-button-bordered-button",{color_light_text:"#673ab7",color_light_border:"#673ab7",color_dark_text:"yellow",color_dark_border:"yellow"}),[{name:"Option: label",component:t,attrs:{label:"Label"}},{name:"Themed button: (option: borders)",component:t,attrs:{label:"Borders",className:"tests-button-bordered-button",borders:!0}},{name:"Themed button (colors)",component:t,attrs:{label:"Themed button",className:"tests-button-themed-button"}},{name:"Option: style (colors)",component:t,attrs:{label:"Styled",style:{backgroundColor:"#EF6C00",color:"#fff"}}},{name:"Option: wash (false)",interactive:!0,component:t,attrs:{label:"No wash",wash:!1}},{name:"Option: ink (false)",interactive:!0,component:t,attrs:{label:"No ink",ink:!1}},{name:"Option: disabled (true)",interactive:!0,component:t,attrs:{label:"Disabled",disabled:!0}},{name:"Option: disabled (false)",interactive:!0,component:t,attrs:{label:"Not disabled",disabled:!1}},{name:"Option: selected",component:t,attrs:{label:"Selected",selected:!0}},{name:"Option: formaction",component:t,attrs:{label:"Form action",formaction:"http://polythene.js.org"}},{name:"Option: url (without oncreate)",interactive:!0,component:t,attrs:{label:"Go to /shadow",url:{href:"/shadow"}}},{name:"Option: inactive (false)",interactive:!0,component:t,attrs:{label:"Not inactive",inactive:!1}},{name:"Option: inactive (true)",interactive:!0,component:t,attrs:{label:"Inactive",inactive:!0}},{name:"Option: inactivate (2)",interactive:!0,component:t,attrs:{label:"Inactivated for 2s",inactivate:2}},{name:"Option: label -- dark theme class",className:"pe-dark-tone",component:t,attrs:{label:"Label"}},{name:'Option: tone "dark" -- dark theme class',className:"test-dark-theme",component:t,attrs:{label:"Label",tone:"dark"}},{name:"Themed button -- dark theme class",className:"pe-dark-tone",component:t,attrs:{label:"Themed button",className:"tests-button-themed-button"}},{name:"Themed button blue on dark -- dark theme class",className:"pe-dark-tone",component:t,attrs:{label:"Blue on dark button",className:"blue-on-dark-button"}},{name:"Themed button: (option: borders) -- dark theme class",className:"pe-dark-tone",component:t,attrs:{label:"Borders dark theme",className:"tests-button-bordered-button",borders:!0}}]},a=[].concat(o({button:t.button,renderer:t.renderer})).concat(function(e){var t=e.button,n=e.renderer;return[{name:"Dark tone class + light theme class",class:"pe-dark-tone",component:{view:function(){return n(".pe-light-tone",{style:{background:"#fff"}},[n(t,{label:"Normal"}),n(t,{label:"Disabled",disabled:!0}),n(t,{label:"Theme",class:"tests-button-themed-button"})])}}},{name:"Dark tone class + light tone",class:"test-dark-theme",component:{view:function(){return n("div",{style:{background:"#fff"}},[n(t,{label:"Normal",tone:"light"}),n(t,{label:"Disabled",disabled:!0,tone:"light"}),n(t,{label:"Theme",class:"tests-button-themed-button",tone:"light"})])}}},{name:"Option: url (with oncreate)",interactive:!0,component:t,attrs:{label:"Go to /#/shadow",url:{href:"/shadow",oncreate:n.route.link}}},{name:"onbeforeupdate",interactive:!0,exclude:!0,component:{oninit:function(e){return e.state.updated=0},view:function(e){return[n("div","Updated: "+e.state.updated),n(t,{label:"Button",onbeforeupdate:function(){return e.state.updated++}})]}}},{name:"Option: events (onclick)",interactive:!0,exclude:!0,component:{oninit:function(e){return e.state.clicked=0},view:function(e){return[n("div","onclick called: "+e.state.clicked),n(t,{label:"Button",events:{onclick:function(){return e.state.clicked++}}})]}}},{name:"Key down (after having focus) results in click",interactive:!0,exclude:!0,component:{oninit:function(e){return e.state.clickCount=0},view:function(e){return[n("div","onclick called: "+e.state.clickCount),n(t,{label:"Button",events:{onclick:function(){return e.state.clickCount++}}})]}}}]}({button:t.button,renderer:t.renderer})),i=function(e){var t=e.button;return t.theme(".tests-custom-theme-blue-button",{color_light_background:"#2196F3",color_light_text:"#fff"}),t.theme(".tests-custom-theme-red-button",{color_light_background:"#ff0000",color_light_text:"#fff"}),[{name:"Theme with style variables: button (should be blue)",component:t,attrs:{className:"tests-custom-theme-blue-button",label:"Blue button"}},{name:"Theme with style variables: button (should be red)",component:t,attrs:{className:"tests-custom-theme-red-button",label:"Red button"}},{name:"No theme: normal button",component:t,attrs:{label:"Unaffected button"}}]},l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=t.renderer,s={theme:t.button.theme,view:function(e){return c(t.button,l({className:"tests-custom-theme-secondary-button",borders:!0},e.attrs))}};s.theme(".tests-custom-theme-secondary-button",{color_light_border:"#ddd",color_light_background:"#fff"});var u=[].concat(i({button:t.button,fab:t.fab})).concat(function(){return[{name:"Theme with deriving component: button (should be bordered with white background)",component:s,attrs:{label:"Bordered button"}}]}()),d=function(e){var t=e.ripple;return t.theme(".tests-ripple-themed-ripple",{color_light:"#F44336"}),[{name:"Option: constrained (true)",interactive:!0,component:t,attrs:{constrained:!0}},{name:"Option: constrained (false)",interactive:!0,exclude:!0,component:t,attrs:{constrained:!1}},{name:"Option: center",interactive:!0,exclude:!0,component:t,attrs:{center:!0}},{name:"Option: start opacity (0.5)",interactive:!0,exclude:!0,component:t,attrs:{startOpacity:.5}},{name:"Option: end opacity (0.1)",interactive:!0,exclude:!0,component:t,attrs:{endOpacity:.1}},{name:"Option: duration (3.0)",interactive:!0,exclude:!0,component:t,attrs:{duration:3}},{name:"Option: initial opacityDecayVelocity (0.1)",interactive:!0,exclude:!0,component:t,attrs:{opacityDecayVelocity:.1}},{name:"Option: disabled",interactive:!0,exclude:!0,component:t,attrs:{disabled:!0}},{name:"Option: style (color)",interactive:!0,exclude:!0,component:t,attrs:{startOpacity:.7,style:{color:"#2196F3"}}},{name:"Themed (should be red and permanent)",interactive:!0,exclude:!0,component:t,attrs:{className:"tests-ripple-themed-ripple",endOpacity:1,persistent:!0}},{name:"Option: style (white) -- dark theme class",interactive:!0,exclude:!0,className:"pe-dark-tone",component:t,attrs:{constrained:!0,style:{color:"#fff"}}},{name:"Dark tone class + light theme class",interactive:!0,exclude:!0,className:"pe-dark-tone",component:t,attrs:{constrained:!0,style:{background:"#fff"},className:"pe-light-tone"}},{name:"Dark tone class + light tone",interactive:!0,exclude:!0,className:"test-dark-theme",component:t,attrs:{constrained:!0,style:{background:"#fff"},tone:"light"}}]},f=[].concat(d({ripple:t.ripple,renderer:t.renderer})).concat(function(e){var t=e.ripple,n=e.renderer;return[{name:"Appended to an element",interactive:!0,exclude:!0,component:{view:function(){return n("div",{style:{position:"relative",width:"100px",height:"100px"}},n(t))}}},{name:"Option: start (after click)",interactive:!0,exclude:!0,component:{oninit:function(e){return e.state.started=0},view:function(e){return[n(t,{before:n("div","start called: "+e.state.started),start:function(){return e.state.started++,n.redraw()}})]}}},{name:"Option: end (after click)",interactive:!0,exclude:!0,component:{oninit:function(e){return e.state.ended=0},view:function(e){return[n(t,{before:n("div","end called: "+e.state.ended),end:function(){return e.state.ended++,n.redraw()}})]}}}]}({ripple:t.ripple,renderer:t.renderer})),m=function(e){var t=e.shadow;return[{name:"Child node",component:t,attrs:{},children:["Child"]},{name:"Option: content",component:t,attrs:{content:"Content"}},{name:"Option: z (0)",component:t,attrs:{z:0}},{name:"Option: z (1)",component:t,attrs:{z:1}},{name:"Option: z (2)",component:t,attrs:{z:2}},{name:"Option: z (3)",component:t,attrs:{z:3}},{name:"Option: z (4)",component:t,attrs:{z:4}},{name:"Option: z (5)",component:t,attrs:{z:5}}]},h=[].concat(m({shadow:t.shadow,renderer:t.renderer})).concat(function(e){var t=e.shadow,n=e.renderer,r={oninit:function(e){return e.state.z=1},view:function(e){return[n(".absolute.absolute--fill",{onclick:function(){var t=(e.state.z+1)%6;e.state.z=t}},"Click me"),n(t,{animated:!0,z:e.state.z})]}};return[{name:"Add to a Mithril element",component:{view:function(){return[n("div","Some element"),n(t)]}}},{name:"Interactive option: animated",interactive:!0,exclude:!0,component:r},{name:"Interactive option: animated -- dark theme class",interactive:!0,className:"pe-dark-tone",component:r}]}({shadow:t.shadow,renderer:t.renderer})),p=function(e){var t=e.svg,n=e.renderer,r=n.trust('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg>'),o=n.trust('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm4.24 16L12 15.45 7.77 18l1.12-4.81-3.73-3.23 4.92-.42L12 5l1.92 4.53 4.92.42-3.73 3.23L16.23 18z"/></svg>');return t.theme(".tests-svg-themed-svg",{color_light:"#0D47A1",color_dark:"orange"}),[{name:"Child node",component:t,attrs:null,children:[r]},{name:"Option: content",component:t,attrs:{content:o}},{name:"Option: style (color)",component:t,attrs:{content:o,style:{color:"#EF6C00"}}},{name:"Themed (color)",component:t,attrs:{content:o,className:"tests-svg-themed-svg"}},{name:"Option: content -- dark theme class",className:"pe-dark-tone",component:t,attrs:{content:o}},{name:"Themed (color) -- dark theme class",component:t,className:"pe-dark-tone",attrs:{content:o,className:"tests-svg-themed-svg"}}]},v="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e){!function(){function t(e,t,n,r,o,a){return{tag:e,key:t,attrs:n,children:r,text:o,dom:a,domSize:void 0,state:void 0,_state:void 0,events:void 0,instance:void 0,skip:!1}}function n(e){for(var t,n="div",r=[],o={};t=i.exec(e);){var a=t[1],c=t[2];if(""===a&&""!==c)n=c;else if("#"===a)o.id=c;else if("."===a)r.push(c);else if("["===t[3][0]){var s=t[6];s&&(s=s.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===t[4]?r.push(s):o[t[4]]=s||!0}}return r.length>0&&(o.className=r.join(" ")),l[e]={tag:n,attrs:o}}function r(e,n,r){var o,a,i=!1,l=n.className||n.class;for(var s in e.attrs)c.call(e.attrs,s)&&(n[s]=e.attrs[s]);null!=l&&(null!=n.class&&(n.class=void 0,n.className=l),null!=e.attrs.className&&(n.className=e.attrs.className+" "+l));for(var s in n)if(c.call(n,s)&&"key"!==s){i=!0;break}return Array.isArray(r)&&1===r.length&&null!=r[0]&&"#"===r[0].tag?a=r[0].children:o=r,t(e.tag,n.key,i?n:void 0,o,a)}function o(e){var o,a=arguments[1],i=2;if(null==e||"string"!=typeof e&&"function"!=typeof e&&"function"!=typeof e.view)throw Error("The selector must be either a string or a component.");if("string"==typeof e)var c=l[e]||n(e);if(a?("object"!==(void 0===a?"undefined":b(a))||null!=a.tag||Array.isArray(a))&&(a={},i=1):a={},arguments.length===i+1)o=arguments[i],Array.isArray(o)||(o=[o]);else for(o=[];i<arguments.length;)o.push(arguments[i++]);var s=t.normalizeChildren(o);return"string"==typeof e?r(c,a,s):t(e,a.key,a,s)}function a(e){var t=0,n=null,r="function"==typeof requestAnimationFrame?requestAnimationFrame:setTimeout;return function(){var o=Date.now();0===t||o-t>=16?(t=o,e()):null===n&&(n=r(function(){n=null,e(),t=Date.now()},16-(o-t)))}}t.normalize=function(e){return Array.isArray(e)?t("[",void 0,void 0,t.normalizeChildren(e),void 0,void 0):null!=e&&"object"!==(void 0===e?"undefined":b(e))?t("#",void 0,void 0,e===!1?"":e,void 0,void 0):e},t.normalizeChildren=function(e){for(var n=0;n<e.length;n++)e[n]=t.normalize(e[n]);return e};var i=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,l={},c={}.hasOwnProperty;o.trust=function(e){return null==e&&(e=""),t("<",void 0,void 0,e,void 0,void 0)},o.fragment=function(e,n){return t("[",e.key,e,t.normalizeChildren(n),void 0,void 0)};var s=o,u=function e(t){function n(e,t){return function n(l){var d;try{if(!t||null==l||"object"!==(void 0===l?"undefined":b(l))&&"function"!=typeof l||"function"!=typeof(d=l.then))u(function(){t||0!==e.length||console.error("Possible unhandled promise rejection:",l);for(var r=0;r<e.length;r++)e[r](l);a.length=0,i.length=0,s.state=t,s.retry=function(){n(l)}});else{if(l===o)throw new TypeError("Promise can't be resolved w/ itself");r(d.bind(l))}}catch(e){c(e)}}}function r(e){function t(e){return function(t){n++>0||e(t)}}var n=0,r=t(c);try{e(t(l),r)}catch(e){r(e)}}if(!(this instanceof e))throw new Error("Promise must be called with `new`");if("function"!=typeof t)throw new TypeError("executor must be a function");var o=this,a=[],i=[],l=n(a,!0),c=n(i,!1),s=o._instance={resolvers:a,rejectors:i},u="function"==typeof setImmediate?setImmediate:setTimeout;r(t)};if(u.prototype.then=function(e,t){function n(e,t,n,a){t.push(function(t){if("function"!=typeof e)n(t);else try{r(e(t))}catch(e){o&&o(e)}}),"function"==typeof i.retry&&a===i.state&&i.retry()}var r,o,a=this,i=a._instance,l=new u(function(e,t){r=e,o=t});return n(e,i.resolvers,r,!0),n(t,i.rejectors,o,!1),l},u.prototype.catch=function(e){return this.then(null,e)},u.resolve=function(e){return e instanceof u?e:new u(function(t){t(e)})},u.reject=function(e){return new u(function(t,n){n(e)})},u.all=function(e){return new u(function(t,n){var r=e.length,o=0,a=[];if(0===e.length)t([]);else for(var i=0;i<e.length;i++)!function(i){function l(e){o++,a[i]=e,o===r&&t(a)}null==e[i]||"object"!==b(e[i])&&"function"!=typeof e[i]||"function"!=typeof e[i].then?l(e[i]):e[i].then(l,n)}(i)})},u.race=function(e){return new u(function(t,n){for(var r=0;r<e.length;r++)e[r].then(t,n)})},"undefined"!=typeof window){void 0===window.Promise&&(window.Promise=u);var u=window.Promise}else if(void 0!==v){void 0===v.Promise&&(v.Promise=u);var u=v.Promise}var d=function(e){function t(e,r){if(Array.isArray(r))for(var o=0;o<r.length;o++)t(e+"["+o+"]",r[o]);else if("[object Object]"===Object.prototype.toString.call(r))for(var o in r)t(e+"["+o+"]",r[o]);else n.push(encodeURIComponent(e)+(null!=r&&""!==r?"="+encodeURIComponent(r):""))}if("[object Object]"!==Object.prototype.toString.call(e))return"";var n=[];for(var r in e)t(r,e[r]);return n.join("&")},f=new RegExp("^file://","i"),m=function(e,t){function n(e){h=e}function r(){function e(){0==--t&&"function"==typeof h&&h()}var t=0;return function n(r){var o=r.then;return r.then=function(){t++;var a=o.apply(r,arguments);return a.then(e,function(n){if(e(),0===t)throw n}),n(a)},r}}function o(e,t){if("string"==typeof e){var n=e;e=t||{},null==e.url&&(e.url=n)}return e}function a(n,a){var i=r();n=o(n,a);var d=new t(function(t,r){null==n.method&&(n.method="GET"),n.method=n.method.toUpperCase();var o="GET"!==n.method&&"TRACE"!==n.method&&("boolean"!=typeof n.useBody||n.useBody);"function"!=typeof n.serialize&&(n.serialize="undefined"!=typeof FormData&&n.data instanceof FormData?function(e){return e}:JSON.stringify),"function"!=typeof n.deserialize&&(n.deserialize=s),"function"!=typeof n.extract&&(n.extract=u),n.url=l(n.url,n.data),o?n.data=n.serialize(n.data):n.url=c(n.url,n.data);var a=new e.XMLHttpRequest,i=!1,d=a.abort;a.abort=function(){i=!0,d.call(a)},a.open(n.method,n.url,"boolean"!=typeof n.async||n.async,"string"==typeof n.user?n.user:void 0,"string"==typeof n.password?n.password:void 0),n.serialize===JSON.stringify&&o&&a.setRequestHeader("Content-Type","application/json; charset=utf-8"),n.deserialize===s&&a.setRequestHeader("Accept","application/json, text/*"),n.withCredentials&&(a.withCredentials=n.withCredentials);for(var h in n.headers)({}).hasOwnProperty.call(n.headers,h)&&a.setRequestHeader(h,n.headers[h]);"function"==typeof n.config&&(a=n.config(a,n)||a),a.onreadystatechange=function(){if(!i&&4===a.readyState)try{var e=n.extract!==u?n.extract(a,n):n.deserialize(n.extract(a,n));if(a.status>=200&&a.status<300||304===a.status||f.test(n.url))t(m(n.type,e));else{var o=new Error(a.responseText);for(var l in e)o[l]=e[l];r(o)}}catch(e){r(e)}},o&&null!=n.data?a.send(n.data):a.send()});return n.background===!0?d:i(d)}function i(n,a){var i=r();n=o(n,a);var s=new t(function(t,r){var o=n.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+p++,a=e.document.createElement("script");e[o]=function(r){a.parentNode.removeChild(a),t(m(n.type,r)),delete e[o]},a.onerror=function(){a.parentNode.removeChild(a),r(new Error("JSONP request failed")),delete e[o]},null==n.data&&(n.data={}),n.url=l(n.url,n.data),n.data[n.callbackKey||"callback"]=o,a.src=c(n.url,n.data),e.document.documentElement.appendChild(a)});return n.background===!0?s:i(s)}function l(e,t){if(null==t)return e;for(var n=e.match(/:[^\/]+/gi)||[],r=0;r<n.length;r++){var o=n[r].slice(1);null!=t[o]&&(e=e.replace(n[r],t[o]))}return e}function c(e,t){var n=d(t);if(""!==n){e+=(e.indexOf("?")<0?"?":"&")+n}return e}function s(e){try{return""!==e?JSON.parse(e):null}catch(t){throw new Error(e)}}function u(e){return e.responseText}function m(e,t){if("function"==typeof e){if(!Array.isArray(t))return new e(t);for(var n=0;n<t.length;n++)t[n]=new e(t[n])}return t}var h,p=0;return{request:a,jsonp:i,setCompletionCallback:n}}(window,u),h=function(e){function n(e){return U=e}function r(e,t,n,r,a,i,l){for(var c=n;c<r;c++){var s=t[c];null!=s&&o(e,s,a,l,i)}}function o(e,t,n,r,o){var s=t.tag;if("string"!=typeof s)return u(e,t,n,r,o);switch(t.state={},null!=t.attrs&&B(t.attrs,t,n),s){case"#":return a(e,t,o);case"<":return i(e,t,o);case"[":return l(e,t,n,r,o);default:return c(e,t,n,r,o)}}function a(e,t,n){return t.dom=V.createTextNode(t.children),O(e,t.dom,n),t.dom}function i(e,t,n){var r=t.children.match(/^\s*?<(\w+)/im)||[],o={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"}[r[1]]||"div",a=V.createElement(o);a.innerHTML=t.children,t.dom=a.firstChild,t.domSize=a.childNodes.length;for(var i,l=V.createDocumentFragment();i=a.firstChild;)l.appendChild(i);return O(e,l,n),l}function l(e,t,n,o,a){var i=V.createDocumentFragment();if(null!=t.children){var l=t.children;r(i,l,0,l.length,n,null,o)}return t.dom=i.firstChild,t.domSize=i.childNodes.length,O(e,i,a),i}function c(e,n,o,a,i){var l=n.tag;switch(n.tag){case"svg":a="http://www.w3.org/2000/svg";break;case"math":a="http://www.w3.org/1998/Math/MathML"}var c=n.attrs,s=c&&c.is,u=a?s?V.createElementNS(a,l,{is:s}):V.createElementNS(a,l):s?V.createElement(l,{is:s}):V.createElement(l);if(n.dom=u,null!=c&&T(n,c,a),O(e,u,i),null!=n.attrs&&null!=n.attrs.contenteditable)z(n);else if(null!=n.text&&(""!==n.text?u.textContent=n.text:n.children=[t("#",void 0,void 0,n.text,void 0,void 0)]),null!=n.children){var d=n.children;r(u,d,0,d.length,o,null,a),A(n)}return u}function s(e,n){var r;if("function"==typeof e.tag.view){if(e.state=Object.create(e.tag),r=e.state.view,null!=r.$$reentrantLock$$)return K;r.$$reentrantLock$$=!0}else{if(e.state=void 0,r=e.tag,null!=r.$$reentrantLock$$)return K;r.$$reentrantLock$$=!0,e.state=null!=e.tag.prototype&&"function"==typeof e.tag.prototype.view?new e.tag(e):e.tag(e)}if(e._state=e.state,null!=e.attrs&&B(e.attrs,e,n),B(e._state,e,n),e.instance=t.normalize(e._state.view.call(e.state,e)),e.instance===e)throw Error("A view cannot return the vnode it received as argument");r.$$reentrantLock$$=null}function u(e,t,n,r,a){if(s(t,n),null!=t.instance){var i=o(e,t.instance,n,r,a);return t.dom=t.instance.dom,t.domSize=null!=t.dom?t.instance.domSize:0,O(e,i,a),i}return t.domSize=0,K}function d(e,t,n,a,i,l,c){if(t!==n&&(null!=t||null!=n))if(null==t)r(e,n,0,n.length,i,l,void 0);else if(null==n)N(t,0,t.length,n);else{if(t.length===n.length){for(var s=!1,u=0;u<n.length;u++)if(null!=n[u]&&null!=t[u]){s=null==n[u].key&&null==t[u].key;break}if(s){for(var u=0;u<t.length;u++)t[u]!==n[u]&&(null==t[u]&&null!=n[u]?o(e,n[u],i,c,x(t,u+1,l)):null==n[u]?N(t,u,u+1,n):f(e,t[u],n[u],i,x(t,u+1,l),a,c));return}}if(a=a||y(t,n)){var d=t.pool;t=t.concat(t.pool)}for(var m,h=0,p=0,v=t.length-1,b=n.length-1;v>=h&&b>=p;){var g=t[h],z=n[p];if(g!==z||a)if(null==g)h++;else if(null==z)p++;else if(g.key===z.key){var _=null!=d&&h>=t.length-d.length||null==d&&a;h++,p++,f(e,g,z,i,x(t,h,l),_,c),a&&g.tag===z.tag&&O(e,k(g),l)}else{var g=t[v];if(g!==z||a)if(null==g)v--;else if(null==z)p++;else{if(g.key!==z.key)break;var _=null!=d&&v>=t.length-d.length||null==d&&a;f(e,g,z,i,x(t,v+1,l),_,c),(a||p<b)&&O(e,k(g),x(t,h,l)),v--,p++}else v--,p++}else h++,p++}for(;v>=h&&b>=p;){var g=t[v],z=n[b];if(g!==z||a)if(null==g)v--;else if(null==z)b--;else if(g.key===z.key){var _=null!=d&&v>=t.length-d.length||null==d&&a;f(e,g,z,i,x(t,v+1,l),_,c),a&&g.tag===z.tag&&O(e,k(g),l),null!=g.dom&&(l=g.dom),v--,b--}else{if(m||(m=w(t,v)),null!=z){var C=m[z.key];if(null!=C){var S=t[C],_=null!=d&&C>=t.length-d.length||null==d&&a;f(e,S,z,i,x(t,v+1,l),a,c),O(e,k(S),l),t[C].skip=!0,null!=S.dom&&(l=S.dom)}else{var T=o(e,z,i,void 0,l);l=T}}b--}else v--,b--;if(b<p)break}r(e,n,p,b+1,i,l,c),N(t,h,v+1,n)}}function f(e,t,n,r,a,i,l){var c=t.tag;if(c===n.tag){if(n.state=t.state,n._state=t._state,n.events=t.events,!i&&q(n,t))return;if("string"==typeof c)switch(null!=n.attrs&&(i?(n.state={},B(n.attrs,n,r)):R(n.attrs,n,r)),c){case"#":m(t,n);break;case"<":h(e,t,n,a);break;case"[":p(e,t,n,i,r,a,l);break;default:v(t,n,i,r,l)}else g(e,t,n,r,a,i,l)}else _(t,null),o(e,n,r,l,a)}function m(e,t){e.children.toString()!==t.children.toString()&&(e.dom.nodeValue=t.children),t.dom=e.dom}function h(e,t,n,r){t.children!==n.children?(k(t),i(e,n,r)):(n.dom=t.dom,n.domSize=t.domSize)}function p(e,t,n,r,o,a,i){d(e,t.children,n.children,r,o,a,i);var l=0,c=n.children;if(n.dom=null,null!=c){for(var s=0;s<c.length;s++){var u=c[s];null!=u&&null!=u.dom&&(null==n.dom&&(n.dom=u.dom),l+=u.domSize||1)}1!==l&&(n.domSize=l)}}function v(e,n,r,o,a){var i=n.dom=e.dom;switch(n.tag){case"svg":a="http://www.w3.org/2000/svg";break;case"math":a="http://www.w3.org/1998/Math/MathML"}"textarea"===n.tag&&(null==n.attrs&&(n.attrs={}),null!=n.text&&(n.attrs.value=n.text,n.text=void 0)),j(n,e.attrs,n.attrs,a),null!=n.attrs&&null!=n.attrs.contenteditable?z(n):null!=e.text&&null!=n.text&&""!==n.text?e.text.toString()!==n.text.toString()&&(e.dom.firstChild.nodeValue=n.text):(null!=e.text&&(e.children=[t("#",void 0,void 0,e.text,void 0,e.dom.firstChild)]),null!=n.text&&(n.children=[t("#",void 0,void 0,n.text,void 0,void 0)]),d(i,e.children,n.children,r,o,null,a))}function g(e,n,r,a,i,l,c){if(l)s(r,a);else{if(r.instance=t.normalize(r._state.view.call(r.state,r)),r.instance===r)throw Error("A view cannot return the vnode it received as argument");null!=r.attrs&&R(r.attrs,r,a),R(r._state,r,a)}null!=r.instance?(null==n.instance?o(e,r.instance,a,c,i):f(e,n.instance,r.instance,a,i,l,c),r.dom=r.instance.dom,r.domSize=r.instance.domSize):null!=n.instance?(_(n.instance,null),r.dom=void 0,r.domSize=0):(r.dom=n.dom,r.domSize=n.domSize)}function y(e,t){if(null!=e.pool&&Math.abs(e.pool.length-t.length)<=Math.abs(e.length-t.length)){var n=e[0]&&e[0].children&&e[0].children.length||0,r=e.pool[0]&&e.pool[0].children&&e.pool[0].children.length||0,o=t[0]&&t[0].children&&t[0].children.length||0;if(Math.abs(r-o)<=Math.abs(n-o))return!0}return!1}function w(e,t){for(var n={},r=0,r=0;r<t;r++){var o=e[r];if(null!=o){var a=o.key;null!=a&&(n[a]=r)}}return n}function k(e){var t=e.domSize;if(null!=t||null==e.dom){var n=V.createDocumentFragment();if(t>0){for(var r=e.dom;--t;)n.appendChild(r.nextSibling);n.insertBefore(r,n.firstChild)}return n}return e.dom}function x(e,t,n){for(;t<e.length;t++)if(null!=e[t]&&null!=e[t].dom)return e[t].dom;return n}function O(e,t,n){n&&n.parentNode?e.insertBefore(t,n):e.appendChild(t)}function z(e){var t=e.children;if(null!=t&&1===t.length&&"<"===t[0].tag){var n=t[0].children;e.dom.innerHTML!==n&&(e.dom.innerHTML=n)}else if(null!=e.text||null!=t&&0!==t.length)throw new Error("Child node of a contenteditable must be trusted")}function N(e,t,n,r){for(var o=t;o<n;o++){var a=e[o];null!=a&&(a.skip?a.skip=!1:_(a,r))}}function _(e,t){function n(){if(++o===r&&(S(e),e.dom)){var n=e.domSize||1;if(n>1)for(var a=e.dom;--n;)C(a.nextSibling);C(e.dom),null==t||null!=e.domSize||P(e.attrs)||"string"!=typeof e.tag||(t.pool?t.pool.push(e):t.pool=[e])}}var r=1,o=0;if(e.attrs&&"function"==typeof e.attrs.onbeforeremove){var a=e.attrs.onbeforeremove.call(e.state,e);null!=a&&"function"==typeof a.then&&(r++,a.then(n,n))}if("string"!=typeof e.tag&&"function"==typeof e._state.onbeforeremove){var a=e._state.onbeforeremove.call(e.state,e);null!=a&&"function"==typeof a.then&&(r++,a.then(n,n))}n()}function C(e){var t=e.parentNode;null!=t&&t.removeChild(e)}function S(e){if(e.attrs&&"function"==typeof e.attrs.onremove&&e.attrs.onremove.call(e.state,e),"string"!=typeof e.tag&&"function"==typeof e._state.onremove&&e._state.onremove.call(e.state,e),null!=e.instance)S(e.instance);else{var t=e.children;if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];null!=r&&S(r)}}}function T(e,t,n){for(var r in t)E(e,r,null,t[r],n)}function E(e,t,n,r,o){var a=e.dom;if("key"!==t&&"is"!==t&&(n!==r||M(e,t)||"object"===(void 0===r?"undefined":b(r)))&&void 0!==r&&!D(t)){var i=t.indexOf(":");if(i>-1&&"xlink"===t.substr(0,i))a.setAttributeNS("http://www.w3.org/1999/xlink",t.slice(i+1),r);else if("o"===t[0]&&"n"===t[1]&&"function"==typeof r)F(e,t,r);else if("style"===t)I(a,n,r);else if(t in a&&!L(t)&&void 0===o&&!$(e)){if("input"===e.tag&&"value"===t&&e.dom.value==r&&e.dom===V.activeElement)return;if("select"===e.tag&&"value"===t&&e.dom.value==r&&e.dom===V.activeElement)return;if("option"===e.tag&&"value"===t&&e.dom.value==r)return;if("input"===e.tag&&"type"===t)return void a.setAttribute(t,r);a[t]=r}else"boolean"==typeof r?r?a.setAttribute(t,""):a.removeAttribute(t):a.setAttribute("className"===t?"class":t,r)}}function A(e){var t=e.attrs;"select"===e.tag&&null!=t&&("value"in t&&E(e,"value",null,t.value,void 0),"selectedIndex"in t&&E(e,"selectedIndex",null,t.selectedIndex,void 0))}function j(e,t,n,r){if(null!=n)for(var o in n)E(e,o,t&&t[o],n[o],r);if(null!=t)for(var o in t)null!=n&&o in n||("className"===o&&(o="class"),"o"!==o[0]||"n"!==o[1]||D(o)?"key"!==o&&e.dom.removeAttribute(o):F(e,o,void 0))}function M(e,t){return"value"===t||"checked"===t||"selectedIndex"===t||"selected"===t&&e.dom===V.activeElement}function D(e){return"oninit"===e||"oncreate"===e||"onupdate"===e||"onremove"===e||"onbeforeremove"===e||"onbeforeupdate"===e}function L(e){return"href"===e||"list"===e||"form"===e||"width"===e||"height"===e}function $(e){return e.attrs.is||e.tag.indexOf("-")>-1}function P(e){return null!=e&&(e.oncreate||e.onupdate||e.onbeforeremove||e.onremove)}function I(e,t,n){if(t===n&&(e.style.cssText="",t=null),null==n)e.style.cssText="";else if("string"==typeof n)e.style.cssText=n;else{"string"==typeof t&&(e.style.cssText="");for(var r in n)e.style[r]=n[r];if(null!=t&&"string"!=typeof t)for(var r in t)r in n||(e.style[r]="")}}function F(e,t,n){var r=e.dom,o="function"!=typeof U?n:function(e){var t=n.call(r,e);return U.call(r,e),t};if(t in r)r[t]="function"==typeof n?o:null;else{var a=t.slice(2);if(void 0===e.events&&(e.events={}),e.events[t]===o)return;null!=e.events[t]&&r.removeEventListener(a,e.events[t],!1),"function"==typeof n&&(e.events[t]=o,r.addEventListener(a,e.events[t],!1))}}function B(e,t,n){"function"==typeof e.oninit&&e.oninit.call(t.state,t),"function"==typeof e.oncreate&&n.push(e.oncreate.bind(t.state,t))}function R(e,t,n){"function"==typeof e.onupdate&&n.push(e.onupdate.bind(t.state,t))}function q(e,t){var n,r;return null!=e.attrs&&"function"==typeof e.attrs.onbeforeupdate&&(n=e.attrs.onbeforeupdate.call(e.state,e,t)),"string"!=typeof e.tag&&"function"==typeof e._state.onbeforeupdate&&(r=e._state.onbeforeupdate.call(e.state,e,t)),!(void 0===n&&void 0===r||n||r)&&(e.dom=t.dom,e.domSize=t.domSize,e.instance=t.instance,!0)}function H(e,n){if(!e)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var r=[],o=V.activeElement;null==e.vnodes&&(e.textContent=""),Array.isArray(n)||(n=[n]),d(e,e.vnodes,t.normalizeChildren(n),!1,r,null,void 0),e.vnodes=n;for(var a=0;a<r.length;a++)r[a]();V.activeElement!==o&&o.focus()}var U,V=e.document,K=V.createDocumentFragment();return{render:H,setEventCallback:n}},p=function(e){function t(e,t){n(e),i.push(e,a(t))}function n(e){var t=i.indexOf(e);t>-1&&i.splice(t,2)}function r(){for(var e=1;e<i.length;e+=2)i[e]()}var o=h(e);o.setEventCallback(function(e){e.redraw!==!1&&r()});var i=[];return{subscribe:t,unsubscribe:n,redraw:r,render:o.render}}(window);m.setCompletionCallback(p.redraw);s.mount=function(e){return function(n,r){if(null===r)return e.render(n,[]),void e.unsubscribe(n);if(null==r.view&&"function"!=typeof r)throw new Error("m.mount(element, component) expects a component, not a vnode");var o=function(){e.render(n,t(r))};e.subscribe(n,o),e.redraw()}}(p);var g=u,y=function(e){if(""===e||null==e)return{};"?"===e.charAt(0)&&(e=e.slice(1));for(var t=e.split("&"),n={},r={},o=0;o<t.length;o++){var a=t[o].split("="),i=decodeURIComponent(a[0]),l=2===a.length?decodeURIComponent(a[1]):"";"true"===l?l=!0:"false"===l&&(l=!1);var c=i.split(/\]\[?|\[/),s=n;i.indexOf("[")>-1&&c.pop();for(var u=0;u<c.length;u++){var d=c[u],f=c[u+1],m=""==f||!isNaN(parseInt(f,10)),h=u===c.length-1;if(""===d){var i=c.slice(0,u).join();null==r[i]&&(r[i]=0),d=r[i]++}null==s[d]&&(s[d]=h?l:m?[]:{}),s=s[d]}}return n},w=function(e){function t(t){var n=e.location[t].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);return"pathname"===t&&"/"!==n[0]&&(n="/"+n),n}function n(e){return function(){null==o&&(o=i(function(){o=null,e()}))}}function r(e,t,n){var r=e.indexOf("?"),o=e.indexOf("#"),a=r>-1?r:o>-1?o:e.length;if(r>-1){var i=o>-1?o:e.length,l=y(e.slice(r+1,i));for(var c in l)t[c]=l[c]}if(o>-1){var s=y(e.slice(o+1));for(var c in s)n[c]=s[c]}return e.slice(0,a)}var o,a="function"==typeof e.history.pushState,i="function"==typeof setImmediate?setImmediate:setTimeout,l={prefix:"#!"};return l.getPath=function(){switch(l.prefix.charAt(0)){case"#":return t("hash").slice(l.prefix.length);case"?":return t("search").slice(l.prefix.length)+t("hash");default:return t("pathname").slice(l.prefix.length)+t("search")+t("hash")}},l.setPath=function(t,n,o){var i={},c={};if(t=r(t,i,c),null!=n){for(var s in n)i[s]=n[s];t=t.replace(/:([^\/]+)/g,function(e,t){return delete i[t],n[t]})}var u=d(i);u&&(t+="?"+u);var f=d(c);if(f&&(t+="#"+f),a){var m=o?o.state:null,h=o?o.title:null;e.onpopstate(),o&&o.replace?e.history.replaceState(m,h,l.prefix+t):e.history.pushState(m,h,l.prefix+t)}else e.location.href=l.prefix+t},l.defineRoutes=function(t,o,i){function c(){var n=l.getPath(),a={},c=r(n,a,a),s=e.history.state;if(null!=s)for(var u in s)a[u]=s[u];for(var d in t){
var f=new RegExp("^"+d.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(f.test(c))return void c.replace(f,function(){for(var e=d.match(/:[^\/]+/g)||[],r=[].slice.call(arguments,1,-2),i=0;i<e.length;i++)a[e[i].replace(/:|\./g,"")]=decodeURIComponent(r[i]);o(t[d],a,n,d)})}i(n,a)}a?e.onpopstate=n(c):"#"===l.prefix.charAt(0)&&(e.onhashchange=c),c()},l};s.route=function(e,n){var r,o,a,i,l,c=w(e),s=function(e){return e},u=function(e,u,d){if(null==e)throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");var f=function(){null!=r&&n.render(e,r(t(o,a.key,a)))},m=function(e){if(e===u)throw new Error("Could not resolve default route "+u);c.setPath(u,null,{replace:!0})};c.defineRoutes(d,function(e,t,n){var c=l=function(e,u){c===l&&(o=null==u||"function"!=typeof u.view&&"function"!=typeof u?"div":u,a=t,i=n,l=null,r=(e.render||s).bind(e),f())};e.view||"function"==typeof e?c({},e):e.onmatch?g.resolve(e.onmatch(t,n)).then(function(t){c(e,t)},m):c(e,"div")},m),n.subscribe(e,f)};return u.set=function(e,t,n){null!=l&&(n={replace:!0}),l=null,c.setPath(e,t,n)},u.get=function(){return i},u.prefix=function(e){c.prefix=e},u.link=function(e){e.dom.setAttribute("href",c.prefix+e.attrs.href),e.dom.onclick=function(e){if(!(e.ctrlKey||e.metaKey||e.shiftKey||2===e.which)){e.preventDefault(),e.redraw=!1;var t=this.getAttribute("href");0===t.indexOf(c.prefix)&&(t=t.slice(c.prefix.length)),u.set(t,void 0,void 0)}}},u.param=function(e){return void 0!==a&&void 0!==e?a[e]:a},u}(window,p),s.withAttr=function(e,t,n){return function(r){t.call(n||this,e in r.currentTarget?r.currentTarget[e]:r.currentTarget.getAttribute(e))}};var k=h(window);s.render=k.render,s.redraw=p.redraw,s.request=m.request,s.jsonp=m.jsonp,s.parseQueryString=y,s.buildQueryString=d,s.version="1.1.0",s.vnode=t,e.exports=s}()}),y=Object.freeze({default:g,__moduleExports:g}),w=y&&g||y,k=w.trust('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm4.24 16L12 15.45 7.77 18l1.12-4.81-3.73-3.23 4.92-.42L12 5l1.92 4.53 4.92.42-3.73 3.23L16.23 18z"/></svg>'),x=[].concat(p({svg:t.svg,renderer:t.renderer})).concat(function(e){var t=e.svg,n=e.renderer;return[{name:"Child node (mmsvg)",component:t,attrs:null,children:[k]},{name:"Option: content (mmsvg)",component:t,attrs:{content:k}},{name:"Dark tone class + light theme class",className:"pe-dark-tone",component:{view:function(){return n("div",{style:{background:"#fff",padding:"10px"},className:"pe-light-tone"},n(t,{content:k}))}}},{name:"Dark tone class + light tone",className:"test-dark-theme",component:{view:function(){return n("div",{style:{background:"#fff",padding:"10px"}},n(t,{content:k,tone:"light"}))}}}]}({svg:t.svg,renderer:t.renderer})),O=Object.freeze({button:a,theme:u,ripple:f,shadow:h,svg:x}),z=o({button:r.button,renderer:r.renderer}),N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_=[].concat(i({button:r.button,renderer:r.renderer})).concat(function(){var e=function(e){return r.renderer(r.button,N({},e,{className:"tests-custom-theme-secondary-button",borders:!0}))};return r.button.theme(".tests-custom-theme-secondary-button",{color_light_border:"#ddd",color_light_background:"#fff"}),[{name:"Theme with deriving component: button (should be bordered with white background)",component:e,attrs:{label:"Bordered button"}}]}()),C=d({ripple:r.ripple,renderer:r.renderer}),S=m({shadow:r.shadow,renderer:r.renderer}),T=p({svg:r.svg,renderer:r.renderer}),E=Object.freeze({button:z,theme:_,ripple:C,shadow:S,svg:T}),A=O,j=E;e.mithrilTests=A,e.reactTests=j,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-tests.js.map
