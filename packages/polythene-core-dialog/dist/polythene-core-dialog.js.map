{"version":3,"file":"polythene-core-dialog.js","sources":["../../polythene-css-classes/list-tile.js","../../polythene-css-classes/menu.js","../../polythene-css-classes/dialog.js","../src/backdrop-transitions.js","../src/dialog.js","../src/vars.js","../src/transitions.js"],"sourcesContent":["\nexport default {\n  component:       \"pe-list-tile\",\n\n  // elements\n  content:         \"pe-list-tile__content\",\n  highSubtitle:    \"pe-list-tile__high-subtitle\",\n  primary:         \"pe-list-tile__primary\",\n  secondary:       \"pe-list-tile__secondary\",\n  subtitle:        \"pe-list-tile__subtitle\",\n  title:           \"pe-list-tile__title\",\n  contentFront:    \"pe-list-tile__content-front\",\n\n  // states\n  compact:         \"pe-list-tile--compact\",\n  compactFront:    \"pe-list-tile--compact-front\",\n  disabled:        \"pe-list-tile--disabled\",\n  hasFront:        \"pe-list-tile--front\",\n  hasHighSubtitle: \"pe-list-tile--high-subtitle\",\n  hasSubtitle:     \"pe-list-tile--subtitle\",\n  header:          \"pe-list-tile--header\",\n  hoverable:       \"pe-list-tile--hoverable\",\n  selectable:      \"pe-list-tile--selectable\",\n  selected:        \"pe-list-tile--selected\",\n  highlight:       \"pe-list-tile--highlight\",\n  sticky:          \"pe-list-tile--sticky\",\n  navigation:      \"pe-list-tile--navigation\",\n};\n","import listTileClasses from \"./list-tile\";\n\nexport default {\n  component:   \"pe-menu\",\n\n  // elements\n  content:     \"pe-menu__content\",\n  placeholder: \"pe-menu__placeholder\",\n  target:      \"pe-menu__target\",\n\n  // states\n  permanent:   \"pe-menu--permanent\",\n  fullHeight:  \"pe-menu--full-height\",\n  floating:    \"pe-menu--floating\",\n  visible:     \"pe-menu--visible\",\n  width_auto:  \"pe-menu--width-auto\",\n  width_n:     \"pe-menu--width-\",\n\n  // lookup\n  listTile:         listTileClasses.component,\n  selectedListTile: listTileClasses.selected,\n};","import menuClasses from \"./menu\";\n\nexport default {\n  component:         \"pe-dialog\",\n\n  // elements\n  placeholder:       \"pe-dialog__placeholder\",\n  holder:            \"pe-dialog__holder\",\n  content:           \"pe-dialog__content\",\n  backdrop:          \"pe-dialog__backdrop\",\n  touch:             \"pe-dialog__touch\",\n\n  // states\n  fullScreen:        \"pe-dialog--full-screen\",\n  open:              \"pe-dialog--open\",\n\n  // lookup\n  menuContent:       menuClasses.content,\n};\n","const ANIMATION_DURATION = .220;\n\nconst show = ({ el, showDuration, showDelay }) => ({\n  el,\n  showDuration: showDuration || ANIMATION_DURATION,\n  showDelay:    showDelay || 0,\n  beforeShow:   () => el.style.opacity = 0,\n  show:         () => el.style.opacity = 1,\n});\n\nconst hide = ({ el, hideDuration, hideDelay }) => ({\n  el,\n  hideDuration: hideDuration || ANIMATION_DURATION,\n  hideDelay:    hideDelay || 0,\n  hide:         () => el.style.opacity = 0\n});\n\nexport default {\n  show,\n  hide\n};\n","import { filterSupportedAttributes, subscribe, unsubscribe, show, hide } from \"polythene-core\";\nimport classes from \"polythene-css-classes/dialog\";\nimport defaultBackdropTransitions from \"./backdrop-transitions\";\n\nexport const getElement = vnode =>\n  vnode.attrs.element || \"div\";\n\nconst DEFAULT_Z    = 3;\n\nconst showDialog = (state, attrs) => {\n  if (state.transitioning()) {\n    return Promise.resolve();\n  }\n  const id = state.instanceId;\n  state.transitioning(true);\n  // Show backdrop\n  if (attrs.backdrop) {\n    const backdropTransitions = attrs.backdropTransitions || defaultBackdropTransitions;\n    show(Object.assign({},\n      attrs,\n      backdropTransitions.show({ el: state.backdropEl, showDuration: attrs.showDuration, showDelay: attrs.showDelay })\n    ));\n  }\n\n  // Show pane\n  const transitions = attrs.transitions;\n  return show(Object.assign({},\n    attrs,\n    transitions.show({ el: state.el, contentEl: state.contentEl, showDuration: attrs.showDuration, showDelay: attrs.showDelay })\n  )).then(() => {\n    if (attrs.fromMultipleDidShow) {\n      attrs.fromMultipleDidShow(id); // when used with Multiple; this will call attrs.didShow\n    } else if (attrs.didShow) {\n      attrs.didShow(id); // when used directly\n    }\n    state.transitioning(false);\n  });\n};\n\nconst hideDialog = (state, attrs) => {\n  if (state.transitioning()) {\n    return Promise.resolve();\n  }\n  const id = state.instanceId;\n  state.transitioning(true);\n\n  // Hide backdrop\n  if (attrs.backdrop) {\n    const backdropTransitions = attrs.backdropTransitions || defaultBackdropTransitions;\n    hide(Object.assign({},\n      attrs,\n      backdropTransitions.hide({ el: state.backdropEl, hideDuration: attrs.hideDuration, hideDelay: attrs.hideDelay })\n    ));\n  }\n\n  // Hide pane\n  const transitions = attrs.transitions;\n  return hide(Object.assign({},\n    attrs,\n    transitions.hide({ el: state.el, contentEl: state.contentEl, hideDuration: attrs.hideDuration, hideDelay: attrs.hideDelay })\n  )).then(() => {\n    if (attrs.fromMultipleDidHide) {\n      attrs.fromMultipleDidHide(id); // when used with Multiple; this will call attrs.didHide\n    } else if (attrs.didHide) {\n      attrs.didHide(id); // when used directly\n    }\n    state.transitioning(false);\n  });\n};\n\nexport const getInitialState = (vnode, createStream) => {\n  const transitioning = createStream(false);\n  return {\n    backdropEl: undefined,\n    touchEl:    undefined,\n    cleanUp:    undefined,\n    el:         undefined,\n    contentEl:  undefined,\n    transitioning,\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const dom = vnode.dom;\n  state.el = dom;\n  state.backdropEl = dom.querySelector(`.${classes.backdrop}`);\n  state.touchEl = dom.querySelector(`.${classes.touch}`);\n  state.contentEl = dom.querySelector(`.${classes.content}`);\n\n  if (!attrs.permanent) {\n\n    const handleEscape = e => {\n      if (attrs.fullScreen || attrs.modal) return;\n      if (e.key === \"Escape\") {\n        hideDialog(state, Object.assign({}, attrs, {\n          hideDelay: 0\n        }));\n      }\n    };\n\n    state.cleanUp = () => (\n      unsubscribe(\"keydown\", handleEscape)\n    );\n\n    subscribe(\"keydown\", handleEscape);\n\n    if (attrs.show) {\n      showDialog(state, attrs);\n    }\n  }\n};\n\nexport const onUnMount = vnode => (\n  vnode.state.cleanUp && vnode.state.cleanUp()\n);\n\nexport const createProps = (vnode, { keys: k }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  \n  return Object.assign(\n    {},\n    filterSupportedAttributes(attrs, { remove: [\"style\"] }), // style set in content, and set by show/hide transition\n    {\n      className: [\n        classes.component,\n        attrs.fullScreen ? classes.fullScreen : null,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \"),\n      \"data-spawn-id\": attrs.spawnId,\n      \"data-instance-id\": attrs.instanceId,\n      // click backdrop: close dialog\n      [k.onclick]: e => {\n        if (e.target !== state.el && e.target !== state.backdropEl && e.target !== state.touchEl) {\n          return;\n        }\n        if (attrs.modal) {\n          // not allowed\n          return;\n        }\n        hideDialog(state, Object.assign({}, attrs, {\n          hideDelay: 0\n        }));\n      }\n    },\n    attrs.formOptions ? attrs.formOptions : null\n  );\n};\n\nexport const createPane = (vnode, { renderer: h, Pane }) => {\n  const attrs = vnode.attrs;\n  return h(Pane,\n    {\n      title: attrs.title,\n      header: attrs.header,\n      body: attrs.content || attrs.body || attrs.menu,\n      footer: attrs.footer,\n      footerButtons: attrs.footerButtons,\n      className: attrs.className,\n      style: attrs.style,\n      fullBleed: attrs.fullBleed\n    }\n  );\n};\n\nexport const createContent = (vnode, { renderer, Shadow, createPane, Pane }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const h = renderer;\n\n  if (attrs.hide) {\n    hideDialog(state, attrs);\n  }\n  const pane = attrs.panes && attrs.panes.length\n    ? attrs.panes[0]\n    : createPane(vnode, { renderer, Pane} );\n  return [\n    attrs.backdrop && h(\"div\",\n      {\n        key: \"backdrop\",\n        className: classes.backdrop\n      }\n    ),\n    h(\"div\",\n      {\n        key: \"touch\",\n        className: classes.touch\n      }\n    ),\n    h(\"div\",\n      {\n        className: [\n          classes.content,\n          attrs.menu ? classes.menuContent : null\n        ].join(\" \"),\n        key: \"content\"\n      },\n      [\n        attrs.fullScreen\n          ? null\n          : h(Shadow, {\n            z: attrs.z !== undefined ? attrs.z : DEFAULT_Z,\n            animated: true,\n            key: \"shadow\"\n          }),\n        pane\n      ]\n    )\n  ];\n};\n","import { vars } from \"polythene-theme\";\n\nconst rgba = (colorStr, opacity = 1) =>\n  `rgba(${colorStr}, ${opacity})`;\n\nexport default {\n  position:                        \"fixed\",\n  border_radius:                   vars.unit_block_border_radius,\n  padding_vertical:                3 * vars.grid_unit_component,\n  padding_horizontal:              5 * vars.grid_unit_component,\n  \n  color_light_backdrop_background: \"rgba(0, 0, 0, .4)\",\n  color_dark_backdrop_background:  \"rgba(0, 0, 0, .5)\",\n\n  color_light_background:          rgba(vars.color_light_background),\n  color_dark_background:           rgba(vars.color_dark_background),\n\n  color_light_text:                rgba(vars.color_light_foreground, vars.blend_light_text_regular),\n  color_dark_text:                 rgba(vars.color_dark_foreground, vars.blend_dark_text_regular),\n};\n","const ANIMATION_DURATION = .220;\n\nconst show = ({ contentEl, showDuration, showDelay }) => ({\n  el: contentEl,\n  showDuration: showDuration || ANIMATION_DURATION,\n  showDelay:    showDelay || 0,\n  beforeShow:   () => contentEl.style.opacity = 0,\n  show:         () => contentEl.style.opacity = 1,\n});\n\nconst hide = ({ contentEl, hideDuration, hideDelay }) => ({\n  el: contentEl,\n  hideDuration: hideDuration || ANIMATION_DURATION,\n  hideDelay:    hideDelay || 0,\n  hide:         () => contentEl.style.opacity = 0\n});\n\nexport default {\n  show,\n  hide\n};\n"],"names":["listTileClasses","component","selected","menuClasses","content","ANIMATION_DURATION","show","el","showDuration","showDelay","style","opacity","hide","hideDuration","hideDelay","getElement","vnode","attrs","element","DEFAULT_Z","showDialog","state","transitioning","Promise","resolve","id","instanceId","backdrop","backdropTransitions","defaultBackdropTransitions","backdropEl","transitions","contentEl","then","fromMultipleDidShow","didShow","hideDialog","fromMultipleDidHide","didHide","getInitialState","createStream","undefined","onMount","dom","querySelector","classes","touchEl","touch","permanent","handleEscape","fullScreen","modal","e","key","cleanUp","unsubscribe","onUnMount","createProps","k","keys","filterSupportedAttributes","remove","tone","className","class","join","spawnId","onclick","target","formOptions","createPane","h","renderer","Pane","title","header","body","menu","footer","footerButtons","fullBleed","createContent","Shadow","pane","panes","length","menuContent","z","rgba","colorStr","vars","unit_block_border_radius","grid_unit_component","color_light_background","color_dark_background","color_light_foreground","blend_light_text_regular","color_dark_foreground","blend_dark_text_regular"],"mappings":"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"}