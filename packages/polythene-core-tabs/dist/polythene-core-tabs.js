!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("polythene-core"),require("polythene-utilities"),require("polythene-theme"),require("polythene-core-button"),require("polythene-core-icon-button")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-utilities","polythene-theme","polythene-core-button","polythene-core-icon-button"],e):e(t.polythene={},t["polythene-core"],t["polythene-utilities"],t["polythene-theme"],t["polythene-core-button"],t["polythene-core-icon-button"])}(this,function(t,e,n,o,r,l){"use strict";function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=function(t){return"rgba("+t+", "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)+")"},s=r.vars.font_size,d=1.1*s,u={tab_min_width:72,tab_max_width:"initial",tab_height:48,label_max_width:264,menu_tab_height:44,menu_tab_icon_label_height:44,tab_icon_label_height:72,tab_icon_label_icon_spacing:7,indicator_slide_speed:600,indicator_slide_min_duration:.25,tabs_indent:o.vars.unit_indent,tabs_scroll_speed:600,tabs_scroll_delay:.15,tabs_scroll_min_duration:.5,scroll_button_fade_duration:.2,scroll_button_fade_delay:.5,tab_content_padding_v:12,tab_menu_content_padding_v:6,tab_indicator_height:2,scrollbar_offset:20,scroll_button_opacity:.7,label_opacity:.7,tab_label_line_height:d,tab_label_vertical_offset:d-s,tab_label_transition_property:"opacity, color, backgroundColor",color_light:"inherit",color_light_selected:c(o.vars.color_primary),color_light_selected_background:"transparent",color_light_tab_indicator:c(o.vars.color_primary),color_light_icon:l.vars.color_light,color_dark:"inherit",color_dark_selected:c(o.vars.color_primary),color_dark_selected_background:"transparent",color_dark_tab_indicator:c(o.vars.color_primary),color_dark_icon:l.vars.color_dark},b={component:"pe-tabs",indicator:"pe-tabs__indicator",scrollButton:"pe-tabs__scroll-button",scrollButtonAtEnd:"pe-tabs__scroll-button-end",scrollButtonAtStart:"pe-tabs__scroll-button-start",scrollButtonOffset:"pe-tabs__scroll-button-offset",tab:"pe-tabs__tab",tabContent:"pe-tabs__tab-content",tabRow:"pe-tabs__row",activeSelectable:"pe-tabs__active--selectable",isAtEnd:"pe-tabs--end",isAtStart:"pe-tabs--start",isAutofit:"pe-tabs--autofit",isMenu:"pe-tabs--menu",scrollable:"pe-tabs--scrollable",compactTabs:"pe-tabs--compact",tabHasIcon:"pe-tabs__tab---icon",tabRowCentered:"pe-tabs__row--centered",tabRowIndent:"pe-tabs__row--indent",label:r.classes.label},_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},p=function(){return Promise.resolve()},f=function(t,e){var n=e.length-1;return{backward:Math.max(t-1,0),forward:Math.min(t+1,n)}},h=function(t,e,n,o){n.stopPropagation(),n.preventDefault();var r=t.selectedTabIndex(),l=f(r,t.tabs)[o];l!==r?B(t,e,l,!0):m(t,l)},v=function(t){var e=t.tabs[0].dom,n=e.querySelector("."+b.label+" span"),o=(e.getBoundingClientRect().width-n.getBoundingClientRect().width)/2;e.style.marginLeft=-o+"px"},g=function(t){var e=t.scrollButtons.end.getBoundingClientRect().width;t.tabsEl.querySelector("."+b.scrollButtonOffset).style.width=e+"px"},m=function(t,e){var o=t.tabs,r=t.scrollerEl,l=o.slice(0,e).reduce(function(t,e){return t+e.dom.getBoundingClientRect().width},0),a=r.getBoundingClientRect().width,i=r.scrollWidth-a,c=Math.min(l,i),s=r.scrollLeft;if(s!==c){var d=Math.abs(s-c)/u.tabs_scroll_speed,b=u.tabs_scroll_delay||0;setTimeout(function(){n.scrollTo({element:r,to:c,duration:Math.max(u.tabs_scroll_min_duration,d),direction:"horizontal"})},1e3*b)}},y=function(t){var e=t.scrollerEl,n=e.scrollLeft,o=t.selectedTabIndex(),r=t.tabsEl,l=t.tabs.length-1,a=0===e.scrollLeft&&0===o,i=n>=e.scrollWidth-r.getBoundingClientRect().width-1&&o===l;t.scrollButtonStates.start=!a,t.scrollButtonStates.end=!i},w=function(t,e,n){var o=n.tabsEl.getBoundingClientRect(),r=t.getBoundingClientRect(),l=n.tabIndicatorEl.style,a="translate("+(r.left-o.left+n.scrollerEl.scrollLeft)+"px, 0)",i=e?u.indicator_slide_min_duration:0;l.width=r.width+"px",l["transition-duration"]=i+"s",l.transform=a},B=function(t,e,n,o){if(t.selectedTabIndex(n),t.tabs.length){var r=t.tabs[n].dom;r&&t.tabIndicatorEl&&t.tabsEl&&w(r,o,t),t.managesScroll&&(y(t),m(t,n)),e.onChange&&e.onChange({index:n,options:t.tabs[n].attrs,el:r})}},k=function(t,e){return t<e?1:t>e?-1:0},S=function(t,n){var o=t.attrs,r=n(t.attrs.selectedTab||0),l=function(t){return function(e,n){return t.tabs[e]=n}},a=function(t){return function(e,n){return t.scrollButtons[e]=n}};return{tabsEl:void 0,scrollerEl:void 0,tabs:[],tabRow:void 0,tabIndicatorEl:void 0,selectedTabIndex:r,previousSelectedTab:void 0,managesScroll:o.scrollable&&!e.isTouch,scrollButtonStates:{start:!1,end:!1},scrollButtons:{start:void 0,end:void 0},registerTabButton:l,registerScrollButton:a,cleanUp:void 0,redrawOnUpdate:n.merge([r])}},T=function(t){var n=t.dom,o=t.state,r=t.attrs;o.tabsEl=n,r.hideIndicator||(o.tabIndicatorEl=n.querySelector("."+b.indicator)),o.scrollerEl=n.querySelector("."+b.tabRow),p().then(function(){if(o.tabs&&r.largestWidth){var t=o.tabs.map(function(t){return t.dom.getBoundingClientRect().width}).sort(k)[0];o.tabs.forEach(function(e){return e.dom.style.width=t+"px"})}r.scrollable&&v(o),o.managesScroll&&g(o),B(o,r,o.selectedTabIndex(),!1)});var l=function(){return B(o,r,o.selectedTabIndex(),!1)};e.subscribe("resize",l),o.cleanUp=function(){return e.unsubscribe("resize",l)}},x=function(t){return t.state.cleanUp()},I=function(t,n){var o=n.keys,r=t.state,l=t.attrs,a=!l.scrollable&&!l.centered&&!!l.autofit;return void 0!==l.selectedTab&&r.previousSelectedTab!==l.selectedTab&&B(r,l,l.selectedTab,!0),r.previousSelectedTab=l.selectedTab,_({},e.filterSupportedAttributes(l),{className:[b.component,l.scrollable?b.scrollable:null,0===r.selectedTabIndex?b.isAtStart:null,r.selectedTabIndex===r.tabs.length-1?b.isAtEnd:null,l.activeSelected?b.activeSelectable:null,a?b.isAutofit:null,l.compact?b.compactTabs:null,l.menu?b.isMenu:null,"dark"===l.tone?"pe-dark-tone":null,"light"===l.tone?"pe-light-tone":null,l.className||l[o.class]].join(" ")})},E=function(t,e){var n=e.renderer,o=e.keys,r=e.Tab,l=e.ScrollButton,i=t.state,c=t.attrs,s=c.content?c.content:c.tabs?c.tabs:c.children||t.children||[];0===s.length&&console.error("No tabs specified");var d=s.map(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],o=_({},t,{selected:e===i.selectedTabIndex(),animateOnTap:!1!==c.animateOnTap},c.all,{index:e,key:"tab-"+e,register:i.registerTabButton(i),onSelect:function(){return B(i,c,e,!c.noIndicatorSlide)}});return n(r,o)}),u=c.scrollable?d.concat([n("div",{key:"offset",className:b.scrollButtonOffset})]):d,p=void 0,f=void 0;c.scrollable&&(p=n(l,_({},{key:"backward",icon:c.scrollIconBackward,className:b.scrollButtonAtStart,position:"start",register:i.registerScrollButton(i),events:a({},o.onclick,function(t){return h(i,c,t,"backward")})})),f=n(l,_({},{key:"forward",icon:c.scrollIconForward,className:b.scrollButtonAtEnd,position:"end",register:i.registerScrollButton(i),events:a({},o.onclick,function(t){return h(i,c,t,"forward")})})));var v=c.hideIndicator?null:n("div",{key:"indicator",className:b.indicator});return[c.scrollable?p:null,n("div",{key:"tabrow",className:[b.tabRow,c.centered?b.tabRowCentered:null,c.scrollable?b.tabRowIndent:null].join(" ")},[u,v]),c.scrollable?f:null]},C=Object.freeze({getInitialState:S,onMount:T,onUnMount:x,createProps:I,createContent:E}),O=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},R=function(t){var e=t.dom;if(e){var n=t.attrs;n.register(n.index,{attrs:n,dom:e})}},j=function(t,e){var n=e.renderer,o=e.keys,r=e.Icon,l=t.attrs;return l.events=l.events||{},l.events[o.onclick]=l.events[o.onclick]||function(){},O({},l,{content:n("div",{className:b.tabContent},[l.icon?n(r,l.icon):null,l.label?n("div",{className:b.label},n("span",l.label)):null]),className:[b.tab,l.icon&&l.label?b.tabHasIcon:null,l.className||l[o.class]].join(" "),selected:l.selected,wash:!1,ripple:!0,events:O({},l.events,i({},o.onclick,function(t){l.onSelect(),l.events[o.onclick](t)}))})},M=function(){return null},N=Object.freeze({onMount:R,createProps:j,createContent:M}),A=function(t){var e=t.dom;if(e){var n=t.attrs;n.register(n.position,e)}},P=function(t,e){var n=e.renderer,o=e.keys,r=t.attrs,l="start"===r.position?r.icon||{svg:n.trust('<svg width="24" height="24" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>')}:r.icon||{svg:n.trust('<svg width="24" height="24" viewBox="0 0 24 24"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>')};return{className:[b.scrollButton,r.className||r[o.class]].join(" "),icon:l,ripple:{center:!0},events:r.events}},q=Object.freeze({onMount:A,createProps:P});t.coreTabs=C,t.coreTab=N,t.coreScrollButton=q,t.classes=b,t.vars=u,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-tabs.js.map
