{"version":3,"file":"polythene-css-switch.js","sources":["../../polythene-css-classes/switch.js","../src/layout.js","../src/color.js","../src/index.js"],"sourcesContent":["\nexport default {\n  component: \"pe-switch-control\",\n\n  // elements\n  knob:      \"pe-switch-control__knob\",\n  thumb:     \"pe-switch-control__thumb\",\n  track:     \"pe-switch-control__track\",\n};\n","import { layout as selectionControlLayout } from \"polythene-css-selection-control\";\nimport { vars } from \"polythene-theme\";\nimport { mixin } from \"polythene-core-css\";\n\nconst transition = (componentVars, properties, duration = componentVars.animation_duration) => [\n  mixin.defaultTransition(properties, duration, \"ease-out\")\n];\n\nconst customSize = (componentVars, size) => {\n  const factor = size / vars.unit_icon_size;\n  const thumbSize = Math.floor(0.5 * componentVars.thumb_size * factor) * 2; // round to even\n  const scaledTrackHeight = Math.floor(0.5 * componentVars.track_height * factor) * 2; // round to even\n  const scaledTrackWidth = Math.floor(0.5 * componentVars.track_length * factor) * 2;\n  const scaledThumbSize = Math.floor(0.5 * componentVars.thumb_size * factor) * 2;\n  const trackTop = ((componentVars.label_height * factor - scaledTrackHeight) / 2);\n  const thumbPadding = componentVars.icon_button_padding;\n  const thumbMargin = (size - scaledThumbSize) / 2;\n  const thumbOuterSize = size + 2 * thumbPadding;\n  const thumbOffsetMin = -(thumbOuterSize / 2) + (thumbSize / 2);\n  const thumbOffsetMax = thumbOffsetMin + scaledTrackWidth - thumbSize;\n  const thumbOffsetY = thumbOffsetMin + thumbMargin;\n  const trackVisualOffset = 0.3; // prevent sub pixel of track to shine through knob border\n\n  return {\n    \" .pe-control__form-label\": {\n      height: size + \"px\",\n      minWidth: scaledTrackWidth + \"px\",\n    },\n    \" .pe-control__label\": [\n      mixin.defaultTransition(\"all\", componentVars.animation_duration),\n      {\n        paddingLeft: (componentVars.padding * factor + 8 + scaledTrackWidth) + \"px\"\n      }\n    ],\n    \" .pe-switch-control__track\": {\n      left: trackVisualOffset + \"px\",\n      height: scaledTrackHeight + \"px\",\n      width: (scaledTrackWidth - 2 * trackVisualOffset) + \"px\",\n      top: trackTop + \"px\",\n      borderRadius: scaledTrackHeight + \"px\"\n    },\n    \" .pe-switch-control__thumb\": {\n      top: thumbOffsetY + \"px\",\n      left: thumbOffsetMin + \"px\"\n    },\n\n    \" .pe-switch-control__knob\": {\n      width: scaledThumbSize + \"px\",\n      height: scaledThumbSize + \"px\",\n      margin: thumbMargin + \"px\"\n    },\n\n    \" .pe-button__content\": {\n      padding: thumbPadding + \"px\"\n    },\n\n    \".pe-control--on\": {\n      \" .pe-switch-control__thumb\": {\n        left: thumbOffsetMax + \"px\"\n      }\n    }\n  };\n};\n\nexport default (selector, componentVars) =>\n  selectionControlLayout(selector, componentVars, \"checkbox\").concat(\n    [{\n      [selector]: {\n        \" .pe-switch-control__track\": [\n          transition(componentVars, \"background, opacity\"),\n          {\n            position: \"absolute\",\n            left: 0\n          }\n        ],\n\n        \" .pe-switch-control__thumb\": [\n          transition(componentVars, \"left, color\"),\n          {\n            position: \"absolute\",\n            zIndex: 1, // Prevents flickering of text label when toggling\n            color: \"inherit\",\n\n            \":focus\": {\n              outline: 0\n            }\n          }\n        ],\n\n        \" .pe-switch-control__knob\": {\n          position: \"relative\",\n          borderRadius: \"50%\"\n        },\n\n        \" .pe-button__content .pe-switch-control__knob .pe-icon\": [\n          mixin.fit(),\n          transition(componentVars, \"color\"),\n          {\n            width: \"100%\",\n            height: \"100%\"\n          }\n        ],\n\n        \" .pe-button__focus\": [\n          transition(componentVars, \"all\")\n        ],\n\n        \".pe-control--small\":   customSize(componentVars, vars.unit_icon_size_small),\n        \".pe-control--regular\": customSize(componentVars, vars.unit_icon_size),\n        \".pe-control--medium\":  customSize(componentVars, vars.unit_icon_size_medium),\n        \".pe-control--large\":   customSize(componentVars, vars.unit_icon_size_large)\n      }\n    }]\n  );\n\n","\nconst style = (scopes, selector, componentVars, tint) => [{\n  [scopes.map(s => s + selector).join(\",\")]: {\n\n    \" .pe-control__label\": {\n      color: componentVars[\"color_\" + tint + \"_label\"]\n    },\n\n    \".pe-control--off\": {\n      \" .pe-switch-control__track\": {\n        opacity: componentVars[\"color_\" + tint + \"_track_off_opacity\"],\n        backgroundColor: componentVars[\"color_\" + tint + \"_track_off\"]\n      },\n      \" .pe-switch-control__thumb\": {\n        color: componentVars[\"color_\" + tint + \"_thumb_off\"]\n      },\n      \" .pe-switch-control__knob\": {\n        backgroundColor: \"currentcolor\"\n      },\n      \" .pe-button--focus\": {\n        \" .pe-button__focus\": {\n          opacity: componentVars[\"color_\" + tint + \"_focus_off_opacity\"],\n          backgroundColor: componentVars[\"color_\" + tint + \"_focus_off\"]\n        }\n      },\n      \" .pe-icon\": {\n        color: componentVars[\"color_\" + tint + \"_icon_off\"] || \"currentcolor\"\n      },\n      \" .pe-control__label\": {\n        color: componentVars[\"color_\" + tint + \"_off_label\"]\n      },\n    },\n\n    \".pe-control--on\": {\n      \" .pe-switch-control__track\": {\n        opacity: componentVars[\"color_\" + tint + \"_track_on_opacity\"],\n        backgroundColor: componentVars[\"color_\" + tint + \"_track_on\"]\n      },\n      \" .pe-switch-control__thumb\": {\n        color: componentVars[\"color_\" + tint + \"_thumb_on\"]\n      },\n      \" .pe-switch-control__knob\": {\n        backgroundColor: \"currentcolor\"\n      },\n      \" .pe-button--focus\": {\n        \" .pe-button__focus\": {\n          opacity: componentVars[\"color_\" + tint + \"_focus_on_opacity\"],\n          backgroundColor: componentVars[\"color_\" + tint + \"_focus_on\"]\n        }\n      },\n      \" .pe-icon\": {\n        color: componentVars[\"color_\" + tint + \"_icon_on\"] || \"currentcolor\"\n      },\n      \" .pe-control__label\": {\n        color: componentVars[\"color_\" + tint + \"_on_label\"]\n      },\n    },\n\n    \".pe-control--on.pe-control--disabled, &.pe-control--off.pe-control--disabled\": {\n      \" .pe-control__label\": {\n        color: componentVars[\"color_\" + tint + \"_disabled\"]\n      },\n      \" .pe-switch-control__track\": {\n        opacity: componentVars[\"color_\" + tint + \"_track_disabled_opacity\"],\n        backgroundColor: componentVars[\"color_\" + tint + \"_track_disabled\"]\n      },\n      \" .pe-switch-control__thumb\": {\n        color: componentVars[\"color_\" + tint + \"_thumb_disabled\"]\n      },\n    },\n  }\n}];\n\nconst noTouchStyle = (scopes, selector, componentVars, tint) => [{\n  [scopes.map(s => s + selector + \":hover\").join(\",\")]: {\n    \".pe-control--on\": {\n      \" .pe-button__wash\": {\n        backgroundColor: componentVars[\"color_\" + tint + \"_wash_on\"]\n      }\n    },\n    \".pe-control--off\": {\n      \" .pe-button__wash\": {\n        backgroundColor: componentVars[\"color_\" + tint + \"_wash_off\"]\n      }\n    }\n  }\n}];\n\nexport default (selector, componentVars) => [\n  style([\".pe-dark-tone\", \".pe-dark-tone \"], selector, componentVars, \"dark\"), // has/inside dark tone\n  style([\"\", \".pe-light-tone\", \".pe-light-tone \"], selector, componentVars, \"light\"), // normal, has/inside light tone\n  noTouchStyle([\"html.pe-no-touch .pe-dark-tone \"], selector, componentVars, \"dark\"), // inside dark tone\n  noTouchStyle([\"html.pe-no-touch \", \"html.pe-no-touch .pe-light-tone \"], selector, componentVars, \"light\"),\n];\n\n","import { styler } from \"polythene-core-css\";\nimport { vars } from \"polythene-core-switch\";\nimport classes from \"polythene-css-classes/switch\";\nimport layout from \"./layout\";\nimport color from \"./color\";\n\nconst fns = [layout, color];\nconst selector = `.${classes.component}`;\n\nexport const addStyle = (customSelector, customVars) => \n  styler.generateStyles([customSelector, selector], {...vars, ...customVars}, fns);\n\nexport const getStyle = (customSelector, customVars) => \n  customSelector\n    ? styler.createStyleSheets([customSelector, selector], {...vars, ...customVars}, fns)\n    : styler.createStyleSheets([selector], vars, fns);\n\nstyler.generateStyles([selector], vars, fns);\n"],"names":["transition","componentVars","properties","duration","animation_duration","mixin","defaultTransition","customSize","size","factor","vars","unit_icon_size","thumbSize","Math","floor","thumb_size","scaledTrackHeight","track_height","scaledTrackWidth","track_length","scaledThumbSize","trackTop","label_height","thumbPadding","icon_button_padding","thumbMargin","thumbOffsetMin","thumbOffsetMax","thumbOffsetY","padding","trackVisualOffset","selector","selectionControlLayout","concat","fit","unit_icon_size_small","unit_icon_size_medium","unit_icon_size_large","style","scopes","tint","map","s","join","noTouchStyle","fns","layout","color","classes","component","addStyle","customSelector","customVars","styler","generateStyles","getStyle","createStyleSheets"],"mappings":"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"}