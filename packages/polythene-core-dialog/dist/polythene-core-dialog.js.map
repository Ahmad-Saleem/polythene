{"version":3,"file":"polythene-core-dialog.js","sources":["../../polythene-css-classes/list-tile.js","../../polythene-css-classes/menu.js","../../polythene-css-classes/dialog.js","../src/dialog.js","../src/vars.js"],"sourcesContent":["\nexport default {\n  component:       \"pe-list-tile\",\n\n  // elements\n  content:         \"pe-list-tile__content\",\n  highSubtitle:    \"pe-list-tile__high-subtitle\",\n  primary:         \"pe-list-tile__primary\",\n  secondary:       \"pe-list-tile__secondary\",\n  subtitle:        \"pe-list-tile__subtitle\",\n  title:           \"pe-list-tile__title\",\n  contentFront:    \"pe-list-tile__content-front\",\n\n  // states\n  compact:         \"pe-list-tile--compact\",\n  compactFront:    \"pe-list-tile--compact-front\",\n  disabled:        \"pe-list-tile--disabled\",\n  hasFront:        \"pe-list-tile--front\",\n  hasHighSubtitle: \"pe-list-tile--high-subtitle\",\n  hasSubtitle:     \"pe-list-tile--subtitle\",\n  header:          \"pe-list-tile--header\",\n  hoverable:       \"pe-list-tile--hoverable\",\n  selectable:      \"pe-list-tile--selectable\",\n  selected:        \"pe-list-tile--selected\",\n  highlight:       \"pe-list-tile--highlight\",\n  sticky:          \"pe-list-tile--sticky\",\n  navigation:      \"pe-list-tile--navigation\",\n};\n","import listTileClasses from \"./list-tile\";\n\nexport default {\n  component:   \"pe-menu\",\n\n  // elements\n  content:     \"pe-menu__content\",\n  placeholder: \"pe-menu__placeholder\",\n  target:      \"pe-menu__target\",\n\n  // states\n  permanent:   \"pe-menu--permanent\",\n  fullHeight:  \"pe-menu--full-height\",\n  floating:    \"pe-menu--floating\",\n  visible:     \"pe-menu--visible\",\n  width_auto:  \"pe-menu--width-auto\",\n  width_n:     \"pe-menu--width-\",\n\n  // lookup\n  listTile:         listTileClasses.component,\n  selectedListTile: listTileClasses.selected,\n};","import menuClasses from \"./menu\";\n\nexport default {\n  component:         \"pe-dialog\",\n\n  // elements\n  placeholder:       \"pe-dialog__placeholder\",\n  holder:            \"pe-dialog__holder\",\n  content:           \"pe-dialog__content\",\n  backdrop:          \"pe-dialog__backdrop\",\n  touch:             \"pe-dialog__touch\",\n\n  // states\n  fullScreen:        \"pe-dialog--full-screen\",\n  open:              \"pe-dialog--open\",    // class set to html element\n  visible:           \"pe-dialog--visible\", // class set to dialog element\n\n  // lookup\n  menuContent:       menuClasses.content,\n};\n","import { filterSupportedAttributes, subscribe, unsubscribe, show, hide } from \"polythene-core\";\nimport classes from \"polythene-css-classes/dialog\";\n\nconst DEFAULT_Z    = 3;\nconst DEFAULT_ANIMATION_DURATION = .220;\n\nexport const getElement = vnode =>\n  vnode.attrs.element || \"div\";\n\nconst showDialog = (state, attrs) => {\n  if (state.transitioning()) {\n    return Promise.resolve();\n  }\n  state.transitioning(true);\n  state.visible(true);\n  const id = state.instanceId;\n  const showDuration = attrs.showDuration || DEFAULT_ANIMATION_DURATION;\n  const transitions = attrs.transitions;\n  return show(Object.assign({},\n    attrs,\n    {\n      showClass: classes.visible\n    },\n    transitions \n      ? transitions.show({ el: state.el, contentEl: state.contentEl, showDuration, showDelay: attrs.showDelay })\n      : { el: state.el, showDuration, showDelay: attrs.showDelay }\n  )).then(() => {\n    if (attrs.fromMultipleDidShow) {\n      attrs.fromMultipleDidShow(id); // when used with Multiple; this will call attrs.didShow\n    } else if (attrs.didShow) {\n      attrs.didShow(id); // when used directly\n    }\n    state.transitioning(false);\n  });\n};\n\nconst hideDialog = (state, attrs) => {\n  if (state.transitioning()) {\n    return Promise.resolve();\n  }\n  state.transitioning(true);\n  state.visible(false);\n  const id = state.instanceId;\n\n  // Hide dialog\n  const hideDuration = attrs.hideDuration || DEFAULT_ANIMATION_DURATION;\n  const transitions = attrs.transitions;\n  return hide(Object.assign({},\n    attrs,\n    {\n      showClass: classes.visible\n    },\n    transitions\n      ? transitions.hide({ el: state.el, contentEl: state.contentEl, hideDuration, hideDelay: attrs.hideDelay })\n      : { el: state.el, hideDuration, hideDelay: attrs.hideDelay }\n  )).then(() => {\n    if (attrs.fromMultipleDidHide) {\n      attrs.fromMultipleDidHide(id); // when used with Multiple; this will call attrs.didHide\n    } else if (attrs.didHide) {\n      attrs.didHide(id); // when used directly\n    }\n    state.transitioning(false);\n  });\n};\n\nexport const getInitialState = (vnode, createStream) => {\n  const transitioning = createStream(false);\n  const visible = createStream(false);\n  return {\n    backdropEl: undefined,\n    touchEl:    undefined,\n    cleanUp:    undefined,\n    el:         undefined,\n    contentEl:  undefined,\n    transitioning,\n    visible,\n    redrawOnUpdate: createStream.merge([transitioning])\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const dom = vnode.dom;\n  state.el = dom;\n  state.backdropEl = dom.querySelector(`.${classes.backdrop}`);\n  state.touchEl = dom.querySelector(`.${classes.touch}`);\n  state.contentEl = dom.querySelector(`.${classes.content}`);\n\n  if (!attrs.inactive) {\n\n    const handleEscape = e => {\n      if (attrs.fullScreen || attrs.modal) return;\n      if (e.key === \"Escape\" || e.key === \"Esc\") { // \"Esc\" for IE11\n        hideDialog(state, Object.assign({}, attrs, {\n          hideDelay: 0\n        }));\n      }\n    };\n\n    state.cleanUp = () => (\n      unsubscribe(\"keydown\", handleEscape)\n    );\n\n    subscribe(\"keydown\", handleEscape);\n\n    if (attrs.show) {\n      showDialog(state, attrs);\n    }\n  }\n};\n\nexport const onUnMount = vnode => (\n  vnode.state.cleanUp && vnode.state.cleanUp()\n);\n\nexport const createProps = (vnode, { keys: k }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  return Object.assign(\n    {},\n    filterSupportedAttributes(attrs, { remove: [\"style\"] }), // style set in content, and set by show/hide transition\n    {\n      className: [\n        attrs.parentClassName || classes.component,\n        attrs.fullScreen ? classes.fullScreen : null,\n        // classes.visible is set in showDialog though transition\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \"),\n      \"data-spawn-id\": attrs.spawnId,\n      \"data-instance-id\": attrs.instanceId,\n      // click backdrop: close dialog\n      [k.onclick]: e => {\n        if (e.target !== state.el && e.target !== state.backdropEl && e.target !== state.touchEl) {\n          return;\n        }\n        if (attrs.modal) {\n          // not allowed\n          return;\n        }\n        hideDialog(state, Object.assign({}, attrs, {\n          hideDelay: 0\n        }));\n      }\n    },\n    attrs.formOptions ? attrs.formOptions : null\n  );\n};\n\nexport const createPane = (vnode, { renderer: h, Pane }) => {\n  const attrs = vnode.attrs;\n  return h(Pane,\n    {\n      title: attrs.title,\n      header: attrs.header,\n      body: attrs.content || attrs.body || attrs.menu || vnode.children,\n      footer: attrs.footer,\n      footerButtons: attrs.footerButtons,\n      className: attrs.className,\n      style: attrs.style,\n      fullBleed: attrs.fullBleed\n    }\n  );\n};\n\nexport const createContent = (vnode, { renderer, Shadow, createPane, Pane }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const h = renderer;\n\n  if (state.el) {\n    const visible = state.visible();\n    const transitioning = state.transitioning();\n    if (!transitioning) {\n      if (attrs.hide && visible) {\n        // Use setTimeout to play nice with React's lifecycle functions\n        setTimeout(() => hideDialog(state, attrs), 0);\n      } else if (attrs.show && !visible) {\n        setTimeout(() => showDialog(state, attrs), 0);\n      }\n    }\n  }\n\n  const pane = attrs.panes && attrs.panes.length\n    ? attrs.panes[0]\n    : createPane(vnode, { renderer, Pane } );\n  return [\n    attrs.backdrop && h(\"div\",\n      {\n        key: \"backdrop\",\n        className: classes.backdrop\n      }\n    ),\n    h(\"div\",\n      {\n        key: \"touch\",\n        className: classes.touch\n      }\n    ),\n    h(\"div\",\n      {\n        className: [\n          classes.content,\n          attrs.menu ? classes.menuContent : null\n        ].join(\" \"),\n        key: \"content\"\n      },\n      [\n        attrs.fullScreen\n          ? null\n          : h(Shadow, {\n            z: attrs.z !== undefined ? attrs.z : DEFAULT_Z,\n            animated: true,\n            key: \"shadow\"\n          }),\n        pane\n      ]\n    )\n  ];\n};\n","import { vars } from \"polythene-theme\";\n\nconst rgba = (colorStr, opacity = 1) =>\n  `rgba(${colorStr}, ${opacity})`;\n\nexport default {\n  position:                        \"fixed\",\n  border_radius:                   vars.unit_block_border_radius,\n  padding_vertical:                3 * vars.grid_unit_component,\n  padding_horizontal:              5 * vars.grid_unit_component,\n\n  color_light_backdrop_background: \"rgba(0, 0, 0, .4)\",\n  color_dark_backdrop_background:  \"rgba(0, 0, 0, .5)\",\n\n  color_light_background:          rgba(vars.color_light_background),\n  color_dark_background:           rgba(vars.color_dark_background),\n\n  color_light_text:                rgba(vars.color_light_foreground, vars.blend_light_text_regular),\n  color_dark_text:                 rgba(vars.color_dark_foreground, vars.blend_dark_text_regular),\n};\n"],"names":["component","content","highSubtitle","primary","secondary","subtitle","title","contentFront","compact","compactFront","disabled","hasFront","hasHighSubtitle","hasSubtitle","header","hoverable","selectable","selected","highlight","sticky","navigation","placeholder","target","permanent","fullHeight","floating","visible","width_auto","width_n","listTile","listTileClasses","selectedListTile","holder","backdrop","touch","fullScreen","open","menuContent","menuClasses","DEFAULT_Z","DEFAULT_ANIMATION_DURATION","getElement","vnode","attrs","element","showDialog","state","transitioning","Promise","resolve","id","instanceId","showDuration","transitions","show","showClass","classes","el","contentEl","showDelay","then","fromMultipleDidShow","didShow","hideDialog","hideDuration","hide","hideDelay","fromMultipleDidHide","didHide","getInitialState","createStream","backdropEl","undefined","touchEl","cleanUp","redrawOnUpdate","merge","onMount","dom","querySelector","inactive","handleEscape","modal","e","key","unsubscribe","subscribe","onUnMount","createProps","k","keys","filterSupportedAttributes","remove","className","parentClassName","tone","class","join","spawnId","onclick","formOptions","createPane","h","renderer","Pane","body","menu","children","footer","footerButtons","style","fullBleed","createContent","Shadow","setTimeout","pane","panes","length","z","animated","rgba","colorStr","opacity","position","border_radius","vars","unit_block_border_radius","padding_vertical","grid_unit_component","padding_horizontal","color_light_backdrop_background","color_dark_backdrop_background","color_light_background","color_dark_background","color_light_text","color_light_foreground","blend_light_text_regular","color_dark_text","color_dark_foreground","blend_dark_text_regular"],"mappings":"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"}