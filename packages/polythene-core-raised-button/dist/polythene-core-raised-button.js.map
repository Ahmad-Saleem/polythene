{"version":3,"file":"polythene-core-raised-button.js","sources":["../../polythene-css-classes/raised-button.js","../src/raised-button.js","../src/vars.js"],"sourcesContent":["\nexport default {\n  component: \"pe-button pe-text-button pe-raised-button\"\n};\n","import { isServer, pointerStartMoveEvent, pointerEndEvent, subscribe } from \"polythene-core\";\nimport classes from \"polythene-css-classes/raised-button\";\n\n// Don't export 'getElement': it will be the wrapped button component (set in polythene-xxx-raised-button)\n\nconst MAX_Z = 5;\n\nlet tapStart,\n  tapEndAll = () => {},\n  downButtons = [];\n\nsubscribe(pointerEndEvent, () => tapEndAll());\n\nconst animateZ = (which, vnode) => {\n  const zBase = vnode.state.zBase;\n  const increase = vnode.attrs.increase || 1;\n  const z = vnode.state.z();\n  const newZ = which === \"down\" && zBase < MAX_Z\n    ? Math.min(zBase + increase, MAX_Z)\n    : which === \"up\"\n      ? Math.max(z - increase, zBase)\n      : z;\n  if (newZ !== z) {\n    vnode.state.z(newZ);\n  }\n};\n\nconst tapHandler = (which, vnode) => {\n  if (which === \"down\") {\n    downButtons.push(Object.assign({}, vnode));\n  }\n  const animateOnTap = vnode.attrs.animateOnTap !== false ? true : false;\n  if (animateOnTap) {\n    animateZ(which, vnode);\n  }\n};\n\nconst initTapEvents = vnode => {\n  if (isServer) return;\n  tapStart = () => tapHandler(\"down\", vnode);\n  tapEndAll = () => {\n    downButtons.map(buttonVnode =>\n      tapHandler(\"up\", buttonVnode));\n    downButtons = [];\n  };\n  vnode.dom.addEventListener(pointerStartMoveEvent, tapStart);\n};\n\nconst clearTapEvents = vnode =>\n  vnode.dom.removeEventListener(pointerStartMoveEvent, tapStart);\n\nexport const getInitialState = (vnode, createStream) => {\n  const attrs = vnode.attrs;\n  const zBase = attrs.z !== undefined ? attrs.z : 1;\n  const z = createStream(zBase);\n  const tapEventsInited = createStream(false);\n  return {\n    zBase,\n    z,\n    tapEventsInited,\n    redrawOnUpdate: createStream.merge([z])\n  };\n};\n\nexport const onMount = vnode => {\n  const state = vnode.state;\n  if (vnode.dom && !state.tapEventsInited()) {\n    initTapEvents(vnode);\n    state.tapEventsInited(true);\n  }\n};\n\nexport const onUnMount = vnode => {\n  if (vnode.state.tapEventsInited()) {\n    clearTapEvents(vnode);\n  }\n};\n\nexport const createProps = (vnode, { renderer: h, Shadow }) => {\n  const attrs = vnode.attrs;\n  const state = vnode.state;\n  const children = attrs.children || vnode.children || [];\n  return Object.assign(\n    {},\n    {\n      parentClassName: [\n        attrs.parentClassName || classes.component\n      ].join(\" \"),\n      animateOnTap: false,\n      shadowComponent: h(Shadow, {\n        z: attrs.disabled ? 0 : state.z,\n        animated: true\n      }),\n      children\n    },\n    attrs\n  );\n};\n\nexport const createContent = vnode =>\n  vnode.children;\n","import { vars } from \"polythene-theme\";\n\nconst rgba = (colorStr, opacity = 1) =>\n  `rgba(${colorStr}, ${opacity})`;\n\nexport default {\n  color_light_background:          \"#fff\",\n  color_light_text:                rgba(vars.color_light_foreground, vars.blend_light_text_primary),\n  color_light_wash_background:     \"transparent\",\n  color_light_focus_background:    rgba(vars.color_light_foreground, vars.blend_light_background_hover),\n  color_light_active_background:   rgba(vars.color_light_foreground, vars.blend_light_background_hover), // same as hover\n  color_light_disabled_background: rgba(vars.color_light_foreground, vars.blend_light_background_disabled),\n  color_light_disabled_text:       rgba(vars.color_light_foreground, vars.blend_light_text_disabled),\n\n  color_dark_background:           rgba(vars.color_primary),\n  color_dark_text:                 rgba(vars.color_dark_foreground, vars.blend_dark_text_primary),\n  color_dark_wash_background:      \"transparent\",\n  color_dark_focus_background:     vars.color_primary_active,\n  color_dark_active_background:    vars.color_primary_dark,\n  color_dark_disabled_background:  rgba(vars.color_dark_foreground, vars.blend_dark_background_disabled),\n  color_dark_disabled_text:        rgba(vars.color_dark_foreground, vars.blend_dark_text_disabled),\n\n  // hover colors may be set in theme; disabled by default\n\n  // color_light_hover_background:    \"transparent\",\n  // color_dark_hover_background:     vars.color_primary_active,\n\n};"],"names":["component","MAX_Z","tapStart","tapEndAll","downButtons","subscribe","pointerEndEvent","animateZ","which","vnode","zBase","state","increase","attrs","z","newZ","Math","min","max","tapHandler","push","animateOnTap","initTapEvents","isServer","map","buttonVnode","dom","addEventListener","pointerStartMoveEvent","clearTapEvents","removeEventListener","getInitialState","createStream","undefined","tapEventsInited","redrawOnUpdate","merge","onMount","onUnMount","createProps","h","renderer","Shadow","children","parentClassName","classes","join","shadowComponent","disabled","animated","createContent","rgba","colorStr","opacity","color_light_background","color_light_text","vars","color_light_foreground","blend_light_text_primary","color_light_wash_background","color_light_focus_background","blend_light_background_hover","color_light_active_background","color_light_disabled_background","blend_light_background_disabled","color_light_disabled_text","blend_light_text_disabled","color_dark_background","color_primary","color_dark_text","color_dark_foreground","blend_dark_text_primary","color_dark_wash_background","color_dark_focus_background","color_primary_active","color_dark_active_background","color_primary_dark","color_dark_disabled_background","blend_dark_background_disabled","color_dark_disabled_text","blend_dark_text_disabled"],"mappings":"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"}