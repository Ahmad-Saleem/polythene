!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core"),require("mithril"),require("polythene-css"),require("polythene-theme"),require("polythene-utilities")):"function"==typeof define&&define.amd?define(["exports","polythene-core","mithril","polythene-css","polythene-theme","polythene-utilities"],t):t(e.polythene=e.polythene||{},e["polythene-core"],e.m,e["polythene-css"],e["polythene-theme"],e["polythene-utilities"])}(this,function(e,t,n,i,o,r){"use strict";function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n="default"in n?n.default:n;var s={component:"pe-notification",holder:"pe-notification__holder",placeholder:"pe-notification__placeholder",content:"pe-notification__content",title:"pe-notification__title",multilineTitle:"pe-notification__title--multiline",action:"pe-notification__action",horizontal:"pe-notification--horizontal",vertical:"pe-notification--vertical",hasContainer:"pe-notification--container"},u=o.vars.rgba,d={width:274,min_height:80,border_radius:o.vars.unit_block_border_radius,title_padding_h:8,title_single_padding_v:14,title_multi_padding_v:20,side_padding:16,font_size:14,line_height:20,color_light_background:u(o.vars.color_light_background),color_light_text:u(o.vars.color_light_foreground,o.vars.blend_light_dark_primary),color_dark_background:u(o.vars.color_dark_background,.85),color_dark_text:u(o.vars.color_dark_foreground,o.vars.blend_light_text_primary)},p=function(e,t){return[l({},e,[i.flex.layoutCenter,{width:t.width+"px",minHeight:t.min_height+"px",position:"relative",padding:"0 "+t.side_padding+"px",margin:"0 auto",borderRadius:t.border_radius+"px",pointerEvents:"all"," .pe-notification__content":{width:"100%"}," .pe-notification__title":{padding:t.title_single_padding_v+"px "+t.title_padding_h+"px",fontSize:t.font_size+"px",lineHeight:t.line_height+"px"}," .pe-notification__action":{" .pe-button":{margin:0}},"&.pe-notification--horizontal":{" .pe-notification__content":i.flex.layoutHorizontal," .pe-notification__title":i.flex.flex()," .pe-notification__title--multi-line":{paddingTop:t.title_multi_padding_v+"px",paddingBottom:t.title_multi_padding_v+"px"}," .pe-notification__action":i.flex.layoutCenter},"&.pe-notification--vertical":{" .pe-notification__content":i.flex.layoutVertical," .pe-notification__title":{paddingBottom:"4px"}," .pe-notification__title--multi-line":{paddingTop:t.title_multi_padding_v+"px"}," .pe-notification__action":i.flex.layoutEndJustified}}])]},h=function(e,t,n,i){return[a({},e.map(function(e){return e+t}).join(","),{color:n["color_"+i+"_text"],background:n["color_"+i+"_background"]})]},f=function(e,t){return[h([".pe-dark-theme",".pe-dark-theme "],e,t,"dark"),h(["",".pe-light-theme",".pe-light-theme "],e,t,"light")]},_=function(e){return[c({},e,[i.flex.layoutCenterCenter,{top:0,right:0,bottom:0,left:0,zIndex:o.vars.z_notification,pointerEvents:"none",".pe-multiple--screen":{position:"fixed"},".pe-multiple--container":{position:"absolute"}}])]},g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m=[p,f],y="."+s.component,v=[_],b="."+s.holder,w=function(e,t){return i.styler.generateStyles([e,y],g({},d,t),m),i.styler.generateStyles([e,b],g({},d,t),v)};i.styler.generateStyles([y],d,m),i.styler.generateStyles([b],d,v);var x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},S=function(e){e.isPaused=!0,e.timer&&e.timer.pause()},k=function(e){e.isPaused=!1,e.timer&&e.timer.resume()},C=function(e){e.timer&&e.timer.stop()},E=function(e,t){if(console.log("prepareShow",e.element),e.containerEl=e.containerEl||document.querySelector(t.containerSelector||e.element),console.log("state.containerEl",e.containerEl),t.containerSelector){e.containerEl.querySelector(e.element).classList.add(s.hasContainer)}},j=function(e,n){console.log("showInstance",n),E(e,n),C(e),e.transitioning=!0;var i=n.transitions||e.transitions;return t.show(x({},n,i.show(e.containerEl,n))).then(function(){e.transitioning=!1,e.didShow&&e.didShow(e.instanceId);var t=n.timeout;if(0===t);else{var i=void 0!==t?t:3;e.timer=new r.Timer(function(){P(e,n)},i)}})},P=function(e,i){console.log("hideInstance",i),C(e);var o=e.instanceId;e.transitioning=!0;var r=i.transitions||e.transitions;return t.hide(x({},i,r.hide(e.containerEl,i))).then(function(){C(e),e.transitioning=!1,e.didHide&&e.didHide(o),n.redraw()})},z=function(e,i){var o=i.element||"div",r="light"!==i.theme;return n(o,x({},t.filterSupportedAttributes(i),{class:[e.class,i.class,r?"pe-dark-theme":null,"light"===i.theme?"pe-light-theme":null,i.containerSelector?s.hasContainer:null,"vertical"===i.layout?s.vertical:s.horizontal].join(" "),oncreate:function(t){var n=t.dom;e.el=n,j(e,i)},onclick:function(e){return e.preventDefault()}}),n("div",{class:s.content},i.content||[i.title?n("div",{class:s.title,oncreate:function(e){var t=e.dom;t.getBoundingClientRect().height>parseInt(window.getComputedStyle(t).lineHeight,10)+parseInt(window.getComputedStyle(t).paddingTop,10)+parseInt(window.getComputedStyle(t).paddingBottom,10)&&t.classList.add(s.multilineTitle)}},i.title):null,i.action?n("div",{class:s.action},[i.action]):null]))},O={theme:w,oninit:function(e){var t=e.attrs;e.state=x(e.state,t,{el:null,containerEl:null,dismissEl:null,transitioning:!1,timer:null,isPaused:!1})},view:function(e){var t=e.state,n=e.attrs,i="function"==typeof n.opts?n.opts():n.opts;return n.hide&&!t.transitioning&&P(t,i),n.pause&&!t.isPaused?S(t):n.unpause&&t.isPaused&&k(t),z(t,i)}},D=function(e,t){return{el:e,showDuration:t.showDuration||.5,showDelay:t.showDelay||0,beforeShow:function(){return e.style.opacity=0},show:function(){return e.style.opacity=1}}},I=function(e,t){return{el:e,hideDuration:t.hideDuration||.5,hideDelay:t.hideDelay||0,hide:function(){return e.style.opacity=0}}},q={show:D,hide:I},H=t.multiple({instance:O,transitions:q,queue:!0,defaultId:"default_notification",class:s.component,element:"."+s.holder,placeholder:"span."+s.placeholder,bodyShowClass:s.open});e.default=H,e.instance=O,e.classes=s,e.vars=d,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-notification.js.map
