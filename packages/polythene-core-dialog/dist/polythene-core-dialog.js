!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports,require("polythene-core"),require("polythene-core-css"),require("polythene-core-menu"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-core-css","polythene-core-menu","polythene-theme"],o):o(e.polythene=e.polythene||{},e["polythene-core"],e["polythene-core-css"],e["polythene-core-menu"],e["polythene-theme"])}(this,function(e,o,t,r,n){"use strict";function i(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function l(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function a(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}var d={component:"pe-dialog",placeholder:"pe-dialog__placeholder",holder:"pe-dialog__holder",actions:"pe-dialog__actions",body:"pe-dialog__body",content:"pe-dialog__content",footer:"pe-dialog__footer",header:"pe-dialog__header",title:"pe-dialog__title",footerHigh:"pe-dialog__footer--high",fullscreen:"pe-dialog--fullscreen",hasBackdrop:"pe-dialog--backdrop",hasBottomOverflow:"pe-dialog--overflow-bottom",hasTopOverflow:"pe-dialog--overflow-top",open:"pe-dialog--open",transitioning:"pe-dialog--transitioning",menuContent:r.classes.content},c=n.vars.rgba,s={border_radius:n.vars.unit_block_border_radius,padding:3*n.vars.grid_unit_component,header_bottom:20,header_height:60,footer_height:52,color_light_content_background:c(n.vars.color_light_background),color_light_title_text:c(n.vars.color_light_foreground,n.vars.blend_light_text_primary),color_light_body_text:c(n.vars.color_light_foreground,n.vars.blend_light_text_regular),color_light_body_border:c(n.vars.color_light_foreground,n.vars.blend_light_border_light),color_light_backdrop_background:"rgba(0, 0, 0, .4)",color_dark_content_background:c(n.vars.color_dark_background),color_dark_title_text:c(n.vars.color_dark_foreground,n.vars.blend_dark_text_primary),color_dark_body_text:c(n.vars.color_dark_foreground,n.vars.blend_dark_text_regular),color_dark_body_border:c(n.vars.color_dark_foreground,n.vars.blend_dark_border_light),color_dark_backdrop_background:"rgba(0, 0, 0, .5)"},p=function(e,o){var r;return[(r={},i(r,e,[t.flex.layoutCenterCenter,{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:n.vars.z_dialog,height:"100%",padding:o.padding+"px 40px",".pe-dialog--fullscreen":{padding:0," .pe-dialog__content":{opacity:0,borderRadius:0,maxWidth:"none",height:"100%",width:"100%"," .pe-dialog__header, .pe-dialog__footer":{display:"none"}," .pe-dialog__body":{padding:0,height:"100%",maxHeight:"calc(100%)",border:"none"}}}," .pe-dialog__header, pe-dialog__body, pe-dialog__header":{zIndex:1}," .pe-dialog__content":[t.flex.layoutVertical,{position:"relative",maxHeight:"100%",minWidth:"280px",maxWidth:7*n.vars.grid_unit_menu+"px",borderRadius:o.border_radius+"px"," > .pe-shadow":{zIndex:-1},".pe-menu__content":{" .pe-dialog__body":{padding:0,border:"none"}}," p":{margin:0}," p + p":{marginTop:"16px"}}]," .pe-dialog__title":{fontSize:n.vars.font_size_title+"px",lineHeight:"24px",fontWeight:n.vars.font_weight_medium,"& + div":{marginTop:"16px"}}," .pe-dialog__header":{padding:[o.padding-4,o.padding,o.header_bottom-4,o.padding].map(function(e){return e+"px"}).join(" "),minHeight:o.header_height+"px"," .pe-dialog__title":[t.mixin.ellipsis(1),{width:"100%"}]}," .pe-dialog__body":[t.flex.selfStretch,{padding:o.padding+"px",overflowY:"auto","-webkit-overflow-scrolling":"touch",borderWidth:"1px",borderStyle:"solid none",borderColor:"transparent",maxHeight:"calc(100vh - "+2*o.padding+"px - "+(o.header_height+o.footer_height)+"px)"}]," .pe-dialog__header + .pe-dialog__body":{paddingTop:0}," .pe-dialog__footer":{padding:"2px 8px",minHeight:o.footer_height+"px",fontSize:0,".pe-dialog__footer--high":{paddingBottom:"8px"}}," .pe-dialog__actions":[t.flex.layoutHorizontal,t.flex.layoutEndJustified,t.flex.layoutWrap,{margin:"0 -4px"," .pe-button":{height:"36px",marginTop:"6px",marginBottom:"6px",padding:0}}]}]),i(r," body.pe-dialog--open",{overflow:"hidden",left:0,"-webkit-overflow-scrolling":"touch",top:0,width:"100%"}),r)]},u=function(e,o,t,r){return[l({},e.map(function(e){return e+o}).join(","),{"&.pe-dialog--backdrop":{backgroundColor:t["color_"+r+"_backdrop_background"]}," .pe-dialog__content":{backgroundColor:t["color_"+r+"_content_background"]}," .pe-dialog__header .pe-dialog__title":{color:t["color_"+r+"_title_text"]}," .pe-dialog__body":{color:t["color_"+r+"_body_text"]},"&.pe-dialog--overflow-top .pe-dialog__body":{borderTopColor:t["color_"+r+"_body_border"]},"&.pe-dialog--overflow-bottom .pe-dialog__body":{borderBottomColor:t["color_"+r+"_body_border"]}})]},_=function(e,o){return[u([".pe-dark-tone",".pe-dark-tone "],e,o,"dark"),u(["",".pe-light-tone",".pe-light-tone "],e,o,"light")]},g=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},h=[p,_],f="."+d.component,b=function(e,o){return t.styler.generateStyles([e,f],g({},s,o),h)};t.styler.generateStyles([f],s,h);var m=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},v=b,y=function(e){var o=e.state,t=o.scrollEl();t&&(o.topOverflow(t.scrollTop>0),o.bottomOverflow(t.scrollHeight-(t.scrollTop+t.getBoundingClientRect().height)>0))},x=function(e){var o=e.state.footerEl();if(o){var t=window.getComputedStyle(o);o.getBoundingClientRect().height>parseInt(t.minHeight,10)?o.classList.add(d.footerHigh):o.classList.remove(d.footerHigh)}},w=function(e,o){var t=o(!1),r=o(),n=o(),i=o(),l=o(),a=o(!1),d=o(!1),c=o();return i.map(function(e){return y(e)}),{bottomOverflow:t,cleanUp:void 0,el:c,footerEl:r,headerEl:n,isScrolling:i,scrollEl:l,scrollWatchId:void 0,topOverflow:a,transitioning:d,redrawOnUpdate:o.merge([a,t,i])}},k=function(e,t){if(e.transitioning())return Promise.resolve();var r=e.instanceId;e.transitioning(!0);var n=t.transitions||e.transitions;return o.show(m({},t,n.show(e.el(),t))).then(function(){e.transitioning(!1),t.multipleDidShow&&t.multipleDidShow(r)})},O=function(e,t){if(e.transitioning())return Promise.resolve();var r=e.instanceId;e.transitioning(!0);var n=t.transitions||e.transitions;return o.hide(m({},t,n.hide(e.el(),t))).then(function(){e.transitioning(!1),t.multipleDidHide&&t.multipleDidHide(r)})},S=function(e){if(e.dom){var t=e.state,r=e.attrs;t.el(e.dom),t.scrollEl(e.dom.querySelector("."+d.body)),t.footerEl(e.dom.querySelector("."+d.footer)),t.headerEl(e.dom.querySelector("."+d.title));var n=function(){y(e),x(e)},i=function(e){r.fullscreen||r.modal||27===e.which&&O(t,m({},r,{hideDelay:0}))};t.cleanUp=function(){return o.unsubscribe("resize",n),o.unsubscribe("keydown",i)},o.subscribe("resize",n),o.subscribe("keydown",i),y(e),r.show&&k(t,r).then(function(){y(e),x(e)})}},D=function(e){return e.state.cleanUp()},j=function(e,t){var r=t.keys,n=e.state,i=e.attrs;return m({},o.filterSupportedAttributes(i,{remove:["style"]}),a({className:[d.component,i.fullscreen?d.fullscreen:null,i.backdrop?d.hasBackdrop:null,n.topOverflow()||i.borders?d.hasTopOverflow:null,n.bottomOverflow()||i.borders?d.hasBottomOverflow:null,"dark"===i.tone?"pe-dark-tone":null,"light"===i.tone?"pe-light-tone":null,i.className||i[r.class]].join(" ")},r.onclick,function(e){e.target===n.el()&&(i.modal||O(n,m({},i,{hideDelay:0})))}),i.formOptions?i.formOptions:null)},z=function(e,o){var t=o.state,r=o.attrs,n=o.h,i=o.k,l=r.content||r.body||r.menu;return n("div",a({className:d.body},i.onscroll,function(){t.isScrolling(e),clearTimeout(t.scrollWatchId),t.scrollWatchId=setTimeout(function(){t.isScrolling(e)},150)}),l)},H=function(e,o){var t=o.renderer,r=o.keys,n=o.Shadow,i=e.state,l=e.attrs;l.hide&&O(i,l);var a=z(e,{state:i,attrs:l,h:t,k:r});return t("div",{className:[d.content,l.menu?d.menuContent:null].join(" "),style:l.style},[l.fullscreen?null:t(n,{z:void 0!==l.z?l.z:3,animated:!0}),l.fullscreen?null:l.title?t("div",{className:d.header},t("div",{className:d.title},l.title)):null,a,l.fullscreen?null:l.footer?t("div",{className:d.footer},t("div",{className:d.actions},l.footer)):null])},C=Object.freeze({element:"form",theme:v,getInitialState:w,onMount:S,onUnMount:D,createProps:j,createContent:H}),I={show:function(e,o){return{el:e,showDuration:o.showDuration||.22,showDelay:o.showDelay||0,beforeShow:function(){return e.style.opacity=0},show:function(){return e.style.opacity=1}}},hide:function(e,o){return{el:e,hideDuration:o.hideDuration||.22,hideDelay:o.hideDelay||0,hide:function(){return e.style.opacity=0}}}};e.coreDialogInstance=C,e.classes=d,e.vars=s,e.transitions=I,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-dialog.js.map
