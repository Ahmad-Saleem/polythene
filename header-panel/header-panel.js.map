{"version":3,"sources":["header-panel.es6"],"names":[],"mappings":"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","file":"header-panel.js","sourcesContent":["import 'polythene/common/object.assign';\nimport p from 'polythene/polythene/polythene';\nimport events from 'polythene/common/events';\nimport m from 'mithril';\nimport toolbar from 'polythene/toolbar/toolbar';\nimport 'polythene/header-panel/theme/theme';\n\nconst CSS_CLASSES = {\n    panel: 'pe-header-panel',\n    header: 'pe-header',\n    dropShadow: 'pe-header-panel__drop-shadow',\n    outerContainer: 'pe-header-panel__outer-container',\n    headerContainer: 'pe-header-panel__header-container',\n    backgroundContainer: 'pe-header-panel__background-container',\n    condensedBackground: 'pe-header-panel__condensed-background',\n    headerBackground: 'pe-header-panel__header-background',\n    mediaDimmer: 'pe-header-panel__media-dimmer',\n    mainContainer: 'pe-header-panel__main-container',\n\n    headerAnimated: 'pe-header--animated',\n    fixed: 'pe-header-panel--fixed',\n    cascaded: 'pe-header-panel--cascaded',\n    modeCover: 'pe-header-panel--cover',\n    modeScroll: 'pe-header-panel--scroll',\n    modeSeamed: 'pe-header-panel--seamed',\n    modeStandard: 'pe-header-panel--standard',\n    modeTall: 'pe-header-panel--tall',\n    modeWaterfallTall: 'pe-header-panel--waterfall-tall',\n    modeWaterfall: 'pe-header-panel--waterfall',\n\n    // lookups:\n    toolbar: 'pe-toolbar',\n    toolbarTopbar: 'pe-toolbar__bar--top',\n    headerTall: 'pe-header--tall'\n};\n\nconst DEFAULT_SHADOW_HEIGTH = 6;\nconst DEFAULT_HEADER_HEIGHT = 192;\nconst DEFAULT_CONDENSED_HEADER_HEIGHT = DEFAULT_HEADER_HEIGHT / 3;\nconst SCROLL_WATCH_TIMER = 150;\n\nlet scroller; // keep track of scrolling elements on the page\nconst scrollPositions = {};\n\nconst modeConfigs = {\n    shadowAfterScroll: {\n        'waterfall': 1,\n        'waterfall-tall': 1\n    },\n    alwaysShadow: {\n        'standard': 1,\n        'tall': 1\n    },\n    noShadow: {\n        'seamed': 1,\n        'cover': 1,\n        'scroll': 1\n    },\n    tallMode: {\n        'tall': true,\n        'waterfall-tall': true\n    },\n    outerScroll: {\n        'scroll': 1\n    }\n};\n\nconst modeClasses = {\n    'cover': CSS_CLASSES.modeCover,\n    'scroll': CSS_CLASSES.modeScroll,\n    'seamed': CSS_CLASSES.modeSeamed,\n    'standard': CSS_CLASSES.modeStandard,\n    'tall': CSS_CLASSES.modeTall,\n    'waterfall-tall': CSS_CLASSES.modeWaterfallTall,\n    'waterfall': CSS_CLASSES.modeWaterfall\n};\n\nconst classForMode = (mode = 'standard') => {\n    return modeClasses[mode];\n};\n\n\nconst setTransform = (document.documentElement.style.transform !== undefined) ? ((style, string) => {\n    style.transform = string;\n}) : ((style, string) => {\n    style.webkitTransform = string;\n});\n\nconst translateY = (style, y) => {\n    const t = (y === null) ? '' : 'translate3d(0, ' + y + 'px, 0)';\n    setTransform(style, t);\n};\n\nconst createHeaderComponent = (opts = {}) => {\n    const tall = opts.tall || false;\n    const tallClass = opts.tallClass || '';\n    let toolbarOpts = opts.toolbar;\n    if (toolbarOpts) {\n        toolbarOpts.class = [(toolbarOpts.class || null), tall ? tallClass : null].join(' ');\n        if (!toolbarOpts.topBar) {\n            toolbarOpts.topBar = m('div');\n        }\n        return m.component(toolbar, toolbarOpts);\n    } else if (opts.content) {\n        return m('div', {\n            class: [\n                CSS_CLASSES.header,\n                (opts.class || null),\n                (tall ? tallClass : null),\n                (opts.animated ? CSS_CLASSES.headerAnimated : '')\n            ].join(' ')\n        }, opts.content);\n    } else {\n        return m('div', opts);\n    }\n};\n\nconst createViewHeader = (ctrl, opts = {}) => {\n    const initHeaderContainer = (headerContainer, inited) => {\n        if (inited) {\n            return;\n        }\n        ctrl.headerContainerElem = headerContainer;\n    };\n    const header = opts.header ? createHeaderComponent(Object.assign({}, opts.header, ctrl.headerConfig)) : null;\n    return m('div', {\n        class: CSS_CLASSES.headerContainer,\n        config: initHeaderContainer\n    }, [\n        m('div', {\n            class: CSS_CLASSES.backgroundContainer\n        }, [\n            m('div', {class: CSS_CLASSES.condensedBackground}),\n            m('div', {class: CSS_CLASSES.headerBackground}),\n            m('div', {class: CSS_CLASSES.mediaDimmer})\n        ]),\n        header,\n        (ctrl.mode === 'seamed' || ctrl.shadow === false) ? null : m('div', {class: CSS_CLASSES.dropShadow})\n    ]);\n};\n\nconst createViewContent = (ctrl, scrollConfig, opts = {}) => {\n    const initMainContainer = (mainContainer, inited) => {\n        if (inited) {\n            return;\n        }\n        if (scrollConfig.main) {\n            ctrl.scrollerElem = mainContainer;\n        }\n    };\n    return [\n        m('div', {\n            class: CSS_CLASSES.mainContainer,\n            config: initMainContainer,\n            onscroll: (e) => {\n                scrollConfig.main(e);\n                events.emit('scroll', e);\n                ctrl.storeScrollPosition(e.target.scrollTop);\n            }\n        },\n        opts.content ? opts.content : null)\n    ];\n};\n\nconst createView = (ctrl, opts = {}) => {\n    let scrollConfig;\n\n    opts.header = opts.header || {};\n    opts.configs = opts.configs || [];\n    ctrl.init(ctrl);\n\n    const updateContentOnScroll = opts.updateContentOnScroll || false;\n    const ignoreContent = !updateContentOnScroll && ctrl.isScrolling;\n    const scrollerType = modeConfigs.outerScroll[ctrl.mode] ? 'outer' : 'main';\n    const handleScroll = ctrl.handleScroll.bind(ctrl);\n    const header = createViewHeader(ctrl, opts);\n    const tag = opts.tag || 'div';\n\n    scrollConfig = {};\n    scrollConfig[scrollerType] = handleScroll;\n\n    const initOuterContainer = (outerContainer, inited) => {\n        const headerElem = outerContainer.querySelector('.' + CSS_CLASSES.header) || outerContainer.querySelector('.' + CSS_CLASSES.toolbar);\n        if (!headerElem) {\n            return;\n        }\n        if (inited && ctrl.headerElem) {\n            return;\n        }\n        const headerContainer = outerContainer.querySelector('.' + CSS_CLASSES.headerContainer);\n        const topBarElem = headerContainer.querySelector('.' + CSS_CLASSES.toolbarTopbar);\n        const headerBg = headerContainer.querySelector('.' + CSS_CLASSES.headerBackground);\n        const condensedHeaderBg = headerContainer.querySelector('.' + CSS_CLASSES.condensedBackground);\n\n        ctrl.outerContainerElem = outerContainer;\n        ctrl.headerElem = headerElem;\n        ctrl.headerTopBarElem = topBarElem;\n        ctrl.headerBg = headerBg;\n        ctrl.condensedHeaderBg = condensedHeaderBg;\n\n        if (!opts.animated) {\n            ctrl.setHeight(headerContainer.clientHeight);\n        }\n        if (scrollConfig.outer) {\n            ctrl.scrollerElem = outerContainer;\n        }\n\n        ctrl.restoreScrollPosition();\n\n        handleScroll();\n    };\n\n    const props = Object.assign({}, {\n        class: [\n            CSS_CLASSES.panel,\n            ctrl.fixed ? CSS_CLASSES.fixed : null,\n            classForMode(ctrl.mode),\n            opts.class\n        ].join(' '),\n        id: opts.id || '',\n        config: (el, inited) => {\n            if (inited) {\n                return;\n            }\n            ctrl.headerPanelElem = el;\n        }\n    });\n\n    const content = m('div', {\n        class: CSS_CLASSES.outerContainer,\n        config: initOuterContainer,\n        onscroll: (e) => {\n            scrollConfig.outer(e);\n            events.emit('scroll', e);\n        }\n    }, [\n        header,\n        ignoreContent ? {\n            subtree: 'retain'\n        } : createViewContent(ctrl, scrollConfig, opts)\n    ]);\n    return m(tag, props, [opts.before, content, opts.after]);\n};\n\nconst component = {\n    controller: function(opts = {}) {\n        let ctrl,\n            mode,\n            y,\n            scrolled,\n            prevScrollTop,\n            headerMargin,\n            headerHeight;\n\n        if (opts.mode) {\n            mode = opts.mode;\n        } else if (opts.header && opts.header.toolbar) {\n            mode = opts.header.toolbar.mode;\n        } else if (opts.header && opts.header.content) {\n            mode = opts.header.mode;\n        }\n        mode = mode || 'standard';\n        const tall = modeConfigs.tallMode[mode] || false;\n        const tallClass = opts.tallClass || CSS_CLASSES.headerTall;\n        const animated = opts.animated || false;\n        const fixed = opts.fixed || false;\n        const condenses = opts.condenses || false;\n        const scrollAwayTopbar = opts.scrollAwayTopbar || false;\n        const noReveal = opts.noReveal || false;\n        const keepCondensedHeader = opts.keepCondensedHeader || false;\n        const noDissolve = opts.noDissolve || false;\n        const backgroundScrollSpeed = (opts.backgroundScrollSpeed !== undefined) ? opts.backgroundScrollSpeed : 0.5;\n        y = 0;\n        scrolled = false;\n        prevScrollTop = 0;\n        // defaults, finally set with setHeight\n        const shadowHeight = DEFAULT_SHADOW_HEIGTH;\n        headerHeight = (opts.headerHeight || DEFAULT_HEADER_HEIGHT) + shadowHeight;\n        const condensedHeaderHeight = (opts.condensedHeaderHeight || DEFAULT_CONDENSED_HEADER_HEIGHT) + shadowHeight;\n        headerMargin = headerHeight - condensedHeaderHeight;\n\n        const handleScrollFns = {\n            standard: () => {\n                //\n            },\n            fixed: () => {\n                const sTop = ctrl.scrollerElem.scrollTop;\n                const isScrolled = (sTop > 0);\n                ctrl.showShadow(isScrolled);\n                scrolled = isScrolled;\n            },\n            animated: () => {\n                const sTop = ctrl.scrollerElem.scrollTop;\n                const isScrolled = (sTop > 0);\n                if (isScrolled !== scrolled) {\n                    let headerElem = ctrl.headerElem;\n                    if (headerElem && tall) {\n                        headerElem.classList[isScrolled ? 'remove' : 'add'](tallClass);\n                    }\n                    ctrl.showShadow(isScrolled);\n                    scrolled = isScrolled;\n                }\n            },\n            dynamicHeader: () => {\n                let sy,\n                    cascaded = false;\n                const sTop = ctrl.scrollerElem.scrollTop;\n\n                if (sTop < headerMargin) {\n                    sy = sTop;\n                } else {\n                    sy = Math.min(keepCondensedHeader ? headerMargin : headerHeight,\n                        Math.max(0, ((noReveal || keepCondensedHeader) ? sTop : y + sTop - prevScrollTop))\n                    );\n\n                    if (condenses && prevScrollTop >= sTop && sTop > headerMargin) {\n                        sy = Math.max(sy, headerMargin);\n                    }\n                }\n                if (sTop > 0) {\n                    ctrl.transformHeader(sy);\n                } else if (p.isTouch) {\n                    ctrl.enlargeImage(sy);\n                }\n                if (!modeConfigs.noShadow[opts.mode]) {\n                    if (sTop > sy) {\n                        cascaded = true;\n                    }\n                    ctrl.showShadow(cascaded);\n                }\n\n                y = sy;\n                prevScrollTop = Math.max(sTop, 0);\n            }\n        };\n\n        return {\n            headerPanelElem: undefined,\n            scrollerElem: undefined,\n            outerContainerElem: undefined,\n            headerContainerElem: undefined,\n            headerTopBarElem: undefined,\n            headerElem: undefined,\n            headerBg: undefined,\n            condensedHeaderBg: undefined,\n            mode: mode,\n            fixed: fixed,\n            shadow: (opts.shadow !== undefined && !opts.shadow) ? false : true,\n            scrollWatchId: 0,\n            isScrolling: false,\n            headerConfig: {\n                tall: tall,\n                tallClass: tallClass,\n                animated: animated,\n                fixed: fixed\n            },\n\n            init: (controller) => {\n                ctrl = controller;\n            },\n\n            setHeight: h => {\n                let mainContainer;\n\n                if (opts.headerHeight === undefined) {\n                    headerHeight = h + shadowHeight;\n                    headerMargin = headerHeight - condensedHeaderHeight;\n                }\n                if (!fixed) {\n                    mainContainer = ctrl.outerContainerElem.querySelector('.' + CSS_CLASSES.mainContainer);\n                    mainContainer.style.paddingTop = h + 'px';\n                }\n                if (noReveal) {\n                    ctrl.showShadow(false);\n                }\n            },\n\n            handleScroll: (e) => {\n                let fn;\n\n                if (e) {\n                    // this is a real scroll event\n                    // instead of a programmatic call\n                    ctrl.isScrolling = true;\n                    scroller = ctrl;\n                    clearTimeout(ctrl.scrollWatchId);\n                    ctrl.scrollWatchId = setTimeout(() => {\n                        ctrl.isScrolling = false;\n                        scroller = undefined;\n                    }, SCROLL_WATCH_TIMER);\n                }\n\n                if (mode === 'scroll') {\n                    return;\n                }\n                if (modeConfigs.alwaysShadow[mode]) {\n                    ctrl.showShadow(true);\n                }\n                if (animated) {\n                    fn = handleScrollFns.animated;\n                    fn.bind(this).call();\n                }\n                if (mode === 'standard') {\n                    fn = handleScrollFns.standard;\n                } else if (fixed) {\n                    fn = handleScrollFns.fixed;\n                } else {\n                    fn = handleScrollFns.dynamicHeader;\n                }\n                fn.bind(this).call();\n                if (e && opts.scroll) {\n                    opts.scroll(e);\n                }\n            },\n\n            condenseHeader: (hy) => {\n                let hbg,\n                    chbg;\n\n                const reset = (hy === null);\n\n                // adjust top bar in core-header so the top bar stays at the top\n                if (!scrollAwayTopbar) {\n                    if (ctrl.headerTopBarElem) {\n                        translateY(ctrl.headerTopBarElem.style, Math.min(hy, headerMargin));\n                    }\n                }\n\n                // transition header bg\n                hbg = ctrl.headerBg.style;\n                if (hbg) {\n                    if (!noDissolve) {\n                        hbg.opacity = reset ? '' : (headerMargin - hy) / headerMargin;\n                    }\n\n                    // adjust header bg so it stays at the center\n                    translateY(hbg, reset ? null : hy * backgroundScrollSpeed);\n\n                    // transition condensed header bg\n                    if (!noDissolve) {\n                        chbg = ctrl.condensedHeaderBg.style;\n                        chbg.opacity = reset ? '' : hy / headerMargin;\n                        // adjust condensed header bg so it stays at the center\n                        translateY(chbg, reset ? null : hy * backgroundScrollSpeed);\n                    }\n                }\n            },\n\n            transformHeader: (hy) => {\n                if (hy < 0) {\n                    return;\n                }\n                translateY(ctrl.headerContainerElem.style, -hy);\n                if (condenses) {\n                    ctrl.condenseHeader(hy);\n                }\n                if (opts.transform) {\n                    opts.transform({\n                        y: hy,\n                        height: headerHeight,\n                        condensedHeight: condensedHeaderHeight\n                    });\n                }\n            },\n\n            enlargeImage: (hy) => {\n                ctrl.headerBg.style.height = 100 / headerHeight * (headerHeight + Math.abs(hy / 2)) + '%';\n            },\n\n            showShadow: (cascaded) => {\n                if (modeConfigs.alwaysShadow[mode]) {\n                    cascaded = true;\n                }\n                ctrl.outerContainerElem.classList[cascaded ? 'add' : 'remove'](CSS_CLASSES.cascaded);\n            },\n\n            storeScrollPosition: (scrollTop) => {\n                if (opts.restoreScrollPositionId) {\n                    scrollPositions[opts.restoreScrollPositionId] = scrollTop;\n                }\n            },\n\n            restoreScrollPosition: () => {\n                if (opts.restoreScrollPositionId) {\n                    const scrollTop = scrollPositions[opts.restoreScrollPositionId];\n                    if (scrollTop !== undefined) {\n                        const restore = () => (ctrl.scrollerElem.scrollTop = scrollTop);\n                        restore();\n                        setTimeout(restore, 0);\n                    }\n                }\n            }\n        };\n    },\n\n    view: (ctrl, opts) => {\n        if (scroller && scroller !== ctrl) {\n            // if we are scrolling,\n            // don't render other header-panels\n            return {\n                subtree: 'retain'\n            };\n        } else {\n            return createView(ctrl, opts);\n        }\n    }\n};\n\nexport default component;\n"]}