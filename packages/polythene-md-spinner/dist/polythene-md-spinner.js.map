{"version":3,"file":"polythene-md-spinner.js","sources":["../../polythene-shadow/dist/polythene-shadow.mjs","../src/classes.js","../src/theme/vars.js","../src/theme/layout.js","../src/theme/color.js","../src/theme/index.js","../src/spinner.js"],"sourcesContent":["import m from 'mithril';\nimport { filterSupportedAttributes } from 'polythene-core';\nimport { mixin, styler } from 'polythene-css';\nimport { vars } from 'polythene-theme';\n\nvar classes = {\n  component: \"pe-shadow\",\n  topShadow: \"pe-shadow__top\",\n  bottomShadow: \"pe-shadow__bottom\",\n  animated: \"pe-shadow--animated\",\n  depth_n: \"pe-shadow--z-\"\n};\n\nvar vars$1 = {\n  transition: \"box-shadow \" + vars.animation_duration + \" ease-out\",\n\n  \"shadow-top-z-1\": \"initial\",\n  \"shadow-bottom-z-1\": \"0 1px 4px 0 rgba(0, 0, 0, 0.37)\",\n\n  \"shadow-top-z-2\": \"0 2px 2px 0 rgba(0, 0, 0, 0.2)\",\n  \"shadow-bottom-z-2\": \"0 6px 10px 0 rgba(0, 0, 0, 0.3)\",\n\n  \"shadow-top-z-3\": \"0 11px 7px 0 rgba(0, 0, 0, 0.19)\",\n  \"shadow-bottom-z-3\": \"0 13px 25px 0 rgba(0, 0, 0, 0.3)\",\n\n  \"shadow-top-z-4\": \"0 14px 12px 0 rgba(0, 0, 0, 0.17)\",\n  \"shadow-bottom-z-4\": \"0 20px 40px 0 rgba(0, 0, 0, 0.3)\",\n\n  \"shadow-top-z-5\": \"0 17px 17px 0 rgba(0, 0, 0, 0.15)\",\n  \"shadow-bottom-z-5\": \"0 27px 55px 0 rgba(0, 0, 0, 0.3)\",\n\n  \"shadow-down-z-1\": \"inset 0px 1px 2px -1px rgba(0, 0, 0, 0.15)\",\n  \"shadow-down-z-2\": \"inset 0px 4px 6px -3px rgba(0, 0, 0, 0.25)\"\n};\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar shadowDirective = function shadowDirective(dir) {\n  return {\n    boxShadow: dir\n  };\n};\n\nvar layout = (function (selector, componentVars) {\n  return [_defineProperty({}, selector, [mixin.fit(), {\n    borderRadius: \"inherit\",\n    pointerEvents: \"none\",\n\n    \" .pe-shadow__bottom, .pe-shadow__top\": [mixin.fit(), {\n      borderRadius: \"inherit\"\n    }],\n\n    \".pe-shadow--animated\": {\n      \" .pe-shadow__bottom, .pe-shadow__top\": {\n        transition: componentVars.transition\n      }\n    }\n  }, [1, 2, 3, 4, 5].map(function (index) {\n    var _ref;\n\n    return _ref = {}, _defineProperty(_ref, \" .pe-shadow__top.pe-shadow--z-\" + index, shadowDirective(componentVars[\"shadow-top-z-\" + index])), _defineProperty(_ref, \" .pe-shadow__bottom.pe-shadow--z-\" + index, shadowDirective(componentVars[\"shadow-bottom-z-\" + index])), _ref;\n  })])];\n});\n\nvar _extends$1 = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar fns = [layout];\nvar selector = \".\" + classes.component;\n\nvar customTheme = function customTheme(customSelector, customVars) {\n  return styler.generateStyles([customSelector, selector], _extends$1({}, vars$1, customVars), fns);\n};\n\nstyler.generateStyles([selector], vars$1, fns);\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar view = function view(vnode) {\n  var attrs = vnode.attrs;\n  var depthClass = \"\" + classes.depth_n + Math.min(5, attrs.z !== undefined ? attrs.z : 1);\n  var element = attrs.element || \"div\";\n  var props = _extends({}, filterSupportedAttributes(attrs), {\n    class: [classes.component, attrs.animated && classes.animated, attrs.class].join(\" \")\n  });\n  var content = attrs.content ? attrs.content : attrs.children || vnode.children;\n  var shadowContent = [content, m(\"div\", {\n    class: [classes.bottomShadow, depthClass].join(\" \")\n  }), m(\"div\", {\n    class: [classes.topShadow, depthClass].join(\" \")\n  })];\n  return m(element, props, [attrs.before, shadowContent, attrs.after]);\n};\n\nvar shadow = {\n  theme: customTheme, // accepts (selector, vars)\n  view: view\n};\n\nexport { classes, vars$1 as vars };export default shadow;\n","\nexport default {\n  component:   \"pe-spinner\",\n  placeholder: \"pe-spinner__placeholder\",\n  animation:   \"pe-spinner__animation\",\n  visible:     \"pe-spinner--visible\",\n  small:       \"pe-spinner--small\",\n  regular:     \"pe-spinner--regular\",\n  medium:      \"pe-spinner--medium\",\n  large:       \"pe-spinner--large\",\n  fab:         \"pe-spinner--fab\",\n  raised:      \"pe-spinner--raised\",\n  permanent:   \"pe-spinner--permanent\",\n  singleColor: \"pe-spinner--single-color\",\n  animated:    \"pe-spinner--animated\"\n};\n","import { vars } from \"polythene-theme\";\nconst rgba = vars.rgba;\n\nexport default {\n  size_small:   3 * vars.grid_unit_component,\n  size_regular: 4 * vars.grid_unit_component,\n  size_medium:  5 * vars.grid_unit_component,\n  size_large:   6 * vars.grid_unit_component,\n  size_fab:     7 * vars.grid_unit_component,\n\n  color_light_raised_background: rgba(vars.color_light_background),\n  // also use light background with dark theme\n  color_dark_raised_background: rgba(vars.color_light_background)\n};\n","\nconst sizes = size => ({\n  width: size + \"px\",\n  height: size + \"px\"\n});\n\nconst sizesRaised = size => {\n  const padding = size / 4;\n  const paddedSize = size + padding * 2;\n  return {\n    width:   paddedSize + \"px\",\n    height:  paddedSize + \"px\",\n    padding: padding    + \"px\"\n  };\n};\n\nexport default (selector, componentVars) => [{\n  [selector]: {\n    transitionTimingFunction: \"ease-out\",\n    transitionProperty: \"opacity\",\n    opacity: 0,\n\n    \".pe-spinner--visible, &.pe-spinner--permanent\": {\n      opacity: 1\n    },\n\n    \".pe-spinner--small\":   sizes(componentVars.size_small),\n    \".pe-spinner--regular\": sizes(componentVars.size_regular),\n    \".pe-spinner--medium\":  sizes(componentVars.size_medium),\n    \".pe-spinner--large\":   sizes(componentVars.size_large),\n    \".pe-spinner--fab\":     sizes(componentVars.size_fab),\n\n    \".pe-spinner--raised\": {\n      position: \"relative\",\n      borderRadius: \"50%\",\n\n      \".pe-spinner--small\":   sizesRaised(componentVars.size_small),\n      \".pe-spinner--regular\": sizesRaised(componentVars.size_regular),\n      \".pe-spinner--medium\":  sizesRaised(componentVars.size_medium),\n      \".pe-spinner--large\":   sizesRaised(componentVars.size_large),\n      \".pe-spinner--fab\":     sizesRaised(componentVars.size_fab)\n    }\n  }\n}];\n","\nconst style = (scopes, selector, componentVars, tint) => [{\n  [scopes.map(s => s + selector).join(\",\")]: {\n    \".pe-spinner--raised\": {\n      backgroundColor: componentVars[\"color_\" + tint + \"_raised_background\"],\n    }\n  }\n}];\n\nexport default (selector, componentVars) => [\n  style([\".pe-dark-tone\", \".pe-dark-tone \"], selector, componentVars, \"dark\"), // has/inside dark theme\n  style([\"\", \".pe-light-tone\", \".pe-light-tone \"], selector, componentVars, \"light\"), // normal, has/inside light theme\n];\n","import { styler } from \"polythene-css\";\nimport classes from \"../classes\";\nimport vars from \"./vars\";\nimport layout from \"./layout\";\nimport color from \"./color\";\n\nconst fns = [layout, color];\nconst selector = `.${classes.component}`;\n\nexport const customTheme = (customSelector, customVars) => \n  styler.generateStyles([customSelector, selector], {...vars, ...customVars}, fns);\n\nstyler.generateStyles([selector], vars, fns);\n","import m from \"mithril\";\nimport { filterSupportedAttributes } from \"polythene-core\";\nimport transition from \"polythene-core\";\nimport shadow from \"polythene-shadow\";\nimport { customTheme } from \"./theme\";\nimport classes from \"./classes\";\n\nconst typeClasses = {\n  small: classes.small,\n  regular: classes.regular,\n  medium: classes.medium,\n  large: classes.large,\n  fab: classes.fab\n};\n\nconst classForType = (mode = \"regular\") => typeClasses[mode];\n\nconst show = (state, attrs) => {\n  if (state.isTransitioning) {\n    return;\n  }\n  state.isTransitioning = true;\n  return transition.show(Object.assign(\n    {},\n    attrs, {\n      el: state.el,\n      showClass: classes.visible\n    }\n  )).then(() => {\n    state.isTransitioning = false;\n    state.visible = true;\n  });\n};\n\nconst hide = (state, attrs) => {\n  if (state.isTransitioning) {\n    return;\n  }\n  state.isTransitioning = true;\n  return transition.hide(Object.assign(\n    {},\n    attrs, {\n      el: state.el,\n      afterHide: () => (state.el.style.display = \"none\"),\n      showClass: classes.visible\n    }\n  )).then(() => {\n    state.isTransitioning = false;\n    state.visible = false;\n    state.hide = false;\n    m.redraw(); // removes remainder of drawn component\n  });\n};\n\nconst delay = (attrs, mode) => {\n  const value = attrs[mode];\n  return ((value !== true) && !isNaN(value))\n    ? parseFloat(value, 10) * 1000\n    : false;\n};\n\nconst notifyState = (state, attrs) => {\n  if (attrs.percentage && attrs.getPercentage) {\n    const percentage = (typeof attrs.percentage === \"function\")\n      ? attrs.percentage()\n      : attrs.percentage;\n    attrs.getPercentage(percentage, state, attrs);\n  }\n};\n\nconst createView = (state, attrs) => {\n  const element = attrs.element || \"div\";\n  const props = Object.assign({},\n    filterSupportedAttributes(attrs),\n    {\n      class: [\n        classes.component,\n        classForType(attrs.type),\n        attrs.singleColor ? classes.singleColor: null,\n        attrs.raised ? classes.raised : null,\n        attrs.animated ? classes.animated : null,\n        attrs.permanent ? classes.permanent : null,\n        attrs.class\n      ].join(\" \"),\n      oncreate: ({ dom }) => {\n        state.el = dom;\n        notifyState(state, attrs);\n        if (!attrs.permanent) {\n          setTimeout(() => show(state, attrs), 0);\n        }\n      }\n    },\n    attrs.events ? attrs.events : null\n  );\n\n  notifyState(state, attrs);\n\n  if (state.hide) {\n    setTimeout(() => { hide(state, attrs); }, 0);\n  }\n\n  const content = [\n    attrs.raised && attrs.content\n      ? m.component(shadow, { z: attrs.z })\n      : null,\n    attrs.content || m(\"div\", { class: classes.animation }, \"Specific spinner missing\")\n  ];\n\n  return m(element, props, [attrs.before, content, attrs.after]);\n};\n\nconst view = (state, attrs) => {\n  if (!state.visible) {\n    if ((attrs.hide !== undefined && !attrs.hide) || attrs.show) {\n      const showDelay = delay(attrs, \"show\");\n      if (showDelay) {\n        setTimeout(() => {\n          state.visible = true;\n          m.redraw();\n        }, showDelay);\n      } else {\n        state.visible = true;\n      }\n    }\n  } else {\n    if ((attrs.show !== undefined && !attrs.show) || attrs.hide) {\n      const hideDelay = delay(attrs, \"hide\");\n      if (hideDelay) {\n        setTimeout(() => {\n          state.hide = true;\n          m.redraw();\n        }, hideDelay);\n      } else {\n        state.hide = true;\n      }\n    }\n  }\n  return state.visible\n    ? createView(state, attrs)\n    : m(\"span\", { class: classes.placeholder });\n};\n\nexport default {\n  theme: customTheme, // accepts (selector, vars)\n  oninit: vnode => {\n    vnode.state = Object.assign(\n      vnode.state, \n      {\n        el: null,\n        isTransitioning: false,\n        visible: vnode.attrs.permanent || false,\n        hide: false,\n        percentage: 0\n      }\n    );\n  },\n  view\n};\n"],"names":["_defineProperty","obj","key","value","defineProperty","enumerable","configurable","writable","classes","vars$1","vars","animation_duration","shadowDirective","dir","layout","selector","componentVars","mixin","fit","transition","map","index","_ref","_extends$1","Object","assign","target","i","arguments","length","source","prototype","hasOwnProperty","call","fns","component","customTheme","customSelector","customVars","styler","generateStyles","_extends","view","vnode","attrs","depthClass","depth_n","Math","min","undefined","z","element","props","filterSupportedAttributes","animated","class","join","content","children","shadowContent","m","bottomShadow","topShadow","before","after","shadow","rgba","grid_unit_component","color_light_background","sizes","size","sizesRaised","padding","paddedSize","size_small","size_regular","size_medium","size_large","size_fab","style","scopes","tint","s","color","typeClasses","small","regular","medium","large","fab","classForType","show","state","isTransitioning","el","visible","then","hide","display","redraw","delay","mode","isNaN","parseFloat","notifyState","percentage","getPercentage","createView","type","singleColor","raised","permanent","dom","events","animation","hideDelay","showDelay","placeholder"],"mappings":"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"}