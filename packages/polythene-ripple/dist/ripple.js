!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("mithril"),require("polythene-core"),require("polythene-css"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","mithril","polythene-core","polythene-css","polythene-theme"],t):t(e.polythene=e.polythene||{},e.m,e["polythene-core"],e["polythene-css"],e["polythene-theme"])}(this,function(e,t,n,i,r){"use strict";t="default"in t?t.default:t;var o={color:"inherit"},a=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t+".pe-ripple";return[a({},n,[i.mixin.fit(),{color:"inherit","border-radius":"inherit","&.pe-ripple--constrained":{"border-radius":"inherit"," .pe-ripple__mask":{overflow:"hidden","border-radius":"inherit"}}," .pe-ripple__mask":[i.mixin.fit(),i.mixin.vendorize({transform:"translate3d(0,0,0)"},r.vars.prefixes_transform)]," .pe-ripple__waves":{outline:"1px solid transparent",position:"absolute","border-radius":"50%","pointer-events":"none",display:"none"}," .pe-ripple__waves--animating":{display:"block"}}])]},l=function(e){return i.styler.createStyles(e,p)},c=function(e,t,n,i){var r=e["color_"+i]||e.color||"inherit";return[a({},t+n,{color:r})]},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t+".pe-ripple";return[c(e,"",n,"light"),c(e,".pe-dark-theme ",n,"dark")]},u=function(e){return i.styler.createStyles(e,d)},m="ripple",v="pe-ripple",f=function(e,t){return i.styler.styleComponent(e,t,m,o,l,u)},y=function(e,t){return f(e,i.styler.addComponentStyle(e,r.styles,m,t))};f(v,r.styles);var h=n.animationEndEvent(),g=.2,w=0,_=.1,b=2,k=.35,x=function(e,t,o,s,p,l){var c=t.getBoundingClientRect(),d=n.isTouch&&e.touches?e.touches[0].pageX:e.clientX,u=n.isTouch&&e.touches?e.touches[0].pageY:e.clientY,m=t.offsetWidth,v=t.offsetHeight,f=Math.sqrt(m*m+v*v),y=s.center?c.left+c.width/2:d,x=s.center?c.top+c.height/2:u,E=y-c.left-f/2,O=x-c.top-f/2,S=void 0!==s.startOpacity?s.startOpacity:g,j=void 0!==s.opacityDecayVelocity?s.opacityDecayVelocity:k,q=s.endOpacity||w,L=s.startScale||_,C=s.endScale||b,T=s.duration?s.duration:1/j*.2,A=window.getComputedStyle(t).color,D="ripple_animation_"+(new Date).getTime(),P=o.style;P.width=P.height=f+"px",P.top=O+"px",P.left=E+"px",P["animation-duration"]=P["-webkit-animation-duration"]=P["-moz-animation-duration"]=P["-o-animation-duration"]=T+"s",P.backgroundColor=A,P.opacity=S,P.animationName=D,P.animationTimingFunction=s.animationTimingFunction||r.vars.animation_curve_default;var V=[a({},"@keyframes "+D,{" 0%":{transform:"scale("+L+")",opacity:S}," 100%":{transform:"scale("+C+")",opacity:q}})];i.styler.add(D,V);var z=function e(t){s.persistent?(P.opacity=q,P.transform="scale("+C+")"):(l(),o.classList.remove(p.wavesAnimating)),o.removeEventListener(h,e,!1),i.styler.remove(D),s.end&&s.end(t)};o.addEventListener(h,z,!1),s.start&&s.start(e),o.classList.add(p.wavesAnimating)},E={component:"pe-ripple",waves:"pe-ripple__waves",mask:"pe-ripple__mask",constrained:"pe-ripple--constrained",wavesAnimating:"pe-ripple__waves--animating"},O=void 0,S=function(e){var t=e.state,i=e.attrs;if(e.dom){t.ripple=e.dom,t.waves=e.dom.querySelector("."+E.waves);var r=function(e){t.animating||(x(e,t.ripple,t.waves,i,E,function(){return t.animating=!1}),t.animating=!0)},o=e.dom.parentElement;o.addEventListener(n.touchEndEvent,r,!1),O=function(){o.removeEventListener(n.touchEndEvent,r,!1)}}},j=function(e){var i=e.attrs;if(i.disabled)return null;var r=i.element||"div",o=s({},n.filterSupportedAttributes(i),{class:[E.component,i.constrained!==!1?E.constrained:null,i.class].join(" ")}),a=t("div",{class:E.mask},t("div",{class:E.waves}));return t(r,o,[i.before,a,i.after])},q={theme:y,oninit:function(e){e.state={animating:!1,ripple:void 0,waves:void 0}},oncreate:S,onremove:O,view:j};e.ripple=q,e.rippleVars=o,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ripple.js.map
