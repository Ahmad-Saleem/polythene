!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("mithril"),require("polythene-core"),require("polythene-shadow"),require("polythene-css"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","mithril","polythene-core","polythene-shadow","polythene-css","polythene-theme"],n):n(e.polythene=e.polythene||{},e.m,e["polythene-core"],e["polythene-shadow"],e["polythene-css"],e["polythene-theme"])}(this,function(e,n,i,r,t,a){"use strict";function o(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function s(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}n="default"in n?n.default:n;var l="default"in i?i.default:i;r="default"in r?r.default:r;var p={component:"pe-spinner",placeholder:"pe-spinner__placeholder",animation:"pe-spinner__animation",visible:"pe-spinner--visible",small:"pe-spinner--small",regular:"pe-spinner--regular",medium:"pe-spinner--medium",large:"pe-spinner--large",fab:"pe-spinner--fab",raised:"pe-spinner--raised",permanent:"pe-spinner--permanent",singleColor:"pe-spinner--single-color",animated:"pe-spinner--animated"},u=a.vars.rgba,c={size_small:3*a.vars.grid_unit_component,size_regular:4*a.vars.grid_unit_component,size_medium:5*a.vars.grid_unit_component,size_large:6*a.vars.grid_unit_component,size_fab:7*a.vars.grid_unit_component,color_light_raised_background:u(a.vars.color_light_background),color_dark_raised_background:u(a.vars.color_light_background)},d=function(e){return{width:e+"px",height:e+"px"}},f=function(e){var n=e/4,i=e+2*n;return{width:i+"px",height:i+"px",padding:n+"px"}},g=function(e,n){return[o({},e,{transitionTimingFunction:"ease-out",transitionProperty:"opacity",opacity:0,".pe-spinner--visible, &.pe-spinner--permanent":{opacity:1},".pe-spinner--small":d(n.size_small),".pe-spinner--regular":d(n.size_regular),".pe-spinner--medium":d(n.size_medium),".pe-spinner--large":d(n.size_large),".pe-spinner--fab":d(n.size_fab),".pe-spinner--raised":{position:"relative",borderRadius:"50%",".pe-spinner--small":f(n.size_small),".pe-spinner--regular":f(n.size_regular),".pe-spinner--medium":f(n.size_medium),".pe-spinner--large":f(n.size_large),".pe-spinner--fab":f(n.size_fab)}})]},m=function(e,n,i,r){return[s({},e.map(function(e){return e+n}).join(","),{".pe-spinner--raised":{backgroundColor:i["color_"+r+"_raised_background"]}})]},h=function(e,n){return[m([".pe-dark-tone",".pe-dark-tone "],e,n,"dark"),m(["",".pe-light-tone",".pe-light-tone "],e,n,"light")]},v=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},b=[g,h],_="."+p.component,y=function(e,n){return t.styler.generateStyles([e,_],v({},c,n),b)};t.styler.generateStyles([_],c,b);var w=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},z={small:p.small,regular:p.regular,medium:p.medium,large:p.large,fab:p.fab},T=function(){return z[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"regular"]},j=function(e,n){if(!e.isTransitioning)return e.isTransitioning=!0,l.show(w({},n,{el:e.el,showClass:p.visible})).then(function(){e.isTransitioning=!1,e.visible=!0})},k=function(e,i){if(!e.isTransitioning)return e.isTransitioning=!0,l.hide(w({},i,{el:e.el,afterHide:function(){return e.el.style.display="none"},showClass:p.visible})).then(function(){e.isTransitioning=!1,e.visible=!1,e.hide=!1,n.redraw()})},O=function(e,n){var i=e[n];return i!==!0&&!isNaN(i)&&1e3*parseFloat(i,10)},x=function(e,n){if(n.percentage&&n.getPercentage){var i="function"==typeof n.percentage?n.percentage():n.percentage;n.getPercentage(i,e,n)}},P=function(e,t){var a=t.element||"div",o=w({},i.filterSupportedAttributes(t),{class:[p.component,T(t.type),t.singleColor?p.singleColor:null,t.raised?p.raised:null,t.animated?p.animated:null,t.permanent?p.permanent:null,t.class].join(" "),oncreate:function(n){var i=n.dom;e.el=i,x(e,t),t.permanent||setTimeout(function(){return j(e,t)},0)}},t.events?t.events:null);x(e,t),e.hide&&setTimeout(function(){k(e,t)},0);var s=[t.raised&&t.content?n.component(r,{z:t.z}):null,t.content||n("div",{class:p.animation},"Specific spinner missing")];return n(a,o,[t.before,s,t.after])},C=function(e,i){if(e.visible){if(void 0!==i.show&&!i.show||i.hide){var r=O(i,"hide");r?setTimeout(function(){e.hide=!0,n.redraw()},r):e.hide=!0}}else if(void 0!==i.hide&&!i.hide||i.show){var t=O(i,"show");t?setTimeout(function(){e.visible=!0,n.redraw()},t):e.visible=!0}return e.visible?P(e,i):n("span",{class:p.placeholder})},q={theme:y,oninit:function(e){e.state=w(e.state,{el:null,isTransitioning:!1,visible:e.attrs.permanent||!1,hide:!1,percentage:0})},view:C};e.default=q,e.classes=p,e.vars=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-spinner-base.js.map
