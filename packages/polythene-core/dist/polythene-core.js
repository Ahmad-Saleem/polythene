!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("mithril")):"function"==typeof define&&define.amd?define(["exports","mithril"],n):n(e.polythene=e.polythene||{},e.m)}(this,function(e,n){"use strict";n="default"in n?n.default:n;var t=function(e){var n=parseInt(e.substring(1),16),t=n>>16&255,i=n>>8&255,r=255&n;return t+","+i+","+r},i=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return"rgba("+e+","+n+")"},r=window.innerWidth>=1024,o=4,a=8,u="cubic-bezier(.4, 0, .2, 1)",d="cubic-bezier(0, 0, .2, 1)",_="cubic-bezier(.4, 0, 1, 1)",s={rgba:i,hex:t,grid_unit:o,grid_unit_component:a,grid_unit_menu:56,grid_unit_icon_button:6*a,unit_block_border_radius:2,unit_item_border_radius:2,unit_indent:72,unit_side_padding:r?24:16,unit_touch_height:48,unit_icon_size_small:2*a,unit_icon_size:3*a,unit_icon_size_medium:4*a,unit_icon_size_large:5*a,unit_screen_size_extra_large:1280,unit_screen_size_large:960,unit_screen_size_medium:480,unit_screen_size_small:320,animation_duration:".18s",animation_curve_slow_in_fast_out:u,animation_curve_slow_in_linear_out:d,animation_curve_linear_in_fast_out:_,animation_curve_default:"ease-out",font_weight_light:300,font_weight_normal:400,font_weight_medium:500,font_weight_bold:700,font_size_title:20,line_height:1.3,color_primary:"33, 150, 243",color_primary_active:"30, 136, 229",color_primary_dark:"25, 118, 210",color_primary_faded:"100, 181, 249",color_primary_foreground:"255, 255, 255",color_light_background:"255, 255, 255",color_light_foreground:"0, 0, 0",color_dark_background:"34, 34, 34",color_dark_foreground:"255, 255, 255",blend_light_text_primary:.87,blend_light_text_regular:.73,blend_light_text_secondary:.54,blend_light_text_tertiary:.4,blend_light_text_disabled:.26,blend_light_border_light:.11,blend_light_background_active:.14,blend_light_background_hover:.06,blend_light_background_hover_medium:.12,blend_light_background_disabled:.09,blend_light_overlay_background:.3,blend_dark_text_primary:1,blend_dark_text_regular:.87,blend_dark_text_secondary:.7,blend_dark_text_tertiary:.4,blend_dark_text_disabled:.26,blend_dark_border_light:.1,blend_dark_background_active:.14,blend_dark_background_hover:.08,blend_dark_background_hoverMedium:.12,blend_dark_background_disabled:.12,blend_dark_overlay_background:.3,prefixes_animation:["o","moz","webkit"],prefixes_appearance:["o","moz","ms","webkit"],prefixes_background_size:["o","moz","webkit"],prefixes_box_shadow:["moz","webkit"],prefixes_keyframes:["o","moz","webkit"],prefixes_transform:["o","moz","ms","webkit"],prefixes_transition:["o","moz","webkit"],prefixes_user_select:["moz","ms","webkit"],breakpoint_small_handset_portrait:0,breakpoint_medium_handset_portrait:360,breakpoint_large_handset_portrait:400,breakpoint_small_tablet_portrait:600,breakpoint_large_tablet_portrait:720,breakpoint_small_handset_landscape:480,breakpoint_medium_handset_landscape:600,breakpoint_large_handset_landscape:720,env_tablet:window.innerWidth>=600,env_desktop:window.innerWidth>=1024,z_menu:1,z_header_container:2e3,z_fixed_header_container:3e3,z_notification:4e3,z_dialog:5e3},l="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,c=l?"click":"mousedown",f=l?"click":"mouseup";document.querySelector("html").classList.add(l?"pe-touch":"pe-no-touch");var h={},m=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.05,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,i=!1;return function(){for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var u=function(){e.apply(t,o)};i||(u(),i=!0,setTimeout(function(){i=!1},n))}},b=function(e,n,t){h[e]=h[e]||[],h[e].push(t?m(n,t):n)},v=function(e,n){if(h[e]){var t=h[e].indexOf(n);t>-1&&h[e].splice(t,1)}},g=function(e,n){h[e]&&h[e].forEach(function(e){e(n)})};window.addEventListener("resize",function(e){return g("resize",e)}),window.addEventListener("scroll",function(e){return g("scroll",e)}),window.addEventListener("keydown",function(e){return g("keydown",e)}),window.addEventListener(f,function(e){return g(f,e)});var p={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"},w=function(){return document.createElement("fakeelement")},k=function(){var e=w();for(var n in p)if(void 0!==e.style[n])return p[n]},y=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},x=function(e){var t=[],i=function(e){var n=a(e);return t.indexOf(n)},r=function(e){var n=i(e);n!==-1&&t.splice(n,1)},o=function(e,n){var r=i(e);r!==-1&&(t[r]=n)},a=function(e){for(var n=0;n<t.length;n++)if(t[n].instanceId===e)return t[n]},u=function(){t.length&&(t[0].show=!0,n.redraw())},d=function(n){e.queue?(t.shift(),setTimeout(u,0)):r(n)},_=function(e,n){var t=a(n);t&&(t.pause=e,t.unpause=!e)},s=function(n,t){var i=void 0,r=function(){var e="function"==typeof n?n():n;return e.didShow&&e.didShow(t),i(t)},o=new Promise(function(e){return i=e}),a=void 0,u=function(){var i="function"==typeof n?n():n;return i.didHide&&i.didHide(t),e.queue&&d(t),a(t)},_=new Promise(function(e){return a=e});return y({},e,{instanceId:t,opts:n,show:!e.queue,showPromise:o,hidePromise:_,didShow:r,didHide:u})};return{count:function(){return t.length},clear:function(){return t.length=0},show:function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.defaultId,r=void 0;if(e.queue)r=s(n,i),t.push(r),1===t.length&&u();else{var d=a(i);r=s(n,i),d?o(i,r):t.push(r)}return r.showPromise},hide:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.defaultId,i=void 0;return e.queue?t.length&&(i=t[0]):i=a(n),i?(i.hide=!0,i.hidePromise):Promise.resolve(n)},remove:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.defaultId;return d(n)},pause:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.defaultId;return _(!0,n)},unpause:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.defaultId;return _(!1,n)},view:function(){var i=t.filter(function(e){return e.show});return document.body.classList[i.length?"add":"remove"](e.bodyShowClass),i.length?n(e.element,i.map(function(t){return n(e.instance,y({},t,{transitions:e.transitions,key:t.key||t.instanceId}))})):n(e.placeholder)}}},z=.22,P=.2,E=0,O=0,D="both",I=function(e){return A(e,"show")},S=function(e){return A(e,"hide")},T=function(e,n,t,i,r,o){var a=e.transition||D;return"none"===a?0:"show"===a&&"hide"===n?0:"hide"===a&&"show"===n?0:"show"===n?void 0!==e[t]?e[t]:r:void 0!==e[i]?e[i]:o},j=function(e,n){return T(e,n,"showDuration","hideDuration",z,P)},q=function(e,n){return T(e,n,"showDelay","hideDelay",E,O)},A=function(e,n){var t=e.el;return t?new Promise(function(i){var r=1e3*j(e,n),o=1e3*q(e,n),a=t.style,u=e.beforeShow&&"show"===n?function(){a.transitionDuration="0ms",a.transitionDelay="0ms",e.beforeShow()}:null,d=function(){a.transitionDuration=r+"ms",a.transitionDelay=o+"ms",e.showClass&&t.classList["show"===n?"add":"remove"](e.showClass),e.show&&"function"==typeof e.show&&"show"===n&&e.show(),e.hide&&"function"==typeof e.hide&&"hide"===n&&e.hide()},_=function(){e.afterHide&&"hide"===n&&(a.transitionDuration="0ms",a.transitionDelay="0ms",e.afterHide())},s=function(){d(),setTimeout(function(){return _(),i()},r+o)},l=function(){0===r?s():setTimeout(s,0)};u?(u(),setTimeout(l,0)):l()}):Promise.resolve()},L=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},H=function(e,n){return e[n]=1,e},M=["key","oninit","oncreate","onupdate","onbeforeremove","onremove","onbeforeupdate","style","href","id","tabindex"].reduce(H,{}),W=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=L({},M,n.reduce(H,{}));return Object.keys(e).reduce(function(n,i){return t[i]?n[i]=e[i]:null,n},{})};e.defaultVariables=s,e.isTouch=l,e.touchStartEvent=c,e.touchEndEvent=f,e.throttle=m,e.subscribe=b,e.unsubscribe=v,e.emit=g,e.animationEndEvent=k,e.multiple=x,e.show=I,e.hide=S,e.filterSupportedAttributes=W,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core.js.map
