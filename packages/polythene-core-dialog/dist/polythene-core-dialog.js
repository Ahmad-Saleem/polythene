!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("polythene-core"),require("polythene-core-css"),require("polythene-core-menu"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-core-css","polythene-core-menu","polythene-theme"],n):n(e.polythene=e.polythene||{},e["polythene-core"],e["polythene-core-css"],e["polythene-core-menu"],e["polythene-theme"])}(this,function(e,n,t,o,r){"use strict";function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var c={component:"pe-dialog",placeholder:"pe-dialog__placeholder",holder:"pe-dialog__holder",content:"pe-dialog__content",fullscreen:"pe-dialog--fullscreen",backdrop:"pe-dialog--backdrop",open:"pe-dialog--open",menuContent:o.classes.content},u={border_radius:r.vars.unit_block_border_radius,color_light_backdrop_background:"rgba(0, 0, 0, .4)",color_dark_backdrop_background:"rgba(0, 0, 0, .5)",color_light_background:t.rgba(r.vars.color_light_background),color_dark_background:t.rgba(r.vars.color_dark_background),color_light_text:t.rgba(r.vars.color_light_foreground,r.vars.blend_light_text_regular),color_dark_text:t.rgba(r.vars.color_dark_foreground,r.vars.blend_dark_text_regular)},s=function(e,n){return[i({},e,[t.flex.layoutCenterCenter,{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:r.vars.z_dialog,height:"100%",padding:n.padding+"px 40px",".pe-dialog--fullscreen":{padding:0}," .pe-dialog__content":{position:"relative",borderRadius:n.border_radius+"px"}}])]},d=function(e,n,t,o){return[a({},e.map(function(e){return e+n}).join(","),{" .pe-dialog__content":{backgroundColor:t["color_"+o+"_background"],color:t["color_"+o+"_text"]},"&.pe-dialog--backdrop":{backgroundColor:t["color_"+o+"_backdrop_background"]}})]},p=function(e,n){return[d([".pe-dark-tone",".pe-dark-tone "],e,n,"dark"),d(["",".pe-light-tone",".pe-light-tone "],e,n,"light")]},f=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},g=[s,p],h="."+c.component,b=function(e,n){return t.styler.generateStyles([e,h],f({},u,n),g)};t.styler.generateStyles([h],u,g);var _=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},y=function(e){return e.attrs.element||"div"},m=b,v=function(e,n){return{cleanUp:void 0,el:void 0,transitioning:n(!1)}},k=function(e,t){if(e.transitioning())return Promise.resolve();var o=e.instanceId;e.transitioning(!0);var r=t.transitions;return n.show(_({},t,r.show(e.el,t))).then(function(){t.multipleDidShow&&t.multipleDidShow(o),e.transitioning(!1)})},w=function(e,t){if(e.transitioning())return Promise.resolve();var o=e.instanceId;e.transitioning(!0);var r=t.transitions;return n.hide(_({},t,r.hide(e.el,t))).then(function(){t.multipleDidHide&&t.multipleDidHide(o),e.transitioning(!1)})},D=function(e){if(e.dom){var t=e.state,o=e.attrs;t.el=e.dom;var r=function(e){o.fullscreen||o.modal||27===e.which&&w(t,_({},o,{hideDelay:0}))};t.cleanUp=function(){return n.unsubscribe("keydown",r)},n.subscribe("keydown",r),o.showInstance&&k(t,o)}},x=function(e){return e.state.cleanUp()},j=function(e,t){var o=t.keys,r=e.state,i=e.attrs;return _({},n.filterSupportedAttributes(i,{remove:["style"]}),l({className:[c.component,i.fullscreen?c.fullscreen:null,i.backdrop?c.backdrop:null,"dark"===i.tone?"pe-dark-tone":null,"light"===i.tone?"pe-light-tone":null,i.className||i[o.class]].join(" ")},o.onclick,function(e){e.target===r.el&&(i.modal||w(r,_({},i,{hideDelay:0})))}),i.formOptions?i.formOptions:null)},O=function(e,n){var t=n.renderer,o=n.Shadow,r=n.DialogPane,i=e.state,a=e.attrs;a.hideInstance&&w(i,a);var l=a.panes&&a.panes.length?a.panes[0]:t(r,{title:a.title,body:a.content||a.body||a.menu,footer:a.footer,className:a.className,style:a.style});return t("div",{className:[c.content,a.menu?c.menuContent:null].join(" "),style:a.style},[a.fullscreen?null:t(o,{z:void 0!==a.z?a.z:3,animated:!0}),l])},P=Object.freeze({getElement:y,theme:m,getInitialState:v,onMount:D,onUnMount:x,createProps:j,createContent:O}),S={show:function(e,n){return{el:e,showDuration:n.showDuration||.22,showDelay:n.showDelay||0,beforeShow:function(){return e.style.opacity=0},show:function(){return e.style.opacity=1}}},hide:function(e,n){return{el:e,hideDuration:n.hideDuration||.22,hideDelay:n.hideDelay||0,hide:function(){return e.style.opacity=0}}}};e.coreDialogInstance=P,e.classes=c,e.vars=u,e.transitions=S,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-dialog.js.map
