{"version":3,"file":null,"sources":["../../../node_modules/mithril/render/vnode.js","../../../node_modules/mithril/render/hyperscript.js","../../../node_modules/mithril/api/redraw.js","../../../node_modules/j2c/dist/j2c.commonjs.js","../../../node_modules/mithril/render/trust.js","../../../node_modules/mithril/render/fragment.js","../../../node_modules/mithril/hyperscript.js","../../../node_modules/mithril/promise/promise.js","../../../node_modules/mithril/querystring/build.js","../../../node_modules/mithril/request/request.js","../../../node_modules/mithril/request.js","../../../node_modules/mithril/render/render.js","../../../node_modules/mithril/redraw.js","../../../node_modules/mithril/api/mount.js","../../../node_modules/mithril/mount.js","../../../node_modules/mithril/querystring/parse.js","../../../node_modules/mithril/router/router.js","../../../node_modules/mithril/api/router.js","../../../node_modules/mithril/route.js","../../../node_modules/mithril/util/withAttr.js","../../../node_modules/mithril/render.js","../../../node_modules/mithril/index.js","../../src/styles.js","../../../src/common/object.assign.js","../../../src/shadow/theme/config.js","../../../src/config/default.js","../../../src/common/mixin.js","../../../src/shadow/theme/layout.js","../../../src/common/styler.js","../../../src/shadow/theme/theme.js","../../../src/shadow/shadow.js","../../src/shadow/index.js","../../src/index.js"],"sourcesContent":["function Vnode(tag, key, attrs, children, text, dom) {\n\treturn {tag: tag, key: key, attrs: attrs, children: children, text: text, dom: dom, domSize: undefined, state: {}, events: undefined, instance: undefined, skip: false}\n}\nVnode.normalize = function(node) {\n\tif (node instanceof Array) return Vnode(\"[\", undefined, undefined, Vnode.normalizeChildren(node), undefined, undefined)\n\tif (node != null && typeof node !== \"object\") return Vnode(\"#\", undefined, undefined, node, undefined, undefined)\n\treturn node\n}\nVnode.normalizeChildren = function normalizeChildren(children) {\n\tfor (var i = 0; i < children.length; i++) {\n\t\tchildren[i] = Vnode.normalize(children[i])\n\t}\n\treturn children\n}\n\nmodule.exports = Vnode\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\nvar selectorParser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[(.+?)(?:\\s*=\\s*(\"|'|)((?:\\\\[\"'\\]]|.)*?)\\5)?\\])/g\nvar selectorCache = {}\nfunction hyperscript(selector) {\n\tif (selector == null || typeof selector !== \"string\" && selector.view == null) {\n\t\tthrow Error(\"The selector must be either a string or a component.\");\n\t}\n\n\tif (typeof selector === \"string\" && selectorCache[selector] === undefined) {\n\t\tvar match, tag, classes = [], attributes = {}\n\t\twhile (match = selectorParser.exec(selector)) {\n\t\t\tvar type = match[1], value = match[2]\n\t\t\tif (type === \"\" && value !== \"\") tag = value\n\t\t\telse if (type === \"#\") attributes.id = value\n\t\t\telse if (type === \".\") classes.push(value)\n\t\t\telse if (match[3][0] === \"[\") {\n\t\t\t\tvar attrValue = match[6]\n\t\t\t\tif (attrValue) attrValue = attrValue.replace(/\\\\([\"'])/g, \"$1\").replace(/\\\\\\\\/g, \"\\\\\")\n\t\t\t\tif (match[4] === \"class\") classes.push(attrValue)\n\t\t\t\telse attributes[match[4]] = attrValue || true\n\t\t\t}\n\t\t}\n\t\tif (classes.length > 0) attributes.className = classes.join(\" \")\n\t\tselectorCache[selector] = function(attrs, children) {\n\t\t\tvar hasAttrs = false, childList, text\n\t\t\tvar className = attrs.className || attrs.class\n\t\t\tfor (var key in attributes) attrs[key] = attributes[key]\n\t\t\tif (className !== undefined) {\n\t\t\t\tif (attrs.class !== undefined) {\n\t\t\t\t\tattrs.class = undefined\n\t\t\t\t\tattrs.className = className\n\t\t\t\t}\n\t\t\t\tif (attributes.className !== undefined) attrs.className = attributes.className + \" \" + className\n\t\t\t}\n\t\t\tfor (var key in attrs) {\n\t\t\t\tif (key !== \"key\") {\n\t\t\t\t\thasAttrs = true\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (children instanceof Array && children.length == 1 && children[0] != null && children[0].tag === \"#\") text = children[0].children\n\t\t\telse childList = children\n\n\t\t\treturn Vnode(tag || \"div\", attrs.key, hasAttrs ? attrs : undefined, childList, text, undefined)\n\t\t}\n\t}\n\tvar attrs, children, childrenIndex\n\tif (arguments[1] == null || typeof arguments[1] === \"object\" && arguments[1].tag === undefined && !(arguments[1] instanceof Array)) {\n\t\tattrs = arguments[1]\n\t\tchildrenIndex = 2\n\t}\n\telse childrenIndex = 1\n\tif (arguments.length === childrenIndex + 1) {\n\t\tchildren = arguments[childrenIndex] instanceof Array ? arguments[childrenIndex] : [arguments[childrenIndex]]\n\t}\n\telse {\n\t\tchildren = []\n\t\tfor (var i = childrenIndex; i < arguments.length; i++) children.push(arguments[i])\n\t}\n\n\tif (typeof selector === \"string\") return selectorCache[selector](attrs || {}, Vnode.normalizeChildren(children))\n\n\treturn Vnode(selector, attrs && attrs.key, attrs || {}, Vnode.normalizeChildren(children), undefined, undefined)\n}\n\nmodule.exports = hyperscript\n","\"use strict\"\n\nvar coreRenderer = require(\"../render/render\")\n\nfunction throttle(callback) {\n\t//60fps translates to 16.6ms, round it down since setTimeout requires int\n\tvar time = 16\n\tvar last = 0, pending = null\n\tvar timeout = typeof requestAnimationFrame === \"function\" ? requestAnimationFrame : setTimeout\n\treturn function() {\n\t\tvar now = Date.now()\n\t\tif (last === 0 || now - last >= time) {\n\t\t\tlast = now\n\t\t\tcallback()\n\t\t}\n\t\telse if (pending === null) {\n\t\t\tpending = timeout(function() {\n\t\t\t\tpending = null\n\t\t\t\tcallback()\n\t\t\t\tlast = Date.now()\n\t\t\t}, time - (now - last))\n\t\t}\n\t}\n}\n\nmodule.exports = function($window) {\n\tvar renderService = coreRenderer($window)\n\trenderService.setEventCallback(function(e) {\n\t\tif (e.redraw !== false) redraw()\n\t})\n\t\n\tvar callbacks = []\n\tfunction subscribe(key, callback) {\n\t\tunsubscribe(key)\n\t\tcallbacks.push(key, throttle(callback))\n\t}\n\tfunction unsubscribe(key) {\n\t\tvar index = callbacks.indexOf(key)\n\t\tif (index > -1) callbacks.splice(index, 2)\n\t}\n    function redraw() {\n        for (var i = 1; i < callbacks.length; i += 2) {\n            callbacks[i]()\n        }\n    }\n\treturn {subscribe: subscribe, unsubscribe: unsubscribe, redraw: redraw, render: renderService.render}\n}\n","'use strict';\n\nvar emptyObject = {};\nvar emptyArray = [];\nvar type = emptyObject.toString;\nvar own =  emptyObject.hasOwnProperty;\nvar OBJECT = type.call(emptyObject);\nvar ARRAY =  type.call(emptyArray);\nvar STRING = type.call('');\n/*/-inline-/*/\n// function cartesian(a, b, res, i, j) {\n//   res = [];\n//   for (j in b) if (own.call(b, j))\n//     for (i in a) if (own.call(a, i))\n//       res.push(a[i] + b[j]);\n//   return res;\n// }\n/*/-inline-/*/\n\n/* /-statements-/*/\nfunction cartesian(a,b, selectorP, res, i, j) {\n  res = []\n  for (j in b) if(own.call(b, j))\n    for (i in a) if(own.call(a, i))\n      res.push(concat(a[i], b[j], selectorP))\n  return res\n}\n\nfunction concat(a, b, selectorP) {\n  // `b.replace(/&/g, a)` is never falsy, since the\n  // 'a' of cartesian can't be the empty string\n  // in selector mode.\n  return selectorP && (\n    /^[-\\w$]+$/.test(b) && ':-error-bad-sub-selector-' + b ||\n    /&/.test(b) && /* never falsy */ b.replace(/&/g, a)\n  ) || a + b\n}\n\nfunction decamelize(match) {\n  return '-' + match.toLowerCase()\n}\n\n/**\n * Handles the property:value; pairs.\n *\n * @param {array|object|string} o - the declarations.\n * @param {string[]} buf - the buffer in which the final style sheet is built.\n * @param {string} prefix - the current property or a prefix in case of nested\n *                          sub-properties.\n * @param {string} vendors - a list of vendor prefixes.\n * @Param {boolean} local - are we in @local or in @global scope.\n * @param {object} ns - helper functions to populate or create the @local namespace\n *                      and to @extend classes.\n * @param {function} ns.e - @extend helper.\n * @param {function} ns.l - @local helper.\n */\n\nfunction declarations(o, buf, prefix, vendors, local, ns, /*var*/ k, v, kk) {\n  if (o==null) return\n  if (/\\$/.test(prefix)) {\n    for (kk in (prefix = prefix.split('$'))) if (own.call(prefix, kk)) {\n      declarations(o, buf, prefix[kk], vendors, local, ns)\n    }\n    return\n  }\n  switch ( type.call(o = o.valueOf()) ) {\n  case ARRAY:\n    for (k = 0; k < o.length; k++)\n      declarations(o[k], buf, prefix, vendors, local, ns)\n    break\n  case OBJECT:\n    // prefix is falsy iif it is the empty string, which means we're at the root\n    // of the declarations list.\n    prefix = (prefix && prefix + '-')\n    for (k in o) if (own.call(o, k)){\n      v = o[k]\n      if (/\\$/.test(k)) {\n        for (kk in (k = k.split('$'))) if (own.call(k, kk))\n          declarations(v, buf, prefix + k[kk], vendors, local, ns)\n      } else {\n        declarations(v, buf, prefix + k, vendors, local, ns)\n      }\n    }\n    break\n  default:\n    // prefix is falsy when it is \"\", which means that we're\n    // at the top level.\n    // `o` is then treated as a `property:value` pair.\n    // otherwise, `prefix` is the property name, and\n    // `o` is the value.\n    k = prefix.replace(/_/g, '-').replace(/[A-Z]/g, decamelize)\n\n    if (local && (k == 'animation-name' || k == 'animation')) {\n      o = o.split(',').map(function (o) {\n        return o.replace(/()(?::global\\(\\s*([-\\w]+)\\s*\\)|()([-\\w]+))/, ns.l)\n      }).join(',')\n    }\n    if (/^animation|^transition/.test(k)) vendors = ['webkit']\n    // '@' in properties also triggers the *ielte7 hack\n    // Since plugins dispatch on the /^@/ for at-rules\n    // we swap the at for an asterisk\n    // http://browserhacks.com/#hack-6d49e92634f26ae6d6e46b3ebc10019a\n\n    k = k.replace(/^@/, '*')\n\n/*/-statements-/*/\n    // vendorify\n    for (kk = 0; kk < vendors.length; kk++)\n      buf.push('-', vendors[kk], '-', k, k ? ':': '', o, ';\\n')\n/*/-statements-/*/\n\n    buf.push(k, k ? ':': '', o, ';\\n')\n\n  }\n}\n\nvar findClass = /()(?::global\\(\\s*(\\.[-\\w]+)\\s*\\)|(\\.)([-\\w]+))/g\n\n/**\n * Hanldes at-rules\n *\n * @param {string} k - The at-rule name, and, if takes both parameters and a\n *                     block, the parameters.\n * @param {string[]} buf - the buffer in which the final style sheet is built\n * @param {string[]} v - Either parameters for block-less rules or their block\n *                       for the others.\n * @param {string} prefix - the current selector or a prefix in case of nested rules\n * @param {string} rawPrefix - as above, but without localization transformations\n * @param {string} vendors - a list of vendor prefixes\n * @Param {boolean} local - are we in @local or in @global scope?\n * @param {object} ns - helper functions to populate or create the @local namespace\n *                      and to @extend classes\n * @param {function} ns.e - @extend helper\n * @param {function} ns.l - @local helper\n */\n\nfunction at(k, v, buf, prefix, rawPrefix, vendors, local, ns){\n  var kk\n  if (/^@(?:namespace|import|charset)$/.test(k)) {\n    if(type.call(v) == ARRAY){\n      for (kk = 0; kk < v.length; kk++) {\n        buf.push(k, ' ', v[kk], ';\\n')\n      }\n    } else {\n      buf.push(k, ' ', v, ';\\n')\n    }\n  } else if (/^@keyframes /.test(k)) {\n    k = local ? k.replace(\n      // generated by script/regexps.js\n      /( )(?::global\\(\\s*([-\\w]+)\\s*\\)|()([-\\w]+))/,\n      ns.l\n    ) : k\n    // add a @-webkit-keyframes block too.\n\n    buf.push('@-webkit-', k.slice(1), ' {\\n')\n    sheet(v, buf, '', '', ['webkit'])\n    buf.push('}\\n')\n\n    buf.push(k, ' {\\n')\n    sheet(v, buf, '', '', vendors, local, ns)\n    buf.push('}\\n')\n\n  } else if (/^@extends?$/.test(k)) {\n\n    /*eslint-disable no-cond-assign*/\n    // pick the last class to be extended\n    while (kk = findClass.exec(rawPrefix)) k = kk[4]\n    /*eslint-enable no-cond-assign*/\n    if (k == null || !local) {\n      // we're in a @global{} block\n      buf.push('@-error-cannot-extend-in-global-context ', JSON.stringify(rawPrefix), ';\\n')\n      return\n    } else if (/^@extends?$/.test(k)) {\n      // no class in the selector\n      buf.push('@-error-no-class-to-extend-in ', JSON.stringify(rawPrefix), ';\\n')\n      return\n    }\n    ns.e(\n      type.call(v) == ARRAY ? v.map(function (parent) {\n        return parent.replace(/()(?::global\\(\\s*(\\.[-\\w]+)\\s*\\)|()\\.([-\\w]+))/, ns.l)\n      }).join(' ') : v.replace(/()(?::global\\(\\s*(\\.[-\\w]+)\\s*\\)|()\\.([-\\w]+))/, ns.l),\n      k\n    )\n\n  } else if (/^@(?:font-face$|viewport$|page )/.test(k)) {\n    sheet(v, buf, k, k, emptyArray)\n\n  } else if (/^@global$/.test(k)) {\n    sheet(v, buf, prefix, rawPrefix, vendors, 0, ns)\n\n  } else if (/^@local$/.test(k)) {\n    sheet(v, buf, prefix, rawPrefix, vendors, 1, ns)\n\n  } else if (/^@(?:media |supports |document )./.test(k)) {\n    buf.push(k, ' {\\n')\n    sheet(v, buf, prefix, rawPrefix, vendors, local, ns)\n    buf.push('}\\n')\n\n  } else {\n    buf.push('@-error-unsupported-at-rule ', JSON.stringify(k), ';\\n')\n  }\n}\n\n/**\n * Add rulesets and other CSS statements to the sheet.\n *\n * @param {array|string|object} statements - a source object or sub-object.\n * @param {string[]} buf - the buffer in which the final style sheet is built\n * @param {string} prefix - the current selector or a prefix in case of nested rules\n * @param {string} rawPrefix - as above, but without localization transformations\n * @param {string} vendors - a list of vendor prefixes\n * @Param {boolean} local - are we in @local or in @global scope?\n * @param {object} ns - helper functions to populate or create the @local namespace\n *                      and to @extend classes\n * @param {function} ns.e - @extend helper\n * @param {function} ns.l - @local helper\n */\nfunction sheet(statements, buf, prefix, rawPrefix, vendors, local, ns) {\n  var k, kk, v, inDeclaration\n\n  switch (type.call(statements)) {\n\n  case ARRAY:\n    for (k = 0; k < statements.length; k++)\n      sheet(statements[k], buf, prefix, rawPrefix, vendors, local, ns)\n    break\n\n  case OBJECT:\n    for (k in statements) {\n      v = statements[k]\n      if (prefix && /^[-\\w$]+$/.test(k)) {\n        if (!inDeclaration) {\n          inDeclaration = 1\n          buf.push(( prefix || '*' ), ' {\\n')\n        }\n        declarations(v, buf, k, vendors, local, ns)\n      } else if (/^@/.test(k)) {\n        // Handle At-rules\n        inDeclaration = (inDeclaration && buf.push('}\\n') && 0)\n\n        at(k, v, buf, prefix, rawPrefix, vendors, local, ns)\n\n      } else {\n        // selector or nested sub-selectors\n\n        inDeclaration = (inDeclaration && buf.push('}\\n') && 0)\n\n        sheet(v, buf,\n          (kk = /,/.test(prefix) || prefix && /,/.test(k)) ?\n            cartesian(prefix.split(','), ( local ?\n          k.replace(\n            /()(?::global\\(\\s*(\\.[-\\w]+)\\s*\\)|(\\.)([-\\w]+))/g, ns.l\n          ) : k\n        ).split(','), prefix).join(',') :\n            concat(prefix, ( local ?\n          k.replace(\n            /()(?::global\\(\\s*(\\.[-\\w]+)\\s*\\)|(\\.)([-\\w]+))/g, ns.l\n          ) : k\n        ), prefix),\n          kk ?\n            cartesian(rawPrefix.split(','), k.split(','), rawPrefix).join(',') :\n            concat(rawPrefix, k, rawPrefix),\n          vendors,\n          local, ns\n        )\n      }\n    }\n    if (inDeclaration) buf.push('}\\n')\n    break\n  case STRING:\n    buf.push(\n        ( prefix || ':-error-no-selector' ) , ' {\\n'\n      )\n    declarations(statements, buf, '', vendors, local, ns)\n    buf.push('}\\n')\n  }\n}\n\nvar scope_root = '_j2c_' +\n      Math.floor(Math.random() * 0x100000000).toString(36) + '_' +\n      Math.floor(Math.random() * 0x100000000).toString(36) + '_' +\n      Math.floor(Math.random() * 0x100000000).toString(36) + '_' +\n      Math.floor(Math.random() * 0x100000000).toString(36) + '_';\nvar counter = 0;\nfunction j2c(res) {\n  res = res || {}\n  var extensions = []\n\n  function finalize(buf, i) {\n    for (i = 0; i< extensions.length; i++) buf = extensions[i](buf) || buf\n    return buf.join('')\n  }\n\n  res.use = function() {\n    var args = arguments\n    for (var i = 0; i < args.length; i++){\n      extensions.push(args[i])\n    }\n    return res\n  }\n/*/-statements-/*/\n  res.sheet = function(ns, statements) {\n    if (arguments.length === 1) {\n      statements = ns; ns = {}\n    }\n    var\n      suffix = scope_root + counter++,\n      locals = {},\n      k, buf = []\n    // pick only non-numeric keys since `(NaN != NaN) === true`\n    for (k in ns) if (k-0 != k-0 && own.call(ns, k)) {\n      locals[k] = ns[k]\n    }\n    sheet(\n      statements, buf, '', '', emptyArray /*vendors*/,\n      1, // local\n      {\n        e: function extend(parent, child) {\n          var nameList = locals[child]\n          locals[child] =\n            nameList.slice(0, nameList.lastIndexOf(' ') + 1) +\n            parent + ' ' +\n            nameList.slice(nameList.lastIndexOf(' ') + 1)\n        },\n        l: function localize(match, space, global, dot, name) {\n          if (global) {\n            return space + global\n          }\n          if (!locals[name]) locals[name] = name + suffix\n          return space + dot + locals[name].match(/\\S+$/)\n        }\n      }\n    )\n    /*jshint -W053 */\n    buf = new String(finalize(buf))\n    /*jshint +W053 */\n    for (k in locals) if (own.call(locals, k)) buf[k] = locals[k]\n    return buf\n  }\n/*/-statements-/*/\n  res.inline = function (locals, decl, buf) {\n    if (arguments.length === 1) {\n      decl = locals; locals = {}\n    }\n    declarations(\n      decl,\n      buf = [],\n      '', // prefix\n      emptyArray, // vendors\n      1,\n      {\n        l: function localize(match, space, global, dot, name) {\n          if (global) return space + global\n          if (!locals[name]) return name\n          return space + dot + locals[name]\n        }\n      })\n    return finalize(buf)\n  }\n\n  res.prefix = function(val, vendors) {\n    return cartesian(\n      vendors.map(function(p){return '-' + p + '-'}).concat(['']),\n      [val]\n    )\n  }\n  return res\n}\n\nj2c.global = function(x) {\n  return ':global(' + x + ')'\n}\n\nj2c.kv = kv\nfunction kv (k, v, o) {\n  o = {}\n  o[k] = v\n  return o\n}\n\nj2c.at = function at (rule, params, block) {\n  if (\n    arguments.length < 3\n  ) {\n    var _at = at.bind.apply(at, [null].concat([].slice.call(arguments,0)))\n    _at.toString = function(){return '@' + rule + ' ' + params}\n    return _at\n  }\n  else return kv('@' + rule + ' ' + params, block)\n}\n\nj2c(j2c)\ndelete j2c.use\n\nmodule.exports = j2c;","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\nmodule.exports = function(html) {\n\tif (html == null) html = \"\"\n\treturn Vnode(\"<\", undefined, undefined, html, undefined, undefined)\n}\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\nmodule.exports = function(attrs, children) {\n\treturn Vnode(\"[\", attrs.key, attrs, Vnode.normalizeChildren(children), undefined, undefined)\n}\n","var hyperscript = require(\"./render/hyperscript\")\n\nhyperscript.trust = require(\"./render/trust\")\nhyperscript.fragment = require(\"./render/fragment\")\n\nmodule.exports = hyperscript\n","\"use strict\"\n/** @constructor */\nvar PromisePolyfill = function(executor) {\n\tif (!(this instanceof PromisePolyfill)) throw new Error(\"Promise must be called with `new`\")\n\tif (typeof executor !== \"function\") throw new TypeError(\"executor must be a function\")\n\n\tvar self = this, resolvers = [], rejectors = [], resolveCurrent = handler(resolvers, true), rejectCurrent = handler(rejectors, false)\n\tvar instance = self._instance = {resolvers: resolvers, rejectors: rejectors}\n\tvar callAsync = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\tfunction handler(list, shouldAbsorb) {\n\t\treturn function execute(value) {\n\t\t\tvar then\n\t\t\ttry {\n\t\t\t\tif (shouldAbsorb && value != null && (typeof value === \"object\" || typeof value === \"function\") && typeof (then = value.then) === \"function\") {\n\t\t\t\t\tif (value === self) throw new TypeError(\"Promise can't be resolved w/ itself\")\n\t\t\t\t\texecuteOnce(then.bind(value))\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcallAsync(function() {\n\t\t\t\t\t\tif (!shouldAbsorb && list.length === 0) console.error(\"Possible unhandled promise rejection:\", value)\n\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) list[i](value)\n\t\t\t\t\t\tresolvers.length = 0, rejectors.length = 0\n\t\t\t\t\t\tinstance.state = shouldAbsorb\n\t\t\t\t\t\tinstance.retry = function() {execute(value)}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\trejectCurrent(e)\n\t\t\t}\n\t\t}\n\t}\n\tfunction executeOnce(then) {\n\t\tvar runs = 0\n\t\tfunction run(fn) {\n\t\t\treturn function(value) {\n\t\t\t\tif (runs++ > 0) return\n\t\t\t\tfn(value)\n\t\t\t}\n\t\t}\n\t\tvar onerror = run(rejectCurrent)\n\t\ttry {then(run(resolveCurrent), onerror)} catch (e) {onerror(e)}\n\t}\n\n\texecuteOnce(executor)\n}\nPromisePolyfill.prototype.then = function(onFulfilled, onRejection) {\n\tvar self = this, instance = self._instance\n\tfunction handle(callback, list, next, state) {\n\t\tlist.push(function(value) {\n\t\t\tif (typeof callback !== \"function\") next(value)\n\t\t\telse try {resolveNext(callback(value))} catch (e) {if (rejectNext) rejectNext(e)}\n\t\t})\n\t\tif (typeof instance.retry === \"function\" && state === instance.state) instance.retry()\n\t}\n\tvar resolveNext, rejectNext\n\tvar promise = new PromisePolyfill(function(resolve, reject) {resolveNext = resolve, rejectNext = reject})\n\thandle(onFulfilled, instance.resolvers, resolveNext, true), handle(onRejection, instance.rejectors, rejectNext, false)\n\treturn promise\n}\nPromisePolyfill.prototype.catch = function(onRejection) {\n\treturn this.then(null, onRejection)\n}\nPromisePolyfill.resolve = function(value) {\n\tif (value instanceof PromisePolyfill) return value\n\treturn new PromisePolyfill(function(resolve) {resolve(value)})\n}\nPromisePolyfill.reject = function(value) {\n\treturn new PromisePolyfill(function(resolve, reject) {reject(value)})\n}\nPromisePolyfill.all = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tvar total = list.length, count = 0, values = []\n\t\tif (list.length === 0) resolve([])\n\t\telse for (var i = 0; i < list.length; i++) {\n\t\t\t(function(i) {\n\t\t\t\tfunction consume(value) {\n\t\t\t\t\tcount++\n\t\t\t\t\tvalues[i] = value\n\t\t\t\t\tif (count === total) resolve(values)\n\t\t\t\t}\n\t\t\t\tif (list[i] != null && (typeof list[i] === \"object\" || typeof list[i] === \"function\") && typeof list[i].then === \"function\") {\n\t\t\t\t\tlist[i].then(consume, reject)\n\t\t\t\t}\n\t\t\t\telse consume(list[i])\n\t\t\t})(i)\n\t\t}\n\t})\n}\nPromisePolyfill.race = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\tlist[i].then(resolve, reject)\n\t\t}\n\t})\n}\n\nif (typeof Promise === \"undefined\") {\n\tif (typeof window !== \"undefined\") window.Promise = PromisePolyfill\n\telse if (typeof global !== \"undefined\") global.Promise = PromisePolyfill\n}\n\nmodule.exports = typeof Promise !== \"undefined\" ? Promise : PromisePolyfill","\"use strict\"\n\nmodule.exports = function(object) {\n\tif (Object.prototype.toString.call(object) !== \"[object Object]\") return \"\"\n\n\tvar args = []\n\tfor (var key in object) {\n\t\tdestructure(key, object[key])\n\t}\n\treturn args.join(\"&\")\n\n\tfunction destructure(key, value) {\n\t\tif (value instanceof Array) {\n\t\t\tfor (var i = 0; i < value.length; i++) {\n\t\t\t\tdestructure(key + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse if (Object.prototype.toString.call(value) === \"[object Object]\") {\n\t\t\tfor (var i in value) {\n\t\t\t\tdestructure(key + \"[\" + i + \"]\", value[i])\n\t\t\t}\n\t\t}\n\t\telse args.push(encodeURIComponent(key) + (value != null && value !== \"\" ? \"=\" + encodeURIComponent(value) : \"\"))\n\t}\n}\n","\"use strict\"\n\nvar buildQueryString = require(\"../querystring/build\")\n\nmodule.exports = function($window, Promise) {\n\tvar callbackCount = 0\n\n\tvar oncompletion\n\tfunction setCompletionCallback(callback) {oncompletion = callback}\n\tfunction finalizer() {\n\t\tvar count = 0\n\t\tfunction complete() {if (--count === 0 && typeof oncompletion === \"function\") oncompletion()}\n\n\t\treturn function finalize(promise) {\n\t\t\tvar then = promise.then\n\t\t\tpromise.then = function() {\n\t\t\t\tcount++\n\t\t\t\tvar next = then.apply(promise, arguments)\n\t\t\t\tnext.then(complete, function(e) {\n\t\t\t\t\tcomplete()\n\t\t\t\t\tif (count === 0) throw e\n\t\t\t\t})\n\t\t\t\treturn finalize(next)\n\t\t\t}\n\t\t\treturn promise\n\t\t}\n\t}\n\tfunction normalize(args, extra) {\n\t\tif (typeof args === \"string\") {\n\t\t\tvar url = args\n\t\t\targs = extra || {}\n\t\t\tif (args.url == null) args.url = url\n\t\t}\n\t\treturn args\n\t}\n\t\n\tfunction request(args, extra) {\n\t\tvar finalize = finalizer()\n\t\targs = normalize(args, extra)\n\n\t\tvar promise = new Promise(function(resolve, reject) {\n\t\t\tif (args.method == null) args.method = \"GET\"\n\t\t\targs.method = args.method.toUpperCase()\n\n\t\t\tvar useBody = typeof args.useBody === \"boolean\" ? args.useBody : args.method !== \"GET\" && args.method !== \"TRACE\"\n\n\t\t\tif (typeof args.serialize !== \"function\") args.serialize = typeof FormData !== \"undefined\" && args.data instanceof FormData ? function(value) {return value} : JSON.stringify\n\t\t\tif (typeof args.deserialize !== \"function\") args.deserialize = deserialize\n\t\t\tif (typeof args.extract !== \"function\") args.extract = extract\n\n\t\t\targs.url = interpolate(args.url, args.data)\n\t\t\tif (useBody) args.data = args.serialize(args.data)\n\t\t\telse args.url = assemble(args.url, args.data)\n\n\t\t\tvar xhr = new $window.XMLHttpRequest()\n\t\t\txhr.open(args.method, args.url, typeof args.async === \"boolean\" ? args.async : true, typeof args.user === \"string\" ? args.user : undefined, typeof args.password === \"string\" ? args.password : undefined)\n\n\t\t\tif (args.serialize === JSON.stringify && useBody) {\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\")\n\t\t\t}\n\t\t\tif (args.deserialize === deserialize) {\n\t\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\")\n\t\t\t}\n\t\t\tif (args.withCredentials) xhr.withCredentials = args.withCredentials\n\n\t\t\tif (typeof args.config === \"function\") xhr = args.config(xhr, args) || xhr\n\n\t\t\txhr.onreadystatechange = function() {\n\t\t\t\tif (xhr.readyState === 4) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar response = (args.extract !== extract) ? args.extract(xhr, args) : args.deserialize(args.extract(xhr, args))\n\t\t\t\t\t\tif ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304) {\n\t\t\t\t\t\t\tresolve(cast(args.type, response))\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tvar error = new Error(xhr.responseText)\n\t\t\t\t\t\t\tfor (var key in response) error[key] = response[key]\n\t\t\t\t\t\t\treject(error)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\treject(e)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (useBody && (args.data != null)) xhr.send(args.data)\n\t\t\telse xhr.send()\n\t\t})\n\t\treturn args.background === true ? promise : finalize(promise)\n\t}\n\n\tfunction jsonp(args, extra) {\n\t\tvar finalize = finalizer()\n\t\targs = normalize(args, extra)\n\t\t\n\t\tvar promise = new Promise(function(resolve, reject) {\n\t\t\tvar callbackName = args.callbackName || \"_mithril_\" + Math.round(Math.random() * 1e16) + \"_\" + callbackCount++\n\t\t\tvar script = $window.document.createElement(\"script\")\n\t\t\t$window[callbackName] = function(data) {\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\tresolve(cast(args.type, data))\n\t\t\t\tdelete $window[callbackName]\n\t\t\t}\n\t\t\tscript.onerror = function() {\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\treject(new Error(\"JSONP request failed\"))\n\t\t\t\tdelete $window[callbackName]\n\t\t\t}\n\t\t\tif (args.data == null) args.data = {}\n\t\t\targs.url = interpolate(args.url, args.data)\n\t\t\targs.data[args.callbackKey || \"callback\"] = callbackName\n\t\t\tscript.src = assemble(args.url, args.data)\n\t\t\t$window.document.documentElement.appendChild(script)\n\t\t})\n\t\treturn args.background === true? promise : finalize(promise)\n\t}\n\n\tfunction interpolate(url, data) {\n\t\tif (data == null) return url\n\n\t\tvar tokens = url.match(/:[^\\/]+/gi) || []\n\t\tfor (var i = 0; i < tokens.length; i++) {\n\t\t\tvar key = tokens[i].slice(1)\n\t\t\tif (data[key] != null) {\n\t\t\t\turl = url.replace(tokens[i], data[key])\n\t\t\t\tdelete data[key]\n\t\t\t}\n\t\t}\n\t\treturn url\n\t}\n\n\tfunction assemble(url, data) {\n\t\tvar querystring = buildQueryString(data)\n\t\tif (querystring !== \"\") {\n\t\t\tvar prefix = url.indexOf(\"?\") < 0 ? \"?\" : \"&\"\n\t\t\turl += prefix + querystring\n\t\t}\n\t\treturn url\n\t}\n\n\tfunction deserialize(data) {\n\t\ttry {return data !== \"\" ? JSON.parse(data) : null}\n\t\tcatch (e) {throw new Error(data)}\n\t}\n\n\tfunction extract(xhr) {return xhr.responseText}\n\n\tfunction cast(type, data) {\n\t\tif (typeof type === \"function\") {\n\t\t\tif (data instanceof Array) {\n\t\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t\tdata[i] = new type(data[i])\n\t\t\t\t}\n\t\t\t}\n\t\t\telse return new type(data)\n\t\t}\n\t\treturn data\n\t}\n\n\treturn {request: request, jsonp: jsonp, setCompletionCallback: setCompletionCallback}\n}\n","var PromisePolyfill = require(\"./promise/promise\")\nmodule.exports = require(\"./request/request\")(window, PromisePolyfill)\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\nmodule.exports = function($window) {\n\tvar $doc = $window.document\n\tvar $emptyFragment = $doc.createDocumentFragment()\n\n\tvar onevent\n\tfunction setEventCallback(callback) {return onevent = callback}\n\n\t//create\n\tfunction createNodes(parent, vnodes, start, end, hooks, nextSibling, ns) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tinsertNode(parent, createNode(vnode, hooks, ns), nextSibling)\n\t\t\t}\n\t\t}\n\t}\n\tfunction createNode(vnode, hooks, ns) {\n\t\tvar tag = vnode.tag\n\t\tif (vnode.attrs != null) initLifecycle(vnode.attrs, vnode, hooks)\n\t\tif (typeof tag === \"string\") {\n\t\t\tswitch (tag) {\n\t\t\t\tcase \"#\": return createText(vnode)\n\t\t\t\tcase \"<\": return createHTML(vnode)\n\t\t\t\tcase \"[\": return createFragment(vnode, hooks, ns)\n\t\t\t\tdefault: return createElement(vnode, hooks, ns)\n\t\t\t}\n\t\t}\n\t\telse return createComponent(vnode, hooks, ns)\n\t}\n\tfunction createText(vnode) {\n\t\treturn vnode.dom = $doc.createTextNode(vnode.children)\n\t}\n\tfunction createHTML(vnode) {\n\t\tvar match = vnode.children.match(/^\\s*?<(\\w+)/im) || []\n\t\tvar parent = {caption: \"table\", thead: \"table\", tbody: \"table\", tfoot: \"table\", tr: \"tbody\", th: \"tr\", td: \"tr\", colgroup: \"table\", col: \"colgroup\"}[match[1]] || \"div\"\n\t\tvar temp = $doc.createElement(parent)\n\n\t\ttemp.innerHTML = vnode.children\n\t\tvnode.dom = temp.firstChild\n\t\tvnode.domSize = temp.childNodes.length\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tvar child\n\t\twhile (child = temp.firstChild) {\n\t\t\tfragment.appendChild(child)\n\t\t}\n\t\treturn fragment\n\t}\n\tfunction createFragment(vnode, hooks, ns) {\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tif (vnode.children != null) {\n\t\t\tvar children = vnode.children\n\t\t\tcreateNodes(fragment, children, 0, children.length, hooks, null, ns)\n\t\t}\n\t\tvnode.dom = fragment.firstChild\n\t\tvnode.domSize = fragment.childNodes.length\n\t\treturn fragment\n\t}\n\tfunction createElement(vnode, hooks, ns) {\n\t\tvar tag = vnode.tag\n\t\tswitch (vnode.tag) {\n\t\t\tcase \"svg\": ns = \"http://www.w3.org/2000/svg\"; break\n\t\t\tcase \"math\": ns = \"http://www.w3.org/1998/Math/MathML\"; break\n\t\t}\n\n\t\tvar attrs = vnode.attrs\n\t\tvar is = attrs && attrs.is\n\n\t\tvar element = ns ?\n\t\t\tis ? $doc.createElementNS(ns, tag, {is: is}) : $doc.createElementNS(ns, tag) :\n\t\t\tis ? $doc.createElement(tag, {is: is}) : $doc.createElement(tag)\n\t\tvnode.dom = element\n\n\t\tif (attrs != null) {\n\t\t\tsetAttrs(vnode, attrs, ns)\n\t\t}\n\n\t\tif (vnode.attrs != null && vnode.attrs.contenteditable != null) {\n\t\t\tsetContentEditable(vnode)\n\t\t}\n\t\telse {\n\t\t\tif (vnode.text != null) {\n\t\t\t\tif (vnode.text !== \"\") element.textContent = vnode.text\n\t\t\t\telse vnode.children = [Vnode(\"#\", undefined, undefined, vnode.text, undefined, undefined)]\n\t\t\t}\n\t\t\tif (vnode.children != null) {\n\t\t\t\tvar children = vnode.children\n\t\t\t\tcreateNodes(element, children, 0, children.length, hooks, null, ns)\n\t\t\t\tsetLateAttrs(vnode)\n\t\t\t}\n\t\t}\n\t\treturn element\n\t}\n\tfunction createComponent(vnode, hooks, ns) {\n\t\t// For object literals since `Vnode()` always sets the `state` field.\n\t\tif (!vnode.state) vnode.state = {}\n\t\tassign(vnode.state, vnode.tag)\n\n\t\tvar view = vnode.tag.view\n\t\tif (view.reentrantLock != null) return $emptyFragment\n\t\tview.reentrantLock = true\n\t\tinitLifecycle(vnode.tag, vnode, hooks)\n\t\tvnode.instance = Vnode.normalize(view.call(vnode.state, vnode))\n\t\tview.reentrantLock = null\n\t\tif (vnode.instance != null) {\n\t\t\tif (vnode.instance === vnode) throw Error(\"A view cannot return the vnode it received as arguments\")\n\t\t\tvar element = createNode(vnode.instance, hooks, ns)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.dom != null ? vnode.instance.domSize : 0\n\t\t\treturn element\n\t\t}\n\t\telse {\n\t\t\tvnode.domSize = 0\n\t\t\treturn $emptyFragment\n\t\t}\n\t}\n\n\t//update\n\tfunction updateNodes(parent, old, vnodes, hooks, nextSibling, ns) {\n\t\tif (old === vnodes || old == null && vnodes == null) return\n\t\telse if (old == null) createNodes(parent, vnodes, 0, vnodes.length, hooks, nextSibling, undefined)\n\t\telse if (vnodes == null) removeNodes(old, 0, old.length, vnodes)\n\t\telse {\n\t\t\tvar isUnkeyed = false\n\t\t\tfor (var i = 0; i < vnodes.length; i++) {\n\t\t\t\tif (vnodes[i] != null) {\n\t\t\t\t\tisUnkeyed = vnodes[i].key == null\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (old.length === vnodes.length && isUnkeyed) {\n\t\t\t\tfor (var i = 0; i < old.length; i++) {\n\t\t\t\t\tif (old[i] === vnodes[i]) continue\n\t\t\t\t\telse if (old[i] == null) insertNode(parent, createNode(vnodes[i], hooks, ns), getNextSibling(old, i + 1, nextSibling))\n\t\t\t\t\telse if (vnodes[i] == null) removeNodes(old, i, i + 1, vnodes)\n\t\t\t\t\telse updateNode(parent, old[i], vnodes[i], hooks, getNextSibling(old, i + 1, nextSibling), false, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar recycling = isRecyclable(old, vnodes)\n\t\t\t\tif (recycling) old = old.concat(old.pool)\n\n\t\t\t\tvar oldStart = 0, start = 0, oldEnd = old.length - 1, end = vnodes.length - 1, map\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\tvar o = old[oldStart], v = vnodes[start]\n\t\t\t\t\tif (o === v && !recycling) oldStart++, start++\n\t\t\t\t\telse if (o == null) oldStart++\n\t\t\t\t\telse if (v == null) start++\n\t\t\t\t\telse if (o.key === v.key) {\n\t\t\t\t\t\toldStart++, start++\n\t\t\t\t\t\tupdateNode(parent, o, v, hooks, getNextSibling(old, oldStart, nextSibling), recycling, ns)\n\t\t\t\t\t\tif (recycling && o.tag === v.tag) insertNode(parent, toFragment(o), nextSibling)\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvar o = old[oldEnd]\n\t\t\t\t\t\tif (o === v && !recycling) oldEnd--, start++\n\t\t\t\t\t\telse if (o == null) oldEnd--\n\t\t\t\t\t\telse if (v == null) start++\n\t\t\t\t\t\telse if (o.key === v.key) {\n\t\t\t\t\t\t\tupdateNode(parent, o, v, hooks, getNextSibling(old, oldEnd + 1, nextSibling), recycling, ns)\n\t\t\t\t\t\t\tif (recycling || start < end) insertNode(parent, toFragment(o), getNextSibling(old, oldStart, nextSibling))\n\t\t\t\t\t\t\toldEnd--, start++\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse break\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\tvar o = old[oldEnd], v = vnodes[end]\n\t\t\t\t\tif (o === v && !recycling) oldEnd--, end--\n\t\t\t\t\telse if (o == null) oldEnd--\n\t\t\t\t\telse if (v == null) end--\n\t\t\t\t\telse if (o.key === v.key) {\n\t\t\t\t\t\tupdateNode(parent, o, v, hooks, getNextSibling(old, oldEnd + 1, nextSibling), recycling, ns)\n\t\t\t\t\t\tif (recycling && o.tag === v.tag) insertNode(parent, toFragment(o), nextSibling)\n\t\t\t\t\t\tif (o.dom != null) nextSibling = o.dom\n\t\t\t\t\t\toldEnd--, end--\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (!map) map = getKeyMap(old, oldEnd)\n\t\t\t\t\t\tif (v != null) {\n\t\t\t\t\t\t\tvar oldIndex = map[v.key]\n\t\t\t\t\t\t\tif (oldIndex != null) {\n\t\t\t\t\t\t\t\tvar movable = old[oldIndex]\n\t\t\t\t\t\t\t\tupdateNode(parent, movable, v, hooks, getNextSibling(old, oldEnd + 1, nextSibling), recycling, ns)\n\t\t\t\t\t\t\t\tinsertNode(parent, toFragment(movable), nextSibling)\n\t\t\t\t\t\t\t\told[oldIndex].skip = true\n\t\t\t\t\t\t\t\tif (movable.dom != null) nextSibling = movable.dom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tvar dom = createNode(v, hooks, undefined)\n\t\t\t\t\t\t\t\tinsertNode(parent, dom, nextSibling)\n\t\t\t\t\t\t\t\tnextSibling = dom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tend--\n\t\t\t\t\t}\n\t\t\t\t\tif (end < start) break\n\t\t\t\t}\n\t\t\t\tcreateNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\t\tremoveNodes(old, oldStart, oldEnd + 1, vnodes)\n\t\t\t}\n\t\t}\n\t}\n\tfunction updateNode(parent, old, vnode, hooks, nextSibling, recycling, ns) {\n\t\tvar oldTag = old.tag, tag = vnode.tag\n\t\tif (oldTag === tag) {\n\t\t\tvnode.state = old.state\n\t\t\tvnode.events = old.events\n\t\t\tif (shouldUpdate(vnode, old)) return\n\t\t\tif (vnode.attrs != null) {\n\t\t\t\tupdateLifecycle(vnode.attrs, vnode, hooks, recycling)\n\t\t\t}\n\t\t\tif (typeof oldTag === \"string\") {\n\t\t\t\tswitch (oldTag) {\n\t\t\t\t\tcase \"#\": updateText(old, vnode); break\n\t\t\t\t\tcase \"<\": updateHTML(parent, old, vnode, nextSibling); break\n\t\t\t\t\tcase \"[\": updateFragment(parent, old, vnode, hooks, nextSibling, ns); break\n\t\t\t\t\tdefault: updateElement(old, vnode, hooks, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse updateComponent(parent, old, vnode, hooks, nextSibling, recycling, ns)\n\t\t}\n\t\telse {\n\t\t\tremoveNode(old, null)\n\t\t\tinsertNode(parent, createNode(vnode, hooks, ns), nextSibling)\n\t\t}\n\t}\n\tfunction updateText(old, vnode) {\n\t\tif (old.children.toString() !== vnode.children.toString()) {\n\t\t\told.dom.nodeValue = vnode.children\n\t\t}\n\t\tvnode.dom = old.dom\n\t}\n\tfunction updateHTML(parent, old, vnode, nextSibling) {\n\t\tif (old.children !== vnode.children) {\n\t\t\ttoFragment(old)\n\t\t\tinsertNode(parent, createHTML(vnode), nextSibling)\n\t\t}\n\t\telse vnode.dom = old.dom, vnode.domSize = old.domSize\n\t}\n\tfunction updateFragment(parent, old, vnode, hooks, nextSibling, ns) {\n\t\tupdateNodes(parent, old.children, vnode.children, hooks, nextSibling, ns)\n\t\tvar domSize = 0, children = vnode.children\n\t\tvnode.dom = null\n\t\tif (children != null) {\n\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\tvar child = children[i]\n\t\t\t\tif (child != null && child.dom != null) {\n\t\t\t\t\tif (vnode.dom == null) vnode.dom = child.dom\n\t\t\t\t\tdomSize += child.domSize || 1\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (domSize !== 1) vnode.domSize = domSize\n\t\t}\n\t}\n\tfunction updateElement(old, vnode, hooks, ns) {\n\t\tvar element = vnode.dom = old.dom\n\t\tswitch (vnode.tag) {\n\t\t\tcase \"svg\": ns = \"http://www.w3.org/2000/svg\"; break\n\t\t\tcase \"math\": ns = \"http://www.w3.org/1998/Math/MathML\"; break\n\t\t}\n\t\tif (vnode.tag === \"textarea\") {\n\t\t\tif (vnode.attrs == null) vnode.attrs = {}\n\t\t\tif (vnode.text != null) {\n\t\t\t\tvnode.attrs.value = vnode.text //FIXME handle multiple children\n\t\t\t\tvnode.text = undefined\n\t\t\t}\n\t\t}\n\t\tupdateAttrs(vnode, old.attrs, vnode.attrs, ns)\n\t\tif (vnode.attrs != null && vnode.attrs.contenteditable != null) {\n\t\t\tsetContentEditable(vnode)\n\t\t}\n\t\telse if (old.text != null && vnode.text != null && vnode.text !== \"\") {\n\t\t\tif (old.text.toString() !== vnode.text.toString()) old.dom.firstChild.nodeValue = vnode.text\n\t\t}\n\t\telse {\n\t\t\tif (old.text != null) old.children = [Vnode(\"#\", undefined, undefined, old.text, undefined, old.dom.firstChild)]\n\t\t\tif (vnode.text != null) vnode.children = [Vnode(\"#\", undefined, undefined, vnode.text, undefined, undefined)]\n\t\t\tupdateNodes(element, old.children, vnode.children, hooks, null, ns)\n\t\t}\n\t}\n\tfunction updateComponent(parent, old, vnode, hooks, nextSibling, recycling, ns) {\n\t\tvnode.instance = Vnode.normalize(vnode.tag.view.call(vnode.state, vnode))\n\t\tupdateLifecycle(vnode.tag, vnode, hooks, recycling)\n\t\tif (vnode.instance != null) {\n\t\t\tif (old.instance == null) insertNode(parent, createNode(vnode.instance, hooks, ns), nextSibling)\n\t\t\telse updateNode(parent, old.instance, vnode.instance, hooks, nextSibling, recycling, ns)\n\t\t\tvnode.dom = vnode.instance.dom\n\t\t\tvnode.domSize = vnode.instance.domSize\n\t\t}\n\t\telse if (old.instance != null) {\n\t\t\tremoveNode(old.instance, null)\n\t\t\tvnode.dom = undefined\n\t\t\tvnode.domSize = 0\n\t\t}\n\t\telse {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t}\n\t}\n\tfunction isRecyclable(old, vnodes) {\n\t\tif (old.pool != null && Math.abs(old.pool.length - vnodes.length) <= Math.abs(old.length - vnodes.length)) {\n\t\t\tvar oldChildrenLength = old[0] && old[0].children && old[0].children.length || 0\n\t\t\tvar poolChildrenLength = old.pool[0] && old.pool[0].children && old.pool[0].children.length || 0\n\t\t\tvar vnodesChildrenLength = vnodes[0] && vnodes[0].children && vnodes[0].children.length || 0\n\t\t\tif (Math.abs(poolChildrenLength - vnodesChildrenLength) <= Math.abs(oldChildrenLength - vnodesChildrenLength)) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t\treturn false\n\t}\n\tfunction getKeyMap(vnodes, end) {\n\t\tvar map = {}, i = 0\n\t\tfor (var i = 0; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tvar key = vnode.key\n\t\t\t\tif (key != null) map[key] = i\n\t\t\t}\n\t\t}\n\t\treturn map\n\t}\n\tfunction toFragment(vnode) {\n\t\tvar count = vnode.domSize\n\t\tif (count != null || vnode.dom == null) {\n\t\t\tvar fragment = $doc.createDocumentFragment()\n\t\t\tif (count > 0) {\n\t\t\t\tvar dom = vnode.dom\n\t\t\t\twhile (--count) fragment.appendChild(dom.nextSibling)\n\t\t\t\tfragment.insertBefore(dom, fragment.firstChild)\n\t\t\t}\n\t\t\treturn fragment\n\t\t}\n\t\telse return vnode.dom\n\t}\n\tfunction getNextSibling(vnodes, i, nextSibling) {\n\t\tfor (; i < vnodes.length; i++) {\n\t\t\tif (vnodes[i] != null && vnodes[i].dom != null) return vnodes[i].dom\n\t\t}\n\t\treturn nextSibling\n\t}\n\n\tfunction insertNode(parent, dom, nextSibling) {\n\t\tif (nextSibling && nextSibling.parentNode) parent.insertBefore(dom, nextSibling)\n\t\telse parent.appendChild(dom)\n\t}\n\n\tfunction setContentEditable(vnode) {\n\t\tvar children = vnode.children\n\t\tif (children != null && children.length === 1 && children[0].tag === \"<\") {\n\t\t\tvar content = children[0].children\n\t\t\tif (vnode.dom.innerHTML !== content) vnode.dom.innerHTML = content\n\t\t}\n\t\telse if (vnode.text != null || children != null && children.length !== 0) throw new Error(\"Child node of a contenteditable must be trusted\")\n\t}\n\n\t//remove\n\tfunction removeNodes(vnodes, start, end, context) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode = vnodes[i]\n\t\t\tif (vnode != null) {\n\t\t\t\tif (vnode.skip) vnode.skip = false\n\t\t\t\telse removeNode(vnode, context)\n\t\t\t}\n\t\t}\n\t}\n\tfunction once(f) {\n\t\tvar called = false\n\t\treturn function() {\n\t\t\tif (!called) {\n\t\t\t\tcalled = true\n\t\t\t\tf()\n\t\t\t}\n\t\t}\n\t}\n\tfunction removeNode(vnode, context) {\n\t\tvar expected = 1, called = 0\n\t\tif (vnode.attrs && vnode.attrs.onbeforeremove) {\n\t\t\texpected++\n\t\t\tvnode.attrs.onbeforeremove.call(vnode.state, vnode, once(continuation))\n\t\t}\n\t\tif (typeof vnode.tag !== \"string\" && vnode.tag.onbeforeremove) {\n\t\t\texpected++\n\t\t\tvnode.tag.onbeforeremove.call(vnode.state, vnode, once(continuation))\n\t\t}\n\t\tcontinuation()\n\t\tfunction continuation() {\n\t\t\tif (++called === expected) {\n\t\t\t\tonremove(vnode)\n\t\t\t\tif (vnode.dom) {\n\t\t\t\t\tvar count = vnode.domSize || 1\n\t\t\t\t\tif (count > 1) {\n\t\t\t\t\t\tvar dom = vnode.dom\n\t\t\t\t\t\twhile (--count) {\n\t\t\t\t\t\t\tremoveNodeFromDOM(dom.nextSibling)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tremoveNodeFromDOM(vnode.dom)\n\t\t\t\t\tif (context != null && vnode.domSize == null && !hasIntegrationMethods(vnode.attrs) && typeof vnode.tag === \"string\") { //TODO test custom elements\n\t\t\t\t\t\tif (!context.pool) context.pool = [vnode]\n\t\t\t\t\t\telse context.pool.push(vnode)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction removeNodeFromDOM(node) {\n\t\tvar parent = node.parentNode\n\t\tif (parent != null) parent.removeChild(node)\n\t}\n\tfunction onremove(vnode) {\n\t\tif (vnode.attrs && vnode.attrs.onremove) vnode.attrs.onremove.call(vnode.state, vnode)\n\t\tif (typeof vnode.tag !== \"string\" && vnode.tag.onremove) vnode.tag.onremove.call(vnode.state, vnode)\n\t\tif (vnode.instance != null) onremove(vnode.instance)\n\t\telse {\n\t\t\tvar children = vnode.children\n\t\t\tif (children instanceof Array) {\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\tvar child = children[i]\n\t\t\t\t\tif (child != null) onremove(child)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//attrs\n\tfunction setAttrs(vnode, attrs, ns) {\n\t\tfor (var key in attrs) {\n\t\t\tsetAttr(vnode, key, null, attrs[key], ns)\n\t\t}\n\t}\n\tfunction setAttr(vnode, key, old, value, ns) {\n\t\tvar element = vnode.dom\n\t\tif (key === \"key\" || (old === value && !isFormAttribute(vnode, key)) && typeof value !== \"object\" || typeof value === \"undefined\" || isLifecycleMethod(key)) return\n\t\tvar nsLastIndex = key.indexOf(\":\")\n\t\tif (nsLastIndex > -1 && key.substr(0, nsLastIndex) === \"xlink\") {\n\t\t\telement.setAttributeNS(\"http://www.w3.org/1999/xlink\", key.slice(nsLastIndex + 1), value)\n\t\t}\n\t\telse if (key[0] === \"o\" && key[1] === \"n\" && typeof value === \"function\") updateEvent(vnode, key, value)\n\t\telse if (key === \"style\") updateStyle(element, old, value)\n\t\telse if (key in element && !isAttribute(key) && ns === undefined) {\n\t\t\t//setting input[value] to same value by typing on focused element moves cursor to end in Chrome\n\t\t\tif (vnode.tag === \"input\" && key === \"value\" && vnode.dom.value === value && vnode.dom === $doc.activeElement) return\n\t\t\t//setting select[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\tif (vnode.tag === \"select\" && key === \"value\" && vnode.dom.value === value && vnode.dom === $doc.activeElement) return\n\t\t\t//setting option[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\tif (vnode.tag === \"option\" && key === \"value\" && vnode.dom.value === value) return\n\t\t\telement[key] = value\n\t\t}\n\t\telse {\n\t\t\tif (typeof value === \"boolean\") {\n\t\t\t\tif (value) element.setAttribute(key, \"\")\n\t\t\t\telse element.removeAttribute(key)\n\t\t\t}\n\t\t\telse element.setAttribute(key === \"className\" ? \"class\" : key, value)\n\t\t}\n\t}\n\tfunction setLateAttrs(vnode) {\n\t\tvar attrs = vnode.attrs\n\t\tif (vnode.tag === \"select\" && attrs != null) {\n\t\t\tif (\"value\" in attrs) setAttr(vnode, \"value\", null, attrs.value, undefined)\n\t\t\tif (\"selectedIndex\" in attrs) setAttr(vnode, \"selectedIndex\", null, attrs.selectedIndex, undefined)\n\t\t}\n\t}\n\tfunction updateAttrs(vnode, old, attrs, ns) {\n\t\tif (attrs != null) {\n\t\t\tfor (var key in attrs) {\n\t\t\t\tsetAttr(vnode, key, old && old[key], attrs[key], ns)\n\t\t\t}\n\t\t}\n\t\tif (old != null) {\n\t\t\tfor (var key in old) {\n\t\t\t\tif (attrs == null || !(key in attrs)) {\n\t\t\t\t\tif (key === \"className\") key = \"class\"\n\t\t\t\t\tif (key[0] === \"o\" && key[1] === \"n\" && !isLifecycleMethod(key)) updateEvent(vnode, key, undefined)\n\t\t\t\t\telse if (key !== \"key\") vnode.dom.removeAttribute(key)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction isFormAttribute(vnode, attr) {\n\t\treturn attr === \"value\" || attr === \"checked\" || attr === \"selectedIndex\" || attr === \"selected\" && vnode.dom === $doc.activeElement\n\t}\n\tfunction isLifecycleMethod(attr) {\n\t\treturn attr === \"oninit\" || attr === \"oncreate\" || attr === \"onupdate\" || attr === \"onremove\" || attr === \"onbeforeremove\" || attr === \"onbeforeupdate\"\n\t}\n\tfunction isAttribute(attr) {\n\t\treturn attr === \"href\" || attr === \"list\" || attr === \"form\" || attr === \"width\" || attr === \"height\"// || attr === \"type\"\n\t}\n\tfunction hasIntegrationMethods(source) {\n\t\treturn source != null && (source.oncreate || source.onupdate || source.onbeforeremove || source.onremove)\n\t}\n\n\t//style\n\tfunction updateStyle(element, old, style) {\n\t\tif (old === style) element.style.cssText = \"\", old = null\n\t\tif (style == null) element.style.cssText = \"\"\n\t\telse if (typeof style === \"string\") element.style.cssText = style\n\t\telse {\n\t\t\tif (typeof old === \"string\") element.style.cssText = \"\"\n\t\t\tfor (var key in style) {\n\t\t\t\telement.style[key] = style[key]\n\t\t\t}\n\t\t\tif (old != null && typeof old !== \"string\") {\n\t\t\t\tfor (var key in old) {\n\t\t\t\t\tif (!(key in style)) element.style[key] = \"\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//event\n\tfunction updateEvent(vnode, key, value) {\n\t\tvar element = vnode.dom\n\t\tvar callback = typeof onevent !== \"function\" ? value : function(e) {\n\t\t\tvar result = value.call(element, e)\n\t\t\tonevent.call(element, e)\n\t\t\treturn result\n\t\t}\n\t\tif (key in element) element[key] = typeof value === \"function\" ? callback : null\n\t\telse {\n\t\t\tvar eventName = key.slice(2)\n\t\t\tif (vnode.events === undefined) vnode.events = {}\n\t\t\tif (vnode.events[key] === callback) return\n\t\t\tif (vnode.events[key] != null) element.removeEventListener(eventName, vnode.events[key], false)\n\t\t\tif (typeof value === \"function\") {\n\t\t\t\tvnode.events[key] = callback\n\t\t\t\telement.addEventListener(eventName, vnode.events[key], false)\n\t\t\t}\n\t\t}\n\t}\n\n\t//lifecycle\n\tfunction initLifecycle(source, vnode, hooks) {\n\t\tif (typeof source.oninit === \"function\") source.oninit.call(vnode.state, vnode)\n\t\tif (typeof source.oncreate === \"function\") hooks.push(source.oncreate.bind(vnode.state, vnode))\n\t}\n\tfunction updateLifecycle(source, vnode, hooks, recycling) {\n\t\tif (recycling) initLifecycle(source, vnode, hooks)\n\t\telse if (typeof source.onupdate === \"function\") hooks.push(source.onupdate.bind(vnode.state, vnode))\n\t}\n\tfunction shouldUpdate(vnode, old) {\n\t\tvar forceVnodeUpdate, forceComponentUpdate\n\t\tif (vnode.attrs != null && typeof vnode.attrs.onbeforeupdate === \"function\") forceVnodeUpdate = vnode.attrs.onbeforeupdate.call(vnode.state, vnode, old)\n\t\tif (typeof vnode.tag !== \"string\" && typeof vnode.tag.onbeforeupdate === \"function\") forceComponentUpdate = vnode.tag.onbeforeupdate.call(vnode.state, vnode, old)\n\t\tif (!(forceVnodeUpdate === undefined && forceComponentUpdate === undefined) && !forceVnodeUpdate && !forceComponentUpdate) {\n\t\t\tvnode.dom = old.dom\n\t\t\tvnode.domSize = old.domSize\n\t\t\tvnode.instance = old.instance\n\t\t\treturn true\n\t\t}\n\t\treturn false\n\t}\n\n\tfunction assign(target, source) {\n\t\tObject.keys(source).forEach(function(k){target[k] = source[k]})\n\t}\n\n\tfunction render(dom, vnodes) {\n\t\tif (!dom) throw new Error(\"Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.\")\n\t\tvar hooks = []\n\t\tvar active = $doc.activeElement\n\n\t\t// First time rendering into a node clears it out\n\t\tif (dom.vnodes == null) dom.textContent = \"\"\n\n\t\tif (!(vnodes instanceof Array)) vnodes = [vnodes]\n\t\tupdateNodes(dom, dom.vnodes, Vnode.normalizeChildren(vnodes), hooks, null, undefined)\n\t\tdom.vnodes = vnodes\n\t\tfor (var i = 0; i < hooks.length; i++) hooks[i]()\n\t\tif ($doc.activeElement !== active) active.focus()\n\t}\n\n\treturn {render: render, setEventCallback: setEventCallback}\n}\n","module.exports = require(\"./api/redraw\")(window)","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\n\nmodule.exports = function(redrawService) {\n\treturn function(root, component) {\n\t\tif (component === null) {\n\t\t\tredrawService.render(root, [])\n\t\t\tredrawService.unsubscribe(root)\n\t\t\treturn\n\t\t}\n\t\t\n\t\tif (component.view == null) throw new Error(\"m.mount(element, component) expects a component, not a vnode\")\n\t\t\n\t\tvar run = function() {\n\t\t\tredrawService.render(root, Vnode(component))\n\t\t}\n\t\tredrawService.subscribe(root, run)\n\t\tredrawService.redraw()\n\t}\n}\n","var redrawService = require(\"./redraw\")\n\nmodule.exports = require(\"./api/mount\")(redrawService)","\"use strict\"\n\nmodule.exports = function(string) {\n\tif (string === \"\" || string == null) return {}\n\tif (string.charAt(0) === \"?\") string = string.slice(1)\n\n\tvar entries = string.split(\"&\"), data = {}, counters = {}\n\tfor (var i = 0; i < entries.length; i++) {\n\t\tvar entry = entries[i].split(\"=\")\n\t\tvar key = decodeURIComponent(entry[0])\n\t\tvar value = entry.length === 2 ? decodeURIComponent(entry[1]) : \"\"\n\n\t\tif (value === \"true\") value = true\n\t\telse if (value === \"false\") value = false\n\n\t\tvar levels = key.split(/\\]\\[?|\\[/)\n\t\tvar cursor = data\n\t\tif (key.indexOf(\"[\") > -1) levels.pop()\n\t\tfor (var j = 0; j < levels.length; j++) {\n\t\t\tvar level = levels[j], nextLevel = levels[j + 1]\n\t\t\tvar isNumber = nextLevel == \"\" || !isNaN(parseInt(nextLevel, 10))\n\t\t\tvar isValue = j === levels.length - 1\n\t\t\tif (level === \"\") {\n\t\t\t\tvar key = levels.slice(0, j).join()\n\t\t\t\tif (counters[key] == null) counters[key] = 0\n\t\t\t\tlevel = counters[key]++\n\t\t\t}\n\t\t\tif (cursor[level] == null) {\n\t\t\t\tcursor[level] = isValue ? value : isNumber ? [] : {}\n\t\t\t}\n\t\t\tcursor = cursor[level]\n\t\t}\n\t}\n\treturn data\n}\n","\"use strict\"\n\nvar buildQueryString = require(\"../querystring/build\")\nvar parseQueryString = require(\"../querystring/parse\")\n\nmodule.exports = function($window) {\n\tvar supportsPushState = typeof $window.history.pushState === \"function\"\n\tvar callAsync = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\n\tfunction normalize(fragment) {\n\t\tvar data = $window.location[fragment].replace(/(?:%[a-f89][a-f0-9])+/gim, decodeURIComponent)\n\t\tif (fragment === \"pathname\" && data[0] !== \"/\") data = \"/\" + data\n\t\treturn data\n\t}\n\n\tvar asyncId\n\tfunction debounceAsync(callback) {\n\t\treturn function() {\n\t\t\tif (asyncId != null) return\n\t\t\tasyncId = callAsync(function() {\n\t\t\t\tasyncId = null\n\t\t\t\tcallback()\n\t\t\t})\n\t\t}\n\t}\n\n\tfunction parsePath(path, queryData, hashData) {\n\t\tvar queryIndex = path.indexOf(\"?\")\n\t\tvar hashIndex = path.indexOf(\"#\")\n\t\tvar pathEnd = queryIndex > -1 ? queryIndex : hashIndex > -1 ? hashIndex : path.length\n\t\tif (queryIndex > -1) {\n\t\t\tvar queryEnd = hashIndex > -1 ? hashIndex : path.length\n\t\t\tvar queryParams = parseQueryString(path.slice(queryIndex + 1, queryEnd))\n\t\t\tfor (var key in queryParams) queryData[key] = queryParams[key]\n\t\t}\n\t\tif (hashIndex > -1) {\n\t\t\tvar hashParams = parseQueryString(path.slice(hashIndex + 1))\n\t\t\tfor (var key in hashParams) hashData[key] = hashParams[key]\n\t\t}\n\t\treturn path.slice(0, pathEnd)\n\t}\n\n\tvar router = {prefix: \"#!\"}\n\trouter.getPath = function() {\n\t\tvar type = router.prefix.charAt(0)\n\t\tswitch (type) {\n\t\t\tcase \"#\": return normalize(\"hash\").slice(router.prefix.length)\n\t\t\tcase \"?\": return normalize(\"search\").slice(router.prefix.length) + normalize(\"hash\")\n\t\t\tdefault: return normalize(\"pathname\").slice(router.prefix.length) + normalize(\"search\") + normalize(\"hash\")\n\t\t}\n\t}\n\trouter.setPath = function(path, data, options) {\n\t\tvar queryData = {}, hashData = {}\n\t\tpath = parsePath(path, queryData, hashData)\n\t\tif (data != null) {\n\t\t\tfor (var key in data) queryData[key] = data[key]\n\t\t\tpath = path.replace(/:([^\\/]+)/g, function(match, token) {\n\t\t\t\tdelete queryData[token]\n\t\t\t\treturn data[token]\n\t\t\t})\n\t\t}\n\n\t\tvar query = buildQueryString(queryData)\n\t\tif (query) path += \"?\" + query\n\n\t\tvar hash = buildQueryString(hashData)\n\t\tif (hash) path += \"#\" + hash\n\n\t\tif (supportsPushState) {\n\t\t\tif (options && options.replace) $window.history.replaceState(null, null, router.prefix + path)\n\t\t\telse $window.history.pushState(null, null, router.prefix + path)\n\t\t\t$window.onpopstate()\n\t\t}\n\t\telse $window.location.href = router.prefix + path\n\t}\n\trouter.defineRoutes = function(routes, resolve, reject) {\n\t\tfunction resolveRoute() {\n\t\t\tvar path = router.getPath()\n\t\t\tvar params = {}\n\t\t\tvar pathname = parsePath(path, params, params)\n\t\t\t\n\t\t\tfor (var route in routes) {\n\t\t\t\tvar matcher = new RegExp(\"^\" + route.replace(/:[^\\/]+?\\.{3}/g, \"(.*?)\").replace(/:[^\\/]+/g, \"([^\\\\/]+)\") + \"\\/?$\")\n\n\t\t\t\tif (matcher.test(pathname)) {\n\t\t\t\t\tpathname.replace(matcher, function() {\n\t\t\t\t\t\tvar keys = route.match(/:[^\\/]+/g) || []\n\t\t\t\t\t\tvar values = [].slice.call(arguments, 1, -2)\n\t\t\t\t\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\t\t\t\t\tparams[keys[i].replace(/:|\\./g, \"\")] = decodeURIComponent(values[i])\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(routes[route], params, path, route)\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treject(path, params)\n\t\t}\n\t\t\n\t\tif (supportsPushState) $window.onpopstate = debounceAsync(resolveRoute)\n\t\telse if (router.prefix.charAt(0) === \"#\") $window.onhashchange = resolveRoute\n\t\tresolveRoute()\n\t}\n\t\n\treturn router\n}\n","\"use strict\"\n\nvar Vnode = require(\"../render/vnode\")\nvar Promise = require(\"../promise/promise\")\nvar coreRouter = require(\"../router/router\")\n\nmodule.exports = function($window, redrawService) {\n\tvar routeService = coreRouter($window)\n\n\tvar identity = function(v) {return v}\n\tvar render, component, attrs, currentPath, updatePending = false\n\tvar route = function(root, defaultRoute, routes) {\n\t\tif (root == null) throw new Error(\"Ensure the DOM element that was passed to `m.route` is not undefined\")\n\t\tvar update = function(routeResolver, comp, params, path) {\n\t\t\tcomponent = comp != null && typeof comp.view === \"function\" ? comp : \"div\", attrs = params, currentPath = path, updatePending = false\n\t\t\trender = (routeResolver.render || identity).bind(routeResolver)\n\t\t\trun()\n\t\t}\n\t\tvar run = function() {\n\t\t\tif (render != null) redrawService.render(root, render(Vnode(component, attrs.key, attrs)))\n\t\t}\n\t\tvar bail = function() {\n\t\t\trouteService.setPath(defaultRoute)\n\t\t}\n\t\trouteService.defineRoutes(routes, function(payload, params, path) {\n\t\t\tif (payload.view) update({}, payload, params, path)\n\t\t\telse {\n\t\t\t\tif (payload.onmatch) {\n\t\t\t\t\tupdatePending = true\n\t\t\t\t\tPromise.resolve(payload.onmatch(params, path)).then(function(resolved) {\n\t\t\t\t\t\tif (updatePending) update(payload, resolved, params, path)\n\t\t\t\t\t}, bail)\n\t\t\t\t}\n\t\t\t\telse update(payload, \"div\", params, path)\n\t\t\t}\n\t\t}, bail)\n\t\tredrawService.subscribe(root, run)\n\t}\n\troute.set = function(path, data, options) {\n\t\tif (updatePending) options = {replace: true}\n\t\tupdatePending = false\n\t\trouteService.setPath(path, data, options)\n\t}\n\troute.get = function() {return currentPath}\n\troute.prefix = function(prefix) {routeService.prefix = prefix}\n\troute.link = function(vnode) {\n\t\tvnode.dom.setAttribute(\"href\", routeService.prefix + vnode.attrs.href)\n\t\tvnode.dom.onclick = function(e) {\n\t\t\tif (e.ctrlKey || e.metaKey || e.shiftKey || e.which === 2) return\n\t\t\te.preventDefault()\n\t\t\te.redraw = false\n\t\t\tvar href = this.getAttribute(\"href\")\n\t\t\tif (href.indexOf(routeService.prefix) === 0) href = href.slice(routeService.prefix.length)\n\t\t\troute.set(href, undefined, undefined)\n\t\t}\n\t}\n\n\treturn route\n}\n","var redrawService = require(\"./redraw\")\n\nmodule.exports = require(\"./api/router\")(window, redrawService)","\"use strict\"\n\nmodule.exports = function(attrName, callback, context) {\n\treturn function(e) {\n\t\treturn callback.call(context || this, attrName in e.currentTarget ? e.currentTarget[attrName] : e.currentTarget.getAttribute(attrName))\n\t}\n}\n","module.exports = require(\"./render/render\")(window)","\"use strict\"\n\nvar m = require(\"./hyperscript\")\nvar requestService = require(\"./request\")\nvar redrawService = require(\"./redraw\")\n\nrequestService.setCompletionCallback(redrawService.redraw)\n\nm.mount = require(\"./mount\")\nm.route = require(\"./route\")\nm.withAttr = require(\"./util/withAttr\")\nm.render = require(\"./render\").render\nm.redraw = redrawService.redraw\nm.request = requestService.request\nm.jsonp = requestService.jsonp\nm.parseQueryString = require(\"./querystring/parse\")\nm.buildQueryString = require(\"./querystring/build\")\nm.version = \"bleeding-edge\"\n\nmodule.exports = m\n","/*\nTheme style definitions using Tachyon.\nComplete list of tags: http://tachyons.io/docs/table-of-styles/\n*/\n\nexport default {\n    page: '.pa4',\n    pageTitle: 'h1.med-gray.f3',\n    link: 'a.link.underline-hover.blue',\n    listItem: 'li.mv1',\n    resultBlock: '.flex.flex-column.flex-row-m.ma3',\n    resultTitle: '.flex.equal.med-gray.mv2',\n    result: '.flex.equal.relative.h4'\n};\n","/*\nPolyfill\n*/\nif (!Object.assign) {\n    Object.defineProperty(Object, 'assign', {\n        enumerable: false,\n        configurable: true,\n        writable: true,\n        value: function(target) {\n            if (target === undefined || target === null) {\n                throw new TypeError('Cannot convert first argument to object');\n            }\n\n            var to = Object(target);\n            for (var i = 1; i < arguments.length; i++) {\n                var nextSource = arguments[i];\n                if (nextSource === undefined || nextSource === null) {\n                    continue;\n                }\n                nextSource = Object(nextSource);\n\n                var keysArray = Object.keys(nextSource);\n                for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\n                    var nextKey = keysArray[nextIndex];\n                    var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n                    if (desc !== undefined && desc.enumerable) {\n                        to[nextKey] = nextSource[nextKey];\n                    }\n                }\n            }\n            return to;\n        }\n    });\n}\n","\nexport default {\n    transition: 'box-shadow 0.18s ease-out',\n\n    'shadow-top-z-1': 'none',\n    'shadow-bottom-z-1': '0 1px 4px 0 rgba(0, 0, 0, 0.37)',\n\n    'shadow-top-z-2': '0 2px 2px 0 rgba(0, 0, 0, 0.2)',\n    'shadow-bottom-z-2': '0 6px 10px 0 rgba(0, 0, 0, 0.3)',\n\n    'shadow-top-z-3': '0 11px 7px 0 rgba(0, 0, 0, 0.19)',\n    'shadow-bottom-z-3': '0 13px 25px 0 rgba(0, 0, 0, 0.3)',\n\n    'shadow-top-z-4': '0 14px 12px 0 rgba(0, 0, 0, 0.17)',\n    'shadow-bottom-z-4': '0 20px 40px 0 rgba(0, 0, 0, 0.3)',\n\n    'shadow-top-z-5': '0 17px 17px 0 rgba(0, 0, 0, 0.15)',\n    'shadow-bottom-z-5': '0 27px 55px 0 rgba(0, 0, 0, 0.3)',\n\n    'shadow-down-z-1': 'inset 0px 1px 2px -1px rgba(0, 0, 0, 0.15)',\n    'shadow-down-z-2': 'inset 0px 4px 6px -3px rgba(0, 0, 0, 0.25)'\n};\n","// Global theme variables\n// How to change these variables for your app - see the README.\n\nconst hex = (hex) => {\n    const bigint = parseInt(hex.substring(1), 16);\n    const r = (bigint >> 16) & 255;\n    const g = (bigint >> 8) & 255;\n    const b = bigint & 255;\n    return r + ',' + g + ',' + b;\n};\n\nconst rgba = (colorStr, opacity = 1) => ('rgba(' + colorStr + ',' + opacity + ')');\n\nconst isInteger = (nVal) => (typeof nVal === 'number' && isFinite(nVal) && nVal > -9007199254740992 && nVal < 9007199254740992 && Math.floor(nVal) === nVal);\n\n//const isTablet = window.innerWidth >= 600;\nconst isDesktop = window.innerWidth >= 1024;\n\nconst grid_unit = 4;\nconst grid_unit_component = 8;\n\nconst animation_curve_slow_in_fast_out = 'cubic-bezier(.4, 0, .2, 1)';\nconst animation_curve_slow_in_linear_out = 'cubic-bezier(0, 0, .2, 1)';\nconst animation_curve_linear_in_fast_out = 'cubic-bezier(.4, 0, 1, 1)';\n\nexport default {\n    // util functions\n    rgba,\n    hex,\n    isInteger,\n\n    grid_unit,\n    grid_unit_component,\n    grid_unit_menu: 56,\n    grid_unit_icon_button: 6 * grid_unit_component, // 48\n\n    // common sizes\n    unit_block_border_radius: 2,\n    unit_item_border_radius: 2,\n    unit_indent: 72,\n    unit_side_padding: isDesktop ? 24 : 16,\n\n    // buttons\n    unit_touch_height: 48,\n    unit_icon_size_small: 2 * grid_unit_component, // 16\n    unit_icon_size: 3 * grid_unit_component, // 24\n    unit_icon_size_medium: 4 * grid_unit_component, // 32\n    unit_icon_size_large: 5 * grid_unit_component, // 40\n\n    // screen dimensions\n    unit_screen_size_extra_large: 1280,\n    unit_screen_size_large: 960,\n    unit_screen_size_medium: 480,\n    unit_screen_size_small: 320,\n\n    // transitions\n    animation_duration: '.18s',\n    animation_curve_slow_in_fast_out,\n    animation_curve_slow_in_linear_out,\n    animation_curve_linear_in_fast_out,\n    animation_curve_default: 'ease-out',\n\n    // font\n    font_weight_light: 300,\n    font_weight_normal: 400,\n    font_weight_medium: 500,\n    font_weight_bold: 700,\n    font_size_title: 20,\n    line_height: 1.3,\n\n    // base colors\n    color_primary: '33, 150, 243', // blue 500\n    color_primary_active: '30, 136, 229', // blue 600\n    color_primary_dark: '25, 118, 210', // blue 700\n    color_primary_faded: '100, 181, 249', // blue 300\n    color_primary_foreground: '255, 255, 255',\n\n    color_light_background: '255, 255, 255',\n    color_light_foreground: '0, 0, 0',\n    color_dark_background: '34, 34, 34',\n    color_dark_foreground: '255, 255, 255',\n\n    // blends\n    blend_light_text_primary: .87,\n    blend_light_text_regular: .73,\n    blend_light_text_secondary: .54,\n    blend_light_text_tertiary: .40,\n    blend_light_text_disabled: .26,\n    blend_light_border_light: .11,\n    blend_light_background_active: .14,\n    blend_light_background_hover: .06,\n    blend_light_background_hover_medium: .12, // for the lighter tinted icon buttons\n    blend_light_background_disabled: .09,\n    blend_light_overlay_background: .3,\n\n    blend_dark_text_primary: 1,\n    blend_dark_text_regular: .87,\n    blend_dark_text_secondary: .70,\n    blend_dark_text_tertiary: .40,\n    blend_dark_text_disabled: .26,\n    blend_dark_border_light: .10,\n    blend_dark_background_active: .14,\n    blend_dark_background_hover: .08,\n    blend_dark_background_hoverMedium: .12, // for the lighter tinted icon buttons\n    blend_dark_background_disabled: .12,\n    blend_dark_overlay_background: .3,\n\n    // css vendor prefixes\n    prefixes_animation: ['o', 'moz', 'webkit'],\n    prefixes_appearance: ['o', 'moz', 'ms', 'webkit'],\n    prefixes_background_size: ['o', 'moz', 'webkit'],\n    prefixes_box_shadow: ['moz', 'webkit'],\n    prefixes_keyframes: ['o', 'moz', 'webkit'],\n    prefixes_transform: ['o', 'moz', 'ms', 'webkit'],\n    prefixes_transition: ['o', 'moz', 'webkit'],\n    prefixes_user_select: ['moz', 'ms', 'webkit'],\n\n    // breakpoints\n    breakpoint_small_handset_portrait: 0,\n    breakpoint_medium_handset_portrait: 360,\n    breakpoint_large_handset_portrait: 400,\n    breakpoint_small_tablet_portrait: 600,\n    breakpoint_large_tablet_portrait: 720,\n    // landscape\n    breakpoint_small_handset_landscape: 480,\n    breakpoint_medium_handset_landscape: 600,\n    breakpoint_large_handset_landscape: 720,\n\n    // environment\n    env_tablet: window.innerWidth >= 600,\n    env_desktop: window.innerWidth >= 1024,\n\n    // z-index\n    z_menu: 1000,\n    z_header_container: 2000,\n    z_fixed_header_container: 3000,\n    z_notification: 4000,\n    z_dialog: 5000\n};\n","// Mixins for j2c\n\nimport common from '../config/config.js';\nimport './object.assign.js';\n\n// Creates j2c vendor key string from vendor list\n// mixin.vendorize({'user-select': 'none'}, common.prefixes_user_select)\nconst vendorize = (what, prefixes) => {\n    const vendorsSel = prefixes.map((v) => ('_' + v + '$')).join('');\n    return {\n        [vendorsSel]: what\n    };\n};\n\n// Centers an item absolutely within relative parent\n// mixin.fit()\nconst fit = (offset = 0) => {\n    const offsetPx = offset + 'px';\n    return {\n        position: 'absolute',\n        top: offsetPx,\n        right: offsetPx,\n        bottom: offsetPx,\n        left: offsetPx\n    };\n};\n\n// Optional font smoothing\n// mixin.fontSmoothing()\nconst fontSmoothing = (smoothing = true) => {\n    if (smoothing) {\n        return {\n            '-webkit-font-smoothing': 'antialiased',\n            '-moz-osx-font-smoothing': 'grayscale'\n        };\n    } else {\n        return {\n            '-webkit-font-smoothing': 'subpixel-antialiased',\n            '-moz-osx-font-smoothing': 'auto'\n        };\n    }\n};\n\n// Breaks off a line with ...\n// unless lines is 'none'\n// mixin.ellipsis(1, 16) // max 1 line, 16px high\n// mixin.ellipsis(2, 1.3, 'em') // max 2 lines, 2.6em high\nconst ellipsis = (lines, lineHeight, unit = 'px') => {\n    if (lines === 'none') {\n        return {\n            'text-overflow': 'initial',\n            overflow: 'initial',\n            display: 'block',\n            height: 'auto'\n        };\n    }\n    return Object.assign(\n        {},\n        {\n            overflow: 'hidden',\n            'text-overflow': 'ellipsis',\n            'text-rendering': 'auto' // Samsung Android\n        },\n        (lines !== undefined) ? {\n            '-webkit-line-clamp': lines,\n            '-webkit-box-orient': 'vertical',\n            display: '-webkit-box'\n        } : null,\n        (lineHeight !== undefined) ? {\n            'max-height': (lines * lineHeight) + unit\n        } : null\n    );\n};\n\n// Clears float\n// mixin.clearfix()\nconst clearfix = () => ({\n    '&:after': {\n        content: '\"\"',\n        display: 'table',\n        clear: 'both'\n    }\n});\n\n\n// Creates a very thin line\n// disabled, does not work in Chrome\n// mixin.hairline()\nconst hairline = () => ({});\n\n// const hairline = (which) => ({\n//     [`${which}-width`]: '1px',\n//\n//     ' html.pe-hairlines &': {\n//         [`${which}-width`]: '0.5px'\n//     }\n// });\n\n// Test if browser handles 0.5px borders\n// and add class pe-hairlines if so\n// if (window.devicePixelRatio && devicePixelRatio >= 2) {\n//     const el = document.createElement('div');\n//     el.style.border = '.5px solid transparent';\n//     document.body.appendChild(el);\n//     if (el.offsetHeight === 1) {\n//         document.querySelector('html').classList.add('pe-hairlines');\n//     }\n//     document.body.removeChild(el);\n// }\n\n// Creates sticky headers in a scrollable list\n// Does not work in Chrome: http://caniuse.com/#feat=css-sticky\n// mixin.sticky()\nconst sticky = (zIndex = 1) => ([\n    {position: '-webkit-sticky'},\n    {position: '-moz-sticky'},\n    {position: '-o-sticky'},\n    {position: '-ms-sticky'},\n    {position: 'sticky'},\n    {\n        top: 0,\n        'z-index': zIndex\n    }\n]);\n\n// Polythene utility function to generate style objects with scopes\n// Used in theme files\nconst createStyles = (common, fn) => {\n    if (Array.isArray(common)) {\n        return common.map((o) => {\n            for (let scope in o) {\n                return {[scope]: fn(o[scope])};\n            }\n        });\n    } else {\n        return fn(common);\n    }\n};\n\n// Creats a transition with presets\n// mixin.defaultTransition('opacity', config.animation_duration)\nconst defaultTransition = (properties = 'all', duration = common.animation_duration, curve = common.animation_curve_default) => {\n    return [\n        vendorize({\n            'transition-delay': 0\n        }, common.prefixes_transition),\n        vendorize({\n            'transition-duration': duration\n        }, common.prefixes_transition),\n        vendorize({\n            'transition-timing-function': curve\n        }, common.prefixes_transition),\n        vendorize({\n            'transition-property': properties\n        }, common.prefixes_transition),\n    ];\n};\n\nexport default {\n    clearfix,\n    createStyles,\n    defaultTransition,\n    ellipsis,\n    fit,\n    fontSmoothing,\n    hairline,\n    sticky,\n    vendorize\n};\n","import common from '../../config/config';\nimport mixin from '../../common/mixin';\n\nconst shadowDirective = (dir) => {\n    return mixin.vendorize({\n        'box-shadow': dir\n    }, common.prefixes_box_shadow);\n};\n\nconst createStyles = (config) => {\n    return [{\n        '.pe-shadow': [\n            mixin.fit(),\n            {\n                'border-radius': 'inherit',\n                'pointer-events': 'none',\n\n                ' .pe-shadow__bottom, .pe-shadow__top': [\n                    mixin.fit(),\n                    {\n                        'border-radius': 'inherit'\n                    }\n                ],\n\n                '&.pe-shadow--animated': {\n                    ' .pe-shadow__bottom, .pe-shadow__top': mixin.vendorize({\n                        'transition': config.transition\n                    }, common.prefixes_transition)\n                }\n            },\n\n            [1,2,3,4,5].map((index) => ({\n                [' .pe-shadow__top.pe-shadow--z-' + index]: shadowDirective(config['shadow-top-z-' + index]),\n                [' .pe-shadow__bottom.pe-shadow--z-' + index]: shadowDirective(config['shadow-bottom-z-' + index])\n            }))\n        ]\n    }];\n};\n\nexport default (config) => (mixin.createStyles(config, createStyles));\n","import j2c from 'j2c';\n\nconst remove = (id) => {\n    if (id) {\n        const old = document.getElementById(id);\n        if (old) {\n            old.parentNode.removeChild(old);\n        }\n    }\n};\n\n/*\n* id: identifier, used as HTMLElement id for the attached <style></style> element\n* styles: list of lists style Objects\n*/\nconst add = (id, ...styles) => {\n    addToDocument({id}, ...styles);\n};\n\n/*\n* opts: options object\n  * id: identifier, used as HTMLElement id for the attached <style></style> element\n  * document: document reference; default window.document\n* styles: list of lists style Objects\n*/\nconst addToDocument = (opts, ...styles) => {\n    const id = opts.id;\n    const documentRef = opts.document || window.document;\n    remove(id);\n    const styleEl = documentRef.createElement('style');\n    if (id) {\n        styleEl.setAttribute('id', id);\n    }\n    styles.forEach((styleList) => {\n        // each style returns a list\n        if (Object.keys(styleList).length) {\n            styleList.forEach((style) => {\n                const scoped = {'@global': style};\n                const sheet = j2c.sheet(scoped);\n                styleEl.appendChild(documentRef.createTextNode(sheet));\n            });\n        }\n    });\n    documentRef.head.appendChild(styleEl);\n};\n\nexport default {\n    add,\n    addToDocument,\n    remove\n};\n","import defaultConfig from './config';\nimport customConfig from '../../config/custom';\nconst customConfigFn = customConfig.shadow;\nimport layout from './layout';\n// Does not contain color styles\n\nconst config = customConfigFn ? customConfigFn(defaultConfig) : defaultConfig;\n\nimport styler from '../../common/styler';\nstyler.add('pe-shadow', layout(config));\n","import m from 'mithril';\nimport '../common/object.assign';\nimport './theme/theme';\n\nconst CSS_CLASSES = {\n    component: 'pe-shadow',\n    topShadow: 'pe-shadow__top',\n    bottomShadow: 'pe-shadow__bottom',\n    animated: 'pe-shadow--animated',\n    depth_n: 'pe-shadow--z-'\n};\n\nconst createView = (vnode) => {\n    const attrs = vnode.attrs || {};\n    const depthClass = `${CSS_CLASSES.depth_n}${Math.min(5, attrs.z !== undefined ? attrs.z : 1)}`;\n    const tag = attrs.tag || 'div';\n    const props = {\n        class: [\n            CSS_CLASSES.component,\n            attrs.animated && CSS_CLASSES.animated,\n            attrs.class\n        ].join(' '),\n        id: attrs.id || '',\n        config: attrs.config\n    };\n    const content = [\n        attrs.content && attrs.content,\n        m('div', {\n            class: [CSS_CLASSES.bottomShadow, depthClass].join(' ')\n        }),\n        m('div', {\n            class: [CSS_CLASSES.topShadow, depthClass].join(' ')\n        })\n    ];\n    return m(tag, props, content);\n};\n\nconst component = {\n    view: createView\n};\n\nexport default component;\n","import m from 'mithril';\nimport shadow from '../../../src/shadow/shadow';\nimport CSS from '../styles';\n\nexport const tests = {\n    'no params': m(shadow),\n    'param content': m(shadow, {\n        content: m('div', 'CONTENT')\n    }),\n    'common component params': m(shadow, {\n        id: 'ID',\n        tag: 'span',\n        class: 'my-shadow'\n    }),\n    'appearance params': m(shadow, {\n        z: 5,\n        animated: true\n    }),\n    'z: 0': m(shadow, {\n        z: 0\n    }),\n    // 'animated z-index': {\n    //     oninit : function(vnode) {\n    //         vnode.state.z = 1;\n    //     },\n    //     view : function(vnode) {\n    //         return m(shadow, {\n    //             z: vnode.state.z,\n    //             animated: true\n    //         });\n    //     }\n    // }\n};\n\nconst page = {\n    view: () => Object.keys(tests).map(key => m(CSS.resultBlock, [\n        m(CSS.resultTitle, key),\n        m(CSS.result, tests[key])\n    ]))\n};\n\nexport default page;","import m from 'mithril';\nimport CSS from './styles';\nimport shadow from './shadow';\n\nconst links = [{\n    path: '/shadow',\n    module: shadow,\n    name: 'Shadow'\n}];\n\nconst index = {\n    view: () =>\n        m(CSS.page, [\n            m(CSS.pageTitle, 'Polythene components'),\n            m('ul', links.map(link => (\n                m(CSS.listItem, m(CSS.link, {\n                    href: link.path,\n                    oncreate: m.route.link\n                }, link.name))\n            )))\n        ])\n};\n\nm.route.prefix('#');\nconst mountNode = document.querySelector('#app');\nconst routes = {\n    '/': index\n};\nlinks.forEach(link => routes[link.path] = link.module);\nm.route(mountNode, '/', routes);\n"],"names":["Vnode","tag","key","attrs","children","text","dom","domSize","undefined","state","events","instance","skip","hyperscript","selector","view","Error","selectorCache","match","classes","attributes","selectorParser","exec","type","value","id","push","attrValue","replace","length","className","join","childList","hasAttrs","class","Array","childrenIndex","arguments","i","normalizeChildren","throttle","callback","time","last","pending","timeout","requestAnimationFrame","setTimeout","now","Date","cartesian","a","b","selectorP","res","j","own","call","concat","test","decamelize","toLowerCase","declarations","o","buf","prefix","vendors","local","ns","k","v","kk","split","valueOf","ARRAY","OBJECT","map","l","at","rawPrefix","slice","sheet","findClass","JSON","stringify","e","parent","emptyArray","statements","inDeclaration","STRING","j2c","finalize","extensions","use","args","suffix","scope_root","counter","locals","child","nameList","lastIndexOf","space","global","dot","name","String","inline","decl","val","p","kv","normalize","node","require$$0","html","require$$2","trust","require$$1","fragment","PromisePolyfill","executor","handler","list","shouldAbsorb","execute","then","callAsync","console","error","resolvers","rejectors","retry","self","TypeError","executeOnce","bind","rejectCurrent","run","fn","runs","onerror","resolveCurrent","this","_instance","setImmediate","prototype","onFulfilled","onRejection","handle","next","resolveNext","rejectNext","promise","resolve","reject","catch","all","total","count","values","consume","race","Promise","window","object","destructure","Object","toString","encodeURIComponent","buildQueryString","$window","setCompletionCallback","oncompletion","finalizer","complete","apply","extra","url","request","method","toUpperCase","useBody","serialize","FormData","data","deserialize","extract","interpolate","assemble","xhr","XMLHttpRequest","open","async","user","password","setRequestHeader","withCredentials","config","onreadystatechange","readyState","response","status","cast","responseText","send","background","jsonp","callbackName","Math","round","random","callbackCount","script","document","createElement","parentNode","removeChild","callbackKey","src","documentElement","appendChild","tokens","querystring","indexOf","parse","setEventCallback","onevent","createNodes","vnodes","start","end","hooks","nextSibling","vnode","insertNode","createNode","initLifecycle","createComponent","createText","createHTML","createFragment","$doc","createTextNode","caption","thead","tbody","tfoot","tr","th","td","colgroup","col","temp","innerHTML","firstChild","childNodes","createDocumentFragment","is","element","createElementNS","setAttrs","contenteditable","setContentEditable","textContent","setLateAttrs","assign","reentrantLock","$emptyFragment","updateNodes","old","removeNodes","isUnkeyed","getNextSibling","updateNode","recycling","isRecyclable","pool","oldStart","oldEnd","toFragment","getKeyMap","oldIndex","movable","oldTag","shouldUpdate","updateLifecycle","updateText","updateHTML","updateFragment","updateElement","updateComponent","removeNode","nodeValue","updateAttrs","abs","oldChildrenLength","poolChildrenLength","vnodesChildrenLength","insertBefore","content","context","once","f","called","continuation","expected","onremove","removeNodeFromDOM","hasIntegrationMethods","onbeforeremove","setAttr","isFormAttribute","isLifecycleMethod","nsLastIndex","substr","setAttributeNS","updateEvent","updateStyle","isAttribute","activeElement","setAttribute","removeAttribute","selectedIndex","attr","source","oncreate","onupdate","style","cssText","result","eventName","removeEventListener","addEventListener","oninit","forceVnodeUpdate","forceComponentUpdate","onbeforeupdate","target","keys","forEach","render","active","focus","coreRenderer","subscribe","unsubscribe","callbacks","index","splice","redraw","renderService","redrawService","root","component","string","charAt","entries","counters","entry","decodeURIComponent","levels","cursor","pop","level","nextLevel","isNumber","isNaN","parseInt","isValue","parseQueryString","location","debounceAsync","asyncId","parsePath","path","queryData","hashData","queryIndex","hashIndex","pathEnd","queryEnd","queryParams","hashParams","supportsPushState","history","pushState","router","getPath","setPath","options","token","query","hash","replaceState","onpopstate","href","defineRoutes","routes","resolveRoute","params","pathname","route","matcher","RegExp","onhashchange","coreRouter","currentPath","routeService","identity","updatePending","defaultRoute","update","routeResolver","comp","bail","payload","onmatch","resolved","set","get","link","onclick","ctrlKey","metaKey","shiftKey","which","preventDefault","getAttribute","attrName","currentTarget","m","require$$8","requestService","require$$7","require$$6","mount","require$$5","require$$4","withAttr","require$$3","version","defineProperty","to","nextSource","keysArray","nextIndex","len","nextKey","desc","getOwnPropertyDescriptor","enumerable","hex","bigint","substring","r","g","rgba","colorStr","opacity","isInteger","nVal","isFinite","floor","isDesktop","innerWidth","grid_unit","grid_unit_component","animation_curve_slow_in_fast_out","animation_curve_slow_in_linear_out","animation_curve_linear_in_fast_out","vendorize","what","prefixes","vendorsSel","fit","offset","offsetPx","fontSmoothing","smoothing","ellipsis","lines","lineHeight","unit","clearfix","hairline","sticky","zIndex","position","createStyles","common","isArray","scope","defaultTransition","properties","duration","animation_duration","curve","animation_curve_default","prefixes_transition","shadowDirective","dir","mixin","prefixes_box_shadow","transition","emptyObject","hasOwnProperty","x","rule","block","_at","remove","getElementById","add","styles","addToDocument","opts","documentRef","styleEl","styleList","scoped","@global","head","customConfigFn","customConfig","shadow","defaultConfig","styler","layout","CSS_CLASSES","createView","depthClass","depth_n","min","z","props","animated","bottomShadow","topShadow","tests","page","CSS","resultBlock","resultTitle","links","pageTitle","listItem","mountNode","querySelector","module"],"mappings":"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"}