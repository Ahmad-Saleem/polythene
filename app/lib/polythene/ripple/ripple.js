define(["polythene/polythene/polythene","mithril","css!./ripple"],function(t,e){"use strict";var n,i,o,s;return n=.2,i=.36,o=function(t,e,n){t.addEventListener("mousedown",function(t){e.start(t,e,n)}),t.addEventListener("mouseup",function(t){e.stop(t,e,n)})},s=function(t){t.removeEventListener("mousedown"),t.removeEventListener("mouseup")},{controller:function(o){return o=o||{},{ripple:e.prop(),waves:e.prop(),delegate:e.prop(),start:function(e,o,s){var a,r,l,c,p,d,u,f,y,m,v,h,w,g,L,E,b,k;a=o.ripple(),r=o.waves(),r.classList.remove("animated"),m=a.offsetWidth,v=a.offsetHeight,h=Math.sqrt(m*m+v*v),r.style.width=r.style.height=h+"px",u=a.getBoundingClientRect(),s.center?(l=u.left+u.width/2,c=u.top+u.height/2):(l=e.clientX,c=e.clientY),f=u.top-document.body.scrollTop,y=u.left-document.body.scrollLeft,p=l-u.left-h/2,d=c-u.top-h/2,r.style.top=d+"px",r.style.left=p+"px",b=void 0!==s.initialOpacity?s.initialOpacity:n,k=void 0!==s.opacityDecayVelocity?s.opacityDecayVelocity:i,g=1/k*b,r.style["animation-duration"]=r.style["-webkit-animation-duration"]=r.style["-moz-animation-duration"]=r.style["-o-animation-duration"]=g+"s",L=window.getComputedStyle(a).color,r.style.backgroundColor=L,r.style.opacity=b,w=t.whichTransitionEvent(),E=function(t){r.classList.remove("animated"),r.removeEventListener(w,E,!1),s.end&&s.end(t)},r.addEventListener(w,E,!1),s.start&&s.start(e),r.classList.add("animated")},stop:function(){}}},view:function(n,i){var a,r,l,c,p;return i=i||{},i.disabled?e(""):(c=function(t,e,a){e||(n.ripple(t),o(t,n,i),a.onunload=function(){s(t)})},p=function(t,e){e||n.waves(t)},a=i.tag||"div[fit]",r=t.componentProps({classList:["ripple",i.constrained!==!1?"constrained":null],props:{config:c}},i,this,n),l=e(".ripple-mask",e(".ripple-waves",{config:p})),e(a,r,l))}}});