!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("polythene-core"),require("polythene-utilities"),require("polythene-theme"),require("polythene-core-button"),require("polythene-core-icon-button"),require("polythene-core-css")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-utilities","polythene-theme","polythene-core-button","polythene-core-icon-button","polythene-core-css"],e):e(t.polythene=t.polythene||{},t["polythene-core"],t["polythene-utilities"],t["polythene-theme"],t["polythene-core-button"],t["polythene-core-icon-button"],t["polythene-core-css"])}(this,function(t,e,n,o,a,r,l){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=a.vars.font_size,_=1.1*u,d={tab_min_width:72,tab_max_width:"initial",tab_height:48,label_max_width:264,menu_tab_height:44,menu_tab_icon_label_height:44,tab_icon_label_height:72,tab_icon_label_icon_spacing:7,indicator_slide_speed:600,indicator_slide_min_duration:.25,tabs_indent:o.vars.unit_indent,tabs_scroll_speed:600,tabs_scroll_delay:.15,tabs_scroll_min_duration:.5,scroll_button_fade_duration:.2,scroll_button_fade_delay:.5,tab_content_padding_v:12,tab_menu_content_padding_v:6,tab_indicator_height:2,scrollbar_offset:20,scroll_button_opacity:.7,label_opacity:.7,tab_label_line_height:_,tab_label_vertical_offset:_-u,tab_label_transition_property:"opacity, color, backgroundColor",color_light:"inherit",color_light_selected:l.rgba(o.vars.color_primary),color_light_selected_background:"transparent",color_light_tab_indicator:l.rgba(o.vars.color_primary),color_light_icon:r.vars.color_light,color_dark:"inherit",color_dark_selected:l.rgba(o.vars.color_primary),color_dark_selected_background:"transparent",color_dark_tab_indicator:l.rgba(o.vars.color_primary),color_dark_icon:r.vars.color_dark},p={component:"pe-tabs",indicator:"pe-tabs__indicator",scrollButton:"pe-tabs__scroll-button",scrollButtonAtEnd:"pe-tabs__scroll-button-end",scrollButtonAtStart:"pe-tabs__scroll-button-start",scrollButtonOffset:"pe-tabs__scroll-button-offset",tab:"pe-tabs__tab",tabContent:"pe-tabs__tab-content",tabRow:"pe-tabs__row",activeSelectable:"pe-tabs__active--selectable",isAtEnd:"pe-tabs--end",isAtStart:"pe-tabs--start",isAutofit:"pe-tabs--autofit",isMenu:"pe-tabs--menu",scrollable:"pe-tabs--scrollable",smallTabs:"pe-tabs--small",tabHasIcon:"pe-tabs__tab---icon",tabRowCentered:"pe-tabs__row--centered",tabRowIndent:"pe-tabs__row--indent",label:a.classes.label},h=function(t,e){return[i({},t,{userSelect:"none",transform:"translate3d(0,0,0)","-webkit-overflow-scrolling":"touch","& ::-webkit-scrollbar":{display:"none"},".pe-tabs--menu":{" .pe-tabs__tab":{height:e.menu_tab_height+"px"}," .pe-tabs__tab---icon":{height:e.menu_tab_icon_label_height+"px"}," .pe-tabs__tab, .pe-tabs__tab.pe-tabs__tab---icon, .pe-tabs__tab.pe-text-button":{minWidth:0,height:e.menu_tab_icon_label_height+"px"," .pe-button__content":{padding:"0 "+e.tab_menu_content_padding_v+"px",height:e.menu_tab_height+"px"," .pe-icon":{marginBottom:0}," .pe-button__content":{fontSize:"10px",lineHeight:"12px",textTransform:"none"}}}},".pe-tabs--scrollable":{"max-height":e.tab_height+"px","-ms-overflow-style":"none"," .pe-tabs__scroll-button":{display:"none"}," .pe-tabs__row":{marginBottom:-e.scrollbar_offset+"px"}}," .pe-no-touch &":{".pe-tabs--scrollable":{backgroundColor:"inherit"}," .pe-tabs__scroll-button":{position:"absolute",display:"block",top:0,backgroundColor:"inherit",zIndex:1,borderRadius:0," .pe-button__content":{borderRadius:0,backgroundColor:"inherit",transitionProperty:e.tab_label_transition_property,transitionDuration:e.scroll_button_fade_duration+"s",transitionTimingFunction:"ease-out",transitionDelay:e.scroll_button_fade_delay+"s",opacity:e.scroll_button_opacity}},".pe-tabs--start .pe-tabs__scroll-button-start":{pointerEvents:"none",cursor:"default"," .pe-button__content":{opacity:0}},".pe-tabs--end .pe-tabs__scroll-button-end":{pointerEvents:"none",cursor:"default"," .pe-button__content":{opacity:0}}," .pe-tabs__scroll-button-start":{left:0}," .pe-tabs__scroll-button-end":{right:0}}," .pe-tabs__row":[l.flex.layoutHorizontal,{userSelect:"none",position:"relative",whiteSpace:"nowrap",".pe-tabs__row--indent":{margin:0,paddingLeft:e.tabs_indent+"px",overflow:"auto"},".pe-tabs__row--centered":l.flex.layoutCenterJustified}]," .pe-tabs__scroll-button-offset":[l.flex.flex(),l.flex.flexIndex("none")]," .pe-tabs__tab":[l.flex.flex(),l.flex.flexIndex("none"),l.mixin.defaultTransition("color"),{userSelect:"none",margin:0,borderRadius:0,height:e.tab_height+"px",padding:0,color:"inherit",minWidth:isNaN(e.tab_min_width)?e.tab_min_width:e.tab_min_width+"px",maxWidth:isNaN(e.tab_max_width)?e.tab_max_width:e.tab_max_width+"px",".pe-text-button .pe-button__content":{padding:"0 "+e.tab_content_padding_v+"px",height:e.tab_height+"px",lineHeight:o.vars.line_height+"em",borderRadius:0," .pe-button__label, .pe-icon":{maxWidth:e.label_max_width+"px",lineHeight:e.tab_label_line_height+"px",maxHeight:2*e.tab_label_line_height+"px",overflow:"hidden",whiteSpace:"normal"}," .pe-button__label":[l.mixin.defaultTransition("opacity",e.animation_duration),{margin:e.tab_label_vertical_offset+"px 0 0 0",padding:0,opacity:e.label_opacity}]," .pe-icon":{marginLeft:"auto",marginRight:"auto"}," .pe-button__focus":{display:"none"}},".pe-button--selected .pe-button__content":{" .pe-button__label":{opacity:1}},".pe-tabs__tab---icon":{"&, .pe-button__content":[{height:e.tab_icon_label_height+"px"},{" .pe-button__content, .pe-icon":{margin:"0 auto"}},{" .pe-icon":{marginBottom:e.tab_icon_label_icon_spacing+"px"}}]}}]," .pe-tabs__tab-content":[l.flex.layoutCenterCenter,l.flex.layoutVertical,{height:"inherit"}],".pe-tabs--autofit .pe-tabs__tab":[l.flex.flex(),{minWidth:"initial",maxWidth:"none"}],".pe-tabs__active--selectable":{" .pe-tabs__tab.pe-button--selected":{cursor:"pointer",pointerEvents:"initial"}}," .pe-tabs__indicator":{transform:"translate3d(0,0,0)",transformOrigin:"left 50%",transitionProperty:"all",transitionTimingFunction:"ease-out",position:"absolute",height:e.tab_indicator_height+"px",bottom:0,left:0,width:"100%"}," .pe-toolbar--tabs .pe-toolbar__bar &":[l.mixin.fit(),{width:"auto",margin:0,top:"auto"}]})]},f=function(t,e,n,o){return[s({},t.map(function(t){return t+e}).join(","),{color:n["color_"+o]," .pe-tabs__tab.pe-button--selected":{color:n["color_"+o+"_selected"]," .pe-button__content":{background:n["color_"+o+"_selected_background"]}}," .pe-tabs__tab:not(.pe-button--selected) .pe-icon":{color:n["color_"+o+"_icon"]}," .pe-tabs__indicator":{backgroundColor:n["color_"+o+"_tab_indicator"]}," .pe-tabs__scroll-button":{color:"inherit"}})]},g=function(t,e){return[f([".pe-dark-tone",".pe-dark-tone "],t,e,"dark"),f(["",".pe-light-tone",".pe-light-tone "],t,e,"light")]},m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},v=[h,g],y="."+p.component,x=function(t,e){return l.styler.generateStyles([t,y],m({},d,e),v)};l.styler.generateStyles([y],d,v);var w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},k=x,S=function(){return Promise.resolve()},B=function(t,e){var n=e.length-1;return{backward:Math.max(t-1,0),forward:Math.min(t+1,n)}},T=function(t,e,n,o){n.stopPropagation(),n.preventDefault();var a=t.selectedTabIndex(),r=B(a,t.tabs)[o];r!==a?j(t,e,r,!0):O(t,r)},I=function(t){var e=t.tabs[0].dom,n=e.querySelector("."+p.label+" span"),o=(e.getBoundingClientRect().width-n.getBoundingClientRect().width)/2;e.style.marginLeft=-o+"px"},C=function(t){var e=t.scrollButtons.end.getBoundingClientRect().width;t.tabsEl.querySelector("."+p.scrollButtonOffset).style.width=e+"px"},O=function(t,e){var o=t.tabs,a=t.scrollerEl,r=o.slice(0,e).reduce(function(t,e){return t+e.dom.getBoundingClientRect().width},0),l=a.getBoundingClientRect().width,i=a.scrollWidth-l,s=Math.min(r,i),c=a.scrollLeft;if(c!==s){var b=Math.abs(c-s)/d.tabs_scroll_speed,u=d.tabs_scroll_delay||0;setTimeout(function(){n.scrollTo({element:a,to:s,duration:Math.max(d.tabs_scroll_min_duration,b),direction:"horizontal"})},1e3*u)}},E=function(t){var e=t.scrollerEl,n=e.scrollLeft,o=t.selectedTabIndex(),a=t.tabsEl,r=t.tabs.length-1,l=0===e.scrollLeft&&0===o,i=n>=e.scrollWidth-a.getBoundingClientRect().width-1&&o===r;t.scrollButtonStates.start=!l,t.scrollButtonStates.end=!i},R=function(t,e,n){var o=n.tabsEl.getBoundingClientRect(),a=t.getBoundingClientRect(),r=n.tabIndicatorEl.style,l="translate("+(a.left-o.left+n.scrollerEl.scrollLeft)+"px, 0)",i=e?d.indicator_slide_min_duration:0;r.width=a.width+"px",r["transition-duration"]=i+"s",r.transform=l},j=function(t,e,n,o){if(t.selectedTabIndex(n),t.tabs.length){var a=t.tabs[n].dom;a&&t.tabIndicatorEl&&t.tabsEl&&R(a,o,t),t.managesScroll&&(E(t),O(t,n)),e.onChange&&e.onChange({index:n,options:t.tabs[n].attrs,el:a})}},N=function(t,e){return t<e?1:t>e?-1:0},P=function(t,n){var o=t.attrs,a=n(t.attrs.selectedTab||0),r=function(t){return function(e,n){return t.tabs[e]=n}},l=function(t){return function(e,n){return t.scrollButtons[e]=n}};return{tabsEl:void 0,scrollerEl:void 0,tabs:[],tabRow:void 0,tabIndicatorEl:void 0,selectedTabIndex:a,previousSelectedTab:void 0,managesScroll:o.scrollable&&!e.isTouch,scrollButtonStates:{start:!1,end:!1},scrollButtons:{start:void 0,end:void 0},registerTabButton:r,registerScrollButton:l,cleanUp:void 0,redrawOnUpdate:n.merge([a])}},M=function(t){var n=t.dom,o=t.state,a=t.attrs;o.tabsEl=n,a.hideIndicator||(o.tabIndicatorEl=n.querySelector("."+p.indicator)),o.scrollerEl=n.querySelector("."+p.tabRow),S().then(function(){if(o.tabs&&a.largestWidth){var t=o.tabs.map(function(t){return t.dom.getBoundingClientRect().width}).sort(N)[0];o.tabs.forEach(function(e){return e.dom.style.width=t+"px"})}a.scrollable&&I(o),o.managesScroll&&C(o),j(o,a,o.selectedTabIndex(),!1)});var r=function(){return j(o,a,o.selectedTabIndex(),!1)};e.subscribe("resize",r),o.cleanUp=function(){return e.unsubscribe("resize",r)}},z=function(t){return t.state.cleanUp()},A=function(t,n){var o=n.keys,a=t.state,r=t.attrs,l=!r.scrollable&&!r.centered&&!!r.autofit;return void 0!==r.selectedTab&&a.previousSelectedTab!==r.selectedTab&&j(a,r,r.selectedTab,!0),a.previousSelectedTab=r.selectedTab,w({},e.filterSupportedAttributes(r),{className:[p.component,r.scrollable?p.scrollable:null,0===a.selectedTabIndex?p.isAtStart:null,a.selectedTabIndex===a.tabs.length-1?p.isAtEnd:null,r.activeSelected?p.activeSelectable:null,l?p.isAutofit:null,r.small?p.smallTabs:null,r.menu?p.isMenu:null,"dark"===r.tone?"pe-dark-tone":null,"light"===r.tone?"pe-light-tone":null,r.className||r[o.class]].join(" ")})},L=function(t,e){var n=e.renderer,o=e.keys,a=e.Tab,r=e.ScrollButton,l=t.state,i=t.attrs,s=i.content?i.content:i.tabs?i.tabs:i.children||t.children||[];0===s.length&&console.error("No tabs specified");var b=s.map(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],o=w({},t,{selected:e===l.selectedTabIndex(),animateOnTap:!1!==i.animateOnTap},i.all,{index:e,key:"tab-"+e,register:l.registerTabButton(l),onSelect:function(){return j(l,i,e,!i.noIndicatorSlide)}});return n(a,o)}),u=i.scrollable?b.concat([n("div",{key:"offset",className:p.scrollButtonOffset})]):b,_=void 0,d=void 0;i.scrollable&&(_=n(r,w({},{key:"backward",icon:i.scrollIconBackward,className:p.scrollButtonAtStart,position:"start",register:l.registerScrollButton(l),events:c({},o.onclick,function(t){return T(l,i,t,"backward")})})),d=n(r,w({},{key:"forward",icon:i.scrollIconForward,className:p.scrollButtonAtEnd,position:"end",register:l.registerScrollButton(l),events:c({},o.onclick,function(t){return T(l,i,t,"forward")})})));var h=i.hideIndicator?null:n("div",{key:"indicator",className:p.indicator});return[i.scrollable?_:null,n("div",{key:"tabrow",className:[p.tabRow,i.centered?p.tabRowCentered:null,i.scrollable?p.tabRowIndent:null].join(" ")},[u,h]),i.scrollable?d:null]},q=Object.freeze({theme:k,getInitialState:P,onMount:M,onUnMount:z,createProps:A,createContent:L}),W=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},H=function(t){var e=t.dom;if(e){var n=t.attrs;n.register(n.index,{attrs:n,dom:e})}},U=function(t,e){var n=e.renderer,o=e.keys,a=e.Icon,r=t.attrs;return r.events=r.events||{},r.events[o.onclick]=r.events[o.onclick]||function(){},W({},r,{content:n("div",{className:p.tabContent},[r.icon?n(a,r.icon):null,r.label?n("div",{className:p.label},n("span",r.label)):null]),className:[p.tab,r.icon&&r.label?p.tabHasIcon:null,r.className||r[o.class]].join(" "),selected:r.selected,wash:!1,ripple:!0,events:W({},r.events,b({},o.onclick,function(t){r.onSelect(),r.events[o.onclick](t)}))})},D=function(){return null},F=Object.freeze({onMount:H,createProps:U,createContent:D}),J=function(t){var e=t.dom;if(e){var n=t.attrs;n.register(n.position,e)}},V=function(t,e){var n=e.renderer,o=e.keys,a=t.attrs,r="start"===a.position?a.icon||{svg:n.trust('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>')}:a.icon||{svg:n.trust('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>')};return{className:[p.scrollButton,a.className||a[o.class]].join(" "),icon:r,ripple:{center:!0},events:a.events}},G=Object.freeze({onMount:J,createProps:V});t.coreTabs=q,t.coreTab=F,t.coreScrollButton=G,t.classes=p,t.vars=d,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-tabs.js.map
