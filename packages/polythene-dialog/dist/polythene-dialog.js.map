{"version":3,"file":"polythene-dialog.js","sources":["../src/classes.js","../src/theme/vars.js","../src/theme/layout.js","../src/theme/color.js","../src/theme/index.js","../src/instance.js","../src/theme/transitions.js","../src/dialog.js"],"sourcesContent":["import { classes as menu } from \"polythene-menu\";\n\nexport default {\n  component:         \"pe-dialog\",\n\n  // elements\n  actions:           \"pe-dialog__actions\",\n  body:              \"pe-dialog__body\",\n  content:           \"pe-dialog__content\",\n  footer:            \"pe-dialog__footer\",\n  header:            \"pe-dialog__header\",\n  title:             \"pe-dialog__title\",\n\n  // states\n  footerHigh:        \"pe-dialog__footer--high\",\n  fullscreen:        \"pe-dialog--fullscreen\",\n  hasBackdrop:       \"pe-dialog--backdrop\",\n  hasBottomOverflow: \"pe-dialog--overflow-bottom\",\n  hasTopOverflow:    \"pe-dialog--overflow-top\",\n  visible:           \"pe-dialog--visible\",\n\n  // lookup\n  menuContent:       menu.content,\n};\n","import { vars } from \"polythene-theme\";\nconst rgba = vars.rgba;\n\nexport default {\n  border_radius: vars.unit_block_border_radius,\n  padding:       3 * vars.grid_unit_component,\n  header_bottom: 20,\n  header_height: 60,\n  footer_height: 52,\n\n  color_light_content_background:  rgba(vars.color_light_background),\n  color_light_title_text:          rgba(vars.color_light_foreground, vars.blend_light_text_primary),\n  color_light_body_text:           rgba(vars.color_light_foreground, vars.blend_light_text_regular),\n  color_light_body_border:         rgba(vars.color_light_foreground, vars.blend_light_border_light),\n  color_light_backdrop_background: \"rgba(0, 0, 0, .4)\",\n\n  color_dark_content_background:   rgba(vars.color_dark_background),\n  color_dark_title_text:           rgba(vars.color_dark_foreground, vars.blend_dark_text_primary),\n  color_dark_body_text:            rgba(vars.color_dark_foreground, vars.blend_dark_text_regular),\n  color_dark_body_border:          rgba(vars.color_dark_foreground, vars.blend_dark_border_light),\n  color_dark_backdrop_background:  \"rgba(0, 0, 0, .5)\"\n};\n","import { vars } from \"polythene-theme\";\nimport { mixin, flex } from \"polythene-core-css\";\n\nconst lineHeightTitle = 24;\n\nexport default (selector, componentVars) => [{\n  [selector]: [\n    flex.layoutCenterCenter,\n    {\n      position: \"fixed\",\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      zIndex: vars.z_dialog,\n      height: \"100%\", // 100vh would make the dialog go beneath Mobile Safari toolbar\n      padding: componentVars.padding + \"px 40px\",\n\n      \".pe-dialog--fullscreen\": {\n        padding: 0,\n\n        \" .pe-dialog__content\": {\n          borderRadius: 0,\n          maxWidth: \"none\",\n          height: \"100%\",\n          width: \"100%\",\n\n          \" .pe-dialog__header, .pe-dialog__footer\": {\n            display: \"none\"\n          },\n\n          \" .pe-dialog__body\": {\n            padding: 0,\n            height: \"100%\",\n            maxHeight: \"calc(100%)\",\n            border: \"none\"\n          }\n        }\n      },\n\n      \" .pe-dialog__header, pe-dialog__body, pe-dialog__header\": {\n        zIndex: 1\n      },\n\n      \" .pe-dialog__content\": [\n        flex.layoutVertical, {\n          position: \"relative\",\n          maxHeight: \"100%\",\n          minWidth: 56 * 5 + \"px\",\n          maxWidth: 7 * vars.grid_unit_menu + \"px\",\n          borderRadius: componentVars.border_radius + \"px\",\n\n          \" > .pe-shadow\": {\n            zIndex: -1 // For IE10 to get click events on content\n          },\n\n          \".pe-menu__content\": {\n            \" .pe-dialog__body\": {\n              padding: 0,\n              border: \"none\"\n            }\n          },\n          \" p\": {\n            margin: 0\n          },\n          \" p + p\": {\n            marginTop: \"16px\"\n          }\n        }\n      ],\n\n      \" .pe-dialog__title\": {\n        fontSize: vars.font_size_title + \"px\",\n        lineHeight: lineHeightTitle + \"px\",\n        fontWeight: vars.font_weight_medium,\n\n        \"& + div\": {\n          marginTop: \"16px\"\n        },\n      },\n\n      \" .pe-dialog__header\": {\n        padding: [(componentVars.padding - 4), componentVars.padding, (componentVars.header_bottom - 4), componentVars.padding].map((v) => (v + \"px\")).join(\" \"),\n        minHeight: componentVars.header_height + \"px\",\n\n        \" .pe-dialog__title\": [\n          mixin.ellipsis(1), {\n            width: \"100%\"\n          }\n        ]\n      },\n\n      \" .pe-dialog__body\": [\n        flex.selfStretch,\n        {\n          padding: componentVars.padding + \"px\",\n          overflowY: \"auto\",\n          \"-webkit-overflow-scrolling\": \"touch\",\n          borderWidth: \"1px\",\n          borderStyle: \"solid none\",\n          borderColor: \"transparent\",\n          // initially set max-height; will be overridden by dialog core with actual heights\n          maxHeight: \"calc(100vh - \" + (2 * componentVars.padding) + \"px - \" + (componentVars.header_height + componentVars.footer_height) + \"px)\"\n        }\n      ],\n      \" .pe-dialog__header + .pe-dialog__body\": {\n        paddingTop: 0\n      },\n\n      \" .pe-dialog__footer\": {\n        padding: \"2px 8px\",\n        minHeight: componentVars.footer_height + \"px\",\n        fontSize: 0, // remove inline block spacing\n\n        \".pe-dialog__footer--high\": {\n          // when buttons are stacked vertically\n          paddingBottom: \"8px\"\n        }\n      },\n\n      \" .pe-dialog__actions\": [\n        flex.layoutHorizontal,\n        flex.layoutEndJustified,\n        flex.layoutWrap, {\n          margin: \"0 -4px\",\n\n          \" .pe-button\": {\n            height: \"36px\",\n            marginTop: \"6px\",\n            marginBottom: \"6px\",\n            padding: 0\n          }\n        }\n      ]\n    }\n  ],\n  \" body.pe-dialog--open\": {\n    overflow: \"hidden\",\n    left: 0,\n    \"-webkit-overflow-scrolling\": \"touch\",\n    top: 0,\n    width: \"100%\"\n  }\n}];\n","\nconst style = (scopes, selector, componentVars, tint) => [{\n  [scopes.map(s => s + selector).join(\",\")]: {\n    \"&.pe-dialog--backdrop\": {\n      backgroundColor: componentVars[\"color_\" + tint + \"_backdrop_background\"]\n    },\n    \" .pe-dialog__content\": {\n      backgroundColor: componentVars[\"color_\" + tint + \"_content_background\"]\n    },\n    \" .pe-dialog__header .pe-dialog__title\": {\n      color: componentVars[\"color_\" + tint + \"_title_text\"]\n    },\n    \" .pe-dialog__body\": {\n      color: componentVars[\"color_\" + tint + \"_body_text\"]\n    },\n    \"&.pe-dialog--overflow-top .pe-dialog__body\": {\n      borderTopColor: componentVars[\"color_\" + tint + \"_body_border\"]\n    },\n    \"&.pe-dialog--overflow-bottom .pe-dialog__body\": {\n      borderBottomColor: componentVars[\"color_\" + tint + \"_body_border\"]\n    }\n  }\n}];\n\nexport default (selector, componentVars) => [\n  style([\".pe-dark-tone\", \".pe-dark-tone \"], selector, componentVars, \"dark\"), // has/inside dark theme\n  style([\"\", \".pe-light-tone\", \".pe-light-tone \"], selector, componentVars, \"light\"), // normal, has/inside light tone\n];\n","import { styler } from \"polythene-core-css\";\nimport classes from \"../classes\";\nimport vars from \"./vars\";\nimport layout from \"./layout\";\nimport color from \"./color\";\n\nconst fns = [layout, color];\nconst selector = `.${classes.component}`;\n\nexport const customTheme = (customSelector, customVars) => \n  styler.generateStyles([customSelector, selector], {...vars, ...customVars}, fns);\n\nstyler.generateStyles([selector], vars, fns);\n","import m from \"mithril\";\nimport { filterSupportedAttributes, subscribe, unsubscribe, show, hide } from \"polythene-core\";\nimport dialog from \"./dialog\";\nimport { shadow } from \"polythene-mithril\";\nimport { customTheme } from \"./theme\";\nimport classes from \"./classes\";\n\nconst SCROLL_WATCH_TIMER = 150;\n\nconst updateScrollState = state => {\n  const scroller = state.scrollEl;\n  if (!scroller) {\n    return;\n  }\n  state.topOverflow = (scroller.scrollTop > 0);\n  state.bottomOverflow = (scroller.scrollHeight - (scroller.scrollTop + scroller.getBoundingClientRect().height) > 0);\n};\n\nconst updateFooterState = state => {\n  const footerEl = state.footerEl;\n  if (footerEl) {\n    const style = window.getComputedStyle(footerEl);\n    const height = footerEl.getBoundingClientRect().height;\n    const minHeight = parseInt(style.minHeight, 10);\n    if (height > minHeight) {\n      footerEl.classList.add(classes.footerHigh);\n    } else {\n      footerEl.classList.remove(classes.footerHigh);\n    }\n  }\n};\n\nconst showInstance = (state, opts) => {\n  const id = state.instanceId;\n  state.transitioning = true;\n  const transitions = opts.transitions || state.transitions;\n  return show(Object.assign({},\n    opts,\n    transitions.show(state.el, opts)\n  )).then(() => {\n    state.transitioning = false;\n    state.visible = true;\n    if (state.didShow) {\n      // notify multiple\n      state.didShow(id);\n      // this will call opts.didShow\n    }\n  });\n};\n\nconst hideInstance = (state, opts) => {\n  const id = state.instanceId;\n  state.transitioning = true;\n  const transitions = opts.transitions || state.transitions;\n  return hide(Object.assign({},\n    opts,\n    transitions.hide(state.el, opts)\n  )).then(() => {\n    dialog.remove(id);\n    state.transitioning = false;\n    state.visible = false;\n    if (state.didHide) {\n      // notify multiple\n      state.didHide(id);\n      // this will call opts.didHide\n    }\n    setTimeout(m.redraw, 0); // removes remainder of dialog component\n  });\n};\n\nconst createViewContent = (state, opts) => {\n  // if flex \"self-stretch\" is not supported, calculate the maximum height\n  const bodyOpts = opts.content || opts.body || opts.menu;\n  const updateContentOnScroll = opts.updateContentOnScroll || false;\n  const ignoreContent = !updateContentOnScroll && state.isScrolling;\n  return m(\"div\", {\n    class: classes.body,\n    oncreate: ({ dom }) => state.scrollEl = dom,\n    onbeforeupdate: !ignoreContent,\n    onscroll: () => {\n      state.isScrolling = true;\n      updateScrollState(state);\n      clearTimeout(state.scrollWatchId);\n      state.scrollWatchId = setTimeout(() => {\n        state.isScrolling = false;\n      }, SCROLL_WATCH_TIMER);\n    }\n  }, bodyOpts);\n};\n\nconst createView = (state, opts) => {\n  const update = () => {\n    updateScrollState(state);\n    updateFooterState(state);\n    m.redraw();\n  };\n  const handleEscape = e => {\n    if (opts.fullscreen || opts.modal) return;\n    if (e.which === 27 && !state.transitioning) {\n      cleanup();\n      hideInstance(state, Object.assign({}, opts, {\n        hideDelay: 0\n      }));\n    }\n  };\n  const cleanup = () => {\n    unsubscribe(\"resize\", update);\n    unsubscribe(\"keydown\", handleEscape);\n  };\n  \n  const element = opts.element || \"form\";\n  const props = Object.assign(\n    {},\n    filterSupportedAttributes(opts, { remove: [\"style\"] }), // style set in content, and set by show/hide transition\n    {\n      class: [\n        classes.component,\n        opts.fullscreen ? classes.fullscreen : null,\n        opts.backdrop ? classes.hasBackdrop : null,\n        state.topOverflow || opts.borders ? classes.hasTopOverflow : null,\n        state.bottomOverflow || opts.borders ? classes.hasBottomOverflow : null,\n        state.visible ? classes.visible : null,\n        opts.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        opts.tone === \"light\" ? \"pe-light-tone\" : null,\n        opts.class\n      ].join(\" \"),\n      oncreate: ({ dom }) => {\n        state.el = dom;\n        // resize: update scroll state (\"overflow\" borders)\n        subscribe(\"resize\", update);\n        subscribe(\"keydown\", handleEscape);\n\n        updateScrollState(state);\n\n        showInstance(state, opts).then(() => {\n          updateScrollState(state);\n          updateFooterState(state);\n          if (state.topOverflow || state.bottomOverflow) {\n            setTimeout(m.redraw, 0);\n          }\n        });\n      },\n      onremove: cleanup,\n      // click backdrop: close dialog\n      onclick: e => {\n        if (e.target !== state.el) {\n          return;\n        }\n        if (opts.modal) {\n          // not allowed\n          return;\n        }\n        if (!state.transitioning) {\n          hideInstance(state, Object.assign({}, opts, {\n            hideDelay: 0\n          }));\n        }\n      }\n    },\n    opts.formOptions ? opts.formOptions : null\n  );\n  \n  const body = createViewContent(state, opts);\n  const content = m(\"div\",\n    {\n      class: [\n        classes.content,\n        opts.menu ? classes.menuContent : null\n      ].join(\" \"),\n      style: opts.style\n    },\n    [\n      opts.fullscreen\n        ? null\n        : m(shadow, {\n          z: state.z,\n          animated: true\n        }),\n      opts.fullscreen\n        ? null\n        : opts.title\n          ? m(\"div\",\n            {\n              class: classes.header,\n              oncreate: ({ dom }) => {\n                state.headerHeight = dom.scrollHeight;\n              }\n            },\n            m(\"div\", {\n              class: classes.title\n            }, opts.title))\n          : null,\n      body,\n      opts.fullscreen ? null : opts.footer ? m(\"div\", {\n        class: classes.footer,\n        oncreate: ({ dom }) => {\n          state.footerHeight = dom.scrollHeight;\n          state.footerEl = dom;\n          updateFooterState(state);\n        },\n        onupdate: ({ dom }) => (\n          state.footerHeight = dom.scrollHeight,\n          updateFooterState(state)\n        )\n      }, [\n        m(\"div\", {\n          class: classes.actions\n        }, opts.footer)\n      ]) : null\n    ]\n  );\n\n  return m(element, props, [opts.before, content, opts.after]);\n};\n\nexport default {\n  theme: customTheme, // accepts (selector, vars)\n  oninit: vnode => {\n    const attrs = vnode.attrs;\n    const opts = attrs.opts;\n    const z = opts.z !== undefined ? opts.z : 3; // shadow depth\n    vnode.state = Object.assign(\n      vnode.state,\n      attrs,\n      {\n        z, \n        scrollEl:       undefined,\n        footerEl:       undefined,\n        topOverflow:    false,\n        bottomOverflow: false,\n        scrollWatchId:  0,\n        isScrolling:    false,\n        headerHeight:   0,\n        footerHeight:   0,\n        el:             undefined,\n        visible:        false,\n        transitioning:  false\n      }\n    );\n  },\n  view: ({ state, attrs }) => {\n    // attrs contains {id, opts}\n    const opts = (typeof attrs.opts === \"function\")\n      ? attrs.opts()\n      : attrs.opts;\n    if (attrs.hide && !state.transitioning) {\n      hideInstance(state, opts);\n    }\n    return createView(state, opts);\n  }\n};\n","\nconst show = (el, opts) => ({\n  el,\n  showDuration: opts.showDuration || .220,\n  showDelay:    opts.showDelay || 0,\n  beforeShow:   () => el.style.opacity = 0,\n  show:         () => el.style.opacity = 1,\n});\n\nconst hide = (el, opts) => ({\n  el,\n  hideDuration: opts.hideDuration || .220,\n  hideDelay:    opts.hideDelay || 0,\n  hide:         () => el.style.opacity = 0\n});\n\nexport default {\n  show,\n  hide\n};\n","import { multiple } from \"polythene-core\";\nimport instance from \"./instance\";\nimport transitions from \"./theme/transitions\";\n\nexport default multiple({\n  instance,\n  transitions,\n  defaultId:     \"default_dialog\",\n  element:       \".pe-dialog__holder\",\n  placeholder:   \"span.pe-dialog__placeholder\",\n  bodyShowClass: \"pe-dialog--open\"\n});\n"],"names":["menu","content","rgba","vars","unit_block_border_radius","grid_unit_component","color_light_background","color_light_foreground","blend_light_text_primary","blend_light_text_regular","blend_light_border_light","color_dark_background","color_dark_foreground","blend_dark_text_primary","blend_dark_text_regular","blend_dark_border_light","selector","componentVars","flex","layoutCenterCenter","z_dialog","padding","layoutVertical","grid_unit_menu","border_radius","font_size_title","lineHeightTitle","font_weight_medium","header_bottom","map","v","join","header_height","mixin","ellipsis","selfStretch","footer_height","layoutHorizontal","layoutEndJustified","layoutWrap","style","scopes","tint","s","fns","layout","color","classes","component","customTheme","customSelector","customVars","styler","generateStyles","updateScrollState","scroller","state","scrollEl","topOverflow","scrollTop","bottomOverflow","scrollHeight","getBoundingClientRect","height","updateFooterState","footerEl","window","getComputedStyle","parseInt","minHeight","classList","add","footerHigh","remove","showInstance","opts","id","instanceId","transitioning","transitions","show","_extends","el","then","visible","didShow","hideInstance","hide","didHide","m","redraw","createViewContent","bodyOpts","body","updateContentOnScroll","ignoreContent","isScrolling","dom","scrollWatchId","setTimeout","createView","update","handleEscape","fullscreen","modal","e","which","cleanup","element","props","filterSupportedAttributes","backdrop","hasBackdrop","borders","hasTopOverflow","hasBottomOverflow","tone","class","target","formOptions","menuContent","shadow","z","title","header","headerHeight","footer","footerHeight","actions","before","after","attrs","vnode","undefined","showDuration","showDelay","opacity","hideDuration","hideDelay","multiple"],"mappings":"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"}