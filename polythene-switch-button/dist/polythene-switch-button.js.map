{"version":3,"file":"polythene-switch-button.js","sources":["../src/classes.js","../src/control-view.js","../src/theme/vars.js","../src/theme/layout.js","../src/theme/color.js","../src/theme/index.js","../src/switch-button.js"],"sourcesContent":["\nexport default {\n  component: \"pe-switch-control\",\n\n  // elements\n  knob:      \"pe-switch-control__knob\",\n  thumb:     \"pe-switch-control__thumb\",\n  track:     \"pe-switch-control__track\",\n};\n","import m from \"mithril\";\nimport { Shadow, IconButton } from \"polythene-mithril\";\nimport classes from \"./classes\";\n\nexport const controlView = (checked, attrs) => {\n  const zOff = attrs.zOff !== undefined ? attrs.zOff : 1;\n  const zOn = attrs.zOn !== undefined ? attrs.zOn : 2;\n  const z = checked ? zOn : zOff;\n  const raised = attrs.disabled\n    ? false\n    : attrs.raised !== undefined ? attrs.raised : true;\n  return [\n    m(\"div\", {\n      className: classes.track\n    }),\n    m(IconButton, Object.assign(\n      {},\n      {\n        className: classes.thumb,\n        content: [\n          m(\"div\", {\n            className: classes.knob\n          }, [\n            attrs.icon ? attrs.icon : null,\n            raised\n              ? m(Shadow, {\n                z: z,\n                animated: true\n              })\n              : null\n          ])\n        ],\n        style: attrs.style,\n        disabled: attrs.disabled,\n        events: attrs.events,\n        ink: attrs.ink || false\n      },\n      attrs.selectable !== undefined\n        ? { inactive: !attrs.selectable(checked) }\n        : null,\n      attrs.iconButton\n    ))\n  ];\n};\n","import { vars } from \"polythene-theme\";\nimport { vars as selectionControlVars } from \"polythene-selection-control\";\nimport { vars as iconButtonVars } from \"polythene-core-icon-button\";\n\nconst rgba = vars.rgba;\nconst hit_area_padding = (vars.grid_unit_icon_button - vars.unit_icon_size) / 2; // 12\n\nexport default Object.assign(\n  {},\n  selectionControlVars,\n  {\n    track_height:                       14,\n    track_length:                       36,\n    thumb_size:                         20,\n    padding:                            vars.grid_unit_component,\n    icon_button_padding:                iconButtonVars.padding,\n    hit_area_padding,\n\n    animation_duration:                 vars.animation_duration,\n\n    color_light_thumb_on:               rgba(vars.color_primary),\n    color_light_thumb_off:              \"#f1f1f1\",\n    color_light_thumb_disabled:         \"#bdbdbd\",\n    color_light_wash_on:                rgba(vars.color_primary),\n    color_light_wash_off:               iconButtonVars.color_light_wash,\n\n    color_light_track_on:               rgba(vars.color_primary_faded),\n    color_light_track_on_opacity:       .55,\n    color_light_track_off:              rgba(vars.color_light_foreground, vars.blend_light_text_regular),\n    color_light_track_off_opacity:      .55,\n    color_light_track_disabled:         rgba(vars.color_light_foreground, vars.blend_light_background_disabled),\n    color_light_track_disabled_opacity: 1,\n\n    // icon color may be set in theme; default \"currentcolor\"\n    // color_light_icon_on:                   \"currentcolor\",\n    // color_light_icon_off:                  \"currentcolor\",\n\n    // color_light_focus_on and so on taken from selectionControlVars\n\n    color_dark_thumb_on:                rgba(vars.color_primary),\n    color_dark_thumb_off:               \"#bdbdbd\",\n    color_dark_thumb_disabled:          \"#555\",\n    color_dark_wash_on:                 rgba(vars.color_primary),\n    color_dark_wash_off:                iconButtonVars.color_dark_wash,\n\n    color_dark_track_on:                rgba(vars.color_primary_faded, vars.blend_dark_text_tertiary), // or \"#5a7f7c\"\n    color_dark_track_on_opacity:        9,\n    color_dark_track_off:               \"#717171\",\n    color_dark_track_off_opacity:       .55,\n    color_dark_track_disabled:          \"#717171\",\n    color_dark_track_disabled_opacity:  .3,\n\n    // icon color may be set in theme; default \"currentcolor\"\n    // color_dark_icon_on:                    \"currentcolor\"\n    // color_dark_icon_off:                   \"currentcolor\"\n\n    // color_dark_focus_on and so on taken from selectionControlVars\n  }\n);\n","import { layout as selectionControlLayout } from \"polythene-selection-control\";\nimport { vars } from \"polythene-theme\";\nimport { mixin } from \"polythene-core-css\";\n\nconst transition = (componentVars, properties, duration = componentVars.animation_duration) => [\n  mixin.defaultTransition(properties, duration, \"ease-out\")\n];\n\nconst customSize = (componentVars, size) => {\n  const factor = size / vars.unit_icon_size;\n  const thumbSize = Math.floor(0.5 * componentVars.thumb_size * factor) * 2; // round to even\n  const scaledTrackHeight = Math.floor(0.5 * componentVars.track_height * factor) * 2; // round to even\n  const scaledTrackWidth = Math.floor(0.5 * componentVars.track_length * factor) * 2;\n  const scaledThumbSize = Math.floor(0.5 * componentVars.thumb_size * factor) * 2;\n  const trackTop = ((componentVars.label_height * factor - scaledTrackHeight) / 2);\n  const thumbPadding = componentVars.icon_button_padding;\n  const thumbMargin = (size - scaledThumbSize) / 2;\n  const thumbOuterSize = size + 2 * thumbPadding;\n  const thumbOffsetMin = -(thumbOuterSize / 2) + (thumbSize / 2);\n  const thumbOffsetMax = thumbOffsetMin + scaledTrackWidth - thumbSize;\n  const thumbOffsetY = thumbOffsetMin + thumbMargin;\n  const trackVisualOffset = 0.3; // prevent sub pixel of track to shine through knob border\n\n  return {\n    \" .pe-control__form-label\": {\n      height: size + \"px\",\n      minWidth: scaledTrackWidth + \"px\",\n    },\n    \" .pe-control__label\": {\n      paddingLeft: (componentVars.padding * factor + 8 + scaledTrackWidth) + \"px\"\n    },\n    \" .pe-switch-control__track\": {\n      left: trackVisualOffset + \"px\",\n      height: scaledTrackHeight + \"px\",\n      width: (scaledTrackWidth - 2 * trackVisualOffset) + \"px\",\n      top: trackTop + \"px\",\n      borderRadius: scaledTrackHeight + \"px\"\n    },\n    \" .pe-switch-control__thumb\": {\n      top: thumbOffsetY + \"px\",\n      left: thumbOffsetMin + \"px\"\n    },\n\n    \" .pe-switch-control__knob\": {\n      width: scaledThumbSize + \"px\",\n      height: scaledThumbSize + \"px\",\n      margin: thumbMargin + \"px\"\n    },\n\n    \" .pe-button__content\": {\n      padding: thumbPadding + \"px\"\n    },\n\n    \".pe-control--on\": {\n      \" .pe-switch-control__thumb\": {\n        left: thumbOffsetMax + \"px\"\n      }\n    }\n  };\n};\n\nexport default (selector, componentVars) =>\n  selectionControlLayout(selector, componentVars, \"checkbox\").concat(\n    [{\n      [selector]: {\n        \" .pe-switch-control__track\": [\n          transition(componentVars, \"background, opacity\"),\n          {\n            position: \"absolute\",\n            left: 0\n          }\n        ],\n\n        \" .pe-switch-control__thumb\": [\n          transition(componentVars, \"left, color\"),\n          {\n            position: \"absolute\",\n            zIndex: 1, // Prevents flickering of text label when toggling\n            color: \"inherit\",\n\n            \":focus\": {\n              outline: 0\n            }\n          }\n        ],\n\n        \" .pe-switch-control__knob\": {\n          position: \"relative\",\n          borderRadius: \"50%\"\n        },\n\n        \" .pe-button__content .pe-switch-control__knob .pe-icon\": [\n          mixin.fit(),\n          transition(componentVars, \"color\"),\n          {\n            width: \"100%\",\n            height: \"100%\"\n          }\n        ],\n\n        \" .pe-button__focus\": [\n          transition(componentVars, \"all\")\n        ],\n\n        \".pe-control--small\":   customSize(componentVars, vars.unit_icon_size_small),\n        \".pe-control--regular\": customSize(componentVars, vars.unit_icon_size),\n        \".pe-control--medium\":  customSize(componentVars, vars.unit_icon_size_medium),\n        \".pe-control--large\":   customSize(componentVars, vars.unit_icon_size_large)\n      }\n    }]\n  );\n\n","\nconst style = (scopes, selector, componentVars, tint) => [{\n  [scopes.map(s => s + selector).join(\",\")]: {\n    \".pe-control--off\": {\n      \" .pe-switch-control__track\": {\n        opacity: componentVars[\"color_\" + tint + \"_track_off_opacity\"],\n        backgroundColor: componentVars[\"color_\" + tint + \"_track_off\"]\n      },\n      \" .pe-switch-control__thumb\": {\n        color: componentVars[\"color_\" + tint + \"_thumb_off\"]\n      },\n      \" .pe-switch-control__knob\": {\n        backgroundColor: \"currentcolor\"\n      },\n      \" .pe-button--focus\": {\n        \" .pe-button__focus\": {\n          opacity: componentVars[\"color_\" + tint + \"_focus_off_opacity\"],\n          backgroundColor: componentVars[\"color_\" + tint + \"_focus_off\"]\n        }\n      },\n      \" .pe-icon\": {\n        color: componentVars[\"color_\" + tint + \"_icon_off\"] || \"currentcolor\"\n      }\n    },\n\n    \".pe-control--on\": {\n      \" .pe-switch-control__track\": {\n        opacity: componentVars[\"color_\" + tint + \"_track_on_opacity\"],\n        backgroundColor: componentVars[\"color_\" + tint + \"_track_on\"]\n      },\n      \" .pe-switch-control__thumb\": {\n        color: componentVars[\"color_\" + tint + \"_thumb_on\"]\n      },\n      \" .pe-switch-control__knob\": {\n        backgroundColor: \"currentcolor\"\n      },\n      \" .pe-button--focus\": {\n        \" .pe-button__focus\": {\n          opacity: componentVars[\"color_\" + tint + \"_focus_on_opacity\"],\n          backgroundColor: componentVars[\"color_\" + tint + \"_focus_on\"]\n        }\n      },\n      \" .pe-icon\": {\n        color: componentVars[\"color_\" + tint + \"_icon_on\"] || \"currentcolor\"\n      }\n    },\n\n    \".pe-control--on.pe-control--disabled, &.pe-control--off.pe-control--disabled\": {\n      \" .pe-switch-control__track\": {\n        opacity: componentVars[\"color_\" + tint + \"_track_disabled_opacity\"],\n        backgroundColor: componentVars[\"color_\" + tint + \"_track_disabled\"]\n      },\n      \" .pe-switch-control__thumb\": {\n        color: componentVars[\"color_\" + tint + \"_thumb_disabled\"]\n      },\n    },\n  }\n}];\n\nconst noTouchStyle = (scopes, selector, componentVars, tint) => [{\n  [scopes.map(s => s + selector + \":hover\").join(\",\")]: {\n    \".pe-control--on\": {\n      \" .pe-button__wash\": {\n        backgroundColor: componentVars[\"color_\" + tint + \"_wash_on\"]\n      }\n    },\n    \".pe-control--off\": {\n      \" .pe-button__wash\": {\n        backgroundColor: componentVars[\"color_\" + tint + \"_wash_off\"]\n      }\n    }\n  }\n}];\n\nexport default (selector, componentVars) => [\n  style([\".pe-dark-tone\", \".pe-dark-tone \"], selector, componentVars, \"dark\"), // has/inside dark tone\n  style([\"\", \".pe-light-tone\", \".pe-light-tone \"], selector, componentVars, \"light\"), // normal, has/inside light tone\n  noTouchStyle([\"html.pe-no-touch .pe-dark-tone \"], selector, componentVars, \"dark\"), // inside dark tone\n  noTouchStyle([\"html.pe-no-touch \", \"html.pe-no-touch .pe-light-tone \"], selector, componentVars, \"light\"),\n];\n\n","import { styler } from \"polythene-core-css\";\nimport classes from \"../classes\";\nimport vars from \"./vars\";\nimport layout from \"./layout\";\nimport color from \"./color\";\n\nconst fns = [layout, color];\nconst selector = `.${classes.component}`;\n\nexport const customTheme = (customSelector, customVars) => \n  styler.generateStyles([customSelector, selector], {...vars, ...customVars}, fns);\n\nstyler.generateStyles([selector], vars, fns);\n","import m from \"mithril\";\nimport { selectionControl } from \"polythene-selection-control\";\nimport { controlView } from \"./control-view\";\nimport { customTheme } from \"./theme\";\nimport classes from \"./classes\";\n\nconst view = vnode => {\n  return m(selectionControl, {\n    ...vnode.attrs,\n    controlView,\n    selectable: vnode.attrs.selectable || (() => true), // default: always selectable, regardless the checked state\n    instanceClass: classes.component,\n    type: \"checkbox\"\n  });\n};\n\nexport default {\n  theme: customTheme, // accepts (selector, vars)\n  view\n};\n"],"names":["controlView","checked","attrs","zOff","undefined","zOn","z","raised","disabled","m","classes","track","IconButton","babelHelpers.extends","thumb","knob","icon","Shadow","style","events","ink","selectable","inactive","iconButton","rgba","vars","hit_area_padding","grid_unit_icon_button","unit_icon_size","selectionControlVars","grid_unit_component","iconButtonVars","padding","animation_duration","color_primary","color_light_wash","color_primary_faded","color_light_foreground","blend_light_text_regular","blend_light_background_disabled","color_dark_wash","blend_dark_text_tertiary","transition","componentVars","properties","duration","mixin","defaultTransition","customSize","size","factor","thumbSize","Math","floor","thumb_size","scaledTrackHeight","track_height","scaledTrackWidth","track_length","scaledThumbSize","trackTop","label_height","thumbPadding","icon_button_padding","thumbMargin","thumbOffsetMin","thumbOffsetMax","thumbOffsetY","trackVisualOffset","scopes","selector","tint","map","s","join","noTouchStyle","fns","selectionControlLayout","concat","fit","unit_icon_size_small","unit_icon_size_medium","unit_icon_size_large","component","customTheme","customSelector","customVars","styler","generateStyles","selectionControl","vnode"],"mappings":"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"}