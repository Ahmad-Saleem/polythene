!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core"),require("polythene-theme"),require("polythene-css-classes")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-theme","polythene-css-classes"],t):t(e.polythene={},e["polythene-core"],e["polythene-theme"],e["polythene-css-classes"])}(this,function(e,t,r,i){"use strict";function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=function(e){return"rgba("+e+", "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)+")"},o=r.vars.color_light_foreground,l=r.vars.color_dark_foreground,s=r.vars.color_primary,c=Math.max(40,12),d=Math.max(c,18),u=Math.max(52,18),_=Math.max(10,d/2-6),v={height:u,side_spacing:_,horizontal_layout_side_spacing:_+4,thumb_size:12,thumb_touch_size:c,track_height:u,bar_height:2,thumb_border_width:2,active_thumb_scale:1.5,animation_duration:r.vars.animation_duration,disabled_thumb_scale:.5,active_pin_thumb_scale:2/6,step_width:2,pin_height:32,pin_width:26,pin_font_size:10,color_light_track_active:n(o,.38),color_light_track_inactive:n(o,.26),color_light_track_value:n(s),color_light_thumb_off:n(o,.26),color_light_thumb_off_focus:n(o),color_light_thumb_off_focus_opacity:.08,color_light_thumb_on:n(s),color_light_thumb_on_focus_opacity:.11,color_light_thumb_inactive:n(o,.26),color_light_tick:n(o,1),color_light_icon:n(r.vars.color_light_foreground,r.vars.blend_light_text_secondary),color_light_disabled_icon:n(r.vars.color_light_foreground,r.vars.blend_light_text_disabled),color_light_label:n(r.vars.color_light_foreground,r.vars.blend_light_text_secondary),color_light_disabled_label:n(r.vars.color_light_foreground,r.vars.blend_light_text_disabled),color_dark_track_active:n(l,.3),color_dark_track_inactive:n(l,.2),color_dark_track_value:n(s),color_dark_thumb_off:n(l,.2),color_dark_thumb_off_focus:n(l),color_dark_thumb_off_focus_opacity:.08,color_dark_thumb_on:n(s),color_dark_thumb_on_focus_opacity:.11,color_dark_thumb_inactive:n(l,.2),color_dark_tick:n(l,1),color_dark_icon:n(r.vars.color_dark_foreground,r.vars.blend_dark_text_secondary),color_dark_disabled_icon:n(r.vars.color_dark_foreground,r.vars.blend_dark_text_disabled),color_dark_label:n(r.vars.color_dark_foreground,r.vars.blend_dark_text_secondary),color_dark_disabled_label:n(r.vars.color_dark_foreground,r.vars.blend_dark_text_disabled)},f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},h=void 0,g=function(e){h&&h.blur(),h=void 0,e.hasFocus(!1)},k=function(e,t){g(e),h=t,e.hasFocus(!0)},p=function(e,r){return t.isTouch&&e.touches?r?e.touches[0].pageY:e.touches[0].pageX:r?e.pageY:e.pageX},m=function(e){if(e.controlEl&&e.pinEl){var t=e.fraction()*e.rangeWidth;e.pinEl.style.left=t+"px"}},b=function(e,t){e.setValue(t,!0),m(e)},y=function(e,t){for(var r=[],a=t+1;a>0;)r.push(e("div",{className:i.sliderClasses.tick,key:"tick-"+a})),a--;return r},C=function(e){if(e.controlEl&&t.isClient){e.controlWidth=v.thumb_size,e.rangeWidth=e.trackEl.getBoundingClientRect().width-e.controlWidth;var r=window.getComputedStyle(e.trackEl);e.rangeOffset=parseFloat(r.marginLeft)}},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.clickOffset=e.trackEl.getBoundingClientRect().left-(e.rangeOffset-e.controlWidth/2)+t},E=function(e,t){var r=e.controlEl.getBoundingClientRect().left,i=p(t)-r-e.controlWidth/2;x(e,i)},w=function(e){return x(e,0)},M=function(e,t){var r=p(t)-e.clickOffset,i=e.min+(r-e.rangeOffset)/e.rangeWidth*(e.max-e.min);b(e,i)},N=function(e,r,i){if(!e.isDragging()){i.preventDefault(),e.isDragging(!0),e.isActive(!0),g(e);var a=function(t){e.isDragging()&&M(e,t)},n=function r(){e.isDragging()&&(g(e),t.isClient&&(window.removeEventListener(t.pointerMoveEvent,a),window.removeEventListener(t.pointerEndMoveEvent,r)),e.isDragging(!1),e.isActive(!1))};t.isClient&&(window.addEventListener(t.pointerMoveEvent,a),window.addEventListener(t.pointerEndMoveEvent,n)),C(e),r.pin&&m(e)}},O=function(e,t,r){r.preventDefault(),e.isDragging()||(C(e),w(e),M(e,r),N(e,t,r))},T=function(e,r){var n,o=r.h,l=r.k,s=r.hasTicks,c=r.interactiveTrack,d=e.state,u=e.attrs,_=d.fraction(),v=d.max-d.min,h=Math.min(100,parseInt(v/d.stepSize,10)),p=function(e){return O(d,u,e)},x=function(e){C(d),E(d,e),N(d,u,e)},w=_+" 1 0%",M=1-_,T=M+" 1 0%";return o("div",f({},{className:i.sliderClasses.track},c&&!u.disabled&&a({},l["on"+t.pointerStartMoveEvent],p)),[o("div",{className:i.sliderClasses.trackPart+" "+i.sliderClasses.trackPartValue,key:"trackPartValue",style:{flex:w,msFlex:w,WebkitFlex:w}},o("div",{className:i.sliderClasses.trackBar},o("div",{className:i.sliderClasses.trackBarValue}))),o("div",f({},{className:i.sliderClasses.control,key:"control"},u.disabled?{disabled:!0}:(n={},a(n,l.tabindex,u[l.tabindex]||0),a(n,l.onfocus,function(){return k(d,d.controlEl)}),a(n,l.onblur,function(){return g(d)}),a(n,l.onkeydown,function(e){"Tab"!==e.key&&e.preventDefault(),"Escape"===e.key?d.controlEl.blur(e):"ArrowLeft"===e.key||"ArrowDown"===e.key?d.decrement(d,e.shiftKey):"ArrowRight"===e.key||"ArrowUp"===e.key?d.increment(d,e.shiftKey):"Home"===e.key?b(d,d.min):"End"===e.key?b(d,d.max):"PageDown"===e.key?d.decrement(d,!0):"PageUp"===e.key&&d.increment(d,!0),C(d),m(d)}),n),!u.disabled&&a({},l["on"+t.pointerStartMoveEvent],x),u.events?u.events:null,s?{step:h}:null),u.icon?o("div",{className:i.sliderClasses.thumb,key:"icon"},u.icon):null),o("div",{className:i.sliderClasses.trackPart+" "+i.sliderClasses.trackPartRest,key:"trackPartRest",style:{flex:T,msFlex:T,WebkitFlex:T,maxWidth:100*M+"%"}},o("div",{className:i.sliderClasses.trackBar},o("div",{className:i.sliderClasses.trackBarValue}))),s&&!u.disabled?o("div",{className:i.sliderClasses.ticks,key:"ticks"},y(o,h)):null,s&&u.pin&&!u.disabled?o("div",{className:i.sliderClasses.pin,key:"pin",value:d.value()}):null])},D=function(e,t){var r=e.attrs,i=void 0!==r.min?r.min:0,a=void 0!==r.max?r.max:100,n=a-i,o=void 0!==r.stepSize?r.stepSize:1,l=void 0!==r.defaultValue?r.defaultValue:void 0!==r.value?r.value:0,s=t(void 0),c=t(!1),d=t(!1),u=t(!1),_=t(i),v=t(0),f=1/o,h=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e<i&&(e=i),e>a&&(e=a),v(o?Math.round(e*f)/f:e),_((v()-i)/n),t&&r.onChange&&r.onChange({value:v()}),s(e)},g=function(e,t){return b(e,v()+(t?10:1)*(o||1))},k=function(e,t){return b(e,v()-(t?10:1)*(o||1))};return h(l),{min:i,max:a,stepSize:o,fraction:_,trackEl:null,controlEl:null,pinEl:null,setValue:h,increment:g,decrement:k,isDragging:u,isActive:c,value:v,previousValue:s,hasFocus:d,controlWidth:0,rangeWidth:0,rangeOffset:0,clickOffset:0,redrawOnUpdate:t.merge([c,v])}},P=function(e){var t=e.dom,r=e.state,a=e.attrs;r.trackEl=t.querySelector("."+i.sliderClasses.track),r.controlEl=t.querySelector("."+i.sliderClasses.control),r.pinEl=t.querySelector("."+i.sliderClasses.pin),C(r),a.pin&&setTimeout(function(){b(r,r.value())},0)},S=function(e,r){var a=r.keys,n=e.state,o=e.attrs;void 0!==o.value&&n.previousValue()!==o.value&&(n.previousValue(o.value),setTimeout(function(){return n.setValue(n.previousValue())},0));var l=void 0!==o.ticks&&!1!==o.ticks,s=void 0===o.interactiveTrack||o.interactiveTrack;return f({},t.filterSupportedAttributes(o),{className:[i.sliderClasses.component,o.disabled?i.sliderClasses.isDisabled:null,o.pin?i.sliderClasses.hasPin:null,s?i.sliderClasses.hasTrack:null,n.isActive()?i.sliderClasses.isActive:null,n.hasFocus()?i.sliderClasses.hasFocus:null,0===n.fraction()?i.sliderClasses.isAtMin:null,l?i.sliderClasses.hasTicks:null,"dark"===o.tone?"pe-dark-tone":null,"light"===o.tone?"pe-light-tone":null,o.className||o[a.class]].join(" ")})},V=function(e,t){var r=t.renderer,i=t.keys,a=e.attrs,n=void 0!==a.ticks&&!1!==a.ticks,o=void 0===a.interactiveTrack||a.interactiveTrack;return T(e,{h:r,k:i,hasTicks:n,interactiveTrack:o})},W=Object.freeze({getInitialState:D,onMount:P,createProps:S,createContent:V});e.coreSlider=W,e.classes=i.sliderClasses,e.vars=v,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-slider.js.map
