!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core"),require("polythene-core-css"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-core-css","polythene-theme"],t):t(e.polythene=e.polythene||{},e["polythene-core"],e["polythene-core-css"],e["polythene-theme"])}(this,function(e,t,n,r){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s={component:"pe-ripple",mask:"pe-ripple__mask",waves:"pe-ripple__waves",constrained:"pe-ripple--constrained",wavesAnimating:"pe-ripple__waves--animating"},c={color:"inherit"},l=function(e){return[i({},e,[n.mixin.fit(),{color:"inherit",borderRadius:"inherit",pointerEvents:"none",".pe-ripple--constrained":{borderRadius:"inherit"," .pe-ripple__mask":{overflow:"hidden",borderRadius:"inherit"}}," .pe-ripple__mask":[n.mixin.fit(),{transform:"translate3d(0,0,0)"}]," .pe-ripple__waves":{outline:"1px solid transparent",position:"absolute",borderRadius:"50%",pointerEvents:"none",display:"none"}," .pe-ripple__waves--animating":{display:"block"}}])]},p=function(e,t,n,r){return[o({},e.map(function(e){return e+t}).join(","),{color:n["color_"+r]||n.color||"inherit"})]},u=function(e,t){return[p([".pe-dark-tone",".pe-dark-tone "],e,t,"dark"),p(["",".pe-light-tone",".pe-light-tone "],e,t,"light")]},d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=[l,u],f="."+s.component,v=function(e,t){return n.styler.generateStyles([e,f],d({},c,t),m)};n.styler.generateStyles([f],c,m);var h=t.animationEndEvent(),y=function(e,i,o,s,c,l){var p=i.getBoundingClientRect(),u=t.isTouch&&e.touches?e.touches[0].pageX:e.clientX,d=t.isTouch&&e.touches?e.touches[0].pageY:e.clientY,m=i.offsetWidth,f=i.offsetHeight,v=Math.sqrt(m*m+f*f),y=s.center?p.left+p.width/2:u,g=s.center?p.top+p.height/2:d,b=y-p.left-v/2,w=g-p.top-v/2,_=void 0!==s.startOpacity?s.startOpacity:.2,E=void 0!==s.opacityDecayVelocity?s.opacityDecayVelocity:.35,k=s.endOpacity||0,O=s.startScale||.1,j=s.endScale||2,x=s.duration?s.duration:1/E*.2,L=window.getComputedStyle(i).color,S="ripple_animation_"+(new Date).getTime(),P=o.style;P.width=P.height=v+"px",P.top=w+"px",P.left=b+"px",P["animation-duration"]=P["-webkit-animation-duration"]=P["-moz-animation-duration"]=P["-o-animation-duration"]=x+"s",P.backgroundColor=L,P.opacity=_,P.animationName=S,P.animationTimingFunction=s.animationTimingFunction||r.vars.animation_curve_default;var R=[a({},"@keyframes "+S,{" 0%":{transform:"scale("+O+")",opacity:_}," 100%":{transform:"scale("+j+")",opacity:k}})];n.styler.add(S,R);var q=function e(t){s.persistent?(P.opacity=k,P.transform="scale("+j+")"):(l(),o.classList.remove(c.wavesAnimating)),o.removeEventListener(h,e,!1),n.styler.remove(S),s.end&&s.end(t)};o.addEventListener(h,q,!1),s.start&&s.start(e),o.classList.add(c.wavesAnimating)},g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b=v,w=function(e,t){return{animating:t(!1),removeEventListeners:t(!1)}},_=function(e,n){var r=n.keys,i=e.attrs;return g({},t.filterSupportedAttributes(i),{className:[s.component,!1!==i.constrained?s.constrained:null,"dark"===i.tone?"pe-dark-tone":null,"light"===i.tone?"pe-light-tone":null,i.className||i[r.class]].join(" ")})},E=function(e){if(e.dom){var n=e.state,r=e.attrs,i=e.dom,o=e.dom.querySelector("."+s.waves),a=function(e){n.animating()||r.disabled||(y(e,i,o,r,s,function(){return n.animating(!1)}),n.animating(!0))},c=r.target?r.target():e.dom.parentElement;c.addEventListener(t.touchEndEvent,a,!1),n.removeEventListeners(function(){return c.removeEventListener(t.touchEndEvent,a,!1)})}},k=function(e){return e.state.removeEventListeners()()},O=function(e,t){var n=t.renderer;return e.attrs.disabled?null:n("div",{className:s.mask},n("div",{className:s.waves}))},j=Object.freeze({element:"div",theme:b,getInitialState:w,createProps:_,onMount:E,onUnmount:k,createContent:O});e.CoreRipple=j,e.classes=s,e.vars=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-ripple.js.map
