!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core"),require("polythene-core-css"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-core-css","polythene-theme"],t):t(e.polythene=e.polythene||{},e["polythene-core"],e["polythene-core-css"],e["polythene-theme"])}(this,function(e,t,r,a){"use strict";function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _={component:"pe-card",actions:"pe-card__actions",content:"pe-card__content",header:"pe-card__header",headerTitle:"pe-card__header-title",media:"pe-card__media",mediaDimmer:"pe-card__media__dimmer",overlay:"pe-card__overlay",overlayContent:"pe-card__overlay__content",primary:"pe-card__primary",primaryMedia:"pe-card__primary-media",subtitle:"pe-card__subtitle",text:"pe-card__text",title:"pe-card__title",actionsBordered:"pe-card__actions--borders",actionsHorizontal:"pe-card__actions--horizontal",actionsJustified:"pe-card__actions--justified",actionsTight:"pe-card__actions--tight",actionsVertical:"pe-card__actions--vertical",mediaCropX:"pe-card__media--crop-x",mediaCropY:"pe-card__media--crop-y",mediaLarge:"pe-card__media--large",mediaMedium:"pe-card__media--medium",mediaRatioLandscape:"pe-card__media--landscape",mediaRatioSquare:"pe-card__media--square",mediaRegular:"pe-card__media--regular",mediaSmall:"pe-card__media--small",overlaySheet:"pe-card__overlay--sheet",primaryHasMedia:"pe-card__primary--media",primaryTight:"pe-card__primary--tight",textTight:"pe-card__text--tight"},l=a.vars.rgba,c={image_size_small:80,image_size_regular:112,image_size_medium:160,image_size_large:240,border_radius:a.vars.unit_block_border_radius,padding_h:16,offset_small_padding_v:8,padding_actions_h:8,title_padding_h:16,title_padding_v:24,tight_title_padding_bottom:16,text_padding_h:16,text_padding_v:16,text_padding_bottom:24,tight_text_padding_bottom:16,subtitle_line_height_padding_bottom:7,text_line_height_padding_top:6,text_line_height_padding_bottom:7,one_line_height_with_icon:72,icon_element_width:68,one_line_padding_v:8,actions_padding_v:2,actions_button_margin_v:2,actions_vertical_padding_v:6,color_light_main_background:l(a.vars.color_light_background),color_light_title_text:l(a.vars.color_light_foreground,a.vars.blend_light_text_primary),color_light_subtitle_text:l(a.vars.color_light_foreground,a.vars.blend_light_text_secondary),color_light_text:l(a.vars.color_light_foreground,a.vars.blend_light_text_regular),color_light_actions_border:l(a.vars.color_light_foreground,a.vars.blend_light_border_light),color_light_overlay_background:l(a.vars.color_light_background,a.vars.blend_light_overlay_background),color_dark_main_background:l(a.vars.color_dark_background),color_dark_title_text:l(a.vars.color_dark_foreground,a.vars.blend_dark_text_primary),color_dark_subtitle_text:l(a.vars.color_dark_foreground,a.vars.blend_dark_text_secondary),color_dark_text:l(a.vars.color_dark_foreground,a.vars.blend_dark_text_regular),color_dark_actions_border:l(a.vars.color_dark_foreground,a.vars.blend_dark_border_light),color_dark_overlay_background:l(a.vars.color_dark_background,a.vars.blend_dark_overlay_background)},s=function(e,t){return[i({},e,{display:"block",position:"relative",borderRadius:t.border_radius+"px","&, a:link, a:visited":{textDecoration:"none"}," .pe-card__content":{position:"relative",borderRadius:"inherit",overflow:"hidden",width:"inherit",height:"inherit"}," .pe-card__media":{position:"relative",overflow:"hidden",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit",zIndex:1,"&.pe-card__media--landscape":{paddingBottom:"56.25%"},"&.pe-card__media--square":{paddingBottom:"100%"},"&:last-child":{"&, img":{borderBottomLeftRadius:t.border_radius+"px",borderBottomRightRadius:t.border_radius+"px"}}," img":[r.mixin.fit(),{display:"none",width:"100%",maxWidth:"none","&.pe-card__media--crop-x":{width:"100%",height:"auto",display:"block"},"&.pe-card__media--crop-y":{height:"100%",width:"auto",display:"block"}}]}," .pe-card__header + .pe-card__media":{borderTopLeftRadius:0,borderTopRightRadius:0}," .pe-card__primary-media":{margin:"16px 16px 0 16px"," .pe-card__media--small":{width:t.image_size_small+"px"}," .pe-card__media--regular":{width:t.image_size_regular+"px"}," .pe-card__media--medium":{width:t.image_size_medium+"px"}," .pe-card__media--large":{width:t.image_size_large+"px",marginBottom:"16px"}," .pe-card__media":{"&, img":{borderRadius:0}}," .shadow + &":{"&, img":{borderTopLeftRadius:t.border_radius+"px",borderTopRightRadius:t.border_radius+"px"}}}," .pe-card__overlay":r.mixin.fit()," .pe-card__media__dimmer":[r.mixin.fit(),{zIndex:1}]," .pe-card__overlay__content":{position:"absolute",bottom:0,top:"auto",right:0,left:0,zIndex:2}," .pe-card__header":{height:t.one_line_height_with_icon+"px"," .pe-list-tile__title":{fontSize:"14px",fontWeight:a.vars.font_weight_normal,lineHeight:"20px",marginTop:"2px"}," .pe-list-tile__subtitle":{marginTop:"-1px"}}," .pe-card__primary":[r.flex.layoutHorizontal,{position:"relative","&.pe-card__primary--media:not(:last-child)":{paddingBottom:"16px"},"&.pe-card__primary--media + .pe-card__actions":{marginTop:"-16px"},"& + .pe-card__text":{marginTop:"-16px"},"&.pe-card__primary--tight":{" .pe-card__title":{paddingBottom:t.tight_title_padding_bottom-t.subtitle_line_height_padding_bottom+"px"}}}]," .pe-card__title":[r.flex.flex(),{padding:[t.title_padding_v,t.title_padding_h,t.title_padding_v-t.subtitle_line_height_padding_bottom,t.title_padding_h].map(function(e){return e+"px"}).join(" "),fontSize:"24px",lineHeight:"29px"}]," .pe-card__subtitle":{fontSize:"14px",lineHeight:"24px"}," .pe-card__actions":[{minHeight:"52px",padding:t.actions_padding_v+"px "+t.padding_actions_h+"px","&.pe-card__actions--tight":{minHeight:0,padding:0},"&.pe-card__actions--horizontal:not(.pe-card__actions--justified)":[r.flex.layoutHorizontal,r.flex.layoutCenter,{" :first-child":{marginLeft:0}," .pe-button":{minWidth:0}," .pe-button--icon":{marginRight:"8px"}}],"&.pe-card__actions--justified":[r.flex.layoutJustified],"&.pe-card__actions--vertical":[r.flex.layoutVertical,{":not(.pe-card__actions--tight)":{paddingTop:t.actions_vertical_padding_v+"px",paddingBottom:t.actions_vertical_padding_v+"px"}," .pe-card__actions":[{marginLeft:-t.padding_actions_h+"px",marginRight:-t.padding_actions_h+"px",minHeight:0,"&:first-child":{marginTop:-t.actions_vertical_padding_v+"px"},"&:last-child":{marginBottom:-t.actions_vertical_padding_v+"px"}}]," .pe-button":{height:"36px",padding:0,marginTop:t.actions_button_margin_v+"px",marginBottom:t.actions_button_margin_v+"px"}," .pe-list":{padding:0}}]}]," .pe-card__text":{paddingTop:t.text_padding_v-t.text_line_height_padding_top+"px",paddingRight:t.text_padding_h+"px",paddingLeft:t.text_padding_h+"px",paddingBottom:t.tight_text_padding_bottom-t.text_line_height_padding_bottom+"px",fontSize:"14px",lineHeight:"24px","&:last-child":{paddingBottom:t.text_padding_bottom-t.text_line_height_padding_bottom+"px"},"&.pe-card__text--tight, &.pe-card__text--tight:last-child":{paddingBottom:t.tight_text_padding_bottom-t.text_line_height_padding_bottom+"px"}," .pe-card__actions + &":{marginTop:"8px"}}," .pe-card__text, .pe-card__primary":{"& + .pe-card__actions:not(:last-child)":{marginTop:-(t.offset_small_padding_v+1)+"px",marginBottom:-(t.offset_small_padding_v-1)+"px"}}})]},p=function(e,t,r,a){return[n({},e.map(function(e){return e+t}).join(","),{backgroundColor:r["color_"+a+"_main_background"]})]},g=function(e,t){return[p([".pe-dark-tone",".pe-dark-tone "],e,t,"dark"),p(["",".pe-light-tone",".pe-light-tone "],e,t,"light")]},u=function(e,t,r,a){return[o({},e.map(function(e){return e+t}).join(","),{" .pe-card__title":{color:r["color_"+a+"_title_text"]}," .pe-card__subtitle":{color:r["color_"+a+"_subtitle_text"]}," .pe-card__text":{color:r["color_"+a+"_text"]}," .pe-card__actions--borders":{borderTop:"1px solid "+r["color_"+a+"_actions_border"]}})]},m=function(e,t){return[u([".pe-dark-tone",".pe-dark-tone "],e,t,"dark"),u(["",".pe-light-tone",".pe-light-tone "],e,t,"light")]},h=function(e,t,r,a){return[d({},e.map(function(e){return e+t}).join(","),{" .pe-card__overlay__content":{backgroundColor:r["color_"+a+"_overlay_background"]}})]},y=function(e,t){return[h([".pe-dark-tone",".pe-dark-tone "],e,t,"dark"),h(["",".pe-light-tone",".pe-light-tone "],e,t,"light")]},v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},f="."+_.component,b="."+_.content,x="."+_.overlaySheet,k="."+_.overlayContent,j=function(e,t){return r.styler.generateStyles([e,f],v({},c,t),[s,g]),r.styler.generateStyles([e," "+x],v({},c,t),[y]),r.styler.generateStyles([e," "+b],v({},c,t),[m]),r.styler.generateStyles([e," "+k],v({},c,t),[m])};r.styler.generateStyles([f],c,[s,g]),r.styler.generateStyles([x],c,[y]),r.styler.generateStyles([b],c,[m]),r.styler.generateStyles([k],c,[m]);var z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},w=j,T=function(e){var t=e.dispatcher,r=e.attrs,a=e.h,i=e.k,n=r.element||"div",o=r.content.map(t);return a("div",{key:r.key||"card-overlay",className:[_.overlay,r.sheet?_.overlaySheet:null,"light"===r.tone?null:"pe-dark-tone","light"===r.tone?"pe-light-tone":null].join(" ")},[a(n,{key:"content",className:[_.overlayContent,r.className||r[i.class]].join(" ")},o),a("div",{key:"dimmer",className:_.mediaDimmer})])},O=function(e){var t=e.attrs,r=e.h,a=e.k;return r(t.element||"div",{key:t.key||"card-text",className:[_.text,t.tight?_.textTight:null,t.className||t[a.class]].join(" ")},t.content)},S=function(e){var t=e.attrs,r=e.h,a=e.k,i=e.Icon;return r(e.ListTile,z({},t,{key:t.key||"card-header",className:[_.header,t.className||t[a.class]].join(" ")},t.icon?{front:r(i,t.icon)}:null))},R=function(e){return e.attrs.element||e.attrs.url?"a":"div"},C=function(e,r){var a=r.keys,i=e.attrs;return z({},t.filterSupportedAttributes(i),{className:[_.component,"dark"===i.tone?"pe-dark-tone":null,"light"===i.tone?"pe-light-tone":null,i.className||i[a.class]].join(" ")},i.url,i.events)},N=function(e,t){var r=t.renderer,a=t.keys,i=t.CardActions,n=t.CardMedia,o=t.CardPrimary,d=t.Icon,l=t.Shadow,c=t.ListTile,s=function e(t){var _=Object.keys(t)[0],l=z({},t[_],{dispatcher:e,key:_});switch(_){case"actions":return r(i,l);case"header":return S({dispatcher:e,attrs:l,h:r,k:a,Icon:d,ListTile:c});case"media":return r(n,l);case"overlay":return T({dispatcher:e,attrs:l,h:r,k:a});case"primary":return r(o,l);case"text":return O({dispatcher:e,attrs:l,h:r,k:a});default:throw'Content type "'+_+'" does not exist'}},p=e.attrs,g=Array.isArray(p.content)?p.content.map(s):p.content;return[r(l,{z:void 0!==p.z?p.z:1,animated:!0,key:"shadow"}),r("div",{className:_.content,key:"content"},g)]},B=Object.freeze({theme:w,getElement:R,createProps:C,createContent:N}),P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},H={horizontal:_.actionsHorizontal,vertical:_.actionsVertical,justified:_.actionsJustified},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"horizontal";return H[e]},A=function(e,r){var a=r.keys,i=e.attrs;return P({},t.filterSupportedAttributes(i),{key:"card-actions",className:[_.actions,L(i.layout),i.bordered?_.actionsBordered:null,i.tight?_.actionsTight:null,i.className||i[a.class]].join(" ")})},M=function(e){return e.attrs.content},q=Object.freeze({createProps:A,createContent:M}),I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},W={landscape:16/9,square:1},D={small:_.mediaSmall,regular:_.mediaRegular,medium:_.mediaMedium,large:_.mediaLarge},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"regular";return D[e]},V=function(e){var t=e.dom,r=e.img,a=e.ratio,i=e.origin;r.onload=function(){var e=this.naturalWidth/this.naturalHeight,n=e<W[a]?_.mediaCropX:_.mediaCropY;r.className=n;var o=t.clientWidth,d=t.clientHeight;if(e<W[a])if("center"===i){var l=(d-o/e)/2;this.style.marginTop=l+"px"}else"start"===i?(this.style.top=0,this.style.bottom="auto"):(this.style.top="auto",this.style.bottom=0);else if("center"===i){var c=(o-d*e)/2;this.style.marginLeft=c+"px"}else"start"===i?(this.style.left=0,this.style.right="auto"):(this.style.left="auto",this.style.right=0)}},X=function(e){if(e.dom){var t=e.attrs,r=t.ratio||"landscape",a=t.origin||"center",i=e.dom,n=i.querySelector("img");V({dom:i,img:n,ratio:r,origin:a})}},Y=function(e,r){var a=r.keys,i=e.attrs,n=i.ratio||"landscape";return I({},t.filterSupportedAttributes(i),{key:"card-media",className:[_.media,J(i.size),"landscape"===n?_.mediaRatioLandscape:_.mediaRatioSquare,i.className||i[a.class]].join(" ")})},E=function(e,t){var r=t.renderer,a=e.attrs,i=a.dispatcher;return[I({},a.content,{key:"content"}),a.overlay?i({overlay:a.overlay,key:"overlay"}):r("div",{className:_.mediaDimmer,key:"dimmer"})]},F=Object.freeze({onMount:X,createProps:Y,createContent:E}),G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},K=function(e){var r=e.attrs,a=Array.isArray(r.content)?r.content.reduce(function(e,t){return"media"===Object.keys(t)[0]||e},!1):r.media||!1;return G({},t.filterSupportedAttributes(r),{key:"card-primary",className:[_.primary,r.tight?_.primaryTight:null,a?_.primaryHasMedia:null].join(" ")})},Q=function(e,t){var r=t.renderer,a=e.attrs,i=a.dispatcher,n={title:function(e){return e.attrs?e:r("div",{className:_.title,key:"title"},[e.title,e.subtitle?r("div",{className:_.subtitle,key:"subtitle"},e.subtitle):null])},media:function(e){return r("div",{className:_.primaryMedia,key:"media"},i({media:e}))},actions:function(e){return i({actions:e})}};return Array.isArray(a.content)?a.content.map(function(e){var t=Object.keys(e)[0],r=e[t];return n[t]?n[t](r):e}):[a.title?n.title({title:a.title,subtitle:a.subtitle,key:"title"}):null,a.media?n.media(a.media):null,a.actions?n.actions(a.actions):null,a.content]},U=Object.freeze({createProps:K,createContent:Q});e.coreCard=B,e.coreCardActions=q,e.coreCardMedia=F,e.coreCardPrimary=U,e.classes=_,e.vars=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-card.js.map
