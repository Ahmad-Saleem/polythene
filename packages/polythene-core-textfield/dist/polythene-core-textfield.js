!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-theme"],t):t(e.polythene={},e["polythene-core"],e["polythene-theme"])}(this,function(e,t,r){"use strict";function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i={component:"pe-textfield",counter:"pe-textfield__counter",error:"pe-textfield__error",errorPlaceholder:"pe-textfield__error-placeholder",focusHelp:"pe-textfield__help-focus",help:"pe-textfield__help",input:"pe-textfield__input",inputArea:"pe-textfield__input-area",label:"pe-textfield__label",optionalIndicator:"pe-textfield__optional-indicator",requiredIndicator:"pe-textfield__required-indicator",hasCounter:"pe-textfield--counter",hasFloatingLabel:"pe-textfield--floating-label",hasFullWidth:"pe-textfield--full-width",hideClear:"pe-textfield--hide-clear",hideSpinner:"pe-textfield--hide-spinner",hideValidation:"pe-textfield--hide-validation",isDense:"pe-textfield--dense",isRequired:"pe-textfield--required",stateDirty:"pe-textfield--dirty",stateDisabled:"pe-textfield--disabled",stateFocused:"pe-textfield--focused",stateInvalid:"pe-textfield--invalid",stateReadonly:"pe-textfield--readonly"},n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},o=function(e){return e.attrs.element||"div"},a={invalid:!1,message:void 0},d=function(e,t){if(!e.inputEl())return a;var r=t.validate(e.inputEl().value);return{invalid:r&&!r.valid,message:r&&r.error}},u=function(e,t){return{invalid:e.inputEl().value.length>t.counter,message:t.error}},_=function(e,t){return{invalid:!e.inputEl().checkValidity(),message:t.error}},s=function(e,t){var r=a;return e.isTouched()&&e.isInvalid()&&0===e.inputEl().value.length&&t.validateResetOnClear&&(e.isTouched(!1),e.isInvalid(!1),e.error(void 0)),!r.invalid&&t.counter&&(r=u(e,t)),!r.invalid&&e.inputEl()&&e.inputEl().checkValidity&&(r=_(e,t)),!r.invalid&&t.validate&&(r=d(e,t)),r},c=function(e){var t=e.state,r=e.attrs,l=void 0!==r.valid?{invalid:!r.valid,message:r.error}:t.isTouched()||r.validateAtStart?s(t,r):a,i=t.isInvalid();t.error(l.message),l.invalid!==i&&t.isInvalid(l.invalid),l.invalid||t.error(void 0)},p=function(e){var t=e.state,r=e.attrs;if(r.onChange){var l=s(t,r);r.onChange({focus:t.hasFocus(),dirty:t.isDirty(),el:t.inputEl(),invalid:l.invalid,error:l.error,value:t.inputEl().value})}},v=function(e,t){return e.ignoreEvents&&-1!==e.ignoreEvents.indexOf(t)},f=function(e,t){var r=e.attrs,l=void 0!==r.defaultValue&&null!==r.defaultValue?r.defaultValue.toString():void 0!==r.value&&null!==r.value?r.value.toString():"",i=t(null),n=t(null),o=t({}),a=t(r.error),d=t(r.focus||!1),u=t(!1),_=t(!1),s=t(""!==l),c=t(!1);return{defaultValue:l,didSetFocusTime:0,el:i,error:a,hasFocus:d,inputEl:n,isDirty:s,isInvalid:c,isTouched:_,previousValue:t(void 0),setFocus:u,setValue:o,redrawOnUpdate:t.merge([n,c,s])}},h=function(e){var t=e.dom,r=e.state,l=e.attrs;r.el(t);var i=l.multiLine?"textarea":"input",n=t.querySelector(i);e.state.inputEl(n),r.inputEl().value=r.defaultValue,r.setValue.map(function(t){var i=t.type,n=t.focus;return void 0!==n&&r.setFocus(n),"input"===i&&(l.validateOnInput||l.counter)&&r.isTouched(r.inputEl().value!==r.defaultValue),"input"!==i&&r.isTouched(r.inputEl().value!==r.defaultValue),"onblur"===i&&r.isTouched(!0),r.isDirty(""!==r.inputEl().value),c(e),p(e),r.previousValue(r.inputEl().value)}),r.setFocus.map(function(e){r.didSetFocusTime+150>(new Date).getTime()||(r.hasFocus(e),e&&r.inputEl()&&setTimeout(function(){return r.inputEl()&&r.inputEl().focus&&r.inputEl().focus(),r.didSetFocusTime=(new Date).getTime()},0))}),p(e)},g=function(e){c(e)},b=function(e,r){var l=r.keys,o=e.state,a=e.attrs,d=o.isInvalid();return n({},t.filterSupportedAttributes(a),{className:[i.component,d?i.stateInvalid:"",o.hasFocus()?i.stateFocused:"",o.isDirty()?i.stateDirty:"",a.floatingLabel?i.hasFloatingLabel:"",a.disabled?i.stateDisabled:"",a.readonly?i.stateReadonly:"",a.dense?i.isDense:"",a.required?i.isRequired:"",a.fullWidth?i.hasFullWidth:"",a.counter?i.hasCounter:"",!1!==a.hideSpinner&&void 0!==a.hideSpinner?i.hideSpinner:"",!1!==a.hideClear&&void 0!==a.hideClear?i.hideClear:"",a.hideValidation?i.hideValidation:"","dark"===a.tone?"pe-dark-tone":null,"light"===a.tone?"pe-light-tone":null,a.className||a[l.class]].join(" ")})},m=function(e,r){var o=r.renderer,a=r.keys,d=e.state,u=e.attrs,_=d.inputEl(),s=u.error||d.error(),c=d.isInvalid(),f=u.multiLine?"textarea":"input",h=u.multiLine?null:u.type&&"submit"!==u.type&&"search"!==u.type?u.type:"text",g=c&&void 0!==s,b=!!(void 0!==u.valid||u.validate||u.min||u.max||u[a.minlength]||u[a.maxlength]||u.required||u.pattern),m=u.disabled||u[a.readonly];!u.focus||d.hasFocus()||m||d.setFocus(!0);var y=void 0!==u.value&&null!==u.value?u.value:_?_.value:d.previousValue(),x=void 0===y||null===y?"":y.toString();_&&d.previousValue()!==x&&(_.value=x,d.previousValue(x),setTimeout(function(){return d.setValue({type:"input"})},0));var k=u.required&&""!==u.requiredIndicator?o("span",{key:"required",className:i.requiredIndicator},u.requiredIndicator||"*"):null,E=!u.required&&u.optionalIndicator?o("span",{key:"optional",className:i.optionalIndicator},u.optionalIndicator):null,F=u.label?[u.label,k,E]:null;return[o("div",{className:i.inputArea,key:"input-area"},[F?o("label",l({key:"label",className:i.label},a["on"+t.pointerStartEvent],function(){m||setTimeout(function(){d.inputEl.focus()},0)}),F):null,o(f,n({},{key:"input",className:i.input,disabled:u.disabled},h?{type:h}:null,u.name?{name:u.name}:null,v(u,a.onclick)?null:l({},a.onclick,function(){m||(d.setFocus(!0),p(e))}),v(u,a.onfocus)?null:l({},a.onfocus,function(){m||(d.setFocus(!0),d.el()&&d.el().classList.add(i.stateFocused),p(e))}),v(u,a.onblur)?null:l({},a.onblur,function(){d.setValue({type:"onblur",focus:!1}),d.el().classList.remove(i.stateFocused)}),v(u,a.oninput)?null:l({},a.oninput,function(){d.setValue({type:"input"})}),v(u,a.onkeydown)?null:l({},a.onkeydown,function(e){"Enter"===e.key?d.isTouched(!0):"Escape"===e.key&&_.blur(e)}),u.events?u.events:null,void 0!==u.required&&u.required?{required:!0}:null,void 0!==u[a.readonly]&&u[a.readonly]?l({},a.readonly,!0):null,void 0!==u.pattern?{pattern:u.pattern}:null,void 0!==u[a.maxlength]?l({},a.maxlength,u[a.maxlength]):null,void 0!==u[a.minlength]?l({},a.minlength,u[a.minlength]):null,void 0!==u.max?{max:u.max}:null,void 0!==u.min?{min:u.min}:null,void 0!==u[a.autofocus]?l({},a.autofocus,u[a.autofocus]):null,void 0!==u[a.tabindex]?l({},a.tabindex,u[a.tabindex]):null,void 0!==u.rows?{rows:u.rows}:null))]),u.counter?o("div",{key:"counter",className:i.counter},(_&&_.value.length||0)+" / "+u.counter):null,u.help&&!g?o("div",{key:"help",className:[i.help,u.focusHelp?i.focusHelp:null].join(" ")},u.help):null,g?o("div",{key:"error",className:i.error},s):b&&!u.help?o("div",{key:"error-placeholder",className:i.errorPlaceholder}):null]},y=Object.freeze({getElement:o,getInitialState:f,onMount:h,onUpdate:g,createProps:b,createContent:m}),x=function(e){return"rgba("+e+", "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)+")"},k={vertical_spacing_top:6,vertical_spacing_bottom:7,input_focus_border_width:2,input_focus_border_animation_duration:r.vars.animation_duration,floating_label_vertical_spacing_top:30,floating_label_vertical_spacing_bottom:7,floating_label_top:14,floating_label_animation_duration:".12s",input_padding_h:0,input_padding_v:7,input_border_width:1,margin_top_error_message:6,font_size_input:16,font_size_error:12,font_size_floating_label:12,line_height_input:20,dense_floating_label_vertical_spacing_top:23,dense_floating_label_vertical_spacing_bottom:4,dense_floating_label_top:10,dense_font_size_input:13,dense_font_size_floating_label:13,full_width_input_padding_h:20,full_width_input_padding_v:18,dense_full_width_input_padding_h:16,dense_full_width_input_padding_v:15,dense_full_width_font_size_input:13,color_light_input_text:x(r.vars.color_light_foreground,r.vars.blend_light_text_primary),color_light_input_background:"transparent",color_light_highlight_text:x(r.vars.color_primary,r.vars.blend_light_text_primary),color_light_input_bottom_border:x(r.vars.color_light_foreground,r.vars.blend_light_border_light),color_light_input_error_text:x("221, 44, 0"),color_light_input_error_border:x("221, 44, 0"),color_light_input_placeholder:x(r.vars.color_light_foreground,r.vars.blend_light_text_tertiary),color_light_label_text:x(r.vars.color_light_foreground,r.vars.blend_light_text_tertiary),color_light_disabled_label_text:x(r.vars.color_light_foreground,r.vars.blend_light_text_disabled),color_light_readonly_label_text:x(r.vars.color_light_foreground,r.vars.blend_light_text_tertiary),color_light_help_text:x(r.vars.color_light_foreground,r.vars.blend_light_text_tertiary),color_light_required_symbol:x("221, 44, 0"),color_light_focus_border:x(r.vars.color_primary),color_light_counter_ok_border:x(r.vars.color_primary),color_dark_input_text:x(r.vars.color_dark_foreground,r.vars.blend_dark_text_primary),color_dark_input_background:"transparent",color_dark_highlight_text:x(r.vars.color_primary,r.vars.blend_dark_text_primary),color_dark_input_bottom_border:x(r.vars.color_dark_foreground,r.vars.blend_dark_border_light),color_dark_input_error_text:x("222, 50, 38"),color_dark_input_error_border:x("222, 50, 38"),color_dark_input_placeholder:x(r.vars.color_dark_foreground,r.vars.blend_dark_text_tertiary),color_dark_label_text:x(r.vars.color_dark_foreground,r.vars.blend_dark_text_tertiary),color_dark_disabled_label_text:x(r.vars.color_dark_foreground,r.vars.blend_dark_text_disabled),color_dark_readonly_label_text:x(r.vars.color_dark_foreground,r.vars.blend_dark_text_tertiary),color_dark_help_text:x(r.vars.color_dark_foreground,r.vars.blend_dark_text_tertiary),color_dark_required_symbol:x("221, 44, 0"),color_dark_focus_border:x(r.vars.color_primary),color_dark_counter_ok_border:x(r.vars.color_primary)};e.coreTextField=y,e.vars=k,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-textfield.js.map
