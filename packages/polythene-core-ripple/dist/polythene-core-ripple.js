!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core"),require("polythene-theme"),require("polythene-css-classes")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-theme","polythene-css-classes"],t):t(e.polythene={},e["polythene-core"],e["polythene-theme"],e["polythene-css-classes"])}(this,function(e,t,n,i){"use strict";var a=t.getAnimationEndEvent(),o=function(e,n){if(!t.isServer){var i=window.document,a=i.createElement("style");a.setAttribute("id",e),a.appendChild(i.createTextNode(n)),i.head.appendChild(a)}},r=function(e){if(!t.isServer){var n=document.getElementById(e);n&&n.parentNode&&n.parentNode.removeChild(n)}},s=function(e){var i=e.e,s=e.id,c=e.el,l=e.attrs,d=e.classes;return new Promise(function(e){var p=document.createElement("div");p.setAttribute("class",d.mask),c.appendChild(p);var u=document.createElement("div");u.setAttribute("class",d.waves),p.appendChild(u);var m=c.getBoundingClientRect(),f=t.isTouch&&i.touches?i.touches[0].pageX:i.clientX,h=t.isTouch&&i.touches?i.touches[0].pageY:i.clientY,v=c.offsetWidth,y=c.offsetHeight,g=Math.sqrt(v*v+y*y),E=l.center?m.left+m.width/2:f,C=l.center?m.top+m.height/2:h,b=E-m.left-g/2,w=C-m.top-g/2,O=void 0!==l.startOpacity?l.startOpacity:.2,k=void 0!==l.opacityDecayVelocity?l.opacityDecayVelocity:.35,S=l.endOpacity||0,j=l.startScale||.1,x=l.endScale||2,A=l.duration?l.duration:1/k*.2,L=window.getComputedStyle(c).color,N=u.style;N.width=N.height=g+"px",N.top=w+"px",N.left=b+"px",N["animation-duration"]=N["-webkit-animation-duration"]=N["-moz-animation-duration"]=N["-o-animation-duration"]=A+"s",N.backgroundColor=L,N.opacity=O,N.animationName=s,N.animationTimingFunction=l.animationTimingFunction||n.vars.animation_curve_default,o(s,"@keyframes "+s+" {\n      0% {\n        transform:scale("+j+");\n        opacity: "+O+"\n      }\n      100% {\n        transform:scale("+x+");\n        opacity: "+S+";\n      }\n    }");var T=function t(n){r(s),u.removeEventListener(a,t,!1),l.persistent?(N.opacity=S,N.transform="scale("+x+")"):(u.classList.remove(d.wavesAnimating),p.removeChild(u),c.removeChild(p)),e(n)};u.addEventListener(a,T,!1),u.classList.add(d.wavesAnimating)})},c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=function(e){return e.attrs.element||"div"},d=function(){return{animations:{},animating:!1,cleanUp:void 0}},p=function(e,n){var a=n.keys,o=e.attrs;return c({},t.filterSupportedAttributes(o),{className:[i.rippleClasses.component,o.unconstrained?i.rippleClasses.unconstrained:null,"dark"===o.tone?"pe-dark-tone":null,"light"===o.tone?"pe-light-tone":null,o.className||o[a.class]].join(" ")})},u=function(e){return e.animating=Object.keys(e.animations).length>0},m=function(e){if(e.dom||!t.isServer){var n=e.state,a=e.attrs,o=function(t){if(!(a.disabled||!a.multi&&n.animating)){a.start&&a.start(t);var o="ripple_animation_"+(new Date).getTime();n.animations[o]=s({e:t,id:o,el:e.dom,attrs:a,classes:i.rippleClasses}).then(function(e){a.end&&a.end(e),delete n.animations[o],u(n)}),u(n)}},r=a.target?a.target:e.dom&&e.dom.parentElement;r.addEventListener(t.pointerEndEvent,o,!1),n.cleanUp=function(){return r.removeEventListener(t.pointerEndEvent,o,!1)}}},f=function(e){var t=e.state;return t.cleanUp&&t.cleanUp()},h=Object.freeze({getElement:l,getInitialState:d,createProps:p,onMount:m,onUnMount:f}),v={color:"inherit"};e.coreRipple=h,e.classes=i.rippleClasses,e.vars=v,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-ripple.js.map
