"use strict";var fs=require("fs"),browserify=require("browserify"),sh=require("shelljs"),folders=["base-button","button","card","checkbox","common","config","dialog","element","fab","font-roboto","header-panel","icon","icon-button","layout","list","list-tile","menu","notification","polythene","radio-button","ripple","search","selection-control","shadow","slider","spinner","svg","switch","tabs","textfield","theme","toolbar"],commonUtils=["easing","mixin","multiple","no-tap-delay","object.assign","scroll-to","styler","timer","transition-event","transition","validation-helper","webfontloader"],includes=["layout/theme/flex","layout/theme/theme","notification/snackbar","notification/notification","spinner/ios-spinner","spinner/indeterminate-spinner","spinner/determinate-spinner"],noRequires={common:1,"font-roboto":1,layout:1},filterNoRequires=function(folder){return!noRequires[folder]},formatRequire=function(path){return"require('"+path+"');"},requires=function(formatFn){formatFn=formatFn||function(str){return str};var components=[formatFn("mithril")].concat(folders.filter(filterNoRequires).map(function(folder){return formatFn("polythene/"+folder+"/"+folder)})),utils=[formatFn("fastclick")].concat(commonUtils.map(function(util){return formatFn("polythene/common/"+util)})),extra=includes.map(function(include){return formatFn("polythene/"+include)});return components.concat(utils).concat(extra)},writeRequires=function(callback){console.log("standalone writeRequires"),fs.writeFile("standalone-src.js",requires(formatRequire).join("\r"),"utf8",function(){return console.log("standalone writeRequires done"),callback()})},prepare=function(){console.log("standalone prepare"),sh.mkdir("-p","tmp"),folders.map(function(folder){sh.mv(folder,"tmp/"+folder)}),sh.mv("tmp","polythene"),console.log("standalone prepare done")},teardown=function(){console.log("standalone teardown"),sh.mv("polythene","tmp"),sh.mv("tmp/*","."),sh.rm("-rf","tmp"),sh.rm("-rf","standalone-src.js"),console.log("standalone teardown done")},build=function(){console.log("standalone build");var createBundle=function(entries,outfile){try{browserify({entries:entries,paths:[".","node_modules"],require:requires()}).external("mithril").transform({global:!0},"uglifyify").bundle().on("error",function(err){console.log("Error : "+err.message)}).pipe(fs.createWriteStream(outfile).on("finish",teardown))}catch(e){teardown()}};createBundle(["standalone-src.js"],"polythene-standalone.js")};writeRequires(function(){prepare(),build()});
//# sourceMappingURL=standalone.js.map