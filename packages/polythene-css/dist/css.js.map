{"version":3,"file":null,"sources":["../src/mixin.js","../src/mixin-flex.js","../src/styler.js"],"sourcesContent":["// Mixins for j2c\n\nimport { vars } from \"polythene-theme\";\n\n// Creates j2c vendor key string from vendor list\n// mixin.vendorize({\"user-select\": \"none\"}, vars.prefixes_user_select)\nconst vendorize = (what, prefixes) => {\n  const vendorsSel = prefixes.map((v) => (\"_\" + v + \"$\")).join(\"\");\n  return {\n    [vendorsSel]: what\n  };\n};\n\n// Centers an item absolutely within relative parent\n// mixin.fit()\nconst fit = (offset = 0) => {\n  const offsetPx = offset + \"px\";\n  return {\n    position: \"absolute\",\n    top: offsetPx,\n    right: offsetPx,\n    bottom: offsetPx,\n    left: offsetPx\n  };\n};\n\n// Optional font smoothing\n// mixin.fontSmoothing()\nconst fontSmoothing = (smoothing = true) => {\n  if (smoothing) {\n    return {\n      \"-webkit-font-smoothing\": \"antialiased\",\n      \"-moz-osx-font-smoothing\": \"grayscale\"\n    };\n  } else {\n    return {\n      \"-webkit-font-smoothing\": \"subpixel-antialiased\",\n      \"-moz-osx-font-smoothing\": \"auto\"\n    };\n  }\n};\n\n// Breaks off a line with ...\n// unless lines is \"none\"\n// mixin.ellipsis(1, 16) // max 1 line, 16px high\n// mixin.ellipsis(2, 1.3, \"em\") // max 2 lines, 2.6em high\nconst ellipsis = (lines, lineHeight, unit = \"px\") => {\n  if (lines === \"none\") {\n    return {\n      \"text-overflow\": \"initial\",\n      overflow: \"initial\",\n      display: \"block\",\n      height: \"auto\"\n    };\n  }\n  return Object.assign(\n    {}, {\n      overflow: \"hidden\",\n      \"text-overflow\": \"ellipsis\",\n      \"text-rendering\": \"auto\" // Samsung Android\n    },\n    (lines !== undefined) ? {\n      \"-webkit-line-clamp\": lines,\n      \"-webkit-box-orient\": \"vertical\",\n      display: \"-webkit-box\"\n    } : null,\n    (lineHeight !== undefined) ? {\n      \"max-height\": (lines * lineHeight) + unit\n    } : null\n  );\n};\n\n// Clears float\n// mixin.clearfix()\nconst clearfix = () => ({\n  \"&:after\": {\n    content: \"\\\"\\\"\",\n    display: \"table\",\n    clear: \"both\"\n  }\n});\n\n\n// Creates a very thin line\n// disabled, does not work in Chrome\n// mixin.hairline()\nconst hairline = () => ({});\n\n// const hairline = (which) => ({\n//     [`${which}-width`]: \"1px\",\n//\n//     \" html.pe-hairlines &\": {\n//         [`${which}-width`]: \"0.5px\"\n//     }\n// });\n\n// Test if browser handles 0.5px borders\n// and add class pe-hairlines if so\n// if (window.devicePixelRatio && devicePixelRatio >= 2) {\n//     const el = document.createElement(\"div\");\n//     el.style.border = \".5px solid transparent\";\n//     document.body.appendChild(el);\n//     if (el.offsetHeight === 1) {\n//         document.querySelector(\"html\").classList.add(\"pe-hairlines\");\n//     }\n//     document.body.removeChild(el);\n// }\n\n// Creates sticky headers in a scrollable list\n// Does not work in Chrome: http://caniuse.com/#feat=css-sticky\n// mixin.sticky()\nconst sticky = (zIndex = 1) => ([{\n  position: \"-webkit-sticky\"\n}, {\n  position: \"-moz-sticky\"\n}, {\n  position: \"-o-sticky\"\n}, {\n  position: \"-ms-sticky\"\n}, {\n  position: \"sticky\"\n}, {\n  top: 0,\n  \"z-index\": zIndex\n}]);\n\n// Polythene utility function to generate style objects with scopes\n// Used in theme files\nconst createStyles = (common, fn) => {\n  if (Array.isArray(common)) {\n    return common.map((o) => {\n      for (let scope in o) {\n        return {\n          [scope]: fn(o[scope])\n        };\n      }\n    });\n  } else {\n    return fn(common);\n  }\n};\n\n// Creats a transition with presets\n// mixin.defaultTransition(\"opacity\", vars.animation_duration)\nconst defaultTransition = (properties = \"all\", duration = vars.animation_duration, curve = vars.animation_curve_default) => {\n  return [\n    vendorize({\n      \"transition-delay\": 0\n    }, vars.prefixes_transition),\n    vendorize({\n      \"transition-duration\": duration\n    }, vars.prefixes_transition),\n    vendorize({\n      \"transition-timing-function\": curve\n    }, vars.prefixes_transition),\n    vendorize({\n      \"transition-property\": properties\n    }, vars.prefixes_transition),\n  ];\n};\n\nexport default {\n  clearfix,\n  createStyles,\n  defaultTransition,\n  ellipsis,\n  fit,\n  fontSmoothing,\n  hairline,\n  sticky,\n  vendorize\n};\n\n","const layout = [{\n  \"display\": \"-webkit-box\"\n}, {\n  \"display\": \"-moz-box\"\n}, {\n  \"display\": \"-ms-flexbox\",\n  \"-ms-flex-preferred-size\": \"initial\" // IE10\n}, {\n  \"display\": \"-webkit-flex\"\n}, {\n  \"display\": \"flex\"\n}];\n\nconst layoutInline = [\n  layout, {\n    \"display\": \"-ms-inline-flexbox\"\n  }, {\n    \"display\": \"-webkit-inline-flex\"\n  }, {\n    \"display\": \"inline-flex\"\n  }\n];\n\nconst layoutHorizontal = [\n  layout, {\n    \"-ms-flex-direction\": \"row\",\n    \"-webkit-flex-direction\": \"row\",\n    \"flex-direction\": \"row\"\n  }\n];\n\nconst layoutHorizontalReverse = [\n  layout, {\n    \"-ms-flex-direction\": \"row-reverse\",\n    \"-webkit-flex-direction\": \"row-reverse\",\n    \"flex-direction\": \"row-reverse\"\n  }\n];\n\nconst layoutVertical = [\n  layout, {\n    \"-ms-flex-direction\": \"column\",\n    \"-webkit-flex-direction\": \"column\",\n    \"flex-direction\": \"column\"\n  }\n];\n\nconst layoutVerticalReverse = [\n  layout, {\n    \"-ms-flex-direction\": \"column-reverse\",\n    \"-webkit-flex-direction\": \"column-reverse\",\n    \"flex-direction\": \"column-reverse\"\n  }\n];\n\nconst layoutWrap = [\n  layout, {\n    \"-ms-flex-wrap\": \"wrap\",\n    \"-webkit-flex-wrap\": \"wrap\",\n    \"flex-wrap\": \"wrap\"\n  }\n];\n\nconst layoutWrapReverse = [\n  layout, {\n    \"-ms-flex-wrap\": \"wrap-reverse\",\n    \"-webkit-flex-wrap\": \"wrap-reverse\",\n    \"flex-wrap\": \"wrap-reverse\"\n  }\n];\n\nconst layoutStart = [\n  layout, {\n    \"-ms-flex-align\": \"start\",\n    \"-webkit-align-items\": \"flex-start\",\n    \"align-items\": \"flex-start\"\n  }\n];\n\nconst layoutCenter = [\n  layout, {\n    \"-ms-flex-align\": \"center\",\n    \"-webkit-align-items\": \"center\",\n    \"align-items\": \"center\"\n  }\n];\n\nconst layoutEnd = [\n  layout, {\n    \"-ms-flex-align\": \"end\",\n    \"-webkit-align-items\": \"flex-end\",\n    \"align-items\": \"flex-end\"\n  }\n];\n\nconst layoutJustified = [\n  layout, {\n    \"-ms-flex-line-pack\": \"stretch\", // IE10\n    \"-ms-flex-pack\": \"justify\",\n    \"-webkit-justify-content\": \"space-between\",\n    \"justify-content\": \"space-between\"\n  }\n];\n\nconst layoutStartJustified = [\n  layout, {\n    \"-ms-flex-align\": \"start\", // IE10\n    \"-ms-flex-pack\": \"start\",\n    \"-webkit-justify-content\": \"flex-start\",\n    \"justify-content\": \"flex-start\"\n  }\n];\n\nconst layoutCenterJustified = [\n  layout, {\n    \"-ms-flex-pack\": \"center\",\n    \"-webkit-justify-content\": \"center\",\n    \"justify-content\": \"center\"\n  }\n];\n\nconst layoutEndJustified = [\n  layout, {\n    \"-ms-flex-pack\": \"end\",\n    \"-webkit-justify-content\": \"flex-end\",\n    \"justify-content\": \"flex-end\"\n  }\n];\n\nconst layoutCenterCenter = [\n  layoutCenterJustified,\n  layoutCenter\n];\n\nconst layoutAroundJustified = [\n  layout, {\n    \"-ms-flex-pack\": \"distribute\",\n    \"-webkit-justify-content\": \"space-around\",\n    \"justify-content\": \"space-around\"\n  }\n];\n\nconst flex = (num = 1) => (\n  [{\n    \"-webkit-box-flex\": num\n  }, {\n    \"-moz-box-flex\": num\n  }, {\n    \"-webkit-flex\": num\n  }, {\n    \"-ms-flex\": num\n  }, {\n    \"flex\": num\n  }, num === 1 ? {\n    \"-webkit-flex-basis\": \"0.000000001px\"\n  } : {}, num === 1 ? {\n    \"flex-basis\": \"0.000000001px\"\n  } : {}]\n);\n\nconst flexAuto = {\n  \"-ms-flex\": \"1 1 auto\",\n  \"-webkit-flex-basis\": \"auto\",\n  \"flex-basis\": \"auto\"\n};\n\nconst flexAutoVertical = {\n  \"-ms-flex\": \"1 1 auto\",\n  \"-webkit-flex-basis\": \"auto\",\n  \"flex-basis\": \"auto\"\n};\n\nconst flexIndex = (index) => ({\n  \"-ms-flex\": index,\n  \"-webkit-flex\": index,\n  \"flex\": index\n});\n\nconst flexGrow = (value) => ({\n  \"-webkit-flex-grow\": value,\n  \"flex-grow\": value\n});\n\nconst selfStart = {\n  \"-ms-flex-item-align\": \"start\", // IE10\n  \"-ms-align-self\": \"flex-start\",\n  \"-webkit-align-self\": \"flex-start\",\n  \"align-self\": \"flex-start\"\n};\n\nconst selfCenter = {\n  \"-ms-flex-item-align\": \"center\", // IE10\n  \"-ms-align-self\": \"center\",\n  \"-webkit-align-self\": \"center\",\n  \"align-self\": \"center\"\n};\n\nconst selfEnd = {\n  \"-ms-flex-item-align\": \"end\", // IE10\n  \"-ms-align-self\": \"flex-end\",\n  \"-webkit-align-self\": \"flex-end\",\n  \"align-self\": \"flex-end\"\n};\n\nconst selfStretch = {\n  \"-ms-flex-item-align\": \"stretch\", // IE10\n  \"-ms-align-self\": \"stretch\",\n  \"-webkit-align-self\": \"stretch\",\n  \"align-self\": \"stretch\"\n};\n\nexport default {\n  flex,\n  flexAuto,\n  flexAutoVertical,\n  flexIndex,\n  flexGrow,\n  layout,\n  layoutAroundJustified,\n  layoutCenter,\n  layoutCenterCenter,\n  layoutCenterJustified,\n  layoutEnd,\n  layoutEndJustified,\n  layoutHorizontal,\n  layoutHorizontalReverse,\n  layoutInline,\n  layoutJustified,\n  layoutStart,\n  layoutStartJustified,\n  layoutVertical,\n  layoutVerticalReverse,\n  layoutWrap,\n  layoutWrapReverse,\n  selfCenter,\n  selfEnd,\n  selfStart,\n  selfStretch\n};","import j2c from \"j2c\";\n\n/*\n * Adds styles to head for a component.\n * id: (String) identifier, used as HTMLElement id for the attached <style></style> element\n * styles: [Array} list of lists style objects\n * key: (String) component key in styles object\n * vars: (Object) component configuration variables\n * styleFns: one or more style functions that return j2c style objects, for instance color, layout, ...\n*/\nconst styleComponent = (id, styles, key, vars, ...styleFns) => {\n  const styleVarFn = styles[key];\n  const styleVars = styleVarFn ? styleVarFn(vars) : vars;\n  add(id, styleFns.map(f => f(styleVars)));\n};\n\n/*\n * Create an additional style to head for a component. Does not overwrite existing keys.\n * className: (String) CSS class name\n * styles: [Array} list of lists style objects\n * key: (String) component key in styles object\n * extraVars: (Object) component configuration variables\n*/\nconst addComponentStyle = (className, styles, key, extraVars) =>\n  Object.assign(\n    {},\n    styles,\n    {[key]: vars => [\n      { [`.${className}`]: Object.assign({}, vars, extraVars) }\n    ]}\n  );\n\n/*\n * id: identifier, used as HTMLElement id for the attached <style></style> element\n * styles: list of lists style Objects\n */\nconst add = (id, ...styles) => {\n  addToDocument({\n    id\n  }, ...styles);\n};\n\n/*\n * Removes a style from head.\n */\nconst remove = id => {\n  if (id) {\n    const old = document.getElementById(id);\n    if (old) {\n      old.parentNode.removeChild(old);\n    }\n  }\n};\n\n/*\n * opts: options object\n * id: identifier, used as HTMLElement id for the attached <style></style> element\n * document: document reference; default window.document\n * styles: list of lists style objects\n */\nconst addToDocument = (opts, ...styles) => {\n  const id = opts.id;\n  const documentRef = opts.document || window.document;\n  remove(id);\n  const styleEl = documentRef.createElement(\"style\");\n  if (id) {\n    styleEl.setAttribute(\"id\", id);\n  }\n  styles.forEach((styleList) => {\n    // each style returns a list\n    if (Object.keys(styleList).length) {\n      styleList.forEach((style) => {\n        const scoped = {\n          \"@global\": style\n        };\n        const sheet = j2c.sheet(scoped);\n        styleEl.appendChild(documentRef.createTextNode(sheet));\n      });\n    }\n  });\n  documentRef.head.appendChild(styleEl);\n};\n\nexport default {\n  add,\n  addToDocument,\n  remove,\n  styleComponent,\n  addComponentStyle\n};\n"],"names":["vendorize","what","prefixes","vendorsSel","map","v","join","fit","offset","offsetPx","fontSmoothing","smoothing","ellipsis","lines","lineHeight","unit","babelHelpers.extends","undefined","clearfix","hairline","sticky","zIndex","createStyles","common","fn","Array","isArray","o","scope","defaultTransition","properties","duration","vars","animation_duration","curve","animation_curve_default","prefixes_transition","layout","layoutInline","layoutHorizontal","layoutHorizontalReverse","layoutVertical","layoutVerticalReverse","layoutWrap","layoutWrapReverse","layoutStart","layoutCenter","layoutEnd","layoutJustified","layoutStartJustified","layoutCenterJustified","layoutEndJustified","layoutCenterCenter","layoutAroundJustified","flex","num","flexAuto","flexAutoVertical","flexIndex","index","flexGrow","value","selfStart","selfCenter","selfEnd","selfStretch","styleComponent","id","styles","key","styleFns","styleVarFn","styleVars","f","addComponentStyle","className","extraVars","add","remove","old","document","getElementById","parentNode","removeChild","addToDocument","opts","documentRef","window","styleEl","createElement","setAttribute","forEach","styleList","Object","keys","length","style","scoped","sheet","j2c","appendChild","createTextNode","head"],"mappings":"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"}