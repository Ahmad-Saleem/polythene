{"version":3,"file":"polythene-core-base-spinner.js","sources":["../../polythene-css-classes/base-spinner.js","../src/spinner.js","../src/vars.js"],"sourcesContent":["\nexport default {\n  component:   \"pe-spinner\",\n\n  // elements\n  animation:   \"pe-spinner__animation\",\n  placeholder: \"pe-spinner__placeholder\",\n\n  // states\n  animated:    \"pe-spinner--animated\",\n  fab:         \"pe-spinner--fab\",\n  large:       \"pe-spinner--large\",\n  medium:      \"pe-spinner--medium\",\n  permanent:   \"pe-spinner--permanent\",\n  raised:      \"pe-spinner--raised\",\n  regular:     \"pe-spinner--regular\",\n  singleColor: \"pe-spinner--single-color\",\n  small:       \"pe-spinner--small\",\n  visible:     \"pe-spinner--visible\",\n};\n","import { filterSupportedAttributes, transitionComponent } from \"polythene-core\";\nimport classes from \"polythene-css-classes/base-spinner\";\n\nconst sizeClasses = {\n  small:   classes.small,\n  regular: classes.regular,\n  medium:  classes.medium,\n  large:   classes.large,\n  fab:     classes.fab\n};\n\nconst classForSize = (size = \"regular\") => sizeClasses[size];\n\nconst transitionOptions = (state, attrs, isShow) => ({\n  state,\n  attrs,\n  isShow,\n  domElements: {\n    el: state.dom(),\n  },\n  showClass: classes.visible\n});\n\nconst showSpinner = (state, attrs) =>\n  transitionComponent(transitionOptions(state, attrs, true));\n\nconst hideSpinner = (state, attrs) =>\n  transitionComponent(transitionOptions(state, attrs, false));\n\nexport const getInitialState = (vnode, createStream) => {\n  const transitioning = createStream(false);\n  const visible = createStream(false);\n  const dom = createStream(null);\n  return {\n    dom,\n    visible,\n    transitioning,\n    redrawOnUpdate: createStream.merge([transitioning])\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  state.dom(vnode.dom);\n\n  if (!attrs.permanent) {\n    showSpinner(state, attrs);\n  }\n};\n\nexport const createProps = (vnode, { keys: k }) => {\n  const attrs = vnode.attrs;\n  return Object.assign(\n    {}, \n    filterSupportedAttributes(attrs),\n    {\n      className: [\n        classes.component,\n        attrs.instanceClass,\n        classForSize(attrs.size),\n        attrs.singleColor ? classes.singleColor: null,\n        attrs.raised ? classes.raised : null,\n        attrs.animated ? classes.animated : null,\n        attrs.permanent ? classes.permanent : null,\n        attrs.permanent ? classes.visible : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \"),\n    },\n    attrs.events\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, Shadow }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  if (state.hide) {\n    setTimeout(() => { hideSpinner(state, attrs); }, 0);\n  }\n\n  return [\n    attrs.raised && attrs.content\n      ? h(Shadow, { key: \"shadow\", z: attrs.z })\n      : null,\n    attrs.content\n  ];\n};\n","import { vars } from \"polythene-theme\";\n\nconst rgba = (colorStr, opacity = 1) =>\n  `rgba(${colorStr}, ${opacity})`;\n  \nexport default {\n  size_small:   3 * vars.grid_unit_component,\n  size_regular: 4 * vars.grid_unit_component,\n  size_medium:  5 * vars.grid_unit_component,\n  size_large:   6 * vars.grid_unit_component,\n  size_fab:     7 * vars.grid_unit_component,\n\n  animation_delay:           \"0s\",\n  animation_duration:        \".220s\",\n  animation_timing_function: \"ease-in-out\",\n\n  raisedSize: size => {\n    const padding = size * 0.25;\n    const paddedSize = size + padding * 2;\n    return { padding, paddedSize };\n  },\n\n  color_light_raised_background: rgba(vars.color_light_background),\n  // also use light background with dark tone\n  color_dark_raised_background: rgba(vars.color_light_background)\n};\n"],"names":["component","animation","placeholder","animated","fab","large","medium","permanent","raised","regular","singleColor","small","visible","sizeClasses","classes","classForSize","size","transitionOptions","state","attrs","isShow","domElements","el","dom","showClass","showSpinner","transitionComponent","hideSpinner","getInitialState","vnode","createStream","transitioning","redrawOnUpdate","merge","onMount","createProps","k","keys","filterSupportedAttributes","className","instanceClass","class","join","events","createContent","h","renderer","Shadow","hide","setTimeout","content","key","z","rgba","colorStr","opacity","size_small","vars","grid_unit_component","size_regular","size_medium","size_large","size_fab","animation_delay","animation_duration","animation_timing_function","raisedSize","padding","paddedSize","color_light_raised_background","color_light_background","color_dark_raised_background"],"mappings":"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"}