define(["polythene/polythene/polythene","mithril","polythene/ripple/ripple","polythene/shadow/shadow","css!./button"],function(e,n,t,i){"use strict";var o,a,s,l,r;return o=function(o,a){var s,d,u,c,p;return a=a||{},a.ripple=a.ripple||{cache:!0},a.shadow=a.shadow||{},s=a.tag||(a.url?"a":"div"),c=void 0!==a.ink&&!a.ink,a.disabled&&(s+="[disabled]"),c&&(s+="[noink]"),a.raised&&(s+="[raised]"),d={"class":[a.parentClass||"button",a.selected?"selected":null,a["class"]].join(" ")},a.disabled||(d=Object.assign({},d,{config:function(e,n,t){n||(l(e,o,a.shadow),t.onunload=function(){r(e)})}},a.url?a.url:null,a.events?a.events:null)),p=null,a.label&&(p=n("span",a.label)),a.content&&(p=a.content),u=[n("div",{"class":"content"},[p,a.disabled||c?null:n.component(t,a.ripple),a.disabled||void 0!==a.wash&&!a.wash?null:n(".wash[fit]"),a.raised&&!a.disabled?n.component(i,{z:o.z(),animated:!0}):null])],n(s,d,e.insertContent(u,a))},l=function(e,t,i){var o=function(e){var o,a,s;if(o=5,a=t.baseZ(),s=i.increase||1,5!=a){var l=t.z();"down"===e?(l+=s,l=Math.min(l,o)):"up"==e&&(l-=s,l=Math.max(l,a)),t.z(l),n.redraw()}};a=function(){o("down")},s=function(){o("up")},e.addEventListener("mousedown",a),e.addEventListener("mouseup",s)},r=function(e){e.removeEventListener("mousedown",a),e.removeEventListener("mouseup",s)},{controller:function(e){var t;return t=void 0!==e.z?e.z:1,{view:n.prop(),baseZ:n.prop(t),z:n.prop(t)}},view:function(e,n){var t;return n=n||{},t=e.view(),t&&n.cache?t:(t=o(e,n),n.cache&&e.view(t),t)}}});