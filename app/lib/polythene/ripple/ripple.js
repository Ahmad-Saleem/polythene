define(["polythene/polythene/polythene","mithril","css!./ripple"],function(t,e){"use strict";var n,i,o,a,r,s,l,c;return n=.2,i=.32,r=[],s=function(t,n){var i,o,a,r,s;return n=n||{},n.disabled?e(""):(r=function(e,i,o){i||(t.ripple(e),l(e,t,n),o.onunload=function(){c(e)})},s=function(e,n){n||t.waves(e)},i=n.tag||"div[fit]",o={"class":["ripple",n.constrained!==!1?"constrained":null,n["class"]].join(" "),config:r},a=e(".ripple-mask",e(".ripple-waves",{config:s})),e(i,o,a))},l=function(t,e,n){var i,s;i="mousedown",s="mouseup",o=function(t){e.start(t,e,n)},a=function(t){e.stop(t,e,n)},t.addEventListener(i,o,!1),t.addEventListener(s,a,!1),r=[{type:i,listener:o},{type:s,listener:a}]},c=function(t){r.map(function(e){t.removeEventListener(e.type,e.listener,!1)}),r=[]},{controller:function(o){return o=o||{},{view:e.prop(),ripple:e.prop(),waves:e.prop(),delegate:e.prop(),start:function(e,o,a){var r,s,l,c,p,d,u,f,y,v,m,h,w,g,L,E,b,k;r=o.ripple(),s=o.waves(),s.classList.remove("animated"),v=r.offsetWidth,m=r.offsetHeight,h=Math.sqrt(v*v+m*m),s.style.width=s.style.height=h+"px",u=r.getBoundingClientRect(),a.center?(l=u.left+u.width/2,c=u.top+u.height/2):(l=e.clientX,c=e.clientY),f=u.top-document.body.scrollTop,y=u.left-document.body.scrollLeft,p=l-u.left-h/2,d=c-u.top-h/2,s.style.top=d+"px",s.style.left=p+"px",b=void 0!==a.initialOpacity?a.initialOpacity:n,k=void 0!==a.opacityDecayVelocity?a.opacityDecayVelocity:i,g=1/k*b,s.style["animation-duration"]=s.style["-webkit-animation-duration"]=s.style["-moz-animation-duration"]=s.style["-o-animation-duration"]=g+"s",L=window.getComputedStyle(r).color,s.style.backgroundColor=L,s.style.opacity=b,w=t.whichTransitionEvent(),E=function(t){s.classList.remove("animated"),s.removeEventListener(w,E,!1),a.end&&a.end(t)},s.addEventListener(w,E,!1),a.start&&a.start(e),s.classList.add("animated")},stop:function(){}}},view:function(t,e){var n;return e=e||{},n=t.view(),n&&e.cache?n:(n=s(t,e),e.cache&&t.view(n),n)}}});