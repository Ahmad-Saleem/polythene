!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("polythene-core"),require("polythene-utilities"),require("polythene-theme"),require("polythene-core-button"),require("polythene-core-icon-button")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-utilities","polythene-theme","polythene-core-button","polythene-core-icon-button"],e):e(t.polythene={},t["polythene-core"],t["polythene-utilities"],t["polythene-theme"],t["polythene-core-button"],t["polythene-core-icon-button"])}(this,function(t,e,n,o,r,a){"use strict";function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=function(t){return"rgba("+t+", "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)+")"},s=r.vars.font_size,u=1.1*s,d={tab_min_width:72,tab_max_width:"initial",tab_height:48,label_max_width:264,menu_tab_height:44,menu_tab_icon_label_height:44,tab_icon_label_height:72,tab_icon_label_icon_spacing:7,indicator_slide_speed:600,indicator_slide_min_duration:.25,tabs_indent:o.vars.unit_indent,tabs_scroll_speed:600,tabs_scroll_delay:.15,tabs_scroll_min_duration:.5,scroll_button_fade_duration:.2,scroll_button_fade_delay:.5,tab_content_padding_v:12,tab_menu_content_padding_v:6,tab_indicator_height:2,scrollbar_offset:20,scroll_button_opacity:.7,label_opacity:.7,tab_label_line_height:u,tab_label_vertical_offset:u-s,tab_label_transition_property:"opacity, color, backgroundColor",color_light:"inherit",color_light_selected:i(o.vars.color_primary),color_light_selected_background:"transparent",color_light_tab_indicator:i(o.vars.color_primary),color_light_icon:a.vars.color_light,color_dark:"inherit",color_dark_selected:i(o.vars.color_primary),color_dark_selected_background:"transparent",color_dark_tab_indicator:i(o.vars.color_primary),color_dark_icon:a.vars.color_dark},b={component:"pe-tabs",indicator:"pe-tabs__indicator",scrollButton:"pe-tabs__scroll-button",scrollButtonAtEnd:"pe-tabs__scroll-button-end",scrollButtonAtStart:"pe-tabs__scroll-button-start",scrollButtonOffset:"pe-tabs__scroll-button-offset",tab:"pe-tabs__tab",tabContent:"pe-tabs__tab-content",tabRow:"pe-tabs__row",activeSelectable:"pe-tabs__active--selectable",isAtEnd:"pe-tabs--end",isAtStart:"pe-tabs--start",isAutofit:"pe-tabs--autofit",isMenu:"pe-tabs--menu",scrollable:"pe-tabs--scrollable",compactTabs:"pe-tabs--compact",tabHasIcon:"pe-tabs__tab---icon",tabRowCentered:"pe-tabs__row--centered",tabRowIndent:"pe-tabs__row--indent",label:{base:"pe-button",component:"pe-button pe-text-button",content:"pe-button__content",focus:"pe-button__focus",label:"pe-button__label",wash:"pe-button__wash",borders:"pe-button--borders",disabled:"pe-button--disabled",focused:"pe-button--focus",inactive:"pe-button--inactive",selected:"pe-button--selected"}.label},_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},p=function(){return Promise.resolve()},f=function(t,e){var n=e.length-1;return{backward:Math.max(t-1,0),forward:Math.min(t+1,n)}},h=function(t,e,n,o){n.stopPropagation(),n.preventDefault();var r=t.selectedTabIndex(),a=f(r,t.tabs)[o];a!==r?B(t,e,a,!0):m(t,a)},v=function(t){var e=t.tabs[0].dom,n=e.querySelector("."+b.label+" span"),o=(e.getBoundingClientRect().width-n.getBoundingClientRect().width)/2;e.style.marginLeft=-o+"px"},g=function(t){var e=t.scrollButtons.end.getBoundingClientRect().width;t.tabsEl.querySelector("."+b.scrollButtonOffset).style.width=e+"px"},m=function(t,e){var o=t.tabs,r=t.scrollerEl,a=o.slice(0,e).reduce(function(t,e){return t+e.dom.getBoundingClientRect().width},0),l=r.getBoundingClientRect().width,c=r.scrollWidth-l,i=Math.min(a,c),s=r.scrollLeft;if(s!==i){var u=Math.abs(s-i)/d.tabs_scroll_speed,b=d.tabs_scroll_delay||0;setTimeout(function(){n.scrollTo({element:r,to:i,duration:Math.max(d.tabs_scroll_min_duration,u),direction:"horizontal"})},1e3*b)}},y=function(t){var e=t.scrollerEl,n=e.scrollLeft,o=t.selectedTabIndex(),r=t.tabsEl,a=t.tabs.length-1,l=0===e.scrollLeft&&0===o,c=n>=e.scrollWidth-r.getBoundingClientRect().width-1&&o===a;t.scrollButtonStates.start=!l,t.scrollButtonStates.end=!c},w=function(t,e,n){var o=n.tabsEl.getBoundingClientRect(),r=t.getBoundingClientRect(),a=n.tabIndicatorEl.style,l="translate("+(r.left-o.left+n.scrollerEl.scrollLeft)+"px, 0)",c=e?d.indicator_slide_min_duration:0;a.width=r.width+"px",a["transition-duration"]=c+"s",a.transform=l},B=function(t,e,n,o){if(t.selectedTabIndex(n),t.tabs.length){var r=t.tabs[n].dom;r&&t.tabIndicatorEl&&t.tabsEl&&w(r,o,t),t.managesScroll&&(y(t),m(t,n)),e.onChange&&e.onChange({index:n,options:t.tabs[n].attrs,el:r})}},k=function(t,e){return t<e?1:t>e?-1:0},S=function(t,n){var o=t.attrs,r=n(t.attrs.selectedTab||0),a=function(t){return function(e,n){return t.tabs[e]=n}},l=function(t){return function(e,n){return t.scrollButtons[e]=n}};return{tabsEl:void 0,scrollerEl:void 0,tabs:[],tabRow:void 0,tabIndicatorEl:void 0,selectedTabIndex:r,previousSelectedTab:void 0,managesScroll:o.scrollable&&!e.isTouch,scrollButtonStates:{start:!1,end:!1},scrollButtons:{start:void 0,end:void 0},registerTabButton:a,registerScrollButton:l,cleanUp:void 0,redrawOnUpdate:n.merge([r])}},T=function(t){var n=t.dom,o=t.state,r=t.attrs;o.tabsEl=n,r.hideIndicator||(o.tabIndicatorEl=n.querySelector("."+b.indicator)),o.scrollerEl=n.querySelector("."+b.tabRow),p().then(function(){if(o.tabs&&r.largestWidth){var t=o.tabs.map(function(t){return t.dom.getBoundingClientRect().width}).sort(k)[0];o.tabs.forEach(function(e){return e.dom.style.width=t+"px"})}r.scrollable&&v(o),o.managesScroll&&g(o),B(o,r,o.selectedTabIndex(),!1)});var a=function(){return B(o,r,o.selectedTabIndex(),!1)};e.subscribe("resize",a),o.cleanUp=function(){return e.unsubscribe("resize",a)}},x=function(t){return t.state.cleanUp()},I=function(t,n){var o=n.keys,r=t.state,a=t.attrs,l=!a.scrollable&&!a.centered&&!!a.autofit;return void 0!==a.selectedTab&&r.previousSelectedTab!==a.selectedTab&&B(r,a,a.selectedTab,!0),r.previousSelectedTab=a.selectedTab,_({},e.filterSupportedAttributes(a),{className:[b.component,a.scrollable?b.scrollable:null,0===r.selectedTabIndex?b.isAtStart:null,r.selectedTabIndex===r.tabs.length-1?b.isAtEnd:null,a.activeSelected?b.activeSelectable:null,l?b.isAutofit:null,a.compact?b.compactTabs:null,a.menu?b.isMenu:null,"dark"===a.tone?"pe-dark-tone":null,"light"===a.tone?"pe-light-tone":null,a.className||a[o.class]].join(" ")})},E=function(t,e){var n=e.renderer,o=e.keys,r=e.Tab,a=e.ScrollButton,c=t.state,i=t.attrs,s=i.content?i.content:i.tabs?i.tabs:i.children||t.children||[];0===s.length&&console.error("No tabs specified");var u=s.map(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],o=_({},t,{selected:e===c.selectedTabIndex(),animateOnTap:!1!==i.animateOnTap},i.all,{index:e,key:"tab-"+e,register:c.registerTabButton(c),onSelect:function(){return B(c,i,e,!i.noIndicatorSlide)}});return n(r,o)}),d=i.scrollable?u.concat([n("div",{key:"offset",className:b.scrollButtonOffset})]):u,p=void 0,f=void 0;i.scrollable&&(p=n(a,_({},{key:"backward",icon:i.scrollIconBackward,className:b.scrollButtonAtStart,position:"start",register:c.registerScrollButton(c),events:l({},o.onclick,function(t){return h(c,i,t,"backward")})})),f=n(a,_({},{key:"forward",icon:i.scrollIconForward,className:b.scrollButtonAtEnd,position:"end",register:c.registerScrollButton(c),events:l({},o.onclick,function(t){return h(c,i,t,"forward")})})));var v=i.hideIndicator?null:n("div",{key:"indicator",className:b.indicator});return[i.scrollable?p:null,n("div",{key:"tabrow",className:[b.tabRow,i.centered?b.tabRowCentered:null,i.scrollable?b.tabRowIndent:null].join(" ")},[d,v]),i.scrollable?f:null]},C=Object.freeze({getInitialState:S,onMount:T,onUnMount:x,createProps:I,createContent:E}),O=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},R=function(t){var e=t.dom;if(e){var n=t.attrs;n.register(n.index,{attrs:n,dom:e})}},j=function(t,e){var n=e.renderer,o=e.keys,r=e.Icon,a=t.attrs;return a.events=a.events||{},a.events[o.onclick]=a.events[o.onclick]||function(){},O({},a,{content:n("div",{className:b.tabContent},[a.icon?n(r,a.icon):null,a.label?n("div",{className:b.label},n("span",a.label)):null]),className:[b.tab,a.icon&&a.label?b.tabHasIcon:null,a.className||a[o.class]].join(" "),selected:a.selected,wash:!1,ripple:!0,events:O({},a.events,c({},o.onclick,function(t){a.onSelect(),a.events[o.onclick](t)}))})},M=function(){return null},N=Object.freeze({onMount:R,createProps:j,createContent:M}),A=function(t){var e=t.dom;if(e){var n=t.attrs;n.register(n.position,e)}},P=function(t,e){var n=e.renderer,o=e.keys,r=t.attrs,a="start"===r.position?r.icon||{svg:{content:n.trust('<svg width="24" height="24" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>')}}:r.icon||{svg:{content:n.trust('<svg width="24" height="24" viewBox="0 0 24 24"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>')}};return{className:[b.scrollButton,r.className||r[o.class]].join(" "),icon:a,ripple:{center:!0},events:r.events}},q=Object.freeze({onMount:A,createProps:P});t.coreTabs=C,t.coreTab=N,t.coreScrollButton=q,t.vars=d,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-tabs.js.map
