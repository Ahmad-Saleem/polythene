{"version":3,"file":"polythene-css-slider.js","sources":["../src/layout.js","../src/color.js","../src/index.js"],"sourcesContent":["import { vars } from \"polythene-theme\";\nimport { mixin, flex } from \"polythene-core-css\";\n\n// const positionBorder = (thumbSize, borderWidth) => ({\n//   borderWidth: borderWidth + \"px\",\n//   width: (thumbSize - 2 * borderWidth) + \"px\",\n//   height: (thumbSize - 2 * borderWidth) + \"px\",\n//   left: \"2px\",\n//   top: \"2px\"\n// });\n\nconst positionBorder = (size, borderWidth, isDisabled) => {\n  const thumbSize = isDisabled\n    ? size - 2 * borderWidth\n    : size;\n  return {\n    borderWidth: borderWidth + \"px\",\n    width: thumbSize + \"px\",\n    height: thumbSize + \"px\",\n    left: (size - thumbSize) + \"px\",\n    top: (size - thumbSize) + \"px\"\n  };\n};\n\nexport default (selector, componentVars) => {\n  const thumbSize =         Math.max(componentVars.thumb_size, 2 * componentVars.thumb_border_width);\n  const scaledThumbDiff =   (componentVars.active_thumb_scale - 1) * thumbSize / 2;\n  const barOffset =         thumbSize / 2;\n  const scaledBorderWidth = Math.max(1, componentVars.thumb_border_width / componentVars.active_thumb_scale);\n  const thumbTouchSize =    componentVars.thumb_touch_size;\n  const stepsOffset =       barOffset - 1;\n\n  return [{\n    [selector]: [\n      flex.layoutHorizontal,\n      flex.flexGrow(1),\n      {\n        userSelect: \"none\",\n        height: componentVars.height + \"px\",\n        marginTop: ((componentVars.height - componentVars.track_height) / 2) + \"px \",\n        alignItems: \"center\",\n        \n        \" > .pe-icon\": [\n          flex.layoutCenter,\n          {\n            height: componentVars.height + \"px\"\n          }\n        ],\n\n        \" .pe-slider__track\": [\n          flex.layoutHorizontal,\n          flex.flexGrow(1),\n          mixin.defaultTransition(\"transform\", componentVars.animation_duration),\n          {\n            userSelect: \"none\",\n            position: \"relative\",\n            height: componentVars.track_height + \"px\",\n            margin: \"0 \" + componentVars.side_spacing + \"px\",\n            outline: 0\n          }\n        ],\n        \" div + .pe-slider__track\": {\n          margin: \"0 \" + componentVars.horizontal_layout_side_spacing + \"px\"\n        },\n\n        \" .pe-slider__control\": [\n          flex.selfCenter,\n          mixin.defaultTransition(\"transform, background\", \".200s\"),\n          {\n            transform: \"scale(1)\",\n            userSelect: \"none\",\n            width: thumbSize + \"px\",\n            height: thumbSize + \"px\",\n            lineHeight: 0,\n            borderRadius: \"50%\",\n            outline: 0,\n            zIndex: 1,\n            position: \"relative\",\n\n            // touch area\n            \":before\": [\n              mixin.defaultTransition(\"background-color\", componentVars.animation_duration), {\n                content: \"\\\"\\\"\",\n                position: \"absolute\",\n                borderRadius: \"50%\",\n                left: (-thumbTouchSize / 2 + thumbSize / 2) + \"px\",\n                top: (-thumbTouchSize / 2 + thumbSize / 2) + \"px\",\n                width: thumbTouchSize + \"px\",\n                height: thumbTouchSize + \"px\"\n              }\n            ],\n\n            // border\n            \":after\": [\n              mixin.defaultTransition(\"border\", componentVars.animation_duration),\n              positionBorder(thumbSize, componentVars.thumb_border_width, false), {\n                content: \"\\\"\\\"\",\n                position: \"absolute\",\n                borderRadius: \"50%\",\n                borderStyle: \"solid\"\n              }\n            ]\n          }\n        ],\n\n        \" .pe-slider__thumb\": [\n          mixin.defaultTransition(\"opacity\", componentVars.animation_duration),\n          mixin.fit(), {\n            \"&, .pe-icon\": {\n              width: \"inherit\",\n              height: \"inherit\"\n            }\n          }\n        ],\n\n        \" .pe-slider__label\": {\n          height: componentVars.height + \"px\",\n          lineHeight: componentVars.height + \"px\",\n          minWidth: vars.unit_icon_size + \"px\",\n          textAlign: \"center\",\n          fontSize: \"16px\",\n          fontWeight: vars.font_weight_medium\n        },\n\n        \" .pe-slider__track-part\": [\n          flex.flex(),\n          {\n            userSelect: \"none\",\n            height: componentVars.bar_height + \"px\",\n            margin: ((componentVars.track_height - componentVars.bar_height) / 2) + \"px 0\",\n            overflow: \"hidden\" // Firefox otherwise uses 6x at 0%\n          }\n        ],\n\n        \" .pe-slider__track-value, .pe-slider__track-rest\": flex.layoutHorizontal,\n\n        \" .pe-slider__track-bar\": [\n          flex.flex(), {\n            position: \"relative\",\n            overflow: \"hidden\"\n          }\n        ],\n        \" .pe-slider__track-bar-value\": [\n          flex.flex(),\n          mixin.defaultTransition(\"transform, background-color\", componentVars.animation_duration), {\n            height: componentVars.bar_height + \"px\"\n          }\n        ],\n        \" .pe-slider__track-value .pe-slider__track-bar\": {\n          marginLeft: barOffset + \"px\"\n        },\n        \" .pe-slider__track-rest .pe-slider__track-bar\": {\n          marginRight: barOffset + \"px\"\n        },\n\n        \" .pe-slider__ticks\": [\n          flex.layoutJustified,\n          {\n            userSelect: \"none\",\n            position: \"absolute\",\n            width: \"calc(100% - \" + (2 * stepsOffset) + \"px)\",\n            height: componentVars.bar_height + \"px\",\n            left: 0,\n            top: ((componentVars.height / 2) - 1) + \"px\",\n            margin: \"0 \" + stepsOffset + \"px\",\n            pointerEvents: \"none\"\n          }\n        ],\n\n        \" .pe-slider__ticks-tick\": {\n          width: componentVars.step_width + \"px\",\n          height: componentVars.bar_height + \"px\"\n        },\n\n        \" .pe-slider__pin\": [\n          mixin.defaultTransition(\"transform\", \".11s\"),\n          {\n            transform: \"translateZ(0) scale(0) translate(0, 0)\",\n            transformOrigin: \"bottom\",\n            position: \"absolute\",\n            zIndex: 1,\n            width: componentVars.pin_width + \"px\",\n            height: 0,\n            left: 0, // set in js\n            top: 0,\n            margin: \"0 \" + stepsOffset + \"px 0 \" + (stepsOffset - componentVars.pin_width / 2 + 1) + \"px\",\n            pointerEvents: \"none\",\n\n            \"::before\": {\n              transform: \"rotate(-45deg)\",\n              content: \"\\\"\\\"\",\n              position: \"absolute\",\n              top: 0,\n              left: 0,\n              width: componentVars.pin_width + \"px\",\n              height: componentVars.pin_width + \"px\",\n              borderRadius: \"50% 50% 50% 0\",\n              backgroundColor: \"inherit\"\n            },\n            \"::after\": {\n              content: \"attr(value)\",\n              position: \"absolute\",\n              top: 0,\n              left: 0,\n              width: componentVars.pin_width + \"px\",\n              height: componentVars.pin_height + \"px\",\n              textAlign: \"center\",\n              color: \"#fff\",\n              fontSize: componentVars.pin_font_size + \"px\",\n              lineHeight: componentVars.pin_width + \"px\"\n            }\n          }\n        ],\n\n        \".pe-slider--active:not(.pe-slider--ticks)\": {\n          \" .pe-slider__control\": {\n            transform: \"scale(\" + componentVars.active_thumb_scale + \")\",\n            borderWidth: scaledBorderWidth + \"px\"\n          },\n          // left side\n          \" .pe-slider__track-value .pe-slider__track-bar-value\": {\n            transform: \"translateX(\" + (-scaledThumbDiff) + \"px)\"\n          },\n          // right side\n          \" .pe-slider__track-rest .pe-slider__track-bar-value\": {\n            transform: \"translateX(\" + (scaledThumbDiff) + \"px)\"\n          }\n        },\n\n        \".pe-slider--pin.pe-slider--active, &.pe-slider--pin.pe-slider--focus\": {\n          \" .pe-slider__pin\": {\n            transform: \"translateZ(0) scale(1) translate(0, -24px)\"\n          },\n          \" .pe-slider__control\": {\n            transform: \"scale(\" + componentVars.active_pin_thumb_scale + \")\"\n          }\n        },\n\n        \":not(.pe-slider--disabled)\": {\n          \" .pe-slider__control\": {\n            cursor: \"pointer\"\n          },\n          \".pe-slider--track\": {\n            \" .pe-slider__track\": {\n              cursor: \"pointer\"\n            }\n          }\n        },\n\n        \".pe-slider--disabled\": {\n          \" .pe-slider__control\": {\n            transform: \"scale(\" + componentVars.disabled_thumb_scale + \")\",\n            borderWidth: 0\n          },\n          \" .pe-slider__control:after\": [\n            positionBorder(thumbSize, 1 / componentVars.disabled_thumb_scale * componentVars.thumb_border_width, true)\n          ]\n        }\n      }\n    ]\n  }];\n};\n","\nconst style = (scopes, selector, componentVars, tint) => [{\n  [scopes.map(s => s + selector).join(\",\")]: {\n    color: componentVars[\"color_\" + tint + \"_thumb_on\"], // override by specifying \"color\"\n\n    \" .pe-slider__control\": {\n      \"&:after\": {\n        borderColor: \"transparent\"\n      }\n    },\n    \" .pe-slider__track-bar-value\": {\n      background: componentVars[\"color_\" + tint + \"_track_inactive\"]\n    },\n\n    \" .pe-slider__ticks-tick\": {\n      background: componentVars[\"color_\" + tint + \"_tick\"]\n    },\n\n    \" .pe-slider__pin\": {\n      backgroundColor: \"currentcolor\"\n    },\n\n    \" .pe-icon\": {\n      color: componentVars[\"color_\" + tint + \"_disabled_icon\"]\n    },\n\n    \" .pe-slider__label\": {\n      color: componentVars[\"color_\" + tint + \"_disabled_label\"]\n    },\n\n    // states\n\n    \"&.pe-slider--active\": {\n      \" .pe-slider__track-bar-value\": {\n        background: componentVars[\"color_\" + tint + \"_track_active\"]\n      },\n    },\n\n    \".pe-slider--disabled\": {\n      \" .pe-slider__control\": {\n        background: componentVars[\"color_\" + tint + \"_thumb_inactive\"]\n      }\n    },\n\n    \"&:not(.pe-slider--disabled)\": {\n      \" .pe-slider__control\": {\n        backgroundColor: componentVars[\"color_\" + tint + \"_thumb_background\"] || \"currentcolor\",\n\n        \"&:before\": {\n          opacity: componentVars[\"color_\" + tint + \"_thumb_off_focus_opacity\"]\n        }\n      },\n      \" .pe-slider__track-value .pe-slider__track-bar-value\": {\n        background: \"currentcolor\"\n      },\n      \"&.pe-slider--focus.pe-slider--min:not(.pe-slider--pin) .pe-slider__control:before,\\\n      &.pe-slider--min:not(.pe-slider--pin) .pe-slider__control:focus:before\": {\n        backgroundColor: componentVars[\"color_\" + tint + \"_thumb_off_focus\"]\n      },\n      \"&.pe-slider--focus:not(.pe-slider--min):not(.pe-slider--pin) .pe-slider__control:before,\\\n      &:not(.pe-slider--min):not(.pe-slider--pin) .pe-slider__control:focus:before\": {\n        backgroundColor: \"currentcolor\",\n        opacity: componentVars[\"color_\" + tint + \"_thumb_on_focus_opacity\"]\n      },\n      \" .pe-icon\": {\n        color: componentVars[\"color_\" + tint + \"_icon\"]\n      },\n      \" .pe-slider__label\": {\n        color: componentVars[\"color_\" + tint + \"_label\"]\n      }\n    },\n\n    \"&.pe-slider--min:not(.pe-slider--disabled)\": {\n      \" .pe-slider__control\": {\n        backgroundColor: \"transparent\"\n      },\n      \" .pe-slider__thumb\": {\n        opacity: 0\n      },\n      \" .pe-slider__control:after\": {\n        borderColor: componentVars[\"color_\" + tint + \"_track_inactive\"]\n      },\n      \"&.pe-slider--active .pe-slider__control:after\": {\n        borderColor: componentVars[\"color_\" + tint + \"_track_active\"]\n      },\n      \"&.pe-slider--ticks\": {\n        \" .pe-slider__control\": {\n          backgroundColor: componentVars[\"color_\" + tint + \"_tick\"]\n        },\n        \" .pe-slider__control:after\": {\n          borderColor: \"transparent\"\n        }\n      },\n      \" .pe-slider__pin\": {\n        backgroundColor: componentVars[\"color_\" + tint + \"_track_inactive\"]\n      }\n    }\n  }\n}];\n\nexport default (selector, componentVars) => [\n  style([\".pe-dark-tone\", \".pe-dark-tone \"], selector, componentVars, \"dark\"), // has/inside dark tone\n  style([\"\", \".pe-light-tone\", \".pe-light-tone \"], selector, componentVars, \"light\"), // normal, has/inside light tone\n];\n","import { styler } from \"polythene-core-css\";\nimport { classes, vars } from \"polythene-core-slider\";\nimport layout from \"./layout\";\nimport color from \"./color\";\n\nconst fns = [layout, color];\nconst selector = `.${classes.component}`;\n\nexport const addStyle = (customSelector, customVars) => \n  styler.generateStyles([customSelector, selector], {...vars, ...customVars}, fns);\n\nexport const getStyle = (customSelector, customVars) => \n  customSelector\n    ? styler.createStyleSheets([customSelector, selector], {...vars, ...customVars}, fns)\n    : styler.createStyleSheets([selector], vars, fns);\n\nstyler.generateStyles([selector], vars, fns);\n"],"names":["positionBorder","size","borderWidth","isDisabled","thumbSize","selector","componentVars","Math","max","thumb_size","thumb_border_width","scaledThumbDiff","active_thumb_scale","barOffset","scaledBorderWidth","thumbTouchSize","thumb_touch_size","stepsOffset","flex","layoutHorizontal","flexGrow","height","track_height","layoutCenter","mixin","defaultTransition","animation_duration","side_spacing","horizontal_layout_side_spacing","selfCenter","fit","vars","unit_icon_size","font_weight_medium","bar_height","layoutJustified","step_width","pin_width","pin_height","pin_font_size","active_pin_thumb_scale","disabled_thumb_scale","style","scopes","tint","map","s","join","fns","layout","color","classes","component","addStyle","customSelector","customVars","styler","generateStyles","getStyle","createStyleSheets"],"mappings":"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"}