!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("mithril"),require("polythene-icon"),require("polythene-shadow"),require("polythene-list-tile"),require("polythene-core"),require("polythene-css"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","mithril","polythene-icon","polythene-shadow","polythene-list-tile","polythene-core","polythene-css","polythene-theme"],t):t(e.polythene=e.polythene||{},e.m,e["polythene-icon"],e["polythene-shadow"],e["polythene-list-tile"],e["polythene-core"],e["polythene-css"],e["polythene-theme"])}(this,function(e,t,i,a,r,o,n,d){"use strict";function _(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}t="default"in t?t.default:t,i="default"in i?i.default:i,a="default"in a?a.default:a,r="default"in r?r.default:r;var p=d.vars.rgba,c={image_size_small:80,image_size_regular:112,image_size_medium:160,image_size_large:240,border_radius:d.vars.unit_block_border_radius,padding_h:16,offset_small_padding_v:8,padding_actions_h:8,title_padding_h:16,title_padding_v:24,tight_title_padding_bottom:16,text_padding_h:16,text_padding_v:16,text_padding_bottom:24,tight_text_padding_bottom:16,subtitle_line_height_padding_bottom:7,text_line_height_padding_top:6,text_line_height_padding_bottom:7,one_line_height_with_icon:72,icon_element_width:68,one_line_padding_v:8,actions_padding_v:2,actions_button_margin_v:2,actions_vertical_padding_v:6,color_light_main_background:p(d.vars.color_light_background),color_light_title_text:p(d.vars.color_light_foreground,d.vars.blend_light_text_primary),color_light_subtitle_text:p(d.vars.color_light_foreground,d.vars.blend_light_text_secondary),color_light_text:p(d.vars.color_light_foreground,d.vars.blend_light_text_regular),color_light_actions_border:p(d.vars.color_light_foreground,d.vars.blend_light_border_light),color_light_overlay_background:p(d.vars.color_light_foreground,d.vars.blend_light_overlay_background),color_dark_main_background:p(d.vars.color_dark_background),color_dark_title_text:p(d.vars.color_dark_foreground,d.vars.blend_dark_text_primary),color_dark_subtitle_text:p(d.vars.color_dark_foreground,d.vars.blend_dark_text_secondary),color_dark_text:p(d.vars.color_dark_foreground,d.vars.blend_dark_text_regular),color_dark_actions_border:p(d.vars.color_dark_foreground,d.vars.blend_dark_border_light),color_dark_overlay_background:p(d.vars.color_dark_foreground,d.vars.blend_dark_overlay_background)},s=function(e,t){return[_({},e,{display:"block",position:"relative",borderRadius:t.border_radius+"px","&, a:link, a:visited":{textDecoration:"none"}," .pe-card__content":{position:"relative",borderRadius:"inherit",overflow:"hidden",width:"inherit",height:"inherit"}," .pe-card__media":{position:"relative",overflow:"hidden",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit",zIndex:1,"&.pe-card__media--landscape":{paddingBottom:Math.floor(56.25)+"%"},"&.pe-card__media--square":{paddingBottom:"100%"},"&:last-child":{"&, img":{borderBottomLeftRadius:t.border_radius+"px",borderBottomRightRadius:t.border_radius+"px"}}," img":[n.mixin.fit(),{display:"none",width:"100%",maxWidth:"initial","&.pe-card__media--crop-x":{width:"100%",height:"auto",display:"block"},"&.pe-card__media--crop-y":{height:"100%",width:"auto",display:"block"}}]}," .pe-card__header + .pe-card__media":{borderTopLeftRadius:0,borderTopRightRadius:0}," .pe-card__primary-media":{margin:"16px 16px 0 16px"," .pe-card__media--small":{width:t.image_size_small+"px"}," .pe-card__media--regular":{width:t.image_size_regular+"px"}," .pe-card__media--medium":{width:t.image_size_medium+"px"}," .pe-card__media--large":{width:t.image_size_large+"px",marginBottom:"16px"}," .pe-card__media":{"&, img":{borderRadius:0}}," .shadow + &":{"&, img":{borderTopLeftRadius:t.border_radius+"px",borderTopRightRadius:t.border_radius+"px"}}}," .pe-card__overlay":n.mixin.fit()," .pe-card__media__dimmer":[n.mixin.fit(),{zIndex:1}]," .pe-card__overlay__content":{position:"absolute",bottom:0,top:"auto",right:0,left:0,zIndex:2}," .pe-card__header":{height:t.one_line_height_with_icon+"px"," .pe-list-tile__title":{fontSize:"14px",fontWeight:d.vars.font_weight_normal,lineHeight:"20px",marginTop:"2px"}," .pe-list-tile__subtitle":{marginTop:"-1px"}}," .pe-card__primary":[n.flex.layoutHorizontal,{position:"relative","&.pe-card__primary--media:not(:last-child)":{paddingBottom:"16px"},"&.pe-card__primary--media + .pe-card__actions":{marginTop:"-16px"},"& + .pe-card__text":{marginTop:"-16px"},"&.pe-card__primary--tight":{" .pe-card__title":{paddingBottom:t.tight_title_padding_bottom-t.subtitle_line_height_padding_bottom+"px"}}}]," .pe-card__title":[n.flex.flex(),{padding:[t.title_padding_v,t.title_padding_h,t.title_padding_v-t.subtitle_line_height_padding_bottom,t.title_padding_h].map(function(e){return e+"px"}).join(" "),fontSize:"24px",lineHeight:"29px"}]," .pe-card__subtitle":{fontSize:"14px",lineHeight:"24px"}," .pe-card__actions":[{minHeight:"52px",padding:t.actions_padding_v+"px "+t.padding_actions_h+"px","&.pe-card__actions--tight":{minHeight:0,padding:0},"&.pe-card__actions--horizontal:not(.pe-card__actions--justified)":[n.flex.layoutHorizontal,n.flex.layoutCenter,{" :first-child":{marginLeft:0}," .pe-button":{minWidth:0}," .pe-button--icon":{marginRight:"8px"}}],"&.pe-card__actions--justified":[n.flex.layoutJustified],"&.pe-card__actions--vertical":[n.flex.layoutVertical,{":not(.pe-card__actions--tight)":{paddingTop:t.actions_vertical_padding_v+"px",paddingBottom:t.actions_vertical_padding_v+"px"}," .pe-card__actions":[{marginLeft:-t.padding_actions_h+"px",marginRight:-t.padding_actions_h+"px",minHeight:0,"&:first-child":{marginTop:-t.actions_vertical_padding_v+"px"},"&:last-child":{marginBottom:-t.actions_vertical_padding_v+"px"}}]," .pe-button":{height:"36px",padding:0,marginTop:t.actions_button_margin_v+"px",marginBottom:t.actions_button_margin_v+"px"}," .pe-list":{padding:0}}]}]," .pe-card__text":{paddingTop:t.text_padding_v-t.text_line_height_padding_top+"px",paddingRight:t.text_padding_h+"px",paddingLeft:t.text_padding_h+"px",paddingBottom:t.tight_text_padding_bottom-t.text_line_height_padding_bottom+"px",fontSize:"14px",lineHeight:"24px","&:last-child":{paddingBottom:t.text_padding_bottom-t.text_line_height_padding_bottom+"px"},"&.pe-card__text--tight, &.pe-card__text--tight:last-child":{paddingBottom:t.tight_text_padding_bottom-t.text_line_height_padding_bottom+"px"}," .pe-card__actions + &":{marginTop:"8px"}}," .pe-card__text, .pe-card__primary":{"& + .pe-card__actions:not(:last-child)":{marginTop:-(t.offset_small_padding_v+1)+"px",marginBottom:-(t.offset_small_padding_v-1)+"px"}}})]},g=function(e,t,i,a){return[l({},e.map(function(e){return e+t}).join(","),{backgroundColor:i["color_"+a+"_main_background"]})]},u=function(e,t,i,a){return[l({},e.map(function(e){return e+t}).join(","),{" .pe-card__title":{color:i["color_"+a+"_title_text"]}," .pe-card__subtitle":{color:i["color_"+a+"_subtitle_text"]}," .pe-card__text":{color:i["color_"+a+"_text"]}," .pe-card__actions--borders":{borderTop:"1px solid "+i["color_"+a+"_actions_border"]}})]},m=function(e,t,i,a){return[l({},e.map(function(e){return e+".pe-card__overlay--sheet"}).join(","),{" .pe-card__overlay__content":{backgroundColor:i["color_"+a+"_overlay_background"]}})]},h=function(e,t){return[g([".pe-dark-tone",".pe-dark-tone "],e,t,"dark"),g(["",".pe-light-tone",".pe-light-tone "],e,t,"light"),u([".pe-dark-tone",".pe-dark-tone "],e,t,"dark"),u(["",".pe-light-tone",".pe-light-tone "],e,t,"light"),m([".pe-dark-tone",".pe-dark-tone "],0,t,"dark"),m(["",".pe-light-tone",".pe-light-tone "],0,t,"light")]},v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},f=[s,h],x=function(e,t){return n.styler.generateStyles([e,".pe-card"],v({},c,t),f)};n.styler.generateStyles([".pe-card"],c,f);var b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},y={component:"pe-card",content:"pe-card__content",overlay:"pe-card__overlay",overlaySheet:"pe-card__overlay--sheet",overlayContent:"pe-card__overlay__content",mediaDimmer:"pe-card__media__dimmer",mediaCropX:"pe-card__media--crop-x",mediaCropY:"pe-card__media--crop-y",media:"pe-card__media",header:"pe-card__header",headerTitle:"pe-card__header-title",title:"pe-card__title",subtitle:"pe-card__subtitle",text:"pe-card__text",textTight:"pe-card__text--tight",primary:"pe-card__primary",primaryMedia:"pe-card__primary-media",primaryTight:"pe-card__primary--tight",actions:"pe-card__actions",actionsHorizontal:"pe-card__actions--horizontal",actionsVertical:"pe-card__actions--vertical",actionsJustified:"pe-card__actions--justified",actionsBordered:"pe-card__actions--borders",actionsTight:"pe-card__actions--tight",mediaRatioSquare:"pe-card__media--square",mediaRatioLandscape:"pe-card__media--landscape",primaryHasMedia:"pe-card__primary--media",mediaSmall:"pe-card__media--small",mediaRegular:"pe-card__media--regular",mediaMedium:"pe-card__media--medium",mediaLarge:"pe-card__media--large"},k={landscape:16/9,square:1},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.element||"div",a=e.content.map(function(e){return O[Object.keys(e)[0]](e)});return t("div",{class:[y.overlay,e.sheet?y.overlaySheet:null].join(" ")},[t(i,{class:[y.overlayContent,e.class].join(" ")},a),t("div",{class:y.mediaDimmer})])},z=function(e){var i=e.text||{};return t(i.element||"div",{class:[y.text,i.tight?y.textTight:null,i.class].join(" ")},i.content)},T={small:y.mediaSmall,regular:y.mediaRegular,medium:y.mediaMedium,large:y.mediaLarge},w=function(){return T[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"regular"]},R=function(e){var i=e.media||{},a=i.ratio||"landscape",r=i.origin||"center",o=i.element||"div",n=function(e){var t=e.dom,i=t.querySelector("img");i&&(i.onload=function(){var e=this.naturalWidth,o=this.naturalHeight,n=e/o,d=n<k[a]?y.mediaCropX:y.mediaCropY;i.className=d;var _=t.clientWidth,l=t.clientHeight;if(n<k[a])if("center"===r){var p=_/n,c=l-p,s=c/2;this.style.marginTop=s+"px"}else"start"===r?(this.style.top=0,this.style.bottom="auto"):(this.style.top="auto",this.style.bottom=0);else if("center"===r){var g=l*n,u=_-g,m=u/2;this.style.marginLeft=m+"px"}else"start"===r?(this.style.left=0,this.style.right="auto"):(this.style.left="auto",this.style.right=0)})};return t(o,{class:[y.media,w(i.type),"landscape"===a?y.mediaRatioLandscape:y.mediaRatioSquare,i.class].join(" "),oncreate:n},[i.content,i.overlay?j(i.overlay):t("div",{class:y.mediaDimmer})])},B=function(e){var a=e.header||{};return t(r,b({},a,{class:[y.header,a.class].join(" ")},a.icon?{front:t(i,a.icon)}:null))},H={horizontal:y.actionsHorizontal,vertical:y.actionsVertical,justified:y.actionsJustified},S=function(){return H[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"horizontal"]},q=function(e){var i=e.actions||{};return t(i.element||"div",{class:[y.actions,S(i.layout),i.bordered?y.actionsBordered:null,i.tight?y.actionsTight:null,i.class].join(" ")},i.content)},L=function(e){var i=void 0,a=void 0,r=void 0,o=e.primary||{},n=o.element||"div",d=!1,_={title:function(e){return e.attrs?e:t("div",{class:y.title},[e.title?e.title:null,e.subtitle?t("div",{class:y.subtitle},e.subtitle):null])},media:function(e){return d=!0,t("div",{class:y.primaryMedia},R({media:e}))},actions:function(e){return q({actions:e})}};return i=Array.isArray(o.content)?o.content.map(function(e){return a=Object.keys(e)[0],r=e[a],_[a]?_[a](r):e}):[o.title?_.title({title:o.title,subtitle:o.subtitle}):null,o.media?_.media(o.media):null,o.actions?_.actions(o.actions):null,o.content],t(n,{class:[y.primary,o.tight?y.primaryTight:null,d?y.primaryHasMedia:null].join(" ")},i)},O={text:z,media:R,header:B,primary:L,actions:q},C=function(e){var i=e.attrs,r=i.element||i.url?"a":"div",n=b({},o.filterSupportedAttributes(i),{class:[y.component,"dark"===i.tone?"pe-dark-tone":null,"light"===i.tone?"pe-light-tone":null,i.class].join(" ")},i.url?i.url:null,i.events?i.events:null),d=Array.isArray(i.content)?i.content.map(function(e){var t=Object.keys(e)[0];if(!O[t])throw'Content type "'+t+'" does not exist';return O[t](e)}):i.content,_=[t(a,{z:void 0!==i.z?i.z:1,animated:!0}),t("div",{class:y.content},d)];return t(r,n,[i.before,_,i.after])},M={theme:x,view:C};e.default=M,e.classes=y,e.vars=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-card.js.map
