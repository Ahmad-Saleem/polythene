!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-theme"],t):t(e.polythene={},e["polythene-core"],e["polythene-theme"])}(this,function(e,t,r){"use strict";function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(e){return"rgba("+e+", "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)+")"},n=r.vars.color_light_foreground,o=r.vars.color_dark_foreground,l=r.vars.color_primary,c=Math.max(40,12),s=Math.max(c,18),d=Math.max(52,18),u=Math.max(10,s/2-6),_={height:d,side_spacing:u,horizontal_layout_side_spacing:u+4,thumb_size:12,thumb_touch_size:c,track_height:d,bar_height:2,thumb_border_width:2,active_thumb_scale:1.5,animation_duration:r.vars.animation_duration,disabled_thumb_scale:.5,active_pin_thumb_scale:2/6,step_width:2,pin_height:32,pin_width:26,pin_font_size:10,color_light_track_active:a(n,.38),color_light_track_inactive:a(n,.26),color_light_track_value:a(l),color_light_thumb_off:a(n,.26),color_light_thumb_off_focus:a(n),color_light_thumb_off_focus_opacity:.08,color_light_thumb_on:a(l),color_light_thumb_on_focus_opacity:.11,color_light_thumb_inactive:a(n,.26),color_light_tick:a(n,1),color_light_icon:a(r.vars.color_light_foreground,r.vars.blend_light_text_secondary),color_light_disabled_icon:a(r.vars.color_light_foreground,r.vars.blend_light_text_disabled),color_light_label:a(r.vars.color_light_foreground,r.vars.blend_light_text_secondary),color_light_disabled_label:a(r.vars.color_light_foreground,r.vars.blend_light_text_disabled),color_dark_track_active:a(o,.3),color_dark_track_inactive:a(o,.2),color_dark_track_value:a(l),color_dark_thumb_off:a(o,.2),color_dark_thumb_off_focus:a(o),color_dark_thumb_off_focus_opacity:.08,color_dark_thumb_on:a(l),color_dark_thumb_on_focus_opacity:.11,color_dark_thumb_inactive:a(o,.2),color_dark_tick:a(o,1),color_dark_icon:a(r.vars.color_dark_foreground,r.vars.blend_dark_text_secondary),color_dark_disabled_icon:a(r.vars.color_dark_foreground,r.vars.blend_dark_text_disabled),color_dark_label:a(r.vars.color_dark_foreground,r.vars.blend_dark_text_secondary),color_dark_disabled_label:a(r.vars.color_dark_foreground,r.vars.blend_dark_text_disabled)},v={component:"pe-slider",control:"pe-slider__control",label:"pe-slider__label",pin:"pe-slider__pin",thumb:"pe-slider__thumb",tick:"pe-slider__ticks-tick",ticks:"pe-slider__ticks",track:"pe-slider__track",trackBar:"pe-slider__track-bar",trackBarValue:"pe-slider__track-bar-value",trackPart:"pe-slider__track-part",trackPartRest:"pe-slider__track-rest",trackPartValue:"pe-slider__track-value",hasFocus:"pe-slider--focus",hasPin:"pe-slider--pin",hasTicks:"pe-slider--ticks",hasTrack:"pe-slider--track",isActive:"pe-slider--active",isAtMin:"pe-slider--min",isDisabled:"pe-slider--disabled"},h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},f=void 0,k=function(e){f&&f.blur(),f=void 0,e.hasFocus(!1)},p=function(e,t){k(e),f=t,e.hasFocus(!0)},g=function(e,r){return t.isTouch&&e.touches?r?e.touches[0].pageY:e.touches[0].pageX:r?e.pageY:e.pageX},m=function(e){if(e.controlEl&&e.pinEl){var t=e.fraction()*e.rangeWidth;e.pinEl.style.left=t+"px"}},b=function(e,t){e.setValue(t,!0),m(e)},y=function(e,t){for(var r=[],i=t+1;i>0;)r.push(e("div",{className:v.tick,key:"tick-"+i})),i--;return r},x=function(e){if(e.controlEl&&t.isClient){e.controlWidth=_.thumb_size,e.rangeWidth=e.trackEl.getBoundingClientRect().width-e.controlWidth;var r=window.getComputedStyle(e.trackEl);e.rangeOffset=parseFloat(r.marginLeft)}},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.clickOffset=e.trackEl.getBoundingClientRect().left-(e.rangeOffset-e.controlWidth/2)+t},w=function(e,t){var r=e.controlEl.getBoundingClientRect().left,i=g(t)-r-e.controlWidth/2;E(e,i)},P=function(e){return E(e,0)},M=function(e,t){var r=g(t)-e.clickOffset,i=e.min+(r-e.rangeOffset)/e.rangeWidth*(e.max-e.min);b(e,i)},T=function(e,r,i){if(!e.isDragging()){i.preventDefault(),e.isDragging(!0),e.isActive(!0),k(e);var a=function(t){e.isDragging()&&M(e,t)},n=function r(){e.isDragging()&&(k(e),t.isClient&&(window.removeEventListener(t.pointerMoveEvent,a),window.removeEventListener(t.pointerEndMoveEvent,r)),e.isDragging(!1),e.isActive(!1))};t.isClient&&(window.addEventListener(t.pointerMoveEvent,a),window.addEventListener(t.pointerEndMoveEvent,n)),x(e),r.pin&&m(e)}},V=function(e,t,r){r.preventDefault(),e.isDragging()||(x(e),P(e),M(e,r),T(e,t,r))},D=function(e,r){var a,n=r.h,o=r.k,l=r.hasTicks,c=r.interactiveTrack,s=e.state,d=e.attrs,u=s.fraction(),_=s.max-s.min,f=Math.min(100,parseInt(_/s.stepSize,10)),g=function(e){return V(s,d,e)},E=function(e){x(s),w(s,e),T(s,d,e)},P=u+" 1 0%",M=1-u,D=M+" 1 0%";return n("div",h({},{className:v.track},c&&!d.disabled&&i({},o["on"+t.pointerStartMoveEvent],g)),[n("div",{className:v.trackPart+" "+v.trackPartValue,key:"trackPartValue",style:{flex:P,msFlex:P,WebkitFlex:P}},n("div",{className:v.trackBar},n("div",{className:v.trackBarValue}))),n("div",h({},{className:v.control,key:"control"},d.disabled?{disabled:!0}:(a={},i(a,o.tabindex,d[o.tabindex]||0),i(a,o.onfocus,function(){return p(s,s.controlEl)}),i(a,o.onblur,function(){return k(s)}),i(a,o.onkeydown,function(e){"Tab"!==e.key&&e.preventDefault(),"Escape"===e.key?s.controlEl.blur(e):"ArrowLeft"===e.key||"ArrowDown"===e.key?s.decrement(s,e.shiftKey):"ArrowRight"===e.key||"ArrowUp"===e.key?s.increment(s,e.shiftKey):"Home"===e.key?b(s,s.min):"End"===e.key?b(s,s.max):"PageDown"===e.key?s.decrement(s,!0):"PageUp"===e.key&&s.increment(s,!0),x(s),m(s)}),a),!d.disabled&&i({},o["on"+t.pointerStartMoveEvent],E),d.events?d.events:null,l?{step:f}:null),d.icon?n("div",{className:v.thumb,key:"icon"},d.icon):null),n("div",{className:v.trackPart+" "+v.trackPartRest,key:"trackPartRest",style:{flex:D,msFlex:D,WebkitFlex:D,maxWidth:100*M+"%"}},n("div",{className:v.trackBar},n("div",{className:v.trackBarValue}))),l&&!d.disabled?n("div",{className:v.ticks,key:"ticks"},y(n,f)):null,l&&d.pin&&!d.disabled?n("div",{className:v.pin,key:"pin",value:s.value()}):null])},N=function(e,t){var r=e.attrs,i=void 0!==r.min?r.min:0,a=void 0!==r.max?r.max:100,n=a-i,o=void 0!==r.stepSize?r.stepSize:1,l=void 0!==r.defaultValue?r.defaultValue:void 0!==r.value?r.value:0,c=t(void 0),s=t(!1),d=t(!1),u=t(!1),_=t(i),v=t(0),h=1/o,f=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e<i&&(e=i),e>a&&(e=a),v(o?Math.round(e*h)/h:e),_((v()-i)/n),t&&r.onChange&&r.onChange({value:v()}),c(e)},k=function(e,t){return b(e,v()+(t?10:1)*(o||1))},p=function(e,t){return b(e,v()-(t?10:1)*(o||1))};return f(l),{min:i,max:a,stepSize:o,fraction:_,trackEl:null,controlEl:null,pinEl:null,setValue:f,increment:k,decrement:p,isDragging:u,isActive:s,value:v,previousValue:c,hasFocus:d,controlWidth:0,rangeWidth:0,rangeOffset:0,clickOffset:0,redrawOnUpdate:t.merge([s,v])}},O=function(e){var t=e.dom,r=e.state,i=e.attrs;r.trackEl=t.querySelector("."+v.track),r.controlEl=t.querySelector("."+v.control),r.pinEl=t.querySelector("."+v.pin),x(r),i.pin&&setTimeout(function(){b(r,r.value())},0)},A=function(e,r){var i=r.keys,a=e.state,n=e.attrs;void 0!==n.value&&a.previousValue()!==n.value&&(a.previousValue(n.value),setTimeout(function(){return a.setValue(a.previousValue())},0));var o=void 0!==n.ticks&&!1!==n.ticks,l=void 0===n.interactiveTrack||n.interactiveTrack;return h({},t.filterSupportedAttributes(n),{className:[v.component,n.disabled?v.isDisabled:null,n.pin?v.hasPin:null,l?v.hasTrack:null,a.isActive()?v.isActive:null,a.hasFocus()?v.hasFocus:null,0===a.fraction()?v.isAtMin:null,o?v.hasTicks:null,"dark"===n.tone?"pe-dark-tone":null,"light"===n.tone?"pe-light-tone":null,n.className||n[i.class]].join(" ")})},S=function(e,t){var r=t.renderer,i=t.keys,a=e.attrs,n=void 0!==a.ticks&&!1!==a.ticks,o=void 0===a.interactiveTrack||a.interactiveTrack;return D(e,{h:r,k:i,hasTicks:n,interactiveTrack:o})},W=Object.freeze({getInitialState:N,onMount:O,createProps:A,createContent:S});e.coreSlider=W,e.classes=v,e.vars=_,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-slider.js.map
