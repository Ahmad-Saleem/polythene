{"version":3,"file":"polythene-tabs.js","sources":["../src/theme/vars.js","../src/theme/layout.js","../src/theme/color.js","../src/theme/chevron-left.js","../src/theme/chevron-right.js","../src/theme/index.js","../src/tabs.js"],"sourcesContent":["import { vars } from \"polythene-theme\";\nimport { vars as buttonVars } from \"polythene-button\";\nimport { vars as iconButtonVars } from \"polythene-icon-button\";\n\nconst rgba = vars.rgba;\n\nconst fontSize = buttonVars.font_size;\nconst tab_label_line_height = 1.1 * fontSize;\n\nexport default {\n  tab_min_width:                  72,\n  tab_max_width:              \"none\",\n  tab_height:                     48,\n  tab_min_width_tablet:          160,\n  label_max_width:               264,\n  menu_tab_height:                44,\n  menu_tab_icon_label_height:     44,\n  tab_icon_label_height:          72,\n  tab_icon_label_icon_spacing:     7,\n  indicator_slide_speed:         600, // px per second\n  indicator_slide_min_duration: .250,\n  tabs_scroll_speed:             600, // px per second\n  tabs_scroll_delay:             .15,\n  tabs_scroll_min_duration:       .5,\n  scroll_button_fade_duration:    .2,\n  scroll_button_fade_delay:       .5,\n  tab_content_padding_v:          12,\n  tab_menu_content_padding_v:      6,\n  tab_indicator_height:            2,\n  scrollbar_offset:               20,\n  scroll_button_opacity:          .7,\n  label_opacity:                  .7,\n\n  tab_label_line_height,\n  tab_label_vertical_offset:        tab_label_line_height - fontSize,\n  tab_label_transition_property:    \"opacity, color, backgroundColor\",\n \n  color_light:                      \"inherit\",\n  color_light_selected:             rgba(vars.color_primary),\n  color_light_selected_background:  \"transparent\",\n  color_light_tab_indicator:        rgba(vars.color_primary),\n  color_light_icon:                 iconButtonVars.color_light,\n \n  color_dark:                       \"inherit\",\n  color_dark_selected:              rgba(vars.color_primary),\n  color_dark_selected_background:   \"transparent\",\n  color_dark_tab_indicator:         rgba(vars.color_primary),\n  color_dark_icon:                  iconButtonVars.color_dark\n};\n","import { mixin, flex } from \"polythene-css\";\nimport { vars } from \"polythene-theme\";\n\nexport default (selector, componentVars) => [{\n  [selector]: [\n    mixin.vendorize({\n      userSelect: \"none\"\n    }, vars.prefixes_user_select),\n    mixin.vendorize({\n      transform: \"translate3d(0,0,0)\"\n    }, vars.prefixes_transform),\n    {\n      \"-webkit-overflow-scrolling\": \"touch\",\n\n      \"& ::-webkit-scrollbar\": {\n        \"display\": \"none\"\n      },\n\n      \"&.pe-tabs--menu\": {\n        // reset sizes to fit within a small space\n        \" .pe-tabs__tab\": {\n          height: componentVars.menu_tab_height + \"px\",\n        },\n        \" .pe-tabs__tab---icon\": {\n          height: componentVars.menu_tab_icon_label_height + \"px\",\n        },\n        \" .pe-tabs__tab, .pe-tabs__tab.pe-tabs__tab---icon\": {\n          minWidth: 0,\n          height: componentVars.menu_tab_icon_label_height + \"px\",\n\n          \" .pe-button__content\": {\n            padding: \"0 \" + componentVars.tab_menu_content_padding_v + \"px\",\n            height: componentVars.menu_tab_icon_label_height + \"px\",\n\n            \" .pe-icon\": {\n              marginBottom: 0\n            },\n            \" .pe-button__label\": {\n              fontSize: \"10px\",\n              lineHeight: \"12px\",\n              textTransform: \"none\"\n            }\n          }\n        }\n      },\n\n      \"&.pe-tabs--scrollable\": {\n        // hide scrollbar (this approach is required for Firefox)\n        \"max-height\": componentVars.tab_height + \"px\",\n        \"-ms-overflow-style\": \"none\",\n\n        \" .pe-tabs__scroll-button\": {\n          // default hide, show with html.pe-no-touch\n          display: \"none\"\n        },\n\n        \" .pe-tabs__row\": {\n          marginBottom: -componentVars.scrollbar_offset + \"px\"\n        }\n      },\n\n      \" .pe-no-touch &\": {\n        \"&.pe-tabs--scrollable\": {\n          backgroundColor: \"inherit\"\n        },\n\n        \" .pe-tabs__scroll-button\": {\n          position: \"absolute\",\n          display: \"block\",\n          top: 0,\n          backgroundColor: \"inherit\",\n          zIndex: 3,\n\n          \" .pe-button__content\": {\n            backgroundColor: \"inherit\"\n          },\n          \" .pe-button__label\": [\n            mixin.vendorize({\n              transitionProperty: componentVars.tab_label_transition_property\n            }, vars.prefixes_transition),\n            mixin.vendorize({\n              transitionDuration: componentVars.scroll_button_fade_duration + \"s\"\n            }, vars.prefixes_transition),\n            mixin.vendorize({\n              transitionTimingFunction: \"ease-out\"\n            }, vars.prefixes_transition),\n            mixin.vendorize({\n              transitionDelay: componentVars.scroll_button_fade_delay + \"s\"\n            }, vars.prefixes_transition),\n            {\n              opacity: componentVars.scroll_button_opacity\n            }\n          ]\n        },\n        \"&.pe-tabs--start .pe-tabs__scroll-button-start\": {\n          pointerEvents: \"none\",\n          cursor: \"default\",\n\n          \" .pe-button__label\": {\n            opacity: 0\n          }\n        },\n        \"&.pe-tabs--end .pe-tabs__scroll-button-end\": {\n          pointerEvents: \"none\",\n          cursor: \"default\",\n\n          \" .pe-button__label\": {\n            opacity: 0\n          }\n        },\n\n        \" .pe-tabs__scroll-button-start\": {\n          left: 0\n        },\n        \" .pe-tabs__scroll-button-end\": {\n          right: 0\n        }\n      },\n\n      \" .pe-tabs__row\": [\n        flex.layoutHorizontal,\n        mixin.vendorize({\n          \"user-select\": \"none\"\n        }, vars.prefixes_user_select),\n        {\n          position: \"relative\",\n          whiteSpace: \"nowrap\"\n        }\n      ],\n\n      \" .pe-tabs__row--centered\": flex.layoutCenterJustified,\n\n      \" .pe-tabs__scroll-button-offset\": [\n        flex.flex(),\n        flex.flexIndex(\"none\")\n      ],\n\n      \" .pe-tabs__tab\": [\n        flex.flex(),\n        flex.flexIndex(\"none\"),\n        mixin.vendorize({\n          userSelect: \"none\"\n        }, vars.prefixes_user_select),\n        mixin.defaultTransition(\"color\"),\n        {\n          margin: 0,\n          borderRadius: 0,\n          height: componentVars.tab_height + \"px\",\n          padding: 0,\n          color: \"inherit\",\n          minWidth: !isNaN(componentVars.tab_min_width) ? componentVars.tab_min_width + \"px\" : componentVars.tab_min_width, // for smaller screens, see also media query below\n          maxWidth: !isNaN(componentVars.tab_max_width) ? componentVars.tab_max_width + \"px\" : componentVars.tab_max_width,\n\n          \".pe-text-button .pe-button__content\": {\n            padding: \"0 \" + componentVars.tab_content_padding_v + \"px\",\n            height: componentVars.tab_height + \"px\",\n            lineHeight: vars.line_height + \"em\",\n            borderRadius: 0,\n\n            \" .pe-button__label, .pe-icon\": {\n              maxWidth: componentVars.label_max_width + \"px\", // or .pe-tabs width minus 56dp\n              lineHeight: componentVars.tab_label_line_height + \"px\",\n              maxHeight: 2 * componentVars.tab_label_line_height + \"px\",\n              overflow: \"hidden\",\n              whiteSpace: \"normal\"\n            },\n            \" .pe-button__label\": [\n              mixin.defaultTransition(\"opacity\", componentVars.animation_duration),\n              {\n                margin: componentVars.tab_label_vertical_offset + \"px 0 0 0\",\n                padding: 0,\n                opacity: componentVars.label_opacity\n              }\n            ],\n            \" .pe-icon\": {\n              marginLeft: \"auto\",\n              marginRight: \"auto\"\n            },\n            \" .pe-button__focus\": {\n              display: \"none\"\n            }\n          },\n          \"&.pe-button--selected\": {\n            \" .pe-button__content .pe-button__label\": {\n              opacity: 1\n            }\n          },\n          \"&.pe-tabs__tab---icon\": {\n            \"&, .pe-button__content\": [\n              {\n                height: componentVars.tab_icon_label_height + \"px\"\n              },\n              {\n                \" .pe-button__label, .pe-icon\": {\n                  margin: \"0 auto\"\n                }\n              },\n              {\n                \" .pe-icon\": {\n                  marginBottom: componentVars.tab_icon_label_icon_spacing + \"px\"\n                }\n              }\n            ]\n          }\n        }\n      ],\n\n      \" .pe-tabs__tab-content\": [\n        flex.layoutCenterCenter,\n        flex.layoutVertical, {\n          height: \"inherit\"\n        }\n      ],\n\n      \"&.pe-tabs--autofit .pe-tabs__tab\": [\n        flex.flex(),\n        {\n          minWidth: \"initial\",\n          maxWidth: \"none\"\n        }\n      ],\n\n      \"&.pe-tabs__active-selectable\": {\n        \" .pe-tabs__tab.pe-button--selected\": {\n          cursor: \"pointer\",\n          pointerEvents: \"initial\",\n        }\n      },\n\n      \" .pe-tabs__indicator\": [\n        mixin.vendorize({\n          \"transform\": \"translate3d(0,0,0)\"\n        }, vars.prefixes_transform),\n        mixin.vendorize({\n          \"transform-origin\": \"left 50%\"\n        }, vars.prefixes_transform),\n        mixin.vendorize({\n          \"transition-property\": \"all\"\n        }, vars.prefixes_transition),\n        mixin.vendorize({\n          \"transition-timing-function\": \"ease-out\"\n        }, vars.prefixes_transition),\n        {\n          position: \"absolute\",\n          height: componentVars.tab_indicator_height + \"px\",\n          bottom: 0,\n          left: 0,\n          zIndex: 3,\n          width: \"100%\" // and transformed with js\n            // background-color defined in implementation/theme css\n        }\n      ],\n\n      \" .pe-toolbar--tabs .pe-toolbar__bar &\": [\n        mixin.fit(),\n        {\n          width: \"auto\",\n          margin: 0,\n          top: \"auto\",\n\n          \" .pe-tabs__row.pe-tabs__row--indent\": {\n            margin: 0,\n            paddingLeft: vars.unit_indent + \"px\",\n            overflow: \"auto\"\n          }\n        }\n      ],\n\n      [\"@media (min-width: \" + vars.breakpoint_small_tablet_portrait + \"px)\"]: {\n        \"&:not(.pe-tabs--small):not(.pe-tabs--menu):not(.pe-tabs--autofit) .pe-tabs__tab\": {\n          minWidth: componentVars.tab_min_width_tablet + \"px\"\n        }\n      }\n    }\n  ]\n}];\n","\nconst style = (scope, selector, componentVars, tint) => [{\n  [scope + selector]: {\n    color: componentVars[\"color_\" + tint],\n\n    \" .pe-tabs__tab.pe-button--selected\": {\n      color: componentVars[\"color_\" + tint + \"_selected\"],\n\n      \" .pe-button__content\": {\n        background: componentVars[\"color_\" + tint + \"_selected_background\"]\n      }\n    },\n    \" .pe-tabs__tab:not(.pe-button--selected) .pe-icon\": {\n      color: componentVars[\"color_\" + tint + \"_icon\"]\n    },\n    \" .pe-tabs__indicator\": {\n      \"background-color\": componentVars[\"color_\" + tint + \"_tab_indicator\"]\n    }\n  }\n}];\n\nexport default (selector, componentVars) => [\n  style(\"\",                selector, componentVars, \"light\"),\n  style(\".pe-dark-theme \", selector, componentVars, \"dark\" ) // inside dark theme\n];\n","import m from \"mithril\";\n\nexport default m.trust(\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\\\"/></svg>\");\n","import m from \"mithril\";\n\nexport default m.trust(\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\\\"/></svg>\");\n","import { styler } from \"polythene-css\";\nimport vars from \"./vars\";\nimport layout from \"./layout\";\nimport color from \"./color\";\nimport iconArrowBackward from \"./chevron-left\";\nimport iconArrowForward  from \"./chevron-right\";\n\nexport const arrowBackward = {\n  msvg: iconArrowBackward\n};\nexport const arrowForward = {\n  msvg: iconArrowForward\n};\n\nconst fns = [layout, color];\nconst selector = \".pe-tabs\";\n\nexport const customTheme = (customSelector, customVars) => \n  styler.generateStyles([customSelector, selector], {...vars, ...customVars}, fns);\n\nstyler.generateStyles([selector], vars, fns);\n\n","import m from \"mithril\";\nimport { button } from \"polythene-button\";\nimport { icon } from \"polythene-icon\";\nimport { iconButton } from \"polythene-icon-button\";\nimport { isTouch, subscribe, unsubscribe } from \"polythene-core\";\n//import scrollTo from \"polythene/common/scroll-to\";\nimport { customTheme, arrowForward, arrowBackward } from \"./theme\";\nimport vars from \"./theme/vars\";\n\nexport const classes = {\n  component:            \"pe-tabs\",\n  scrollButton:         \"pe-tabs__scroll-button\",\n  scrollButtonAtStart:  \"pe-tabs__scroll-button-start\",\n  scrollButtonAtEnd:    \"pe-tabs__scroll-button-end\",\n  scrollButtonOffset:   \"pe-tabs__scroll-button-offset\",\n  tabRow:               \"pe-tabs__row\",\n  tabRowCentered:       \"pe-tabs__row--centered\",\n  tabRowIndent:         \"pe-tabs__row--indent\",\n  tab:                  \"pe-tabs__tab\",\n  tabContent:           \"pe-tabs__tab-content\",\n  tabHasIcon:           \"pe-tabs__tab---icon\",\n  indicator:            \"pe-tabs__indicator\",\n  scrollable:           \"pe-tabs--scrollable\",\n  isAutofit:            \"pe-tabs--autofit\",\n  isAtStart:            \"pe-tabs--start\",\n  isAtEnd:              \"pe-tabs--end\",\n  smallTabs:            \"pe-tabs--small\",\n  isMenu:               \"pe-tabs--menu\",\n  activeSelectable:     \"pe-tabs__active-selectable\",\n  // reference:  \n  label:                \"pe-button__label\"\n};\n\nconst POSITION_LEFT  = 1 << 1;\nconst POSITION_RIGHT = 1 << 2;\n\nconst getNewIndex = (index, tabs) => {\n  const minTabIndex = 0;\n  const maxTabIndex = tabs.length - 1;\n  return {\n    left: Math.max(index - 1, minTabIndex),\n    right: Math.min(index + 1, maxTabIndex)\n  };\n};\n\nconst handleScrollButtonClick = (state, attrs, e, direction) => {\n  e.stopPropagation();\n  e.preventDefault();\n  const currentTabIndex = state.selectedTabIndex;\n  const newIndex = getNewIndex(currentTabIndex, state.tabs)[direction];\n  scrollToTab(state, newIndex);\n  if (newIndex !== currentTabIndex) {\n    setSelectedTab(state, attrs, newIndex, true);\n    m.redraw();\n  }\n};\n\n\nconst createScrollButton = (state, position, attrs) => {\n  const scrollIconForward = attrs.scrollIconForward || arrowForward;\n  const scrollIconBackward = attrs.scrollIconBackward || arrowBackward;\n\n  return m(iconButton, {\n    class: [\n      classes.scrollButton,\n      (position === POSITION_LEFT ? classes.scrollButtonAtStart : classes.scrollButtonAtEnd)\n    ].join(\" \"),\n    icon: position === POSITION_LEFT ? scrollIconBackward : scrollIconForward,\n    ripple: {\n      center: true\n    },\n    oncreate: vnode => {\n      if (state.scrollButtonAtStartEl && state.scrollButtonAtEndEl) {\n        return;\n      }\n      if (position === POSITION_LEFT) {\n        state.scrollButtonAtStartEl = vnode.dom;\n      } else {\n        state.scrollButtonAtEndEl = vnode.dom;\n      }\n    },\n    events: {\n      onclick: (position === POSITION_LEFT) ? (e) => {\n        handleScrollButtonClick(state, attrs, e, \"left\");\n      } : (e) => {\n        handleScrollButtonClick(state, attrs, e, \"right\");\n      }\n    }\n  });\n};\n\nconst alignToTitle = (state) => {\n  const firstTab = state.tabs[0].el;\n  const firstInnerLabel = firstTab.querySelector(\".\" + classes.label + \" span\");\n  const firstOuterLabelWidth = firstTab.getBoundingClientRect().width;\n  const firstInnerLabelWidth = firstInnerLabel.getBoundingClientRect().width;\n  const firstTabOffset = (firstOuterLabelWidth - firstInnerLabelWidth) / 2;\n  firstTab.style.marginLeft = -firstTabOffset + \"px\";\n};\n\nconst createRightButtonOffset = (state) => {\n  // add padding to right so that last item is not hidden behind scroll button\n  const scrollButtonAtEndWidth = state.scrollButtonAtEndEl.getBoundingClientRect().width;\n  const scrollButtonOffsetEl = state.tabsEl.querySelector(\".\" + classes.scrollButtonOffset);\n  scrollButtonOffsetEl.style.width = scrollButtonAtEndWidth + \"px\";\n};\n\nconst scrollToTab = () => {\n// const scrollToTab = (state, tabIndex) => {\n//   const tabs = state.tabs;\n//   const scroller = state.scrollerEl;\n//   // scroll to position of selected tab\n//   const tabLeft = tabs.slice(0, tabIndex).reduce((totalWidth, tabData) => {\n//     return totalWidth + tabData.el.getBoundingClientRect().width;\n//   }, 0);\n//   // tabs at the far right will not fully move to the left\n//   // because the scrollable row will stick to the right \n//   // to get the max scroll left, we subtract the visible viewport from the scroll width\n//   const scrollerWidth = scroller.getBoundingClientRect().width; // frame width\n//   const scrollingWidth = scroller.scrollWidth;\n//   const maxScroll = scrollingWidth - scrollerWidth;\n//   const left = Math.min(tabLeft, maxScroll);\n//   const currentLeft = scroller.scrollLeft;\n//   if (currentLeft !== left) {\n//     const duration = Math.abs(currentLeft - left) / vars.tabs_scroll_speed;\n//     const delaySeconds = vars.tabs_scroll_delay || 0;\n//     setTimeout(() => {\n//       scrollTo({\n//         element: scroller,\n//         to: left,\n//         duration: Math.max(vars.tabs_scroll_min_duration, duration),\n//         direction: \"horizontal\"\n//       });\n//     }, delaySeconds * 1000);\n//   }\n};\n\nconst updateScrollButtons = (state) => {\n  const scrollerEl = state.scrollerEl;\n  const scrollLeft = scrollerEl.scrollLeft;\n  const currentTabIndex = state.selectedTabIndex;\n  const tabsEl = state.tabsEl;\n  const minTabIndex = 0;\n  const maxTabIndex = state.tabs.length - 1;\n  const isAtLeft = (scrollerEl.scrollLeft === 0) && (currentTabIndex === minTabIndex);\n  const isAtRight = (scrollLeft >= (scrollerEl.scrollWidth - tabsEl.getBoundingClientRect().width - 1)) && (currentTabIndex === maxTabIndex);\n  state.scrollButtonStates.left = !isAtLeft;\n  state.scrollButtonStates.right = !isAtRight;\n};\n\nconst animateIndicator = (selectedTabEl, animate, state) => {\n  const parentRect = state.tabsEl.getBoundingClientRect();\n  const rect = selectedTabEl.getBoundingClientRect();\n  const style = state.tabIndicatorEl.style;\n  const translateX = rect.left - parentRect.left + state.scrollerEl.scrollLeft;\n  const transformCmd = `translate(${translateX}px, 0)`;\n  const duration = animate ? vars.indicator_slide_min_duration : 0;\n  // use width instead of scale to please IE10\n  style.width = rect.width + \"px\";\n  style[\"transition-duration\"] =\n    style[\"-webkit-transition-duration\"] =\n    style[\"-moz-transition-duration\"] =\n    style[\"-o-transition-duration\"] = duration + \"s\";\n  style.transform =\n    style[\"-webkit-transform\"] =\n    style[\"-moz-transform\"] =\n    style[\"-ms-transform\"] =\n    style[\"-o-transform\"] = transformCmd;\n};\n\nconst setSelectedTab = (state, attrs, index, animate) => {\n  state.selectedTabIndex = index;\n  if (!state.tabs.length) return;\n  const selectedTabEl = state.tabs[index].el;\n  if (selectedTabEl && state.tabIndicatorEl && state.tabsEl) {\n    animateIndicator(selectedTabEl, animate, state);\n  }\n  if (state.managesScroll) {\n    updateScrollButtons(state);\n    scrollToTab(state, index);\n  }\n  if (attrs.getState) {\n    attrs.getState({\n      index,\n      data: state.tabs[index].data,\n      el: selectedTabEl\n    });\n  }\n};\n\nconst createTab = (state, attrs, index, buttonOpts) => {\n  // Let internal onclick function co-exist with passed button option\n  buttonOpts.events = buttonOpts.events || {};\n  buttonOpts.events.onclick = buttonOpts.events.onclick || (() => {});\n  const tabButtonOptions = Object.assign(\n    {},\n    buttonOpts,\n    {\n      content: m(\"div\", {\n        class: classes.tabContent\n      }, [\n        buttonOpts.icon ? m(icon, buttonOpts.icon) : null,\n        buttonOpts.label\n          ? m(\"div\", {\n            class: classes.label\n          }, m(\"span\", buttonOpts.label))\n          : null,\n      ]),\n      class: [\n        classes.tab,\n        buttonOpts.icon && buttonOpts.label ? classes.tabHasIcon : null,\n        buttonOpts.class\n      ].join(\" \"),\n      wash: false,\n      ripple: true,\n      events: Object.assign(\n        {},\n        buttonOpts.events,\n        {\n          onclick: e => {\n            setSelectedTab(state, attrs, index, attrs.noIndicatorSlide ? false : true);\n            buttonOpts.events.onclick(e);\n          }\n        }\n      ),\n      oncreate: vnode => {\n        if (state.tabs[index] === undefined) {\n          state.tabs[index] = {\n            data: buttonOpts,\n            el: vnode.dom\n          };\n        }\n      }\n    }\n  );\n  return m(button, tabButtonOptions);\n};\n\nconst sortNumbers = (a, b) => {\n  if (a < b)\n    return -1;\n  if (a > b)\n    return 1;\n  else\n    return 0;\n};\n\nconst view = vnode => {\n  const attrs = vnode.attrs;\n  const state = vnode.state;\n  const element = attrs.element || \"div\";\n  const autofit = attrs.scrollable || attrs.centered\n    ? false\n    : attrs.autofit\n      ? true\n      : false;\n\n  // keep selected tab up to date\n  if (attrs.selectedTab !== undefined && state.previousOptsSelectedTab !== attrs.selectedTab) {\n    setSelectedTab(state, attrs, attrs.selectedTab, true);\n  }\n  state.previousOptsSelectedTab = attrs.selectedTab;\n\n  const onResize = () => {\n    setSelectedTab(state, attrs, state.selectedTabIndex, false);\n    m.redraw();\n  };\n\n  const props = {\n    class: [\n      classes.component,\n      attrs.scrollable ? classes.scrollable : null,\n      state.selectedTabIndex === 0 ? classes.isAtStart : null,\n      state.selectedTabIndex === state.tabs.length - 1 ? classes.isAtEnd : null,\n      attrs.activeSelected ? classes.activeSelectable : null,\n      autofit ? classes.isAutofit : null,\n      attrs.small ? classes.smallTabs : null,\n      attrs.menu ? classes.isMenu : null,\n      attrs.class\n    ].join(\" \"),\n    id: attrs.id || \"\",\n    oncreate: vnode => {\n      state.tabsEl = vnode.dom;\n\n      if (attrs.largestWidth) {\n        const widths = state.tabs.map(tabData => tabData.el.getBoundingClientRect().width);\n        const largest = widths.sort(sortNumbers).reverse()[0];\n        state.tabs.forEach(tabData => tabData.el.style.width = largest + \"px\");\n      }\n      // Align first scrollable tab to title\n      if (attrs.scrollable) {\n        alignToTitle(state);\n      }\n      // Handle scroll\n      if (attrs.scrollable && !isTouch) {\n        state.managesScroll = true;\n        createRightButtonOffset(state);\n      }\n      subscribe(\"resize\", onResize);\n      setSelectedTab(state, attrs, state.selectedTabIndex, false);\n      if (attrs.getState) {\n        // Give immediate feedback\n        setTimeout(m.redraw);\n      }\n    },\n    onremove: () => {\n      unsubscribe(\"resize\", onResize);\n    }\n  };\n  const buttons = attrs.content\n    ? attrs.content\n    : attrs.buttons\n      ? attrs.buttons\n      : attrs.children || vnode.children;\n  const tabRow = buttons.map((buttonOpts = {}, index) => {\n    const buttonOptsCombined = Object.assign(\n      {},\n      buttonOpts,\n      {\n        selected: index === state.selectedTabIndex,\n        animateOnTap: (attrs.animateOnTap !== false) ? true : false\n      },\n      attrs.tabsOpts || {}\n    );\n    return createTab(state, attrs, index, buttonOptsCombined);\n  }).concat([\n    // offset for right scroll button\n    attrs.scrollable ? m(\"div\", {\n      class: classes.scrollButtonOffset\n    }) : null\n  ]);\n\n  let scrollButtonAtStart, scrollButtonAtEnd;\n  if (attrs.scrollable) {\n    scrollButtonAtStart = createScrollButton(state, POSITION_LEFT, attrs);\n    scrollButtonAtEnd = createScrollButton(state, POSITION_RIGHT, attrs);\n  }\n\n  const tabIndicator = attrs.hideIndicator\n    ? null\n    : m(\"div\", {\n      class: classes.indicator,\n      oncreate: vnode => (\n        state.tabIndicatorEl = vnode.dom,\n        setSelectedTab(state, attrs, state.selectedTabIndex, false)\n      )\n    });\n\n  const content = [\n    attrs.scrollable ? scrollButtonAtStart : null,\n    m(\"div\", {\n      class: [\n        classes.tabRow,\n        (attrs.centered ? classes.tabRowCentered : null),\n        (attrs.scrollable ? classes.tabRowIndent : null)\n      ].join(\" \"),\n      oncreate: vnode =>\n        state.scrollerEl = vnode.dom,\n      onscroll: () => {\n        updateScrollButtons(state);\n      }\n    }, [\n      tabRow,\n      tabIndicator\n    ]),\n    attrs.scrollable ? scrollButtonAtEnd : null\n  ];\n  return m(element, props, [attrs.before, content, attrs.after]);\n};\n\nexport const tabs = {\n  theme: customTheme, // accepts (selector, vars)\n  view,\n  oninit: vnode => {\n    vnode.state = {\n      tabsEl:                  null,\n      scrollerEl:              null,\n      tabs:                    [], // {data, el}\n      tabIndicatorEl:          null,\n      selectedTabIndex:        0,\n      previousOptsSelectedTab: undefined,\n      managesScroll:           false,\n      scrollButtonStates: {\n        left: false,\n        right: false\n      }\n    };\n  }\n};\n"],"names":["rgba","vars","fontSize","buttonVars","font_size","tab_label_line_height","color_primary","iconButtonVars","color_light","color_dark","selector","componentVars","mixin","vendorize","prefixes_user_select","prefixes_transform","menu_tab_height","menu_tab_icon_label_height","tab_menu_content_padding_v","tab_height","scrollbar_offset","tab_label_transition_property","prefixes_transition","scroll_button_fade_duration","scroll_button_fade_delay","scroll_button_opacity","flex","layoutHorizontal","layoutCenterJustified","flexIndex","defaultTransition","isNaN","tab_min_width","tab_max_width","tab_content_padding_v","line_height","label_max_width","animation_duration","tab_label_vertical_offset","label_opacity","tab_icon_label_height","tab_icon_label_icon_spacing","layoutCenterCenter","layoutVertical","tab_indicator_height","fit","unit_indent","breakpoint_small_tablet_portrait","tab_min_width_tablet","style","scope","tint","m","trust","arrowBackward","iconArrowBackward","arrowForward","iconArrowForward","fns","layout","color","customTheme","customSelector","customVars","styler","generateStyles","classes","POSITION_LEFT","POSITION_RIGHT","getNewIndex","index","tabs","minTabIndex","maxTabIndex","length","Math","max","min","handleScrollButtonClick","state","attrs","e","direction","stopPropagation","preventDefault","currentTabIndex","selectedTabIndex","newIndex","redraw","createScrollButton","position","scrollIconForward","scrollIconBackward","iconButton","scrollButton","scrollButtonAtStart","scrollButtonAtEnd","join","scrollButtonAtStartEl","scrollButtonAtEndEl","vnode","dom","alignToTitle","firstTab","el","firstInnerLabel","querySelector","label","firstOuterLabelWidth","getBoundingClientRect","width","firstInnerLabelWidth","firstTabOffset","marginLeft","createRightButtonOffset","scrollButtonAtEndWidth","scrollButtonOffsetEl","tabsEl","scrollButtonOffset","scrollToTab","updateScrollButtons","scrollerEl","scrollLeft","isAtLeft","isAtRight","scrollWidth","scrollButtonStates","left","right","animateIndicator","selectedTabEl","animate","parentRect","rect","tabIndicatorEl","translateX","transformCmd","duration","indicator_slide_min_duration","transform","setSelectedTab","managesScroll","getState","data","createTab","buttonOpts","events","onclick","tabButtonOptions","babelHelpers.extends","tabContent","icon","tab","tabHasIcon","class","noIndicatorSlide","undefined","button","sortNumbers","a","b","view","element","autofit","scrollable","centered","selectedTab","previousOptsSelectedTab","onResize","props","component","isAtStart","isAtEnd","activeSelected","activeSelectable","isAutofit","small","smallTabs","menu","isMenu","id","largestWidth","widths","map","tabData","largest","sort","reverse","forEach","isTouch","buttons","content","children","tabRow","buttonOptsCombined","animateOnTap","tabsOpts","concat","tabIndicator","hideIndicator","indicator","tabRowCentered","tabRowIndent","before","after"],"mappings":"wqBAIA,IAAMA,GAAOC,OAAKD,KAEZE,EAAWC,OAAWC,UACtBC,EAAwB,IAAMH,mBAGF,iBACJ,kBACI,wBACD,oBACA,oBACC,8BACA,yBACA,+BACC,wBACF,iCACD,sBACC,sBACA,6BACC,+BACA,4BACA,yBACA,8BACC,uBACA,mBACD,yBACA,iBACA,qDAGEG,EAAwBH,gCACxB,8CAEA,+BACAF,EAAKC,OAAKK,+CACV,wCACAN,EAAKC,OAAKK,gCACVC,OAAeC,uBAEf,8BACAR,EAAKC,OAAKK,8CACV,uCACAN,EAAKC,OAAKK,+BACVC,OAAeE,oTC5CnCC,EAAUC,eACvBD,GACCE,QAAMC,sBACQ,QACXZ,OAAKa,sBACRF,QAAMC,qBACO,sBACVZ,OAAKc,oDAEwB,yCAGjB,oDAMDJ,EAAcK,gBAAkB,sCAGhCL,EAAcM,2BAA6B,oEAGzC,SACFN,EAAcM,2BAA6B,qCAGxC,KAAON,EAAcO,2BAA6B,YACnDP,EAAcM,2BAA6B,+BAGnC,kCAGJ,kBACE,qBACG,iDAQPN,EAAcQ,WAAa,0BACnB,2CAIX,wCAIMR,EAAcS,iBAAmB,mEAM/B,gDAIP,mBACD,YACJ,kBACY,iBACT,0CAGW,iCAGjBR,QAAMC,8BACgBF,EAAcU,+BACjCpB,OAAKqB,qBACRV,QAAMC,8BACgBF,EAAcY,4BAA8B,KAC/DtB,OAAKqB,qBACRV,QAAMC,oCACsB,YACzBZ,OAAKqB,qBACRV,QAAMC,2BACaF,EAAca,yBAA2B,KACzDvB,OAAKqB,8BAEGX,EAAcc,yFAKZ,cACP,wCAGG,gEAII,cACP,wCAGG,2CAKL,yCAGC,sBAKTC,OAAKC,iBACLf,QAAMC,yBACW,QACdZ,OAAKa,gCAEI,sBACE,sCAIYY,OAAKE,yDAG/BF,OAAKA,OACLA,OAAKG,UAAU,2BAIfH,OAAKA,OACLA,OAAKG,UAAU,QACfjB,QAAMC,sBACQ,QACXZ,OAAKa,sBACRF,QAAMkB,kBAAkB,iBAEd,eACM,SACNnB,EAAcQ,WAAa,aAC1B,QACF,mBACIY,MAAMpB,EAAcqB,eAAsDrB,EAAcqB,cAAnDrB,EAAcqB,cAAgB,cACnED,MAAMpB,EAAcsB,eAAsDtB,EAAcsB,cAAnDtB,EAAcsB,cAAgB,oDAGnE,KAAOtB,EAAcuB,sBAAwB,YAC9CvB,EAAcQ,WAAa,gBACvBlB,OAAKkC,YAAc,kBACjB,2CAGFxB,EAAcyB,gBAAkB,gBAC9BzB,EAAcN,sBAAwB,eACvC,EAAIM,EAAcN,sBAAwB,cAC3C,oBACE,gCAGZO,QAAMkB,kBAAkB,UAAWnB,EAAc0B,4BAEvC1B,EAAc2B,0BAA4B,mBACzC,UACA3B,EAAc4B,wCAIb,mBACC,sCAGJ,oFAKA,+DAMC5B,EAAc6B,sBAAwB,8CAIpC,sCAKM7B,EAAc8B,4BAA8B,qCASpEf,OAAKgB,mBACLhB,OAAKiB,uBACK,gDAKVjB,OAAKA,iBAEO,mBACA,sFAMF,wBACO,oCAKjBd,QAAMC,qBACS,sBACZZ,OAAKc,oBACRH,QAAMC,8BACgB,YACnBZ,OAAKc,oBACRH,QAAMC,iCACmB,OACtBZ,OAAKqB,qBACRV,QAAMC,wCAC0B,YAC7BZ,OAAKqB,+BAEI,kBACFX,EAAciC,qBAAuB,YACrC,OACF,SACE,QACD,kDAMThC,QAAMiC,aAEG,cACC,MACH,qDAGK,cACK5C,OAAK6C,YAAc,cACtB,WAKf,sBAAwB7C,OAAK8C,iCAAmC,mGAEnDpC,EAAcqC,qBAAuB,YC7QnDC,EAAQ,SAACC,EAAOxC,EAAUC,EAAewC,eAC5CD,EAAQxC,SACAC,EAAc,SAAWwC,+CAGvBxC,EAAc,SAAWwC,EAAO,gDAGzBxC,EAAc,SAAWwC,EAAO,qFAIvCxC,EAAc,SAAWwC,EAAO,qDAGnBxC,EAAc,SAAWwC,EAAO,kCAK1CzC,EAAUC,UACxBsC,EAAM,GAAmBvC,EAAUC,EAAe,SAClDsC,EAAM,kBAAmBvC,EAAUC,EAAe,YCrBrCyC,EAAEC,MAAM,wJCARD,EAAEC,MAAM,uJCKVC,QACLC,GAEKC,QACLC,GAGFC,GAAOC,EAAQC,GACflD,EAAW,WAEJmD,EAAc,SAACC,EAAgBC,SAC1CC,UAAOC,gBAAgBH,EAAgBpD,QAAeT,EAAS8D,GAAaL,GAE9EM,UAAOC,gBAAgBvD,GAAWT,EAAMyD,ECdxC,IAGaQ,cACW,uBACA,6CACA,iDACA,gDACA,uCACA,8BACA,sCACA,2BACA,0BACA,kCACA,gCACA,gCACA,gCACA,6BACA,yBACA,yBACA,wBACA,iCACA,mCAEA,oBAGlBC,EAAiB,EACjBC,EAAiB,EAEjBC,EAAc,SAACC,EAAOC,MACpBC,GAAc,EACdC,EAAcF,EAAKG,OAAS,cAE1BC,KAAKC,IAAIN,EAAQ,EAAGE,SACnBG,KAAKE,IAAIP,EAAQ,EAAGG,KAIzBK,EAA0B,SAACC,EAAOC,EAAOC,EAAGC,KAC9CC,oBACAC,oBACIC,GAAkBN,EAAMO,iBACxBC,EAAWlB,EAAYgB,EAAiBN,EAAMR,MAAMW,KAC9CH,EAAOQ,GACfA,IAAaF,MACAN,EAAOC,EAAOO,GAAU,KACrCC,WAKAC,EAAqB,SAACV,EAAOW,EAAUV,MACrCW,GAAoBX,EAAMW,mBAAqBnC,EAC/CoC,EAAqBZ,EAAMY,oBAAsBtC,QAEhDF,GAAEyC,qBAEL3B,EAAQ4B,aACPJ,IAAavB,EAAgBD,EAAQ6B,oBAAsB7B,EAAQ8B,mBACpEC,KAAK,UACDP,IAAavB,EAAgByB,EAAqBD,kBAE9C,YAEA,YACJZ,EAAMmB,uBAAyBnB,EAAMoB,sBAGrCT,IAAavB,IACT+B,sBAAwBE,EAAMC,MAE9BF,oBAAsBC,EAAMC,sBAI1BX,IAAavB,EAAiB,SAACc,KACfF,EAAOC,EAAOC,EAAG,SACvC,SAACA,KACqBF,EAAOC,EAAOC,EAAG,cAM3CqB,EAAe,SAACvB,MACdwB,GAAWxB,EAAMR,KAAK,GAAGiC,GACzBC,EAAkBF,EAASG,cAAc,IAAMxC,EAAQyC,MAAQ,SAC/DC,EAAuBL,EAASM,wBAAwBC,MACxDC,EAAuBN,EAAgBI,wBAAwBC,MAC/DE,GAAkBJ,EAAuBG,GAAwB,IAC9D9D,MAAMgE,YAAcD,EAAiB,MAG1CE,EAA0B,SAACnC,MAEzBoC,GAAyBpC,EAAMoB,oBAAoBU,wBAAwBC,MAC3EM,EAAuBrC,EAAMsC,OAAOX,cAAc,IAAMxC,EAAQoD,sBACjDrE,MAAM6D,MAAQK,EAAyB,MAGxDI,EAAc,aA8BdC,EAAsB,SAACzC,MACrB0C,GAAa1C,EAAM0C,WACnBC,EAAaD,EAAWC,WACxBrC,EAAkBN,EAAMO,iBACxB+B,EAAStC,EAAMsC,OACf7C,EAAc,EACdC,EAAcM,EAAMR,KAAKG,OAAS,EAClCiD,EAAsC,IAA1BF,EAAWC,YAAsBrC,IAAoBb,EACjEoD,EAAaF,GAAeD,EAAWI,YAAcR,EAAOR,wBAAwBC,MAAQ,GAAQzB,IAAoBZ,IACxHqD,mBAAmBC,MAAQJ,IAC3BG,mBAAmBE,OAASJ,GAG9BK,EAAmB,SAACC,EAAeC,EAASpD,MAC1CqD,GAAarD,EAAMsC,OAAOR,wBAC1BwB,EAAOH,EAAcrB,wBACrB5D,EAAQ8B,EAAMuD,eAAerF,MAC7BsF,EAAaF,EAAKN,KAAOK,EAAWL,KAAOhD,EAAM0C,WAAWC,WAC5Dc,eAA4BD,WAC5BE,EAAWN,EAAUlI,EAAKyI,6BAA+B,IAEzD5B,MAAQuB,EAAKvB,MAAQ,OACrB,uBACJ7D,EAAM,+BACNA,EAAM,4BACNA,EAAM,0BAA4BwF,EAAW,MACzCE,UACJ1F,EAAM,qBACNA,EAAM,kBACNA,EAAM,iBACNA,EAAM,gBAAkBuF,GAGtBI,EAAiB,SAAC7D,EAAOC,EAAOV,EAAO6D,QACrC7C,iBAAmBhB,EACpBS,EAAMR,KAAKG,WACVwD,GAAgBnD,EAAMR,KAAKD,GAAOkC,EACpC0B,IAAiBnD,EAAMuD,gBAAkBvD,EAAMsC,UAChCa,EAAeC,EAASpD,GAEvCA,EAAM8D,kBACY9D,KACRA,EAAOT,IAEjBU,EAAM8D,YACFA,uBAEE/D,EAAMR,KAAKD,GAAOyE,QACpBb,MAKJc,EAAY,SAACjE,EAAOC,EAAOV,EAAO2E,KAE3BC,OAASD,EAAWC,aACpBA,OAAOC,QAAUF,EAAWC,OAAOC,SAAY,gBACpDC,GAAmBC,KAEvBJ,WAEW7F,EAAE,aACFc,EAAQoF,aAEfL,EAAWM,KAAOnG,EAAEmG,OAAMN,EAAWM,MAAQ,KAC7CN,EAAWtC,MACPvD,EAAE,aACKc,EAAQyC,OACdvD,EAAE,OAAQ6F,EAAWtC,QACtB,cAGJzC,EAAQsF,IACRP,EAAWM,MAAQN,EAAWtC,MAAQzC,EAAQuF,WAAa,KAC3DR,EAAWS,OACXzD,KAAK,WACD,UACE,SACAoD,KAENJ,EAAWC,gBAEA,cACQnE,EAAOC,EAAOV,GAAOU,EAAM2E,oBAC/BT,OAAOC,QAAQlE,eAItB,YACkB2E,SAAtB7E,EAAMR,KAAKD,OACPC,KAAKD,SACH2E,KACF7C,EAAMC,eAMbjD,GAAEyG,SAAQT,IAGbU,EAAc,SAACC,EAAGC,SAClBD,GAAIC,GACC,EACLD,EAAIC,EACC,EAEA,GAGLC,EAAO,eACLjF,GAAQoB,EAAMpB,MACdD,EAAQqB,EAAMrB,MACdmF,EAAUlF,EAAMkF,SAAW,MAC3BC,GAAUnF,EAAMoF,aAAcpF,EAAMqF,YAEtCrF,EAAMmF,OAKgBP,UAAtB5E,EAAMsF,aAA6BvF,EAAMwF,0BAA4BvF,EAAMsF,eAC9DvF,EAAOC,EAAOA,EAAMsF,aAAa,KAE5CC,wBAA0BvF,EAAMsF,eAEhCE,GAAW,aACAzF,EAAOC,EAAOD,EAAMO,kBAAkB,KACnDE,UAGEiF,UAEFvG,EAAQwG,UACR1F,EAAMoF,WAAalG,EAAQkG,WAAa,KACb,IAA3BrF,EAAMO,iBAAyBpB,EAAQyG,UAAY,KACnD5F,EAAMO,mBAAqBP,EAAMR,KAAKG,OAAS,EAAIR,EAAQ0G,QAAU,KACrE5F,EAAM6F,eAAiB3G,EAAQ4G,iBAAmB,KAClDX,EAAUjG,EAAQ6G,UAAY,KAC9B/F,EAAMgG,MAAQ9G,EAAQ+G,UAAY,KAClCjG,EAAMkG,KAAOhH,EAAQiH,OAAS,KAC9BnG,EAAM0E,OACNzD,KAAK,QACHjB,EAAMoG,IAAM,YACN,cACF/D,OAASjB,EAAMC,IAEjBrB,EAAMqG,6BACFC,GAASvG,EAAMR,KAAKgH,IAAI,kBAAWC,GAAQhF,GAAGK,wBAAwBC,QACtE2E,EAAUH,EAAOI,KAAK5B,GAAa6B,UAAU,KAC7CpH,KAAKqH,QAAQ,kBAAWJ,GAAQhF,GAAGvD,MAAM6D,MAAQ2E,EAAU,UAG/DzG,EAAMoF,cACKrF,GAGXC,EAAMoF,aAAeyB,cACjBhD,eAAgB,IACE9D,gBAEhB,SAAUyF,KACLzF,EAAOC,EAAOD,EAAMO,kBAAkB,GACjDN,EAAM8D,qBAEG1F,EAAEoC,kBAGP,yBACI,SAAUgF,KAGpBsB,EAAU9G,EAAM+G,QAClB/G,EAAM+G,QACN/G,EAAM8G,QACJ9G,EAAM8G,QACN9G,EAAMgH,UAAY5F,EAAM4F,SACxBC,EAASH,EAAQP,IAAI,cAACtC,6DAAiB3E,eACrC4H,EAAqB7C,KAEzBJ,YAEY3E,IAAUS,EAAMO,8BACXN,EAAMmH,gBAAiB,GAExCnH,EAAMoH,oBAEDpD,GAAUjE,EAAOC,EAAOV,EAAO4H,KACrCG,UAEKjC,WAAahH,EAAE,aACZc,EAAQoD,qBACZ,OAGHvB,SAAqBC,QACrBhB,GAAMoF,eACc3E,EAAmBV,EAAOZ,EAAea,KAC3CS,EAAmBV,EAAOX,EAAgBY,OAG1DsH,GAAetH,EAAMuH,cACvB,KACAnJ,EAAE,aACKc,EAAQsI,mBACL,kBACRzH,GAAMuD,eAAiBlC,EAAMC,IAC7BuC,EAAe7D,EAAOC,EAAOD,EAAMO,kBAAkB,MAIrDyG,GACJ/G,EAAMoF,WAAarE,EAAsB,KACzC3C,EAAE,cAEEc,EAAQ+H,OACPjH,EAAMqF,SAAWnG,EAAQuI,eAAiB,KAC1CzH,EAAMoF,WAAalG,EAAQwI,aAAe,MAC3CzG,KAAK,cACG,kBACRlB,GAAM0C,WAAarB,EAAMC,cACjB,aACYtB,MAGtBkH,EACAK,IAEFtH,EAAMoF,WAAapE,EAAoB,YAElC5C,GAAE8G,EAASO,GAAQzF,EAAM2H,OAAQZ,EAAS/G,EAAM4H,SAG5CrI,SACJV,gBAEC,cACAkB,cACqB,gBACA,4BAEA,sBACA,0BACA6E,sBACA,4BAEjB,SACC"}