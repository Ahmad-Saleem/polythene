{"version":3,"file":"polythene-core-switch.js","sources":["../src/classes.js","../src/theme/vars.js","../src/theme/layout.js","../src/theme/color.js","../src/theme/index.js","../src/switch.js","../src/view-control.js"],"sourcesContent":["\nexport default {\n  component: \"pe-switch-control\",\n\n  // elements\n  knob:      \"pe-switch-control__knob\",\n  thumb:     \"pe-switch-control__thumb\",\n  track:     \"pe-switch-control__track\",\n};\n","import { vars } from \"polythene-theme\";\nimport { vars as selectionControlVars } from \"polythene-core-selection-control\";\nimport { vars as iconButtonVars } from \"polythene-core-icon-button\";\nimport { rgba } from \"polythene-core-css\";\n\nconst hit_area_padding = (vars.grid_unit_icon_button - vars.unit_icon_size) / 2; // 12\n\nexport default Object.assign(\n  {},\n  selectionControlVars,\n  {\n    track_height:                       14,\n    track_length:                       36,\n    thumb_size:                         20,\n    padding:                            vars.grid_unit_component,\n    icon_button_padding:                iconButtonVars.padding,\n    hit_area_padding,\n\n    animation_duration:                 vars.animation_duration,\n\n    color_light_thumb_on:               rgba(vars.color_primary),\n    color_light_thumb_off:              \"#f1f1f1\",\n    color_light_thumb_disabled:         \"#bdbdbd\",\n    color_light_wash_on:                rgba(vars.color_primary),\n    color_light_wash_off:               iconButtonVars.color_light_wash,\n\n    color_light_track_on:               rgba(vars.color_primary_faded),\n    color_light_track_on_opacity:       .55,\n    color_light_track_off:              rgba(vars.color_light_foreground, vars.blend_light_text_regular),\n    color_light_track_off_opacity:      .55,\n    color_light_track_disabled:         rgba(vars.color_light_foreground, vars.blend_light_background_disabled),\n    color_light_track_disabled_opacity: 1,\n\n    // icon color may be set in theme; default \"currentcolor\"\n    // color_light_icon_on:                   \"currentcolor\",\n    // color_light_icon_off:                  \"currentcolor\",\n\n    // color_light_focus_on and so on taken from selectionControlVars\n\n    color_dark_thumb_on:                rgba(vars.color_primary),\n    color_dark_thumb_off:               \"#bdbdbd\",\n    color_dark_thumb_disabled:          \"#555\",\n    color_dark_wash_on:                 rgba(vars.color_primary),\n    color_dark_wash_off:                iconButtonVars.color_dark_wash,\n\n    color_dark_track_on:                rgba(vars.color_primary_faded, vars.blend_dark_text_tertiary), // or \"#5a7f7c\"\n    color_dark_track_on_opacity:        9,\n    color_dark_track_off:               \"#717171\",\n    color_dark_track_off_opacity:       .55,\n    color_dark_track_disabled:          \"#717171\",\n    color_dark_track_disabled_opacity:  .3,\n\n    // icon color may be set in theme; default \"currentcolor\"\n    // color_dark_icon_on:                    \"currentcolor\"\n    // color_dark_icon_off:                   \"currentcolor\"\n\n    // color_dark_focus_on and so on taken from selectionControlVars\n  }\n);\n","import { layout as selectionControlLayout } from \"polythene-core-selection-control\";\nimport { vars } from \"polythene-theme\";\nimport { mixin } from \"polythene-core-css\";\n\nconst transition = (componentVars, properties, duration = componentVars.animation_duration) => [\n  mixin.defaultTransition(properties, duration, \"ease-out\")\n];\n\nconst customSize = (componentVars, size) => {\n  const factor = size / vars.unit_icon_size;\n  const thumbSize = Math.floor(0.5 * componentVars.thumb_size * factor) * 2; // round to even\n  const scaledTrackHeight = Math.floor(0.5 * componentVars.track_height * factor) * 2; // round to even\n  const scaledTrackWidth = Math.floor(0.5 * componentVars.track_length * factor) * 2;\n  const scaledThumbSize = Math.floor(0.5 * componentVars.thumb_size * factor) * 2;\n  const trackTop = ((componentVars.label_height * factor - scaledTrackHeight) / 2);\n  const thumbPadding = componentVars.icon_button_padding;\n  const thumbMargin = (size - scaledThumbSize) / 2;\n  const thumbOuterSize = size + 2 * thumbPadding;\n  const thumbOffsetMin = -(thumbOuterSize / 2) + (thumbSize / 2);\n  const thumbOffsetMax = thumbOffsetMin + scaledTrackWidth - thumbSize;\n  const thumbOffsetY = thumbOffsetMin + thumbMargin;\n  const trackVisualOffset = 0.3; // prevent sub pixel of track to shine through knob border\n\n  return {\n    \" .pe-control__form-label\": {\n      height: size + \"px\",\n      minWidth: scaledTrackWidth + \"px\",\n    },\n    \" .pe-control__label\": [\n      mixin.defaultTransition(\"all\", componentVars.animation_duration),\n      {\n        paddingLeft: (componentVars.padding * factor + 8 + scaledTrackWidth) + \"px\"\n      }\n    ],\n    \" .pe-switch-control__track\": {\n      left: trackVisualOffset + \"px\",\n      height: scaledTrackHeight + \"px\",\n      width: (scaledTrackWidth - 2 * trackVisualOffset) + \"px\",\n      top: trackTop + \"px\",\n      borderRadius: scaledTrackHeight + \"px\"\n    },\n    \" .pe-switch-control__thumb\": {\n      top: thumbOffsetY + \"px\",\n      left: thumbOffsetMin + \"px\"\n    },\n\n    \" .pe-switch-control__knob\": {\n      width: scaledThumbSize + \"px\",\n      height: scaledThumbSize + \"px\",\n      margin: thumbMargin + \"px\"\n    },\n\n    \" .pe-button__content\": {\n      padding: thumbPadding + \"px\"\n    },\n\n    \".pe-control--on\": {\n      \" .pe-switch-control__thumb\": {\n        left: thumbOffsetMax + \"px\"\n      }\n    }\n  };\n};\n\nexport default (selector, componentVars) =>\n  selectionControlLayout(selector, componentVars, \"checkbox\").concat(\n    [{\n      [selector]: {\n        \" .pe-switch-control__track\": [\n          transition(componentVars, \"background, opacity\"),\n          {\n            position: \"absolute\",\n            left: 0\n          }\n        ],\n\n        \" .pe-switch-control__thumb\": [\n          transition(componentVars, \"left, color\"),\n          {\n            position: \"absolute\",\n            zIndex: 1, // Prevents flickering of text label when toggling\n            color: \"inherit\",\n\n            \":focus\": {\n              outline: 0\n            }\n          }\n        ],\n\n        \" .pe-switch-control__knob\": {\n          position: \"relative\",\n          borderRadius: \"50%\"\n        },\n\n        \" .pe-button__content .pe-switch-control__knob .pe-icon\": [\n          mixin.fit(),\n          transition(componentVars, \"color\"),\n          {\n            width: \"100%\",\n            height: \"100%\"\n          }\n        ],\n\n        \" .pe-button__focus\": [\n          transition(componentVars, \"all\")\n        ],\n\n        \".pe-control--small\":   customSize(componentVars, vars.unit_icon_size_small),\n        \".pe-control--regular\": customSize(componentVars, vars.unit_icon_size),\n        \".pe-control--medium\":  customSize(componentVars, vars.unit_icon_size_medium),\n        \".pe-control--large\":   customSize(componentVars, vars.unit_icon_size_large)\n      }\n    }]\n  );\n\n","\nconst style = (scopes, selector, componentVars, tint) => [{\n  [scopes.map(s => s + selector).join(\",\")]: {\n\n    \" .pe-control__label\": {\n      color: componentVars[\"color_\" + tint + \"_label\"]\n    },\n\n    \".pe-control--off\": {\n      \" .pe-switch-control__track\": {\n        opacity: componentVars[\"color_\" + tint + \"_track_off_opacity\"],\n        backgroundColor: componentVars[\"color_\" + tint + \"_track_off\"]\n      },\n      \" .pe-switch-control__thumb\": {\n        color: componentVars[\"color_\" + tint + \"_thumb_off\"]\n      },\n      \" .pe-switch-control__knob\": {\n        backgroundColor: \"currentcolor\"\n      },\n      \" .pe-button--focus\": {\n        \" .pe-button__focus\": {\n          opacity: componentVars[\"color_\" + tint + \"_focus_off_opacity\"],\n          backgroundColor: componentVars[\"color_\" + tint + \"_focus_off\"]\n        }\n      },\n      \" .pe-icon\": {\n        color: componentVars[\"color_\" + tint + \"_icon_off\"] || \"currentcolor\"\n      },\n      \" .pe-control__label\": {\n        color: componentVars[\"color_\" + tint + \"_off_label\"] || \"inherit\"\n      },\n    },\n\n    \".pe-control--on\": {\n      \" .pe-switch-control__track\": {\n        opacity: componentVars[\"color_\" + tint + \"_track_on_opacity\"],\n        backgroundColor: componentVars[\"color_\" + tint + \"_track_on\"]\n      },\n      \" .pe-switch-control__thumb\": {\n        color: componentVars[\"color_\" + tint + \"_thumb_on\"]\n      },\n      \" .pe-switch-control__knob\": {\n        backgroundColor: \"currentcolor\"\n      },\n      \" .pe-button--focus\": {\n        \" .pe-button__focus\": {\n          opacity: componentVars[\"color_\" + tint + \"_focus_on_opacity\"],\n          backgroundColor: componentVars[\"color_\" + tint + \"_focus_on\"]\n        }\n      },\n      \" .pe-icon\": {\n        color: componentVars[\"color_\" + tint + \"_icon_on\"] || \"currentcolor\"\n      },\n      \" .pe-control__label\": {\n        color: componentVars[\"color_\" + tint + \"_on_label\"] || \"inherit\"\n      },\n    },\n\n    \".pe-control--on.pe-control--disabled, &.pe-control--off.pe-control--disabled\": {\n      \" .pe-control__label\": {\n        color: componentVars[\"color_\" + tint + \"_disabled\"]\n      },\n      \" .pe-switch-control__track\": {\n        opacity: componentVars[\"color_\" + tint + \"_track_disabled_opacity\"],\n        backgroundColor: componentVars[\"color_\" + tint + \"_track_disabled\"]\n      },\n      \" .pe-switch-control__thumb\": {\n        color: componentVars[\"color_\" + tint + \"_thumb_disabled\"]\n      },\n    },\n  }\n}];\n\nconst noTouchStyle = (scopes, selector, componentVars, tint) => [{\n  [scopes.map(s => s + selector + \":hover\").join(\",\")]: {\n    \".pe-control--on\": {\n      \" .pe-button__wash\": {\n        backgroundColor: componentVars[\"color_\" + tint + \"_wash_on\"]\n      }\n    },\n    \".pe-control--off\": {\n      \" .pe-button__wash\": {\n        backgroundColor: componentVars[\"color_\" + tint + \"_wash_off\"]\n      }\n    }\n  }\n}];\n\nexport default (selector, componentVars) => [\n  style([\".pe-dark-tone\", \".pe-dark-tone \"], selector, componentVars, \"dark\"), // has/inside dark tone\n  style([\"\", \".pe-light-tone\", \".pe-light-tone \"], selector, componentVars, \"light\"), // normal, has/inside light tone\n  noTouchStyle([\"html.pe-no-touch .pe-dark-tone \"], selector, componentVars, \"dark\"), // inside dark tone\n  noTouchStyle([\"html.pe-no-touch \", \"html.pe-no-touch .pe-light-tone \"], selector, componentVars, \"light\"),\n];\n\n","import { styler } from \"polythene-core-css\";\nimport classes from \"../classes\";\nimport vars from \"./vars\";\nimport layout from \"./layout\";\nimport color from \"./color\";\n\nconst fns = [layout, color];\nconst selector = `.${classes.component}`;\n\nexport const customTheme = (customSelector, customVars) => \n  styler.generateStyles([customSelector, selector], {...vars, ...customVars}, fns);\n\nstyler.generateStyles([selector], vars, fns);\n","import { customTheme } from \"./theme\";\nimport classes from \"./classes\";\n\nexport const theme = customTheme;\n\n// Don't export 'element': it will be the wrapped selection control component (set in polythene-xxx-checkbox)\n\n// Props to be passed to a selection control\n\nexport const createProps = vnode => {\n  const attrs = vnode.attrs;\n  return Object.assign(\n    {},\n    attrs,\n    {\n      theme,\n      selectable: attrs.selectable || (() => true), // default: always selectable, regardless the checked state\n      instanceClass: classes.component,\n      type: \"checkbox\"\n    }\n  );\n};\n","import classes from \"./classes\";\n\nexport const getElement = vnode =>\n  vnode.attrs.element || \"div\";\n\nexport const createContent = (vnode, { renderer: h, Shadow, IconButton }) => {\n  const attrs = vnode.attrs;\n\n  const zOff = attrs.zOff !== undefined ? attrs.zOff : 1;\n  const zOn = attrs.zOn !== undefined ? attrs.zOn : 2;\n  const z = attrs.checked ? zOn : zOff;\n  const raised = attrs.disabled\n    ? false\n    : attrs.raised !== undefined ? attrs.raised : true;\n  return [\n    h(\"div\",\n      {\n        className: classes.track,\n        key: \"track\"\n      }\n    ),\n    h(IconButton, Object.assign(\n      {},\n      {\n        className: classes.thumb,\n        key: \"button\",\n        content: h(\"div\",\n          { className: classes.knob },\n          [\n            attrs.icon ? attrs.icon : null,\n            raised\n              ? h(Shadow,\n                {\n                  z: z,\n                  animated: true\n                }\n              )\n              : null\n          ]\n        ),\n        style: attrs.style,\n        disabled: attrs.disabled,\n        events: attrs.events,\n        ink: attrs.ink || false,\n        inactive: attrs.inactive\n      },\n      attrs.iconButton\n    ))\n  ];\n};\n"],"names":["hit_area_padding","vars","grid_unit_icon_button","unit_icon_size","_extends","selectionControlVars","grid_unit_component","iconButtonVars","padding","animation_duration","rgba","color_primary","color_light_wash","color_primary_faded","color_light_foreground","blend_light_text_regular","blend_light_background_disabled","color_dark_wash","blend_dark_text_tertiary","transition","componentVars","properties","duration","mixin","defaultTransition","customSize","size","factor","thumbSize","Math","floor","thumb_size","scaledTrackHeight","track_height","scaledTrackWidth","track_length","scaledThumbSize","trackTop","label_height","thumbPadding","icon_button_padding","thumbMargin","thumbOffsetMin","thumbOffsetMax","thumbOffsetY","trackVisualOffset","selector","selectionControlLayout","concat","fit","unit_icon_size_small","unit_icon_size_medium","unit_icon_size_large","style","scopes","tint","map","s","join","noTouchStyle","fns","layout","color","classes","component","customTheme","customSelector","customVars","styler","generateStyles","theme","createProps","attrs","vnode","selectable","getElement","element","createContent","h","renderer","Shadow","IconButton","zOff","undefined","zOn","z","checked","raised","disabled","track","thumb","className","knob","icon","events","ink","inactive","iconButton"],"mappings":"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"}