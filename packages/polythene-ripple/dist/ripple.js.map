{"version":3,"file":null,"sources":["../src/theme/vars.js","../src/theme/layout.js","../src/theme/color.js","../src/theme/index.js","../src/theme/animation.js","../src/ripple.js"],"sourcesContent":["export default {\n  color:         \"inherit\" // only specify this variable to get both states\n  // color_light:   \"inherit\",\n  // color_dark:    \"inherit\"\n};","import { mixin, styler } from \"polythene-css\";\nimport { vars } from \"polythene-theme\";\n\nconst createStyles = (componentVars, className = \"\") => {\n  const selector = `${className}.pe-ripple`;\n  return [{\n    [selector]: [\n      mixin.fit(), {\n        color: \"inherit\",\n        \"border-radius\": \"inherit\",\n\n        \"&.pe-ripple--constrained\": {\n          \"border-radius\": \"inherit\",\n\n          \" .pe-ripple__mask\": {\n            overflow: \"hidden\",\n            \"border-radius\": \"inherit\"\n          }\n        },\n        \" .pe-ripple__mask\": [\n          mixin.fit(),\n          mixin.vendorize({\n            \"transform\": \"translate3d(0,0,0)\"\n          }, vars.prefixes_transform)\n        ],\n\n        \" .pe-ripple__waves\": {\n          outline: \"1px solid transparent\", // for IE10\n          position: \"absolute\",\n          \"border-radius\": \"50%\",\n          \"pointer-events\": \"none\",\n          display: \"none\"\n        },\n        \" .pe-ripple__waves--animating\": {\n          display: \"block\"\n        }\n      }\n    ]\n  }];\n};\n\nexport default componentVars => styler.createStyles(componentVars, createStyles);\n\n","import { styler } from \"polythene-css\";\n\nconst style = (componentVars, scope, selector, tint) => {\n  const color = componentVars[\"color_\" + tint] || componentVars[\"color\"] || \"inherit\";\n  return [{\n    [scope + selector]: {\n      color\n    }\n  }];\n};\n\nconst createStyles = (componentVars, className = \"\") => {\n  const selector = `${className}.pe-ripple`;\n  return [\n    style(componentVars, \"\",                selector, \"light\"),\n    style(componentVars, \".pe-dark-theme \", selector, \"dark\" ) // inside dark theme\n  ];\n};\n\nexport default componentVars => styler.createStyles(componentVars, createStyles);\n","import { styler } from \"polythene-css\";\nimport { styles } from \"polythene-theme\";\nimport vars from \"./vars\";\nimport layout from \"./layout\";\nimport color from \"./color\";\n\nconst key = \"ripple\";\nconst className = \"pe-ripple\";\n\nconst styleComponent = (className, styles) =>\n  styler.styleComponent(className, styles, key, vars, layout, color);\n\nexport const customTheme = (className, vars) =>\n  // Inject additional styles as use the className as key\n  styleComponent(className, styler.addComponentStyle(\n    className, styles, key, vars\n  ));\n\nstyleComponent(className, styles);","import { isTouch, animationEndEvent } from \"polythene-core\";\nimport { styler } from \"polythene-css\";\nimport { vars } from \"polythene-theme\";\n\nconst ANIMATION_END_EVENT =    animationEndEvent();\nconst DEFAULT_START_OPACITY =  0.2;\nconst DEFAULT_END_OPACITY =    0.0;\nconst DEFAULT_START_SCALE =    0.1;\nconst DEFAULT_END_SCALE =      2.0;\nconst OPACITY_DECAY_VELOCITY = 0.35;\n\nexport default (e, el, wavesEl, attrs, classes, endCallback) => {\n  const rect = el.getBoundingClientRect();\n  const x = (isTouch && e.touches) ? e.touches[0].pageX : e.clientX;\n  const y = (isTouch && e.touches) ? e.touches[0].pageY : e.clientY;  \n  const w = el.offsetWidth;\n  const h = el.offsetHeight;\n  const waveRadius = Math.sqrt(w * w + h * h);\n  const mx = (attrs.center) ? (rect.left + rect.width / 2) : x;\n  const my = (attrs.center) ? (rect.top + rect.height / 2) : y;\n  const rx = mx - rect.left - waveRadius / 2;\n  const ry = my - rect.top - waveRadius / 2;\n  const startOpacity = attrs.startOpacity !== undefined\n    ? attrs.startOpacity\n    : DEFAULT_START_OPACITY;\n  const opacityDecayVelocity = attrs.opacityDecayVelocity !== undefined\n    ? attrs.opacityDecayVelocity\n    : OPACITY_DECAY_VELOCITY;\n  const endOpacity = attrs.endOpacity || DEFAULT_END_OPACITY;\n  const startScale = attrs.startScale || DEFAULT_START_SCALE;\n  const endScale = attrs.endScale || DEFAULT_END_SCALE;\n  const duration = attrs.duration\n    ? attrs.duration\n    : 1 / opacityDecayVelocity * 0.2;\n  const color = window.getComputedStyle(el).color;\n  const animationId = `ripple_animation_${new Date().getTime()}`;\n  const style = wavesEl.style;\n  style.width = style.height = waveRadius + \"px\";\n  style.top = ry + \"px\";\n  style.left = rx + \"px\";\n  style[\"animation-duration\"] =\n    style[\"-webkit-animation-duration\"] =\n    style[\"-moz-animation-duration\"] =\n    style[\"-o-animation-duration\"] = duration + \"s\";\n  style.backgroundColor = color;\n  style.opacity = startOpacity;\n  style.animationName = animationId;\n  style.animationTimingFunction = attrs.animationTimingFunction || vars.animation_curve_default;\n\n  const keyframeStyle = [{\n    [`@keyframes ${animationId}`]: {\n      \" 0%\": {\n        transform: \"scale(\" + startScale + \")\",\n        \"opacity\": startOpacity\n      },\n      \" 100%\": {\n        transform: \"scale(\" + endScale + \")\",\n        \"opacity\": endOpacity\n      }\n    }\n  }];\n  styler.add(animationId, keyframeStyle);\n\n  const onEnd = evt => {\n    if (attrs.persistent) {\n      style.opacity = endOpacity;\n      style.transform = \"scale(\" + endScale + \")\";\n    } else {\n      endCallback();\n      wavesEl.classList.remove(classes.wavesAnimating);\n    }\n    wavesEl.removeEventListener(ANIMATION_END_EVENT, onEnd, false);\n    styler.remove(animationId);\n    if (attrs.end) {\n      attrs.end(evt);\n    }\n  };\n  wavesEl.addEventListener(ANIMATION_END_EVENT, onEnd, false);\n  if (attrs.start) {\n    attrs.start(e);\n  }\n  wavesEl.classList.add(classes.wavesAnimating);\n};\n","import m from \"mithril\";\nimport { touchEndEvent, filterSupportedAttributes } from \"polythene-core\";\nimport { customTheme } from \"./theme\";\nimport animation from \"./theme/animation\";\n\nconst classes = {\n  component:      \"pe-ripple\",\n  waves:          \"pe-ripple__waves\",\n  mask:           \"pe-ripple__mask\",\n  constrained:    \"pe-ripple--constrained\",\n  wavesAnimating: \"pe-ripple__waves--animating\"\n};\n\nlet destroyRipple;\n\nconst initRipple = vnode => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  if (!vnode.dom) {\n    return;\n  }\n  state.ripple = vnode.dom;\n  state.waves = vnode.dom.querySelector(`.${classes.waves}`);\n  \n  const tap = e => {\n    if (state.animating) {\n      return;\n    }\n    animation(e, state.ripple, state.waves, attrs, classes, () => state.animating = false);\n    state.animating = true;\n  };\n  const triggerEl = vnode.dom.parentElement;\n  triggerEl.addEventListener(touchEndEvent, tap, false);\n  destroyRipple = () => {\n    triggerEl.removeEventListener(touchEndEvent, tap, false);\n  };\n};\n\nconst view = vnode => {\n  const attrs = vnode.attrs;\n  if (attrs.disabled) {\n    return null;\n  }\n  const element = attrs.element || \"div\";\n  const props = Object.assign(\n    {},\n    filterSupportedAttributes(attrs),\n    {\n      class: [\n        classes.component,\n        (attrs.constrained !== false ? classes.constrained : null),\n        attrs.class\n      ].join(\" \")\n    }\n  );\n  const content = m(\"div\", {\n    class: classes.mask\n  }, m(\"div\", {\n    class: classes.waves\n  }));\n  return m(element, props, [attrs.before, content, attrs.after]);\n};\n\nexport const ripple = {\n  theme: customTheme, // accepts (className, vars)\n  oninit: vnode => {\n    vnode.state = {\n      animating: false,\n      ripple: undefined,\n      waves: undefined\n    };\n  },\n  oncreate: initRipple,\n  onremove: destroyRipple,\n  view\n};\n"],"names":["createStyles","componentVars","className","selector","mixin","fit","vendorize","vars","prefixes_transform","styler","style","scope","tint","color","key","styleComponent","styles","layout","customTheme","addComponentStyle","ANIMATION_END_EVENT","animationEndEvent","DEFAULT_START_OPACITY","DEFAULT_END_OPACITY","DEFAULT_START_SCALE","DEFAULT_END_SCALE","OPACITY_DECAY_VELOCITY","e","el","wavesEl","attrs","classes","endCallback","rect","getBoundingClientRect","x","isTouch","touches","pageX","clientX","y","pageY","clientY","w","offsetWidth","h","offsetHeight","waveRadius","Math","sqrt","mx","center","left","width","my","top","height","rx","ry","startOpacity","undefined","opacityDecayVelocity","endOpacity","startScale","endScale","duration","window","getComputedStyle","animationId","Date","getTime","backgroundColor","opacity","animationName","animationTimingFunction","animation_curve_default","keyframeStyle","add","onEnd","persistent","transform","classList","remove","wavesAnimating","removeEventListener","end","evt","addEventListener","start","destroyRipple","initRipple","state","vnode","dom","ripple","waves","querySelector","tap","animating","triggerEl","parentElement","touchEndEvent","view","disabled","element","props","babelHelpers.extends","filterSupportedAttributes","component","constrained","class","join","content","m","mask","before","after"],"mappings":"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"}