"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _mithril=require("mithril");var _mithril2=_interopRequireDefault(_mithril);var multiple=function multiple(mOpts){var items=[];var removeItem=function removeItem(id){var item=findItem(id);var index=items.indexOf(item);if(index!==-1){items.splice(index,1)}};var findItem=function findItem(id){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=items[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var item=_step.value;if(item.instanceId===id){return item}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}};var next=function next(){if(items.length){items[0].show=true;_mithril2["default"].redraw()}};var setPauseState=function setPauseState(pause,instanceId){var item=findItem(instanceId);if(item){if(pause){item.unpause=false;item.pause=true}else{item.pause=false;item.unpause=true}}};return{count:function count(){return items.length},show:function show(opts){var instanceId=arguments.length<=1||arguments[1]===undefined?mOpts.defaultId:arguments[1];if(mOpts.queue){items.push({instanceId:instanceId,opts:opts});if(items.length===1){next()}}else{var item=findItem(instanceId);if(!item){items.push({instanceId:instanceId,opts:opts,show:true})}}},hide:function hide(){var instanceId=arguments.length<=0||arguments[0]===undefined?mOpts.defaultId:arguments[0];if(mOpts.queue){if(items.length){var item=items[0];if(item){item.hide=true}}}else{var item=findItem(instanceId);if(item){item.hide=true}}},remove:function remove(){var instanceId=arguments.length<=0||arguments[0]===undefined?mOpts.defaultId:arguments[0];if(mOpts.queue){items.splice(0,1);setTimeout(function(){next()},0)}else{removeItem(instanceId)}},pause:function pause(){var instanceId=arguments.length<=0||arguments[0]===undefined?mOpts.defaultId:arguments[0];setPauseState(true,instanceId)},unpause:function unpause(){var instanceId=arguments.length<=0||arguments[0]===undefined?mOpts.defaultId:arguments[0];setPauseState(false,instanceId)},view:function view(){var toShowItems=items.filter(function(item){return item.show});if(!toShowItems.length){document.body.classList.remove(mOpts.bodyShowClass);return(0,_mithril2["default"])(mOpts.noneTag)}else{document.body.classList.add(mOpts.bodyShowClass)}return(0,_mithril2["default"])(mOpts.tag,toShowItems.map(function(itemData,index){if(itemData.show){return _mithril2["default"].component(mOpts.instance,Object.assign({},itemData,{key:index}))}}))}}};exports["default"]=multiple;module.exports=exports["default"];