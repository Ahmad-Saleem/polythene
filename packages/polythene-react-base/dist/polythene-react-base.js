!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-hyperscript"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-hyperscript","react-dom"],t):t(e.polythene=e.polythene||{},e.react,e["react-hyperscript"],e["react-dom"])}(this,function(e,t,n,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n="default"in n?n.default:n,r="default"in r?r.default:r;var h={autofocus:"autoFocus",class:"className",className:"className",enctype:"encType",formaction:"formAction",maxlength:"maxLength",minlength:"minLength",onblur:"onBlur",onchange:"onChange",onclick:"onClick",onfocus:"onFocus",oninput:"onInput",onkeydown:"onKeyDown",onkeyup:"onKeyUp",onmousedown:"onMouseDown",onmouseout:"onMouseOut",onmouseover:"onMouseOver",onmouseup:"onMouseUp",onscroll:"onScroll",onsubmit:"onSubmit",ontouchend:"onTouchEnd",ontouchmove:"onTouchMove",ontouchstart:"onTouchStart",readonly:"readOnly",tabindex:"tabIndex"},y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function(e){return function(t){function n(t){o(this,n);var r=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t)),i=y({},e,{state:{},attrs:r.props,redrawValues:void 0});return e.oninit&&e.oninit(i),r.state=i,r}return i(n,t),v(n,[{key:"componentDidMount",value:function(){var e=this;this._mounted=!0,this.state.state.redrawOnUpdate&&this.state.state.redrawOnUpdate.map(function(t){e._mounted&&e.setState({redrawValues:t})})}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"render",value:function(){return e.view({state:this.state.state,attrs:this.props},this.props.children)}}]),n}(t.Component)},_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return"object"===_(t[0])?n.call.apply(n,[null,m(t[0])].concat(u(t.slice(1)))):n.call.apply(n,[null].concat(t))};b.trust=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div";return null==e&&(e=""),n(t,{dangerouslySetInnerHTML:{__html:e}})};var g=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e){!function(){function t(){function e(){return arguments.length>0&&arguments[0]!==j&&r(e,arguments[0]),e._state.value}return n(e),arguments.length>0&&arguments[0]!==j&&r(e,arguments[0]),e}function n(e){e.constructor=t,e._state={id:w++,value:void 0,state:0,derive:void 0,recover:void 0,deps:{},parents:[],endStream:void 0,unregister:void 0},e.map=e["fantasy-land/map"]=l,e["fantasy-land/ap"]=p,e["fantasy-land/of"]=t,e.valueOf=d,e.toJSON=h,e.toString=d,Object.defineProperties(e,{end:{get:function(){if(!e._state.endStream){var n=t();n.map(function(t){return!0===t&&(f(e),n._state.unregister=function(){f(n)}),t}),e._state.endStream=n}return e._state.endStream}}})}function r(e,t){o(e,t);for(var n in e._state.deps)a(e._state.deps[n],!1);null!=e._state.unregister&&e._state.unregister(),i(e)}function o(e,t){e._state.value=t,e._state.changed=!0,2!==e._state.state&&(e._state.state=1)}function a(e,t){var n=e._state.parents;if(n.length>0&&n.every(v)&&(t||n.some(m))){var r=e._state.derive();if(r===j)return!1;o(e,r)}}function i(e){e._state.changed=!1;for(var t in e._state.deps)e._state.deps[t]._state.changed=!1}function u(e,n){if(!n.every(y))throw new Error("Ensure that each item passed to stream.combine/stream.merge is a stream");return s(t(),n,function(){return e.apply(this,n.concat([n.filter(m)]))})}function s(e,t,n){var r=e._state;return r.derive=n,r.parents=t.filter(_),c(e,r.parents),a(e,!0),e}function c(e,t){for(var n=0;n<t.length;n++)t[n]._state.deps[e._state.id]=e,c(e,t[n]._state.parents)}function f(e){for(var t=0;t<e._state.parents.length;t++)delete e._state.parents[t]._state.deps[e._state.id];for(var n in e._state.deps){var r=e._state.deps[n],o=r._state.parents.indexOf(e);o>-1&&r._state.parents.splice(o,1)}e._state.state=2,e._state.deps={}}function l(e){return u(function(t){return e(t())},[this])}function p(e){return u(function(e,t){return e()(t())},[e,this])}function d(){return this._state.value}function h(){return null!=this._state.value&&"function"==typeof this._state.value.toJSON?this._state.value.toJSON():this._state.value}function y(e){return e._state}function v(e){return 1===e._state.state}function m(e){return e._state.changed}function _(e){return 2!==e._state.state}function b(e){return u(function(){return e.map(function(e){return e()})},e)}function g(e,t,n){var r=u(function(n){return t=e(t,n._state.value)},[n]);return 0===r._state.state&&r(t),r}function O(e,t){var n=e.map(function(e){var t=e[0];return 0===t._state.state&&t(void 0),t});return u(function(){var r=arguments[arguments.length-1];return n.forEach(function(n,o){r.indexOf(n)>-1&&(t=e[o][1](t,n._state.value))}),t},n)}var w=0,j={};t["fantasy-land/of"]=t,t.merge=b,t.combine=u,t.scan=g,t.scanMerge=O,t.HALT=j,e.exports=t}()}),O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),j=function(e){var n=e.createContent,o=void 0===n?function(){}:n,a=e.createProps,i=void 0===a?function(){return{}}:a,u=e.getElement,l=void 0===u?function(){return"div"}:u,p=e.component,d=e.getInitialState,y=void 0===d?function(){return{}}:d,v=e.onMount,m=void 0===v?function(){}:v,_=e.onUnMount,j=void 0===_?function(){}:_,k=e.view,M=void 0===k?null:k;return function(e){function t(e){s(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=O({},p,n.createVirtualNode(),{redrawValues:void 0}),o=y(r,g);return n.state=o,n.registerDOM=n.registerDOM.bind(n),n._render=n._render.bind(n),n}return f(t,e),w(t,[{key:"componentDidMount",value:function(){var e=this;this._mounted=!0,this.state.redrawOnUpdate&&this.state.redrawOnUpdate.map(function(t){return e._mounted&&e.setState({redrawValues:t})}),m(this.createVirtualNode())}},{key:"componentWillUnmount",value:function(){this._mounted=!1,j(this.createVirtualNode())}},{key:"createVirtualNode",value:function(){var e=O({},this.props);return{state:this.state,attrs:e,children:e.children,dom:this.dom}}},{key:"registerDOM",value:function(e){this.dom||(this.dom=r.findDOMNode(e))}},{key:"_render",value:function(){var e=this.createVirtualNode();return b(p||l(e),O({},i(e,{renderer:b,requiresKeys:!0,keys:h}),{ref:this.registerDOM}),[e.attrs.before,o(e,{renderer:b,requiresKeys:!0,keys:h}),e.attrs.after])}},{key:"render",value:function(){return M?M(this.createVirtualNode(),{renderer:b,render:this._render}):this._render(this.props)}}]),t}(t.Component)},k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),S=function(e){var n=e.createContent,o=void 0===n?function(){}:n,a=e.createProps,i=void 0===a?function(){return{}}:a,u=e.getElement,s=void 0===u?function(){return"div"}:u,c=e.onMount,f=void 0===c?function(){}:c,y=e.onUnMount,v=void 0===y?function(){}:y,m=e.component,_=e.view,g=void 0===_?null:_;return function(e){function t(e){l(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.registerDOM=n.registerDOM.bind(n),n._render=n._render.bind(n),n}return d(t,e),M(t,[{key:"componentDidMount",value:function(){f(this.createVirtualNode())}},{key:"componentWillUnmount",value:function(){v(this.createVirtualNode())}},{key:"createVirtualNode",value:function(){var e=k({},this.props);return{attrs:e,children:e.children,dom:this.dom}}},{key:"registerDOM",value:function(e){this.dom||(this.dom=r.findDOMNode(e))}},{key:"_render",value:function(){var e=this.createVirtualNode();return b(m||s(e),k({},i(e,{renderer:b,requiresKeys:!0,keys:h}),{ref:this.registerDOM}),[e.attrs.before,o(e,{renderer:b,requiresKeys:!0,keys:h}),e.attrs.after])}},{key:"render",value:function(){return g?g(this.createVirtualNode(),{renderer:b,render:this._render}):this._render(this.props)}}]),t}(t.Component)};e.keys=h,e.MithrilToReact=m,e.renderer=b,e.StateComponent=j,e.ViewComponent=S,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-react-base.js.map
