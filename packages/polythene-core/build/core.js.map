{"version":3,"file":null,"sources":["../src/touch.js","../src/events.js","../src/animation-event.js","../src/attrs.js"],"sourcesContent":["export const isTouch = ((\"ontouchstart\" in window) || (navigator.MaxTouchPoints > 0) || (navigator.msMaxTouchPoints > 0));\n\nexport const touchStartEvent = isTouch ? \"click\" : \"mousedown\";\n\nexport const touchEndEvent = isTouch ? \"click\" : \"mouseup\";\n\ndocument.querySelector(\"html\").classList.add(isTouch ? \"pe-touch\" : \"pe-no-touch\");\n\n","import { touchEndEvent } from \"./touch\";\n\nconst listeners = {};\n\n// https://gist.github.com/Eartz/fe651f2fadcc11444549\nexport const throttle = (func, s = 0.05, context = window) => {\n  let wait = false;\n  return (...args) => {\n    const later = () => {\n      func.apply(context, args);\n    };\n    if (!wait) {\n      later();\n      wait = true;\n      setTimeout(() => {\n        wait = false;\n      }, s);\n    }\n  };\n};\n\nexport const subscribe = (eventName, listener, delay) => {\n  listeners[eventName] = listeners[eventName] || [];\n  listeners[eventName].push(delay ? throttle(listener, delay) : listener);\n};\n\nexport const unsubscribe = (eventName, listener) => {\n  if (!listeners[eventName]) {\n    return;\n  }\n  const index = listeners[eventName].indexOf(listener);\n  if (index > -1) {\n    listeners[eventName].splice(index, 1);\n  }\n};\n\nexport const emit = (eventName, event) => {\n  if (!listeners[eventName]) {\n    return;\n  }\n  listeners[eventName].forEach((listener) => {\n    listener(event);\n  });\n};\n\nwindow.addEventListener(\"resize\", e => (emit(\"resize\", e)));\nwindow.addEventListener(\"scroll\", e => (emit(\"scroll\", e)));\nwindow.addEventListener(\"keydown\", e => (emit(\"keydown\", e)));\nwindow.addEventListener(touchEndEvent, e => (emit(touchEndEvent, e)));\n\n","\nconst evts = {\n  \"animation\": \"animationend\",\n  \"OAnimation\": \"oAnimationEnd\",\n  \"MozAnimation\": \"animationend\",\n  \"WebkitAnimation\": \"webkitAnimationEnd\"\n};\n\nconst element = () => document.createElement(\"fakeelement\");\n\nexport const animationEndEvent = () => {\n  const el = element();\n  for (let a in evts) {\n    if (el.style[a] !== undefined) {\n      return evts[a];\n    }\n  }\n};","\nconst r = (acc, p) => (acc[p] = 1, acc);\n\n/* \nSeparately handled props:\n- class\n- element\n*/\n\nconst defaultAttrs = [\n  // Mithril\n  \"key\",\n  \"oninit\",\n  \"oncreate\",\n  \"onupdate\",\n  \"onbeforeremove\",\n  \"onremove\",\n  \"onbeforeupdate\",\n  \"style\",\n  \"href\",\n  // Polythene\n  // see also \"Separately handled props\" above\n  \"id\",\n  \"tabindex\"\n].reduce(r, {});\n\nexport const filterSupportedAttributes = (attrs, componentAttrs = []) => {\n  const supported = {\n    ...defaultAttrs,\n    ...componentAttrs.reduce(r, {})\n  };\n  return Object.keys(attrs).reduce((acc, key) => (\n    supported[key]\n      ? acc[key] = attrs[key]\n      : null,\n    acc\n  ), {});\n};"],"names":["isTouch","window","navigator","MaxTouchPoints","msMaxTouchPoints","touchStartEvent","touchEndEvent","document","querySelector","classList","add","listeners","throttle","func","s","context","wait","args","later","apply","subscribe","eventName","listener","delay","push","unsubscribe","index","indexOf","splice","emit","event","forEach","addEventListener","e","evts","element","createElement","animationEndEvent","el","a","undefined","style","r","acc","p","defaultAttrs","reduce","filterSupportedAttributes","attrs","componentAttrs","supported","Object","keys","key"],"mappings":"wMAAO,IAAMA,GAAY,gBAAkBC,SAAYC,UAAUC,eAAiB,GAAOD,UAAUE,iBAAmB,EAEzGC,EAAkBL,EAAU,QAAU,YAEtCM,EAAgBN,EAAU,QAAU,SAEjDO,UAASC,cAAc,QAAQC,UAAUC,IAAIV,EAAU,WAAa,cCJpE,IAAMW,MAGOC,EAAW,SAACC,MAAMC,0DAAI,IAAMC,yDAAUd,OAC7Ce,GAAO,QACJ,uCAAIC,4CACHC,GAAQ,aACPC,MAAMJ,EAASE,GAEjBD,YAEI,aACI,cACF,GACNF,MAKIM,EAAY,SAACC,EAAWC,EAAUC,KACnCF,GAAaV,EAAUU,SACvBA,GAAWG,KAAKD,EAAQX,EAASU,EAAUC,GAASD,IAGnDG,EAAc,SAACJ,EAAWC,MAChCX,EAAUU,OAGTK,GAAQf,EAAUU,GAAWM,QAAQL,EACvCI,IAAQ,KACAL,GAAWO,OAAOF,EAAO,KAI1BG,EAAO,SAACR,EAAWS,GACzBnB,EAAUU,MAGLA,GAAWU,QAAQ,SAACT,KACnBQ,KAIb7B,QAAO+B,iBAAiB,SAAU,kBAAMH,GAAK,SAAUI,KACvDhC,OAAO+B,iBAAiB,SAAU,kBAAMH,GAAK,SAAUI,KACvDhC,OAAO+B,iBAAiB,UAAW,kBAAMH,GAAK,UAAWI,KACzDhC,OAAO+B,iBAAiB1B,EAAe,kBAAMuB,GAAKvB,EAAe2B,IC/CjE,IAAMC,cACS,0BACC,6BACE,+BACG,sBAGfC,EAAU,iBAAM5B,UAAS6B,cAAc,gBAEhCC,EAAoB,cACzBC,GAAKH,QACN,GAAII,KAAKL,MACQM,SAAhBF,EAAGG,MAAMF,SACJL,GAAKK,wKCbZG,EAAI,SAACC,EAAKC,SAAOD,GAAIC,GAAK,EAAGD,GAQ7BE,GAEJ,MACA,SACA,WACA,WACA,iBACA,WACA,iBACA,QACA,OAGA,KACA,YACAC,OAAOJ,MAEIK,EAA4B,SAACC,MAAOC,6DACzCC,OACDL,EACAI,EAAeH,OAAOJ,aAEpBS,QAAOC,KAAKJ,GAAOF,OAAO,SAACH,EAAKU,SACrCH,GAAUG,GACNV,EAAIU,GAAOL,EAAMK,GACjB,KACJV"}