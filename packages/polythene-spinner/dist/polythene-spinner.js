!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("mithril"),require("polythene-core"),require("polythene-mithril"),require("polythene-core-css"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","mithril","polythene-core","polythene-mithril","polythene-core-css","polythene-theme"],n):n(e.polythene=e.polythene||{},e.m,e["polythene-core"],e["polythene-mithril"],e["polythene-core-css"],e["polythene-theme"])}(this,function(e,n,i,r,t,a){"use strict";function s(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function o(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}n="default"in n?n.default:n;var l={component:"pe-spinner",animation:"pe-spinner__animation",placeholder:"pe-spinner__placeholder",animated:"pe-spinner--animated",fab:"pe-spinner--fab",large:"pe-spinner--large",medium:"pe-spinner--medium",permanent:"pe-spinner--permanent",raised:"pe-spinner--raised",regular:"pe-spinner--regular",singleColor:"pe-spinner--single-color",small:"pe-spinner--small",visible:"pe-spinner--visible"},p=a.vars.rgba,u={size_small:3*a.vars.grid_unit_component,size_regular:4*a.vars.grid_unit_component,size_medium:5*a.vars.grid_unit_component,size_large:6*a.vars.grid_unit_component,size_fab:7*a.vars.grid_unit_component,raisedSize:function(e){var n=.25*e;return{padding:n,paddedSize:e+2*n}},color_light_raised_background:p(a.vars.color_light_background),color_dark_raised_background:p(a.vars.color_light_background)},c=function(e){return{width:e+"px",height:e+"px"}},d=function(e,n){var i=n.raisedSize(e),r=i.padding,t=i.paddedSize;return{width:t+"px",height:t+"px",padding:r+"px"}},g=function(e,n){return[s({},e,{transitionTimingFunction:"ease-out",transitionProperty:"opacity",opacity:0,".pe-spinner--visible, &.pe-spinner--permanent":{opacity:1},".pe-spinner--small":c(n.size_small),".pe-spinner--regular":c(n.size_regular),".pe-spinner--medium":c(n.size_medium),".pe-spinner--large":c(n.size_large),".pe-spinner--fab":c(n.size_fab),".pe-spinner--raised":{position:"relative",borderRadius:"50%",".pe-spinner--small":d(n.size_small,n),".pe-spinner--regular":d(n.size_regular,n),".pe-spinner--medium":d(n.size_medium,n),".pe-spinner--large":d(n.size_large,n),".pe-spinner--fab":d(n.size_fab,n)}})]},f=function(e,n,i,r){return[o({},e.map(function(e){return e+n}).join(","),{".pe-spinner--raised":{backgroundColor:i["color_"+r+"_raised_background"]}})]},m=function(e,n){return[f([".pe-dark-tone",".pe-dark-tone "],e,n,"dark"),f(["",".pe-light-tone",".pe-light-tone "],e,n,"light")]},h=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},v=[g,m],b="."+l.component,_=function(e,n){return t.styler.generateStyles([e,b],h({},u,n),v)};t.styler.generateStyles([b],u,v);var y=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},z={small:l.small,regular:l.regular,medium:l.medium,large:l.large,fab:l.fab},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"regular";return z[e]},T=function(e,n){if(!e.isTransitioning)return e.isTransitioning=!0,i.show(y({},n,{el:e.el,showClass:l.visible})).then(function(){e.isTransitioning=!1,e.visible=!0})},j=function(e,r){if(!e.isTransitioning)return e.isTransitioning=!0,i.hide(y({},r,{el:e.el,afterHide:function(){return e.el.style.display="none"},showClass:l.visible})).then(function(){e.isTransitioning=!1,e.visible=!1,e.hide=!1,n.redraw()})},k=function(e,n){var i=e[n];return!0!==i&&!isNaN(i)&&1e3*parseFloat(i,10)},O=function(e,n){if(n.percentage&&n.getPercentage){var i="function"==typeof n.percentage?n.percentage():n.percentage;n.getPercentage(i,e,n)}},S=function(e,t){var a=t.element||"div",s=y({},i.filterSupportedAttributes(t),{class:[l.component,t.instanceClass,w(t.type),t.singleColor?l.singleColor:null,t.raised?l.raised:null,t.animated?l.animated:null,t.permanent?l.permanent:null,t.class].join(" "),oncreate:function(n){var i=n.dom;e.el=i,O(e,t),t.permanent||setTimeout(function(){return T(e,t)},0)}},t.events?t.events:null);O(e,t),e.hide&&setTimeout(function(){j(e,t)},0);var o=[t.raised&&t.content?n(r.Shadow,{z:t.z}):null,t.content||n("div",{class:l.animation},"Specific spinner missing")];return n(a,s,[t.before,o,t.after])},x={theme:_,oninit:function(e){e.state=y(e.state,{el:null,isTransitioning:!1,visible:e.attrs.permanent||!1,hide:!1,percentage:0})},view:function(e){var i=e.state,r=e.attrs;if(i.visible){if(void 0!==r.show&&!r.show||r.hide){var t=k(r,"hide");t?setTimeout(function(){i.hide=!0,n.redraw()},t):i.hide=!0}}else if(void 0!==r.hide&&!r.hide||r.show){var a=k(r,"show");a?setTimeout(function(){i.visible=!0,n.redraw()},a):i.visible=!0}return i.visible?S(i,r):n("span",{class:l.placeholder})}};e.default=x,e.classes=l,e.vars=u,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-spinner.js.map
