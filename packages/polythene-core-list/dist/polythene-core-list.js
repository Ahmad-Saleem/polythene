!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-theme"],t):t(e.polythene={},e["polythene-core"],e["polythene-theme"])}(this,function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var r={component:"pe-list",borders:"pe-list--borders",compact:"pe-list--compact",hasHeader:"pe-list--header",indentedBorders:"pe-list--indented-borders",padding:"pe-list--padding",header:{component:"pe-list-tile",content:"pe-list-tile__content",highSubtitle:"pe-list-tile__high-subtitle",primary:"pe-list-tile__primary",secondary:"pe-list-tile__secondary",subtitle:"pe-list-tile__subtitle",title:"pe-list-tile__title",contentFront:"pe-list-tile__content-front",compact:"pe-list-tile--compact",compactFront:"pe-list-tile--compact-front",disabled:"pe-list-tile--disabled",hasFront:"pe-list-tile--front",hasHighSubtitle:"pe-list-tile--high-subtitle",hasSubtitle:"pe-list-tile--subtitle",header:"pe-list-tile--header",hoverable:"pe-list-tile--hoverable",selectable:"pe-list-tile--selectable",selected:"pe-list-tile--selected",highlight:"pe-list-tile--highlight",sticky:"pe-list-tile--sticky"}.header},l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},o=function(e){return e.attrs.element||"div"},a=function(e,t,i){var n=t.state,r=t.attrs;if(r.onSelect){var l=void 0!==i?i:n.highlightIndex();if(l>-1){var o={event:e,index:l,dom:n.tiles[l].dom,attrs:n.tiles[l].attrs};r.onSelect(o)}}void 0!==i&&d({state:n,index:i})},d=function(e){var t=e.state,i=e.index,n=void 0===i||null===i?-1:i,r=t.highlightIndex();n!==r&&(-1===n?t.highlightIndex(-1):-1===r&&t.highlightIndex(n))},s=function(e){var t=e.state,i=e.attrs,n=e.newIndex,r=t.highlightIndex();t.tiles[r].dom.blur(),t.highlightIndex(-1),i.onHighlightExit&&i.onHighlightExit({index:n,dom:t.tiles[r].dom})},h=function(e,t){var i=e.attrs,n=t(void 0!==i.defaultHighlightIndex&&null!==i.defaultHighlightIndex?i.defaultHighlightIndex:-1);return{tiles:[],highlightIndex:n,registerTile:function(e){return function(t,i){return e.tiles[t]=i}},redrawOnUpdate:t.merge([n])}},c=function(e){var t=e.state;e.attrs.keyboardControl&&t.highlightIndex.map(function(e){t.tiles[e]&&t.tiles[e].dom.focus()})},u=function(e){var t=e.state,i=e.attrs;isNaN(i.highlightIndex)||d({state:t,index:i.highlightIndex})},p=function(e,i){var o=i.keys,d=e.state,h=e.attrs;return l({},t.filterSupportedAttributes(h),{className:[r.component,h.borders?r.borders:null,h.indentedBorders?r.indentedBorders:null,h.header?r.hasHeader:null,h.compact?r.compact:null,!1!==h.padding?r.padding:null,"dark"===h.tone?"pe-dark-tone":null,"light"===h.tone?"pe-light-tone":null,h.className||h[o.class]].join(" ")},h.keyboardControl&&n({},o.onkeydown,function(t){var i=d.highlightIndex();if("ArrowDown"===t.key||"ArrowRight"===t.key){t.preventDefault();var n=i+1;n>=d.tiles.length?s({state:d,attrs:h,newIndex:n}):d.tiles[n].dom.focus()}else if("ArrowUp"===t.key||"ArrowLeft"===t.key){t.preventDefault();var r=i-1;r<0?s({state:d,attrs:h,newIndex:r}):d.tiles[r].dom.focus()}else"Enter"===t.key?a(t,e):"Escape"===t.key&&s({state:d,attrs:h,newIndex:i})}))},g=function(e,t){var i=t.renderer,o=t.requiresKeys,d=t.keys,s=t.ListTile,h=e.state,c=e.attrs,u=void 0;c.header&&((u=l({},c.header))[d.class]=[r.header,u[d.class]||null].join(" "));var p=c.tiles?c.tiles:c.content?c.content:c.children||e.children,g=-1;return[u?i(s,l({},o?{key:"header"}:null,c.all,u,{header:!0})):null,c.keyboardControl?p.map(function(t){t.header||g++;var r=g;return void 0!==t.tag?t:i(s,l({},c.all,t,!t.header&&{keyboardControl:!0,register:h.registerTile(h),setHighlightIndex:h.highlightIndex,index:g,defaultHighlight:h.highlightIndex()===r,events:l({},t.events,n({},d.onclick,function(t){return a(t,e,r)}))}))}):c.all?p.map(function(e){return i(s,l({},c.all,e))}):p]},f=Object.freeze({getElement:o,getInitialState:h,onMount:c,onUpdate:u,createProps:p,createContent:g}),b=function(e){return"rgba("+e+", "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)+")"},v={padding:i.vars.grid_unit_component,padding_compact:3*i.vars.grid_unit_component/4,border_width_stacked:1,border_width_bordered:1,color_light_border:b(i.vars.color_light_foreground,i.vars.blend_light_border_light),color_dark_border:b(i.vars.color_dark_foreground,i.vars.blend_dark_border_light)};e.coreList=f,e.vars=v,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-list.js.map
