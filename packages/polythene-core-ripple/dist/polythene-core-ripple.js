!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-theme"],t):t(e.polythene={},e["polythene-core"],e["polythene-theme"])}(this,function(e,t,n){"use strict";var i=t.getAnimationEndEvent(),a=function(e,n){if(!t.isServer){var i=window.document,a=i.createElement("style");a.setAttribute("id",e),a.appendChild(i.createTextNode(n)),i.head.appendChild(a)}},o=function(e){if(!t.isServer){var n=document.getElementById(e);n&&n.parentNode&&n.parentNode.removeChild(n)}},r=function(e){var r=e.e,s=e.id,c=e.el,l=e.attrs,d=e.classes;return new Promise(function(e){var p=document.createElement("div");p.setAttribute("class",d.mask),c.appendChild(p);var u=document.createElement("div");u.setAttribute("class",d.waves),p.appendChild(u);var m=c.getBoundingClientRect(),v=t.isTouch&&r.touches?r.touches[0].pageX:r.clientX,f=t.isTouch&&r.touches?r.touches[0].pageY:r.clientY,h=c.offsetWidth,y=c.offsetHeight,g=Math.sqrt(h*h+y*y),w=l.center?m.left+m.width/2:v,E=l.center?m.top+m.height/2:f,b=w-m.left-g/2,_=E-m.top-g/2,k=void 0!==l.startOpacity?l.startOpacity:.2,C=void 0!==l.opacityDecayVelocity?l.opacityDecayVelocity:.35,O=l.endOpacity||0,A=l.startScale||.1,S=l.endScale||2,j=l.duration?l.duration:1/C*.2,x=window.getComputedStyle(c).color,L=u.style;L.width=L.height=g+"px",L.top=_+"px",L.left=b+"px",L["animation-duration"]=L["-webkit-animation-duration"]=L["-moz-animation-duration"]=L["-o-animation-duration"]=j+"s",L.backgroundColor=x,L.opacity=k,L.animationName=s,L.animationTimingFunction=l.animationTimingFunction||n.vars.animation_curve_default,a(s,"@keyframes "+s+" {\n      0% {\n        transform:scale("+A+");\n        opacity: "+k+"\n      }\n      100% {\n        transform:scale("+S+");\n        opacity: "+O+";\n      }\n    }");var N=function t(n){o(s),u.removeEventListener(i,t,!1),l.persistent?(L.opacity=O,L.transform="scale("+S+")"):(u.classList.remove(d.wavesAnimating),p.removeChild(u),c.removeChild(p)),e(n)};u.addEventListener(i,N,!1),u.classList.add(d.wavesAnimating)})},s={component:"pe-ripple",mask:"pe-ripple__mask",waves:"pe-ripple__waves",unconstrained:"pe-ripple--unconstrained",wavesAnimating:"pe-ripple__waves--animating"},c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=function(e){return e.attrs.element||"div"},d=function(){return{animations:{},animating:!1,cleanUp:void 0}},p=function(e,n){var i=n.keys,a=e.attrs;return c({},t.filterSupportedAttributes(a),{className:[s.component,a.unconstrained?s.unconstrained:null,"dark"===a.tone?"pe-dark-tone":null,"light"===a.tone?"pe-light-tone":null,a.className||a[i.class]].join(" ")})},u=function(e){return e.animating=Object.keys(e.animations).length>0},m=function(e){if(e.dom||!t.isServer){var n=e.state,i=e.attrs,a=function(t){if(!(i.disabled||!i.multi&&n.animating)){i.start&&i.start(t);var a="ripple_animation_"+(new Date).getTime();n.animations[a]=r({e:t,id:a,el:e.dom,attrs:i,classes:s}).then(function(e){i.end&&i.end(e),delete n.animations[a],u(n)}),u(n)}},o=i.target?i.target:e.dom&&e.dom.parentElement;o.addEventListener(t.pointerEndEvent,a,!1),n.cleanUp=function(){return o.removeEventListener(t.pointerEndEvent,a,!1)}}},v=function(e){var t=e.state;return t.cleanUp&&t.cleanUp()},f=Object.freeze({getElement:l,getInitialState:d,createProps:p,onMount:m,onUnMount:v}),h={color:"inherit"};e.coreRipple=f,e.classes=s,e.vars=h,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-ripple.js.map
