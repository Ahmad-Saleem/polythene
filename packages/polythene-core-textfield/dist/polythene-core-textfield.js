!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core"),require("polythene-css-classes"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-css-classes","polythene-theme"],t):t(e.polythene={},e["polythene-core"],e["polythene-css-classes"],e["polythene-theme"])}(this,function(e,t,l,r){"use strict";function i(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r])}return e},o=function(e){return e.attrs.element||"div"},n=function(e,t){var l=t.validate(e.inputEl().value);return{invalid:l&&!l.valid,message:l&&l.error}},s=function(e,t){return{invalid:e.inputEl().value.length>t.counter,message:t.error}},u=function(e,t){return{invalid:!e.inputEl().checkValidity(),message:t.error}},d=function(e,t){var l={invalid:!1,message:void 0};return e.isTouched()&&e.isInvalid()&&0===e.inputEl().value.length&&t.validateResetOnClear&&(e.isTouched(!1),e.isInvalid(!1),e.error(void 0)),!l.invalid&&t.counter&&(l=s(e,t)),!l.invalid&&e.inputEl()&&e.inputEl().checkValidity&&(l=u(e,t)),!l.invalid&&t.validate&&(l=n(e,t)),l},_=function(e){var t=e.state,l=e.attrs,r=t.isTouched()||l.validateAtStart?d(t,l):{invalid:!1,message:void 0},i=t.isInvalid();t.error(r.message),r.invalid!==i&&t.isInvalid(r.invalid),r.invalid||t.error(void 0)},c=function(e){var t=e.state,l=e.attrs;if(l.onChange){var r=d(t,l);l.onChange({focus:t.hasFocus(),dirty:t.isDirty(),el:t.inputEl(),invalid:r.invalid,error:r.error,value:t.inputEl().value})}},p=function(e,t){return e.ignoreEvents&&-1!==e.ignoreEvents.indexOf(t)},v=function(e,t){var l=e.attrs,r=void 0!==l.defaultValue?l.defaultValue:void 0!==l.value?l.value:"",i=t(null),a=t(null),o=t({}),n=t(l.error),s=t(l.focus||!1),u=t(!1),d=t(!1),_=t(""!==r),c=t(!1);return{defaultValue:r,previousValue:t(void 0),el:i,error:n,hasFocus:s,inputEl:a,isInvalid:c,isTouched:d,isDirty:_,setFocus:u,setValue:o,redrawOnUpdate:t.merge([a,c,_])}},f=function(e){var t=e.dom,l=e.state,r=e.attrs;l.el(t);var i=r.multiLine?"textarea":"input",a=t.querySelector(i);e.state.inputEl(a),l.inputEl().value=l.defaultValue,l.setValue.map(function(t){var i=t.type,a=t.focus;return void 0!==a&&l.setFocus(a),"input"===i&&(r.validateOnInput||r.counter)&&l.isTouched(""!==l.inputEl().value),"input"!==i&&l.isTouched(""!==l.inputEl().value),"onblur"===i&&l.isTouched(!0),l.isDirty(""!==l.inputEl().value),_(e),c(e),l.previousValue(l.inputEl().value)}),l.setFocus.map(function(e){l.hasFocus(e),e&&l.inputEl()&&setTimeout(function(){return l.inputEl()&&l.inputEl().focus&&l.inputEl().focus()},0)}),c(e)},h=function(e,r){var i=r.keys,o=e.state,n=e.attrs,s=o.isInvalid();return a({},t.filterSupportedAttributes(n),{className:[l.textfFieldClasses.component,s?l.textfFieldClasses.stateInvalid:"",o.hasFocus()?l.textfFieldClasses.stateFocused:"",o.isDirty()?l.textfFieldClasses.stateDirty:"",n.floatingLabel?l.textfFieldClasses.hasFloatingLabel:"",n.disabled?l.textfFieldClasses.stateDisabled:"",n.readonly?l.textfFieldClasses.stateReadonly:"",n.dense?l.textfFieldClasses.isDense:"",n.required?l.textfFieldClasses.isRequired:"",n.fullWidth?l.textfFieldClasses.hasFullWidth:"",n.counter?l.textfFieldClasses.hasCounter:"",!1!==n.hideSpinner&&void 0!==n.hideSpinner?l.textfFieldClasses.hideSpinner:"",!1!==n.hideClear&&void 0!==n.hideClear?l.textfFieldClasses.hideClear:"",n.hideValidation?l.textfFieldClasses.hideValidation:"","dark"===n.tone?"pe-dark-tone":null,"light"===n.tone?"pe-light-tone":null,n.className||n[i.class]].join(" ")})},g=function(e,r){var o=r.renderer,n=r.keys,s=e.state,u=e.attrs,d=s.inputEl(),_=s.isInvalid(),v=u.multiLine?"textarea":"input",f=u.multiLine?null:u.type&&"submit"!==u.type&&"search"!==u.type?u.type:"text",h=_&&void 0!==s.error(),g=u.validate||u.min||u.max||u[n.minlength]||u[n.maxlength]||u.required||u.pattern,b=u.disabled||u[n.readonly];!u.focus||s.hasFocus()||b||s.setFocus(!0);var m=void 0!==u.value&&null!==u.value?u.value:d?d.value:s.previousValue(),y=void 0===m||null===m?"":m.toString();d&&s.previousValue()!==y&&(d.value=y,s.previousValue(y),setTimeout(function(){return s.setValue({type:"input"})},0));var x=u.required&&""!==u.requiredIndicator?o("span",{key:"required",className:l.textfFieldClasses.requiredIndicator},u.requiredIndicator||"*"):null,k=!u.required&&u.optionalIndicator?o("span",{key:"optional",className:l.textfFieldClasses.optionalIndicator},u.optionalIndicator):null,F=u.label?[u.label,x,k]:null;return[o("div",{className:l.textfFieldClasses.inputArea,key:"input-area"},[F?o("label",i({key:"label",className:l.textfFieldClasses.label},n["on"+t.pointerStartEvent],function(){b||setTimeout(function(){s.inputEl.focus()},0)}),F):null,o(v,a({},{key:"input",className:l.textfFieldClasses.input,disabled:u.disabled},f?{type:f}:null,u.name?{name:u.name}:null,p(u,n.onclick)?null:i({},n.onclick,function(){b||(s.setFocus(!0),c(e))}),p(u,n.onfocus)?null:i({},n.onfocus,function(){b||(s.el()&&s.el().classList.add(l.textfFieldClasses.stateFocused),c(e))}),p(u,n.onblur)?null:i({},n.onblur,function(){s.setValue({type:"onblur",focus:!1}),s.el().classList.remove(l.textfFieldClasses.stateFocused)}),p(u,n.oninput)?null:i({},n.oninput,function(){s.setValue({type:"input"})}),p(u,n.onkeydown)?null:i({},n.onkeydown,function(e){"Enter"===e.key?s.isTouched(!0):"Escape"===e.key&&d.blur(e)}),u.events?u.events:null,void 0!==u.required&&u.required?{required:!0}:null,void 0!==u[n.readonly]&&u[n.readonly]?i({},n.readonly,!0):null,void 0!==u.pattern?{pattern:u.pattern}:null,void 0!==u[n.maxlength]?i({},n.maxlength,u[n.maxlength]):null,void 0!==u[n.minlength]?i({},n.minlength,u[n.minlength]):null,void 0!==u.max?{max:u.max}:null,void 0!==u.min?{min:u.min}:null,void 0!==u[n.autofocus]?i({},n.autofocus,u[n.autofocus]):null,void 0!==u[n.tabindex]?i({},n.tabindex,u[n.tabindex]):null,void 0!==u.rows?{rows:u.rows}:null))]),u.counter?o("div",{key:"counter",className:l.textfFieldClasses.counter},(d&&d.value.length||0)+" / "+u.counter):null,u.help&&!h?o("div",{key:"help",className:[l.textfFieldClasses.help,u.focusHelp?l.textfFieldClasses.focusHelp:null].join(" ")},u.help):null,h?o("div",{key:"error",className:l.textfFieldClasses.error},s.error()):g&&!u.help?o("div",{key:"error-placeholder",className:l.textfFieldClasses.errorPlaceholder}):null]},b=Object.freeze({getElement:o,getInitialState:v,onMount:f,createProps:h,createContent:g}),m=function(e){return"rgba("+e+", "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)+")"},y={vertical_spacing_top:6,vertical_spacing_bottom:7,input_focus_border_width:2,input_focus_border_animation_duration:r.vars.animation_duration,floating_label_vertical_spacing_top:30,floating_label_vertical_spacing_bottom:7,floating_label_top:14,floating_label_animation_duration:".12s",input_padding_h:0,input_padding_v:7,input_border_width:1,margin_top_error_message:6,font_size_input:16,font_size_error:12,font_size_floating_label:12,line_height_input:20,dense_floating_label_vertical_spacing_top:23,dense_floating_label_vertical_spacing_bottom:4,dense_floating_label_top:10,dense_font_size_input:13,dense_font_size_floating_label:13,full_width_input_padding_h:20,full_width_input_padding_v:18,dense_full_width_input_padding_h:16,dense_full_width_input_padding_v:15,dense_full_width_font_size_input:13,color_light_input_text:m(r.vars.color_light_foreground,r.vars.blend_light_text_primary),color_light_input_background:"transparent",color_light_highlight_text:m(r.vars.color_primary,r.vars.blend_light_text_primary),color_light_input_bottom_border:m(r.vars.color_light_foreground,r.vars.blend_light_border_light),color_light_input_error_text:m("221, 44, 0"),color_light_input_error_border:m("221, 44, 0"),color_light_input_placeholder:m(r.vars.color_light_foreground,r.vars.blend_light_text_tertiary),color_light_label_text:m(r.vars.color_light_foreground,r.vars.blend_light_text_tertiary),color_light_disabled_label_text:m(r.vars.color_light_foreground,r.vars.blend_light_text_disabled),color_light_readonly_label_text:m(r.vars.color_light_foreground,r.vars.blend_light_text_tertiary),color_light_help_text:m(r.vars.color_light_foreground,r.vars.blend_light_text_tertiary),color_light_required_symbol:m("221, 44, 0"),color_light_focus_border:m(r.vars.color_primary),color_light_counter_ok_border:m(r.vars.color_primary),color_dark_input_text:m(r.vars.color_dark_foreground,r.vars.blend_dark_text_primary),color_dark_input_background:"transparent",color_dark_highlight_text:m(r.vars.color_primary,r.vars.blend_dark_text_primary),color_dark_input_bottom_border:m(r.vars.color_dark_foreground,r.vars.blend_dark_border_light),color_dark_input_error_text:m("222, 50, 38"),color_dark_input_error_border:m("222, 50, 38"),color_dark_input_placeholder:m(r.vars.color_dark_foreground,r.vars.blend_dark_text_tertiary),color_dark_label_text:m(r.vars.color_dark_foreground,r.vars.blend_dark_text_tertiary),color_dark_disabled_label_text:m(r.vars.color_dark_foreground,r.vars.blend_dark_text_disabled),color_dark_readonly_label_text:m(r.vars.color_dark_foreground,r.vars.blend_dark_text_tertiary),color_dark_help_text:m(r.vars.color_dark_foreground,r.vars.blend_dark_text_tertiary),color_dark_required_symbol:m("221, 44, 0"),color_dark_focus_border:m(r.vars.color_primary),color_dark_counter_ok_border:m(r.vars.color_primary)};e.coreTextField=b,e.classes=l.textfFieldClasses,e.vars=y,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-textfield.js.map
