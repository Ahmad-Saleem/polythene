{"version":3,"file":"polythene-core-button.js","sources":["../../polythene-css-classes/button.js","../src/button.js","../src/vars.js"],"sourcesContent":["\nexport default {\n  base:       \"pe-button\",\n  component:  \"pe-button pe-text-button\",\n  row:        \"pe-button-row\",\n\n  // elements\n  content:    \"pe-button__content\",\n  focus:      \"pe-button__focus\",\n  label:      \"pe-button__label\",\n  wash:       \"pe-button__wash\",\n\n  // states\n  borders:    \"pe-button--borders\",\n  disabled:   \"pe-button--disabled\",\n  focused:    \"pe-button--focus\",\n  inactive:   \"pe-button--inactive\",\n  selected:   \"pe-button--selected\",\n};\n","import { filterSupportedAttributes, isClient } from \"polythene-core\";\nimport classes from \"polythene-css-classes/button\";\n\nexport const getElement = vnode =>\n  vnode.attrs.element || \"a\";\n\nexport const getInitialState = (vnode, createStream) => {\n  const dom = createStream(null);\n  const focus = createStream(false);\n  const inactive = createStream(false);\n  const mouseover = createStream(false);\n  return {\n    dom,\n    focus,\n    inactive,\n    mouseover,\n    redrawOnUpdate: createStream.merge([dom, focus, inactive, mouseover])\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  state.dom(vnode.dom);\n  \n  if (isClient) {\n    const noink = attrs.ink !== undefined && attrs.ink === false;\n    const handleInactivate = () => (\n      // delay a bit so that the ripple can finish before the hover disappears\n      // the timing is crude and does not take the actual ripple \"done\" into account\n      setTimeout(() => (\n        state.inactive(true),\n        setTimeout(() => (\n          state.inactive(false)\n        ), attrs.inactivate * 1000)\n      ), noink ? 0 : 300)\n    );\n\n    const onFocus = () => state.focus(!state.mouseover());\n    const onBlur = () => state.focus(false);\n    const onMouseOver = () => state.mouseover(true);\n    const onMouseOut = () => state.mouseover(false);\n    const onClick = handleInactivate;\n\n    vnode.dom.addEventListener(\"focus\", onFocus, false);\n    vnode.dom.addEventListener(\"blur\", onBlur, false);\n    vnode.dom.addEventListener(\"mouseover\", onMouseOver, false);\n    vnode.dom.addEventListener(\"mouseout\", onMouseOut, false);\n    vnode.dom.addEventListener(\"click\", onClick, false);\n\n    state.removeEventListeners = () => (\n      vnode.dom.removeEventListener(\"focus\", onFocus, false),\n      vnode.dom.removeEventListener(\"blur\", onBlur, false),\n      vnode.dom.removeEventListener(\"mouseover\", onBlur, false),\n      vnode.dom.removeEventListener(\"mouseout\", onMouseOut, false),\n      vnode.dom.removeEventListener(\"click\", onClick, false)\n    );\n  }\n};\n\nexport const onUnMount = vnode =>\n  vnode.state.removeEventListeners && vnode.state.removeEventListeners();\n\nexport const createProps = (vnode, { keys: k }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const disabled = attrs.disabled;\n  const inactive = attrs.inactive || state.inactive();\n  const onKeyDownHandler = (attrs.events && attrs.events[k.onkeydown]) || onClickHandler;\n  const onClickHandler = attrs.events && attrs.events[k.onclick];\n\n  return Object.assign(\n    {}, \n    filterSupportedAttributes(attrs, { add: [k.formaction, \"type\"], remove: [\"style\"] }), // Set style on content, not on component\n    {\n      className: [\n        attrs.parentClassName || classes.component,\n        attrs.selected ? classes.selected : null,\n        disabled ? classes.disabled : null,\n        inactive ? classes.inactive : null,\n        attrs.borders ? classes.borders : null,\n        state.focus() ? classes.focused : null,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \")\n    },\n    attrs.events,\n    inactive ? null : {\n      [k.tabindex]: disabled || inactive\n        ? -1\n        : attrs[k.tabindex] || 0,\n      [k.onclick]: onClickHandler,\n      [k.onkeydown]: e => {\n        if (e.key === \"Enter\" && state.focus()) {\n          state.focus(false);\n          if (onKeyDownHandler) {\n            onKeyDownHandler(e);\n          }\n        }\n      }\n    },\n    attrs.url,\n    disabled ? { disabled: true } : null\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, keys: k, Ripple }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const noink = attrs.ink !== undefined && attrs.ink === false;\n  const disabled = attrs.disabled;\n  const children = attrs.children || vnode.children;\n  const label = attrs.content\n    ? attrs.content\n    : attrs.label\n      ? typeof attrs.label === \"object\"\n        ? attrs.label\n        : h(\"div\", { className: classes.label }, attrs.label)\n      : children\n        ? children\n        : null;\n  const noWash = disabled || (attrs.wash !== undefined && !attrs.wash);\n  return label\n    ? h(\"div\",\n      {\n        [k.class]: classes.content,\n        style: attrs.style\n      },\n      [\n        attrs.shadowComponent // \"protected\" option, used by raised-button\n          ? attrs.shadowComponent\n          : null,\n        // Ripple\n        disabled || noink || !Ripple || (h.displayName === \"react\" ? !state.dom() : false)\n          // somehow Mithril does not update when the dom stream is updated\n          ? null\n          : h(Ripple, Object.assign({},\n            {\n              key: \"ripple\",\n              target: state.dom()\n            },\n            attrs.ripple\n          )),\n        // hover\n        noWash ? null : h(\"div\", { key: \"wash\", className: classes.wash }),\n        // focus\n        disabled ? null : h(\"div\", { key: \"focus\", className: classes.focus }),\n        label\n      ]\n    )\n    : null;\n};\n","import { vars } from \"polythene-theme\";\n\nconst rgba = (colorStr, opacity = 1) =>\n  `rgba(${colorStr}, ${opacity})`;\n\nconst touch_height = vars.unit_touch_height;\nconst height = 36;\n\nexport default {\n  margin_h:           vars.grid_unit,\n  border_radius:      vars.unit_item_border_radius,\n  font_size:          14,\n  font_weight:        500,\n  outer_padding_v:    (touch_height - height) / 2,\n  padding_h:          2 * vars.grid_unit,\n  padding_v:          11,\n  min_width:          8 * vars.grid_unit_component,\n  text_transform:     \"uppercase\",\n  border_width:       0, // no border in MD, but used to correctly set the height when a theme does set a border\n  animation_duration: vars.animation_duration,\n\n  color_light_background:          \"transparent\",\n  color_light_text:                rgba(vars.color_light_foreground, vars.blend_light_text_primary),\n  color_light_hover_background:    rgba(vars.color_light_foreground, vars.blend_light_background_hover),\n  color_light_focus_background:    rgba(vars.color_light_foreground, vars.blend_light_background_hover),\n  color_light_active_background:   rgba(vars.color_light_foreground, vars.blend_light_background_active),\n  color_light_disabled_background: \"transparent\",\n  color_light_disabled_text:       rgba(vars.color_light_foreground, vars.blend_light_text_disabled),\n\n  // border colors may be set in theme; disabled by default\n  // color_light_border:              \"transparent\", // only specify this variable to get all 4 states\n  // color_light_hover_border:        \"transparent\",\n  // color_light_active_border:       \"transparent\",\n  // color_light_disabled_border:     \"transparent\",\n\n  color_dark_background:           \"transparent\",\n  color_dark_text:                 rgba(vars.color_dark_foreground, vars.blend_dark_text_primary),\n  color_dark_hover_background:     rgba(vars.color_dark_foreground, vars.blend_dark_background_hover),\n  color_dark_focus_background:     rgba(vars.color_dark_foreground, vars.blend_dark_background_hover),\n  color_dark_active_background:    rgba(vars.color_dark_foreground, vars.blend_dark_background_active),\n  color_dark_disabled_background:  \"transparent\",\n  color_dark_disabled_text:        rgba(vars.color_dark_foreground, vars.blend_dark_text_disabled),\n\n  // border colors may be set in theme; disabled by default\n  // color_dark_border:               \"transparent\", // only specify this variable to get all 4 states\n  // color_dark_hover_border:         \"transparent\",\n  // color_dark_active_border:        \"transparent\",\n  // color_dark_disabled_border:      \"transparent\"\n};"],"names":["getElement","vnode","attrs","element","getInitialState","createStream","dom","focus","inactive","mouseover","merge","onMount","state","isClient","noink","ink","undefined","handleInactivate","setTimeout","inactivate","onFocus","onBlur","onMouseOver","onMouseOut","onClick","addEventListener","removeEventListeners","removeEventListener","onUnMount","createProps","k","keys","disabled","onKeyDownHandler","events","onkeydown","onClickHandler","onclick","filterSupportedAttributes","add","formaction","remove","parentClassName","classes","component","selected","borders","focused","tone","className","class","join","tabindex","e","key","url","createContent","h","renderer","Ripple","children","label","content","noWash","wash","style","shadowComponent","displayName","ripple","rgba","colorStr","opacity","touch_height","vars","unit_touch_height","height","grid_unit","unit_item_border_radius","grid_unit_component","animation_duration","color_light_foreground","blend_light_text_primary","blend_light_background_hover","blend_light_background_active","blend_light_text_disabled","color_dark_foreground","blend_dark_text_primary","blend_dark_background_hover","blend_dark_background_active","blend_dark_text_disabled"],"mappings":"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"}