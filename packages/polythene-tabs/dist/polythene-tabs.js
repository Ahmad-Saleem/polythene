!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("mithril"),require("polythene-button"),require("polythene-icon"),require("polythene-icon-button"),require("polythene-core"),require("polythene-css"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","mithril","polythene-button","polythene-icon","polythene-icon-button","polythene-core","polythene-css","polythene-theme"],e):e(t.polythene=t.polythene||{},t.m,t["polythene-button"],t["polythene-icon"],t["polythene-icon-button"],t["polythene-core"],t["polythene-css"],t["polythene-theme"])}(this,function(t,e,n,o,a,i,l,r){"use strict";e="default"in e?e.default:e;var s=r.vars.rgba,c=n.vars.font_size,_=1.1*c,b={tab_min_width:72,tab_max_width:"none",tab_height:48,tablet_tab_min_width:160,label_max_width:264,menu_tab_height:44,menu_tab_icon_label_height:44,tab_icon_label_height:72,tab_icon_label_icon_spacing:7,indicator_slide_speed:600,indicator_slide_min_duration:.25,tabs_scroll_speed:600,tabs_scroll_delay:.15,tabs_scroll_min_duration:.5,scroll_button_fade_duration:.2,scroll_button_fade_delay:.5,tab_content_padding_v:12,tab_menu_content_padding_v:6,tab_indicator_height:2,scrollbar_offset:20,scroll_button_opacity:.7,label_opacity:.7,tab_label_line_height:_,tab_label_vertical_offset:_-c,tab_label_transition_property:"opacity, color, backgroundColor",color_light:"inherit",color_light_selected:s(r.vars.color_primary),color_light_selected_background:"transparent",color_light_tab_indicator:s(r.vars.color_primary),color_light_icon:a.vars.color_light,color_dark:"inherit",color_dark_selected:s(r.vars.color_primary),color_dark_selected_background:"transparent",color_dark_tab_indicator:s(r.vars.color_primary),color_dark_icon:a.vars.color_dark},d=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},p=function(t,e){return[d({},t,[l.mixin.vendorize({userSelect:"none"},r.vars.prefixes_user_select),l.mixin.vendorize({transform:"translate3d(0,0,0)"},r.vars.prefixes_transform),d({"-webkit-overflow-scrolling":"touch","& ::-webkit-scrollbar":{display:"none"},"&.pe-tabs--menu":{" .pe-tabs__tab":{height:e.menu_tab_height+"px"}," .pe-tabs__tab---icon":{height:e.menu_tab_icon_label_height+"px"}," .pe-tabs__tab, .pe-tabs__tab.pe-tabs__tab---icon":{minWidth:0,height:e.menu_tab_icon_label_height+"px"," .pe-button__content":{padding:"0 "+e.tab_menu_content_padding_v+"px",height:e.menu_tab_icon_label_height+"px"," .pe-icon":{marginBottom:0}," .pe-button__label":{fontSize:"10px",lineHeight:"12px",textTransform:"none"}}}},"&.pe-tabs--scrollable":{"max-height":e.tab_height+"px","-ms-overflow-style":"none"," .pe-tabs__scroll-button":{display:"none"}," .pe-tabs__row":{marginBottom:-e.scrollbar_offset+"px"}}," .pe-no-touch &":{"&.pe-tabs--scrollable":{backgroundColor:"inherit"}," .pe-tabs__scroll-button":{position:"absolute",display:"block",top:0,backgroundColor:"inherit",zIndex:3," .pe-button__content":{borderRadius:0,backgroundColor:"inherit"}," .pe-button__label":[l.mixin.vendorize({transitionProperty:e.tab_label_transition_property},r.vars.prefixes_transition),l.mixin.vendorize({transitionDuration:e.scroll_button_fade_duration+"s"},r.vars.prefixes_transition),l.mixin.vendorize({transitionTimingFunction:"ease-out"},r.vars.prefixes_transition),l.mixin.vendorize({transitionDelay:e.scroll_button_fade_delay+"s"},r.vars.prefixes_transition),{opacity:e.scroll_button_opacity}]},"&.pe-tabs--start .pe-tabs__scroll-button--start":{pointerEvents:"none",cursor:"default"," .pe-button__label":{opacity:0}},"&.pe-tabs--end .pe-tabs__scroll-button--end":{pointerEvents:"none",cursor:"default"," .pe-button__label":{opacity:0}}," .pe-tabs__scroll-button--start":{left:0}," .pe-tabs__scroll-button--end":{right:0}}," .pe-tabs__row":[l.flex.layoutHorizontal,l.mixin.vendorize({"user-select":"none"},r.vars.prefixes_user_select),{position:"relative",whiteSpace:"nowrap"}]," .pe-tabs__row--centered":l.flex.layoutCenterJustified," .pe-tabs__scroll-button--offset":[l.flex.flex(),l.flex.flexIndex("none")]," .pe-tabs__tab":[l.flex.flex(),l.flex.flexIndex("none"),l.mixin.vendorize({userSelect:"none"},r.vars.prefixes_user_select),l.mixin.defaultTransition("color"),{margin:0,borderRadius:0,height:e.tab_height+"px",padding:0,color:"inherit",minWidth:isNaN(e.tab_min_width)?e.tab_min_width:e.tab_min_width+"px",maxWidth:isNaN(e.tab_max_width)?e.tab_max_width:e.tab_max_width+"px"," .pe-button__content":{padding:"0 "+e.tab_content_padding_v+"px",height:e.tab_height+"px",lineHeight:r.vars.line_height+"em"," .pe-button__label, .pe-icon":{maxWidth:e.label_max_width+"px",lineHeight:e.tab_label_line_height+"px",maxHeight:2*e.tab_label_line_height+"px",overflow:"hidden",whiteSpace:"normal"}," .pe-button__label":[l.mixin.defaultTransition("opacity",e.animation_duration),{margin:e.tab_label_vertical_offset+"px 0 0 0",padding:0,opacity:e.label_opacity}]," .pe-icon":{marginLeft:"auto",marginRight:"auto"}," .pe-button__focus":{display:"none"}},"&.pe-button--selected":{" .pe-button__content .pe-button__label":{opacity:1}},"&.pe-tabs__tab---icon":{"&, .pe-button__content":[{height:e.tab_icon_label_height+"px"},{" .pe-button__label, .pe-icon":{margin:"0 auto"}},{" .pe-icon":{marginBottom:e.tab_icon_label_icon_spacing+"px"}}]}}]," .pe-tabs__tab-content":[l.flex.layoutCenterCenter,l.flex.layoutVertical,{height:"inherit"}],"&.pe-tabs--autofit .pe-tabs__tab":[l.flex.flex(),{minWidth:"none",maxWidth:"none"}],"&.pe-tabs__active-selected":{" .pe-tabs__tab.pe-button--selected":{cursor:"pointer",pointerEvents:"initial"}}," .pe-tabs__indicator":[l.mixin.vendorize({transform:"translate3d(0,0,0)"},r.vars.prefixes_transform),l.mixin.vendorize({"transform-origin":"left 50%"},r.vars.prefixes_transform),l.mixin.vendorize({"transition-property":"all"},r.vars.prefixes_transition),l.mixin.vendorize({"transition-timing-function":"ease-out"},r.vars.prefixes_transition),{position:"absolute",height:e.tab_indicator_height+"px",bottom:0,left:0,zIndex:3,width:"100%"}]," .pe-toolbar--tabs .pe-toolbar__bar &":[l.mixin.fit(),{width:"auto",margin:0,top:"auto"," .pe-tabs__row.pe-tabs__row--indent":{margin:0,paddingLeft:r.vars.unit_indent+"px",overflow:"auto"}}]},"@media (min-width: "+r.vars.breakpoint_small_tablet_portrait+"px)",{"&:not(.pe-tabs--small):not(.pe-tabs--menu):not(.pe-tabs--autofit) .pe-tabs__tab":{minWidth:e.tablet_tab_min_width+"px"}})])]},h=function(t,e,n,o){return[d({},t+e,{color:n["color_"+o]," .pe-tabs__tab.pe-button--selected":{color:n["color_"+o+"_selected"]," .pe-button__content":{background:n["color_"+o+"_selected_background"]}}," .pe-tabs__tab:not(.pe-button--selected) .pe-icon":{color:n["color_"+o+"_icon"]}," .pe-tabs__indicator":{"background-color":n["color_"+o+"_tab_indicator"]}})]},f=function(t,e){return[h("",t,e,"light"),h(".pe-dark-theme ",t,e,"dark")]},g=e.trust('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>'),m=e.trust('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>'),v={msvg:g},x={msvg:m},w=[p,f],y=".pe-tabs",B=function(t,e){return l.styler.generateStyles([t,y],u({},b,e),w)};l.styler.generateStyles([y],b,w);var k={component:"pe-tabs",scrollButton:"pe-tabs__scroll-button",scrollButtonLeft:"pe-tabs__scroll-button--start",scrollButtonRight:"pe-tabs__scroll-button--end",scrollButtonOffset:"pe-tabs__scroll-button--offset",tabRow:"pe-tabs__row",tabRowCentered:"pe-tabs__row--centered",tabRowIndent:"pe-tabs__row--indent",tab:"pe-tabs__tab",tabContent:"pe-tabs__tab-content",tabHasIcon:"pe-tabs__tab---icon",indicator:"pe-tabs__indicator",scrollable:"pe-tabs--scrollable",isAutofit:"pe-tabs--autofit",isAtStart:"pe-tabs--start",isAtEnd:"pe-tabs--end",isMenu:"pe-tabs--menu",activeSelected:"pe-tabs__active-selected",label:"pe-button__label"},S=2,I=4,E=function(t,e){var n=0,o=e.length-1;return{left:Math.max(t-1,n),right:Math.min(t+1,o)}},T=function(t,n,o,a){o.stopPropagation(),o.preventDefault();var i=t.selectedTabIndex,l=E(i,t.tabs)[a];L(t,l),l!==i&&(q(t,n,l,!0),e.redraw())},z=function(t,n,o){var i=o.scrollIconForward||x,l=o.scrollIconBackward||v;return e(a.iconButton,{class:[k.scrollButton,n===S?k.scrollButtonLeft:k.scrollButtonRight].join(" "),icon:n===S?l:i,ripple:{center:!0},oncreate:function(e){t.scrollButtonLeftEl&&t.scrollButtonRightEl||(n===S?t.scrollButtonLeftEl=e.dom:t.scrollButtonRightEl=e.dom)},events:{onclick:n===S?function(e){T(t,o,e,"left")}:function(e){T(t,o,e,"right")}}})},R=function(t){var e=t.tabs[0].el,n=e.querySelector("."+k.label+" span"),o=e.getBoundingClientRect().width,a=n.getBoundingClientRect().width,i=(o-a)/2;e.style.marginLeft=-i+"px"},C=function(t){var e=t.scrollButtonRightEl.getBoundingClientRect().width,n=t.tabsEl.querySelector("."+k.scrollButtonOffset);n.style.width=e+"px"},L=function(){},O=function(t){var e=t.scrollerEl,n=e.scrollLeft,o=t.selectedTabIndex,a=t.tabsEl,i=0,l=t.tabs.length-1,r=0===e.scrollLeft&&o===i,s=n>=e.scrollWidth-a.getBoundingClientRect().width-1&&o===l;t.scrollButtonStates.left=!r,t.scrollButtonStates.right=!s},j=function(t,e,n){var o=n.tabsEl.getBoundingClientRect(),a=t.getBoundingClientRect(),i=n.tabIndicatorEl.style,l=a.left-o.left+n.scrollerEl.scrollLeft,r="translate("+l+"px, 0)",s=e?b.indicator_slide_min_duration:0;i.width=a.width+"px",i["transition-duration"]=i["-webkit-transition-duration"]=i["-moz-transition-duration"]=i["-o-transition-duration"]=s+"s",i.transform=i["-webkit-transform"]=i["-moz-transform"]=i["-ms-transform"]=i["-o-transform"]=r},q=function(t,e,n,o){if(t.selectedTabIndex=n,t.tabs.length){var a=t.tabs[n].el;a&&t.tabIndicatorEl&&t.tabsEl&&j(a,o,t),t.managesScroll&&(O(t),L(t,n)),e.getState&&e.getState({index:n,data:t.tabs[n].data,el:a})}},W=function(t,a,i,l){l.events=l.events||{},l.events.onclick=l.events.onclick||function(){};var r=u({},l,{content:e("div",{class:k.tabContent},[l.icon?e(o.icon,l.icon):null,l.label?e("div",{class:k.label},e("span",l.label)):null]),class:[k.tab,l.icon&&l.label?k.tabHasIcon:null,l.class].join(" "),wash:!1,ripple:!0,events:u({},l.events,{onclick:function(e){q(t,a,i,!a.noIndicatorSlide),l.events.onclick(e)}}),oncreate:function(e){void 0===t.tabs[i]&&(t.tabs[i]={data:l,el:e.dom})}});return e(n.button,r)},H=function(t,e){return t<e?-1:t>e?1:0},M=function(t){var n=t.attrs,o=t.state,a=n.element||"div",l=!n.scrollable&&!n.centered&&!!n.autofit;void 0!==n.selectedTab&&o.previousOptsSelectedTab!==n.selectedTab&&q(o,n,n.selectedTab,!0),o.previousOptsSelectedTab=n.selectedTab;var r=function(){q(o,n,o.selectedTabIndex,!1),e.redraw()},s={class:[k.component,n.scrollable?k.scrollable:null,0===o.selectedTabIndex?k.isAtStart:null,o.selectedTabIndex===o.tabs.length-1?k.isAtEnd:null,n.activeSelected?k.activeSelected:null,l?k.isAutofit:null,n.menu?k.isMenu:null,n.class].join(" "),id:n.id||"",oncreate:function(t){o.tabsEl=t.dom,n.largestWidth&&!function(){var t=o.tabs.map(function(t){return t.el.getBoundingClientRect().width}),e=t.sort(H).reverse()[0];o.tabs.forEach(function(t){return t.el.style.width=e+"px"})}(),n.scrollable&&R(o),n.scrollable&&!i.isTouch&&(o.managesScroll=!0,C(o)),i.subscribe("resize",r),q(o,n,o.selectedTabIndex,!1),n.getState&&setTimeout(e.redraw)},onremove:function(){i.unsubscribe("resize",r)}},c=t.children.length&&t.children||n.children,_=n.content?n.content:n.buttons?n.buttons:c&&c[0]?c:[],b=_.map(function(t,e){var a=u({},t,{selected:e===o.selectedTabIndex,animateOnTap:n.animateOnTap!==!1},n.tabsOpts||{});return W(o,n,e,a)}).concat([n.scrollable?e("div",{class:k.scrollButtonOffset}):null]),d=void 0,p=void 0;n.scrollable&&(d=z(o,S,n),p=z(o,I,n));var h=n.hideIndicator?null:e("div",{class:k.indicator,oncreate:function(t){return o.tabIndicatorEl=t.dom,q(o,n,o.selectedTabIndex,!1)}}),f=[n.scrollable?d:null,e("div",{class:[k.tabRow,n.centered?k.tabRowCentered:null,n.scrollable?k.tabRowIndent:null].join(" "),oncreate:function(t){return o.scrollerEl=t.dom},onscroll:function(){O(o)}},[b,h]),n.scrollable?p:null];return e(a,s,[n.before,f,n.after])},A={theme:B,view:M,oninit:function(t){t.state={tabsEl:null,scrollerEl:null,tabs:[],tabIndicatorEl:null,selectedTabIndex:0,previousOptsSelectedTab:void 0,managesScroll:!1,scrollButtonStates:{left:!1,right:!1}}}};t.tabs=A,t.classes=k,t.vars=b,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-tabs.js.map
