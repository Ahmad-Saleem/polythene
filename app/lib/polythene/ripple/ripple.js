define(["polythene/polythene/polythene","mithril","css!./ripple"],function(t,e){"use strict";var n,i,o,s,a;return n=.2,i=.36,o=function(t,n){var i,o,r,l,c;return n=n||{},n.disabled?e(""):(l=function(e,i,o){i||(t.ripple(e),s(e,t,n),o.onunload=function(){a(e)})},c=function(e,n){n||t.waves(e)},i=n.tag||"div[fit]",o={"class":["ripple",n.constrained!==!1?"constrained":null,n["class"]].join(" "),config:l},r=e(".ripple-mask",e(".ripple-waves",{config:c})),e(i,o,r))},s=function(t,e,n){t.addEventListener("mousedown",function(t){e.start(t,e,n)}),t.addEventListener("mouseup",function(t){e.stop(t,e,n)})},a=function(t){t.removeEventListener("mousedown"),t.removeEventListener("mouseup")},{controller:function(o){return o=o||{},{view:e.prop(),ripple:e.prop(),waves:e.prop(),delegate:e.prop(),start:function(e,o,s){var a,r,l,c,p,d,u,f,v,y,m,h,w,g,L,E,b,k;a=o.ripple(),r=o.waves(),r.classList.remove("animated"),y=a.offsetWidth,m=a.offsetHeight,h=Math.sqrt(y*y+m*m),r.style.width=r.style.height=h+"px",u=a.getBoundingClientRect(),s.center?(l=u.left+u.width/2,c=u.top+u.height/2):(l=e.clientX,c=e.clientY),f=u.top-document.body.scrollTop,v=u.left-document.body.scrollLeft,p=l-u.left-h/2,d=c-u.top-h/2,r.style.top=d+"px",r.style.left=p+"px",b=void 0!==s.initialOpacity?s.initialOpacity:n,k=void 0!==s.opacityDecayVelocity?s.opacityDecayVelocity:i,g=1/k*b,r.style["animation-duration"]=r.style["-webkit-animation-duration"]=r.style["-moz-animation-duration"]=r.style["-o-animation-duration"]=g+"s",L=window.getComputedStyle(a).color,r.style.backgroundColor=L,r.style.opacity=b,w=t.whichTransitionEvent(),E=function(t){r.classList.remove("animated"),r.removeEventListener(w,E,!1),s.end&&s.end(t)},r.addEventListener(w,E,!1),s.start&&s.start(e),r.classList.add("animated")},stop:function(){}}},view:function(t,e){e=e||{};var n=t.view();return(!n||e.refresh)&&(n=o(t,e),t.view(n)),n}}});