{"version":3,"file":"polythene-core-selection-control.js","sources":["../../polythene-css-classes/selection-control.js","../src/selection-control.js","../src/view-control.js","../src/vars.js"],"sourcesContent":["\nexport default {\n  component: \"pe-control\",\n\n  // elements\n  formLabel: \"pe-control__form-label\",\n  input:     \"pe-control__input\",\n  label:     \"pe-control__label\",\n\n  // states\n  disabled:  \"pe-control--disabled\",\n  inactive:  \"pe-control--inactive\",\n  large:     \"pe-control--large\",\n  medium:    \"pe-control--medium\",\n  off:       \"pe-control--off\",\n  on:        \"pe-control--on\",\n  regular:   \"pe-control--regular\",\n  small:     \"pe-control--small\",\n\n  // control view elements\n  box:       \"pe-control__box\",\n  button:    \"pe-control__button\",\n\n  // control view states\n  buttonOff: \"pe-control__button--off\",\n  buttonOn:  \"pe-control__button--on\",\n};\n","import { filterSupportedAttributes } from \"polythene-core\";\nimport classes from \"polythene-css-classes/selection-control\";\n\nexport const getElement = vnode =>\n  vnode.attrs.element || \"div\";\n\nconst sizeClasses = {\n  small:   classes.small,\n  regular: classes.regular,\n  medium:  classes.medium,\n  large:   classes.large\n};\n\nconst classForSize = (size = \"regular\") => sizeClasses[size];\n\nconst currentState = (attrs, state) => {\n  const checked = attrs.checked !== undefined\n    ? attrs.checked\n    : state.checked();\n  const selectable = attrs.selectable !== undefined\n    ? attrs.selectable(checked)\n    : false;\n  const inactive = attrs.disabled || !selectable;\n  return { checked, inactive };\n};\n\nexport const getInitialState = (vnode, createStream) => {\n  const attrs = vnode.attrs;\n  const isChecked = attrs.defaultChecked !== undefined\n    ? attrs.defaultChecked\n    : attrs.checked || false;\n  const checked = createStream(isChecked);\n\n  const notifyChange = (e, isChecked) => {\n    if (attrs.onChange) {\n      attrs.onChange({\n        event: e,\n        checked: isChecked,\n        value: attrs.value\n      });\n    } \n  };\n\n  const onChange = e => {\n    let isChecked = e.currentTarget.checked;\n    if (attrs.type === \"radio\") {\n      // do not set directly\n    } else {\n      checked(isChecked);\n    }\n    notifyChange(e, isChecked);\n  };\n\n  const toggle = e => {\n    const newChecked = !checked();\n    checked(newChecked);\n    notifyChange(e, newChecked);\n  };\n\n  return {\n    checked,\n    toggle,\n    onChange,\n    redrawOnUpdate: createStream.merge([checked])\n  };\n};\n\nexport const createProps = (vnode, { keys: k }) => {\n  const attrs = vnode.attrs;\n  const state = vnode.state;\n  const { checked, inactive } = currentState(attrs, state);\n  return Object.assign(\n    {},\n    filterSupportedAttributes(attrs),\n    {\n      className: [\n        classes.component,\n        attrs.instanceClass, // for instance pe-checkbox-control\n        checked ? classes.on : classes.off,\n        attrs.disabled ? classes.disabled : null,\n        inactive ? classes.inactive : null,\n        classForSize(attrs.size),\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \")\n    }\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, keys: k, ViewControl }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const { checked, inactive } = currentState(attrs, state);\n  const viewControlClickHandler = attrs.events && attrs.events[k.onclick];\n  const viewControlKeyDownHandler = attrs.events && attrs.events[k.onkeydown]\n    ? attrs.events[k.onkeydown]\n    : e => {\n      if (e.key === \"Enter\") {\n        if (viewControlClickHandler) {\n          viewControlClickHandler(e);\n        } else {\n          state.toggle(e);\n        }\n      }\n    };\n\n  return h(\"label\",\n    Object.assign(\n      {},\n      {\n        className: classes.formLabel,\n        [k.onclick]: viewControlClickHandler\n      }\n    ),\n    [\n      h(ViewControl, Object.assign(\n        {},\n        attrs,\n        {\n          inactive,\n          checked,\n          key: \"control\",\n          events: {\n            // Only use key down event; click events are handled by input element\n            [k.onkeydown]: viewControlKeyDownHandler\n          }\n        }\n      )),\n      attrs.label\n        ? h(`.${classes.label}`,\n          { key: \"label\" },\n          attrs.label\n        )\n        : null,\n      h(\"input\", Object.assign(\n        {},\n        attrs.events,\n        {\n          name: attrs.name,\n          type: attrs.type,\n          value: attrs.value,\n          checked\n        },\n        attrs.disabled || inactive\n          ? { disabled: \"disabled\" }\n          : {\n            [k.onchange]: state.onChange\n          }\n      ))\n    ]\n  );\n};\n","import classes from \"polythene-css-classes/selection-control\";\n\nconst CONTENT = [\n  { iconType: \"iconOn\", className: classes.buttonOn},\n  { iconType: \"iconOff\", className: classes.buttonOff}\n];\n\nexport const getElement = vnode =>\n  vnode.attrs.element || `.${classes.box}`;\n\nconst createIcon = (h, iconType, attrs, className) => (\n  // if attrs.iconOn/attrs.iconOff is passed, use that icon options object and ignore size\n  // otherwise create a new object\n  Object.assign(\n    {},\n    {\n      className,\n      key: iconType\n    },\n    attrs[iconType]\n      ? attrs[iconType]\n      : { svg: { content: h.trust(attrs.icons[iconType]) } },\n    attrs.icon,\n    attrs.size\n      ? { size: attrs.size }\n      : null\n  )\n);\n\nexport const createContent = (vnode, { renderer: h, Icon, IconButton }) => {\n  const attrs = vnode.attrs;\n  return h(IconButton, Object.assign(\n    {},\n    {\n      element: \"div\",\n      key: attrs.key,\n      className: classes.button,\n      content: CONTENT.map(o =>\n        h(Icon, createIcon(h, o.iconType, attrs, o.className))\n      ),\n      ripple: { center: true },\n      disabled: attrs.disabled,\n      events: attrs.events,\n      inactive: attrs.inactive\n    },\n    attrs.iconButton // for example for hover behaviour\n  ));\n};\n","import { vars } from \"polythene-theme\";\n\nconst rgba = (colorStr, opacity = 1) =>\n  `rgba(${colorStr}, ${opacity})`;\n\nexport default {\n  label_font_size:                     2 * vars.grid_unit_component, // 16\n  label_height:                        3 * vars.grid_unit_component, // 24\n  label_padding_before:                vars.grid_unit * 4, // 16\n  label_padding_after:                 0,\n  button_size:                         6 * vars.grid_unit_component,\n  icon_size:                           3 * vars.grid_unit_component,\n  animation_duration:                  vars.animation_duration,\n\n  color_light_on:                      rgba(vars.color_primary),\n  color_light_off:                     rgba(vars.color_light_foreground, vars.blend_light_text_secondary),\n  color_light_label:                   rgba(vars.color_light_foreground, vars.blend_light_text_secondary),\n  color_light_disabled:                rgba(vars.color_light_foreground, vars.blend_light_text_disabled),\n  color_light_thumb_off_focus_opacity: .08,\n  color_light_thumb_on_focus_opacity:  .11,\n\n  // icon colors may be set in theme; set to \"inherit\" by default\n  // color_light_on_icon\n  // color_light_off_icon\n\n  // label on/off colors may be set in theme; set to color_light_label by default\n  // color_light_on_label\n  // color_light_off_label\n\n  color_light_focus_on:                rgba(vars.color_primary),\n  color_light_focus_on_opacity:        .11,\n  color_light_focus_off:               rgba(vars.color_light_foreground),\n  color_light_focus_off_opacity:       .07,\n\n  color_dark_on:                       rgba(vars.color_primary),\n  color_dark_off:                      rgba(vars.color_dark_foreground, vars.blend_dark_text_secondary),\n  color_dark_label:                    rgba(vars.color_dark_foreground, vars.blend_dark_text_secondary),\n  color_dark_disabled:                 rgba(vars.color_dark_foreground, vars.blend_dark_text_disabled),\n  color_dark_thumb_off_focus_opacity:  .08,\n  color_dark_thumb_on_focus_opacity:   .11,\n\n  // icon color may be set in theme; set to \"inherit\" by default\n  // color_dark_on_icon\n  // color_dark_off_icon\n  \n  // label on/off colors may be set in theme; set to color_dark_label by default\n  // color_dark_on_label\n  // color_dark_off_label\n\n  color_dark_focus_on:                 rgba(vars.color_primary), // or '#80cbc4'\n  color_dark_focus_on_opacity:         .14,\n  color_dark_focus_off:                rgba(vars.color_dark_foreground),\n  color_dark_focus_off_opacity:        .09\n};\n"],"names":["getElement","vnode","attrs","element","sizeClasses","classes","small","regular","medium","large","classForSize","size","currentState","state","checked","undefined","selectable","inactive","disabled","getInitialState","createStream","isChecked","defaultChecked","notifyChange","e","onChange","value","currentTarget","type","toggle","newChecked","merge","createProps","k","keys","filterSupportedAttributes","component","instanceClass","on","off","tone","className","class","join","createContent","h","renderer","ViewControl","viewControlClickHandler","events","onclick","viewControlKeyDownHandler","onkeydown","key","formLabel","label","name","onchange","CONTENT","iconType","buttonOn","buttonOff","box","createIcon","svg","content","trust","icons","icon","Icon","IconButton","_extends","button","map","o","center","iconButton","rgba","colorStr","opacity","vars","grid_unit_component","grid_unit","animation_duration","color_primary","color_light_foreground","blend_light_text_secondary","blend_light_text_disabled","color_dark_foreground","blend_dark_text_secondary","blend_dark_text_disabled"],"mappings":"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"}