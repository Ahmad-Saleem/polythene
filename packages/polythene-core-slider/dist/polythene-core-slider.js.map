{"version":3,"file":"polythene-core-slider.js","sources":["../src/vars.js","../src/classes.js","../src/slider.js"],"sourcesContent":["import { vars } from \"polythene-theme\";\n\nconst rgba = (colorStr, opacity = 1) =>\n  `rgba(${colorStr}, ${opacity})`;\n\nconst lightForeground =                vars.color_light_foreground;\nconst darkForeground =                 vars.color_dark_foreground;\nconst activeColor =                    vars.color_primary; // or override in CSS by setting 'color' property on '.pe-slider'\nconst thumb_size =                     12;\nconst thumb_touch_size =               Math.max(40, thumb_size);\nconst thumb_border_width =             2;\nconst active_thumb_scale =             3/2;\nconst disabled_thumb_scale =           1/2;\nconst active_pin_thumb_scale =         2/6;\nconst largestThumbSize =               active_thumb_scale * thumb_size;\nconst largestElement =                 Math.max(thumb_touch_size, largestThumbSize);\nconst height =                         Math.max(52, largestThumbSize);\nconst side_spacing =                   Math.max(10, largestElement / 2 - thumb_size / 2);\nconst horizontal_layout_side_spacing = side_spacing + 4; // optimization for horizontal layout\n\nexport default {\n  height,\n  side_spacing,\n  horizontal_layout_side_spacing,\n  thumb_size,\n  thumb_touch_size,\n  track_height: height,\n  bar_height: 2,\n  thumb_border_width,\n  active_thumb_scale,\n  animation_duration: vars.animation_duration,\n  disabled_thumb_scale,\n  active_pin_thumb_scale,\n\n  step_width: 2,\n  pin_height: 32,\n  pin_width: 26,\n  pin_font_size: 10,\n\n  color_light_track_active:            rgba(lightForeground, .38),\n  color_light_track_inactive:          rgba(lightForeground, .26),\n  color_light_track_value:             rgba(activeColor),\n  // background color may be set in theme; disabled by default\n  // color_light_thumb_background:        undefined,\n  color_light_thumb_off:               rgba(lightForeground, .26),\n  color_light_thumb_off_focus:         rgba(lightForeground),\n  color_light_thumb_off_focus_opacity: .08,\n  color_light_thumb_on:                rgba(activeColor),\n  color_light_thumb_on_focus_opacity:  .11,\n  color_light_thumb_inactive:          rgba(lightForeground, .26),\n  color_light_tick:                    rgba(lightForeground, 1),\n  color_light_icon:                    rgba(vars.color_light_foreground, vars.blend_light_text_secondary),\n  color_light_disabled_icon:           rgba(vars.color_light_foreground, vars.blend_light_text_disabled),\n  color_light_label:                   rgba(vars.color_light_foreground, vars.blend_light_text_secondary),\n  color_light_disabled_label:          rgba(vars.color_light_foreground, vars.blend_light_text_disabled),\n\n  color_dark_track_active:             rgba(darkForeground, .3),\n  color_dark_track_inactive:           rgba(darkForeground, .2),\n  color_dark_track_value:              rgba(activeColor),\n  // background color may be set in theme; disabled by default\n  // color_dark_thumb_background:         undefined,\n  color_dark_thumb_off:                rgba(darkForeground, .2),\n  color_dark_thumb_off_focus:          rgba(darkForeground),\n  color_dark_thumb_off_focus_opacity:  .08,\n  color_dark_thumb_on:                 rgba(activeColor),\n  color_dark_thumb_on_focus_opacity:   .11,\n  color_dark_thumb_inactive:           rgba(darkForeground, .2),\n  color_dark_tick:                     rgba(darkForeground, 1),\n  color_dark_icon:                     rgba(vars.color_dark_foreground, vars.blend_dark_text_secondary),\n  color_dark_disabled_icon:            rgba(vars.color_dark_foreground, vars.blend_dark_text_disabled),\n  color_dark_label:                    rgba(vars.color_dark_foreground, vars.blend_dark_text_secondary),\n  color_dark_disabled_label:           rgba(vars.color_dark_foreground, vars.blend_dark_text_disabled)\n};\n","\nexport default {\n  component:      \"pe-slider\",\n\n  // elements\n  control:        \"pe-slider__control\",\n  label:          \"pe-slider__label\",\n  pin:            \"pe-slider__pin\",\n  thumb:          \"pe-slider__thumb\",\n  tick:           \"pe-slider__ticks-tick\",\n  ticks:          \"pe-slider__ticks\",\n  track:          \"pe-slider__track\",\n  trackBar:       \"pe-slider__track-bar\",\n  trackBarValue:  \"pe-slider__track-bar-value\",\n  trackPart:      \"pe-slider__track-part\",\n  trackPartRest:  \"pe-slider__track-rest\",\n  trackPartValue: \"pe-slider__track-value\",\n\n  // states\n  hasFocus:       \"pe-slider--focus\",\n  hasPin:         \"pe-slider--pin\",\n  hasTicks:       \"pe-slider--ticks\",\n  hasTrack:       \"pe-slider--track\",\n  isActive:       \"pe-slider--active\",\n  isAtMin:        \"pe-slider--min\",\n  isDisabled:     \"pe-slider--disabled\",\n};\n","import { isTouch, pointerStartMoveEvent, pointerMoveEvent, pointerEndMoveEvent, isClient, filterSupportedAttributes } from \"polythene-core\";\nimport themeVars from \"./vars\";\nimport classes from \"./classes\";\n\nconst MAX_TICKS = 100;\nlet focusElement;\n\nconst deFocus = state => {\n  if (focusElement) {\n    focusElement.blur();\n  }\n  focusElement = undefined;\n  state.hasFocus(false);\n};\n\nconst focus = (state, el) => {\n  deFocus(state);\n  focusElement = el;\n  state.hasFocus(true);\n};\n\nconst positionFromEvent = (e, isVertical) => (\n  // isVertical not yet implemented\n  isTouch && e.touches\n    ? isVertical ? e.touches[0].pageY : e.touches[0].pageX\n    : isVertical ? e.pageY : e.pageX);\n\nconst updatePinPosition = state => {\n  if (state.controlEl && state.pinEl) {\n    const left = state.fraction() * state.rangeWidth;\n    state.pinEl.style.left = left + \"px\";\n  }\n};\n\nconst updateValue = (state, value) => {\n  state.setValue(value, true);\n  updatePinPosition(state);\n};\n\nconst generateTickMarks = (h, stepCount) => {\n  const items = [];\n  let s = stepCount + 1;\n  while (s > 0) {\n    items.push(h(\"div\", {\n      className: classes.tick,\n      key: `tick-${s}`\n    }));\n    s--;\n  }\n  return items;\n};\n\nconst readRangeData = state => {\n  if (state.controlEl && isClient) {\n    // range is from the far left to the far right minus the thumb width (max x is at the left side of the thumb)\n    state.controlWidth = themeVars.thumb_size;\n    state.rangeWidth = state.trackEl.getBoundingClientRect().width - state.controlWidth;\n    const styles = window.getComputedStyle(state.trackEl);\n    state.rangeOffset = parseFloat(styles.marginLeft);\n  }\n};\n\nconst calculateClickOffset = (state, controlOffset = 0) => {\n  state.clickOffset = state.trackEl.getBoundingClientRect().left - (state.rangeOffset - state.controlWidth / 2) + controlOffset;\n};\n\nconst initControlEvent = (state, e) => {\n  const controlPos = state.controlEl.getBoundingClientRect().left;\n  const eventPos = positionFromEvent(e);\n  const controlOffset = eventPos - controlPos - state.controlWidth / 2;\n  calculateClickOffset(state, controlOffset);\n};\n\nconst initTrackEvent = (state) =>\n  calculateClickOffset(state, 0);\n\nconst handlePosEvent = (state, e) => {\n  const pos = positionFromEvent(e) - state.clickOffset;\n  const value = state.min + ((pos - state.rangeOffset) / state.rangeWidth) * (state.max - state.min);\n  updateValue(state, value);\n};\n\nconst startDrag = (state, attrs, e) => {\n  if (state.isDragging()) return;\n  e.preventDefault();\n  state.isDragging(true);\n  state.isActive(true);\n  deFocus(state);\n\n  const drag = e => {\n    if (!state.isDragging()) return;\n    handlePosEvent(state, e);\n  };\n\n  const endDrag = () => {\n    if (!state.isDragging()) return;\n    deFocus(state);\n    if (isClient) {\n      window.removeEventListener(pointerMoveEvent, drag);\n      window.removeEventListener(pointerEndMoveEvent, endDrag);\n    }\n    state.isDragging(false);\n    state.isActive(false);\n  };\n\n  if (isClient) {\n    window.addEventListener(pointerMoveEvent, drag);\n    window.addEventListener(pointerEndMoveEvent, endDrag);\n  }\n  readRangeData(state);\n\n  if (attrs.pin) {\n    updatePinPosition(state);\n  }\n};\n\nconst startTrack = (state, attrs, e) => {\n  e.preventDefault();\n  if (state.isDragging()) {\n    return;\n  }\n  readRangeData(state);\n  initTrackEvent(state);\n  handlePosEvent(state, e);\n  startDrag(state, attrs, e);\n};\n\nconst createSlider = (vnode, { h, k, hasTicks, interactiveTrack }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const fraction = state.fraction();\n  const range = state.max - state.min;\n  const stepCount = Math.min(MAX_TICKS, parseInt(range / state.stepSize, 10));\n\n  const onStartTrack = e => (\n    startTrack(state, attrs, e)\n  );\n\n  const onInitDrag = e => {\n    readRangeData(state);\n    initControlEvent(state, e);\n    startDrag(state, attrs, e);\n  };\n\n  const flexValueCss =  fraction + \" 1 0%\";\n  const flexRestValue = 1 - fraction;\n  const flexRestCss =   flexRestValue + \" 1 0%\";\n\n  return h(\"div\",\n    Object.assign(\n      {},\n      { className: classes.track },\n      interactiveTrack && !attrs.disabled && {\n        [k[`on${pointerStartMoveEvent}`]]: onStartTrack\n      }\n    ),\n    [\n      h(\"div\",\n        {\n          className: classes.trackPart + \" \" + classes.trackPartValue,\n          key: \"trackPartValue\",\n          style: {\n            flex: flexValueCss,\n            msFlex: flexValueCss,\n            WebkitFlex: flexValueCss\n          }\n        },\n        h(\"div\", { className: classes.trackBar },\n          h(\"div\", { className: classes.trackBarValue })\n        )\n      ),\n      h(\"div\", Object.assign(\n        {},\n        {\n          className: classes.control,\n          key: \"control\"\n        },\n        attrs.disabled\n          ? { disabled: true }\n          : {\n            [k.tabindex]: attrs[k.tabindex] || 0,\n            [k.onfocus]: () => focus(state, state.controlEl),\n            [k.onblur]: () => deFocus(state),\n            [k.onkeydown]: e => {\n              if (e.key !== \"Tab\") {\n                e.preventDefault();\n              }\n              if (e.key === \"Escape\") {\n                state.controlEl.blur(e);\n              } else if (e.key === \"ArrowLeft\" || e.key === \"ArrowDown\") {\n                state.decrement(state, e.shiftKey);\n              } else if (e.key === \"ArrowRight\" || e.key === \"ArrowUp\") {\n                state.increment(state, e.shiftKey);\n              } else if (e.key === \"Home\") {\n                updateValue(state, state.min);\n              } else if (e.key === \"End\") {\n                updateValue(state, state.max);\n              } else if (e.key === \"PageDown\") {\n                state.decrement(state, true);\n              } else if (e.key === \"PageUp\") {\n                state.increment(state, true);\n              }\n              readRangeData(state);\n              updatePinPosition(state);\n            }\n          },\n        !attrs.disabled && {\n          [k[`on${pointerStartMoveEvent}`]]: onInitDrag\n        },\n        attrs.events\n          ? attrs.events\n          : null,\n        hasTicks\n          ? { step: stepCount }\n          : null\n      ),\n      attrs.icon\n        ? h(\"div\",\n          {\n            className: classes.thumb,\n            key: \"icon\"\n          },\n          attrs.icon\n        )\n        : null\n      ),\n      h(\"div\",\n        {\n          className: classes.trackPart + \" \" + classes.trackPartRest,\n          key: \"trackPartRest\",\n          style: {\n            flex: flexRestCss,\n            msFlex: flexRestCss,\n            WebkitFlex: flexRestCss,\n            maxWidth: (flexRestValue * 100) + \"%\" // for IE Edge\n          }\n        },\n        h(\"div\", { className: classes.trackBar },\n          h(\"div\", { className: classes.trackBarValue })\n        )\n      ),\n      hasTicks && !attrs.disabled\n        ? h(\"div\",\n          {\n            className: classes.ticks,\n            key: \"ticks\"\n          },\n          generateTickMarks(h, stepCount)\n        )\n        : null,\n      hasTicks && attrs.pin && !attrs.disabled\n        ? h(\"div\",\n          {\n            className: classes.pin,\n            key: \"pin\",\n            value: state.value()\n          }\n        )\n        : null\n    ]\n  );\n};\n\nexport const getInitialState = (vnode, createStream) => {\n  const attrs = vnode.attrs;\n\n  const min = attrs.min !== undefined ? attrs.min : 0;\n  const max = attrs.max !== undefined ? attrs.max : 100;\n  const range = max - min;\n  const stepSize = attrs.stepSize !== undefined\n    ? attrs.stepSize\n    : 1;\n  const defaultValue = attrs.defaultValue !== undefined\n    ? attrs.defaultValue\n    : attrs.value !== undefined\n      ? attrs.value\n      : 0;\n  const previousValue = createStream(undefined);\n  const isActive = createStream(false);\n  const hasFocus = createStream(false);\n  const isDragging = createStream(false);\n  const fraction = createStream(min);\n  const value = createStream(0);\n  const normalizeFactor = 1 / stepSize;\n\n  const setValue = (v, shouldNotify = false) => {\n    if (v < min) v = min;\n    if (v > max) v = max;\n    value(stepSize\n      ? Math.round(v * normalizeFactor) / normalizeFactor\n      : v\n    );\n    fraction((value() - min) / range);\n    if (shouldNotify && attrs.onChange) {\n      attrs.onChange({\n        value: value()\n      });\n    }\n    previousValue(v);\n  };\n\n  const increment = (state, useLargeStep) =>\n    updateValue(state, value() + (useLargeStep ? 10 : 1) * (stepSize || 1));\n\n  const decrement = (state, useLargeStep) =>\n    updateValue(state, value() - (useLargeStep ? 10 : 1) * (stepSize || 1));\n  \n  setValue(defaultValue);\n  \n  return {\n    min,\n    max,\n    stepSize,\n    fraction,\n    // DOM elements\n    trackEl: null,\n    controlEl: null,\n    pinEl: null,\n    // functions\n    setValue,\n    increment,\n    decrement, \n    // streams\n    isDragging,\n    isActive,\n    value,\n    previousValue,\n    hasFocus,\n    // coordinates\n    controlWidth: 0,\n    rangeWidth: 0,\n    rangeOffset: 0,\n    clickOffset: 0,\n    redrawOnUpdate: createStream.merge([isActive, value])\n  };\n};\n\nexport const onMount = vnode => {\n  const dom = vnode.dom;\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  state.trackEl = dom.querySelector(`.${classes.track}`);\n  state.controlEl = dom.querySelector(`.${classes.control}`);\n  state.pinEl = dom.querySelector(`.${classes.pin}`);\n\n  readRangeData(state);\n\n  if (attrs.pin) {\n    setTimeout(() => {\n      updateValue(state, state.value());\n    }, 0);\n  }\n};\n\nexport const createProps = (vnode, { keys: k }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  if (attrs.value !== undefined) {\n    if (state.previousValue() !== attrs.value) {\n      state.previousValue(attrs.value);\n      setTimeout(() => state.setValue(state.previousValue()), 0); // perform in next tick to play nice with React\n    }\n  }\n  const hasTicks = attrs.ticks !== undefined && attrs.ticks !== false;\n  const interactiveTrack = (attrs.interactiveTrack !== undefined) ? attrs.interactiveTrack : true;\n  return Object.assign(\n    {}, \n    filterSupportedAttributes(attrs),\n    {\n      className: [\n        classes.component,\n        attrs.disabled ? classes.isDisabled : null,\n        attrs.pin ? classes.hasPin : null,\n        interactiveTrack ? classes.hasTrack : null,\n        state.isActive() ? classes.isActive : null,\n        state.hasFocus() ? classes.hasFocus : null,\n        state.fraction() === 0 ? classes.isAtMin : null,\n        hasTicks ? classes.hasTicks : null,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \")\n    }\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, keys: k }) => {\n  const attrs = vnode.attrs;\n  const hasTicks = attrs.ticks !== undefined && attrs.ticks !== false;\n  const interactiveTrack = (attrs.interactiveTrack !== undefined) ? attrs.interactiveTrack : true;\n  return createSlider(vnode, { h, k, hasTicks, interactiveTrack });\n};\n\n\n"],"names":["rgba","colorStr","lightForeground","vars","color_light_foreground","darkForeground","color_dark_foreground","activeColor","color_primary","thumb_touch_size","Math","max","largestElement","active_thumb_scale","height","side_spacing","thumb_size","animation_duration","blend_light_text_secondary","blend_light_text_disabled","blend_dark_text_secondary","blend_dark_text_disabled","focusElement","deFocus","blur","undefined","hasFocus","focus","state","el","positionFromEvent","e","isVertical","touches","pageY","pageX","updatePinPosition","controlEl","pinEl","left","fraction","rangeWidth","style","updateValue","value","setValue","generateTickMarks","h","stepCount","items","s","push","classes","tick","readRangeData","isClient","controlWidth","themeVars","trackEl","getBoundingClientRect","width","styles","window","getComputedStyle","rangeOffset","parseFloat","marginLeft","calculateClickOffset","controlOffset","clickOffset","initControlEvent","controlPos","initTrackEvent","handlePosEvent","pos","min","startDrag","attrs","isDragging","preventDefault","isActive","drag","endDrag","removeEventListener","pointerMoveEvent","pointerEndMoveEvent","addEventListener","pin","startTrack","createSlider","vnode","k","hasTicks","interactiveTrack","range","parseInt","stepSize","onStartTrack","onInitDrag","flexValueCss","flexRestValue","flexRestCss","_extends","className","track","disabled","pointerStartMoveEvent","trackPart","trackPartValue","trackBar","trackBarValue","control","tabindex","onfocus","onblur","onkeydown","key","decrement","shiftKey","increment","events","step","icon","thumb","trackPartRest","ticks","getInitialState","createStream","defaultValue","previousValue","normalizeFactor","v","shouldNotify","round","onChange","useLargeStep","merge","onMount","dom","querySelector","createProps","keys","filterSupportedAttributes","component","isDisabled","hasPin","hasTrack","isAtMin","tone","class","join","createContent","renderer"],"mappings":"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"}