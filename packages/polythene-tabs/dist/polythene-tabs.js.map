{"version":3,"file":"polythene-tabs.js","sources":["../src/theme/vars.js","../src/theme/layout.js","../src/theme/color.js","../src/theme/chevron-left.js","../src/theme/chevron-right.js","../src/theme/index.js","../src/tab.js","../src/scroll-button.js","../src/tabs.js"],"sourcesContent":["import { vars } from \"polythene-theme\";\nimport { vars as buttonVars } from \"polythene-button\";\nimport { vars as iconButtonVars } from \"polythene-icon-button\";\n\nconst rgba = vars.rgba;\n\nconst fontSize = buttonVars.font_size;\nconst tab_label_line_height = 1.1 * fontSize;\n\nexport default {\n  tab_min_width:                    72,\n  tab_max_width:                    \"initial\",\n  tab_height:                       48,\n  // tab_min_width_tablet:             160,\n  label_max_width:                  264,\n  menu_tab_height:                  44,\n  menu_tab_icon_label_height:       44,\n  tab_icon_label_height:            72,\n  tab_icon_label_icon_spacing:      7,\n  indicator_slide_speed:            600, // px per second\n  indicator_slide_min_duration:     .250,\n  tabs_indent:                      vars.unit_indent,\n  tabs_scroll_speed:                600, // px per second\n  tabs_scroll_delay:                .15,\n  tabs_scroll_min_duration:         .5,\n  scroll_button_fade_duration:      .2,\n  scroll_button_fade_delay:         .5,\n  tab_content_padding_v:            12,\n  tab_menu_content_padding_v:       6,\n  tab_indicator_height:             2,\n  scrollbar_offset:                 20,\n  scroll_button_opacity:            .7,\n  label_opacity:                    .7,\n\n  tab_label_line_height,\n  tab_label_vertical_offset:        tab_label_line_height - fontSize,\n  tab_label_transition_property:    \"opacity, color, backgroundColor\",\n \n  color_light:                      \"inherit\",\n  color_light_selected:             rgba(vars.color_primary),\n  color_light_selected_background:  \"transparent\",\n  color_light_tab_indicator:        rgba(vars.color_primary),\n  color_light_icon:                 iconButtonVars.color_light,\n \n  color_dark:                       \"inherit\",\n  color_dark_selected:              rgba(vars.color_primary),\n  color_dark_selected_background:   \"transparent\",\n  color_dark_tab_indicator:         rgba(vars.color_primary),\n  color_dark_icon:                  iconButtonVars.color_dark\n};\n","import { mixin, flex } from \"polythene-css\";\nimport { vars } from \"polythene-theme\";\n\nexport default (selector, componentVars) => [{\n  [selector]: [\n    mixin.vendorize({\n      userSelect: \"none\"\n    }, vars.prefixes_user_select),\n    {\n      transform: \"translate3d(0,0,0)\",\n      \"-webkit-overflow-scrolling\": \"touch\",\n\n      \"& ::-webkit-scrollbar\": {\n        \"display\": \"none\"\n      },\n\n      \".pe-tabs--menu\": {\n        // reset sizes to fit within a small space\n        \" .pe-tabs__tab\": {\n          height: componentVars.menu_tab_height + \"px\",\n        },\n        \" .pe-tabs__tab---icon\": {\n          height: componentVars.menu_tab_icon_label_height + \"px\",\n        },\n        \" .pe-tabs__tab, .pe-tabs__tab.pe-tabs__tab---icon, .pe-tabs__tab.pe-text-button\": {\n          minWidth: 0,\n          height: componentVars.menu_tab_icon_label_height + \"px\",\n\n          \" .pe-button__content\": {\n            padding: \"0 \" + componentVars.tab_menu_content_padding_v + \"px\",\n            height: componentVars.menu_tab_height + \"px\",\n\n            \" .pe-icon\": {\n              marginBottom: 0\n            },\n            \" .pe-button__content\": {\n              fontSize: \"10px\",\n              lineHeight: \"12px\",\n              textTransform: \"none\"\n            }\n          }\n        }\n      },\n\n      \".pe-tabs--scrollable\": {\n        // hide scrollbar (this approach is required for Firefox)\n        \"max-height\": componentVars.tab_height + \"px\",\n        \"-ms-overflow-style\": \"none\",\n\n        \" .pe-tabs__scroll-button\": {\n          // default hide, show with html.pe-no-touch\n          display: \"none\"\n        },\n\n        \" .pe-tabs__row\": {\n          marginBottom: -componentVars.scrollbar_offset + \"px\"\n        }\n      },\n\n      \" .pe-no-touch &\": {\n        \".pe-tabs--scrollable\": {\n          backgroundColor: \"inherit\"\n        },\n\n        \" .pe-tabs__scroll-button\": {\n          position: \"absolute\",\n          display: \"block\",\n          top: 0,\n          backgroundColor: \"inherit\",\n          zIndex: 1,\n          borderRadius: 0,\n\n          \" .pe-button__content\": {\n            borderRadius: 0,\n            backgroundColor: \"inherit\",\n            transitionProperty: componentVars.tab_label_transition_property,\n            transitionDuration: componentVars.scroll_button_fade_duration + \"s\",\n            transitionTimingFunction: \"ease-out\",\n            transitionDelay: componentVars.scroll_button_fade_delay + \"s\",\n            opacity: componentVars.scroll_button_opacity\n          }\n        },\n        \".pe-tabs--start .pe-tabs__scroll-button-start\": {\n          pointerEvents: \"none\",\n          cursor: \"default\",\n\n          \" .pe-button__content\": {\n            opacity: 0\n          }\n        },\n        \".pe-tabs--end .pe-tabs__scroll-button-end\": {\n          pointerEvents: \"none\",\n          cursor: \"default\",\n\n          \" .pe-button__content\": {\n            opacity: 0\n          }\n        },\n\n        \" .pe-tabs__scroll-button-start\": {\n          left: 0\n        },\n        \" .pe-tabs__scroll-button-end\": {\n          right: 0\n        }\n      },\n\n      \" .pe-tabs__row\": [\n        flex.layoutHorizontal,\n        mixin.vendorize({\n          userSelect: \"none\"\n        }, vars.prefixes_user_select),\n        {\n          position: \"relative\",\n          whiteSpace: \"nowrap\",\n\n          \".pe-tabs__row--indent\": {\n            margin: 0,\n            paddingLeft: componentVars.tabs_indent + \"px\",\n            overflow: \"auto\"\n          },\n\n          \".pe-tabs__row--centered\": flex.layoutCenterJustified,\n        }\n      ],\n\n      \" .pe-tabs__scroll-button-offset\": [\n        flex.flex(),\n        flex.flexIndex(\"none\")\n      ],\n\n      \" .pe-tabs__tab\": [\n        flex.flex(),\n        flex.flexIndex(\"none\"),\n        mixin.vendorize({\n          userSelect: \"none\"\n        }, vars.prefixes_user_select),\n        mixin.defaultTransition(\"color\"),\n        {\n          margin: 0,\n          borderRadius: 0,\n          height: componentVars.tab_height + \"px\",\n          padding: 0,\n          color: \"inherit\",\n          minWidth: !isNaN(componentVars.tab_min_width) ? componentVars.tab_min_width + \"px\" : componentVars.tab_min_width, // for smaller screens, see also media query below\n          maxWidth: !isNaN(componentVars.tab_max_width) ? componentVars.tab_max_width + \"px\" : componentVars.tab_max_width,\n\n          \".pe-text-button .pe-button__content\": {\n            padding: \"0 \" + componentVars.tab_content_padding_v + \"px\",\n            height: componentVars.tab_height + \"px\",\n            lineHeight: vars.line_height + \"em\",\n            borderRadius: 0,\n\n            \" .pe-button__label, .pe-icon\": {\n              maxWidth: componentVars.label_max_width + \"px\", // or .pe-tabs width minus 56dp\n              lineHeight: componentVars.tab_label_line_height + \"px\",\n              maxHeight: 2 * componentVars.tab_label_line_height + \"px\",\n              overflow: \"hidden\",\n              whiteSpace: \"normal\"\n            },\n            \" .pe-button__label\": [\n              mixin.defaultTransition(\"opacity\", componentVars.animation_duration),\n              {\n                margin: componentVars.tab_label_vertical_offset + \"px 0 0 0\",\n                padding: 0,\n                opacity: componentVars.label_opacity\n              }\n            ],\n            \" .pe-icon\": {\n              marginLeft: \"auto\",\n              marginRight: \"auto\"\n            },\n            \" .pe-button__focus\": {\n              display: \"none\"\n            }\n          },\n          \".pe-button--selected\": {\n            \" .pe-button__content .pe-button__content\": {\n              opacity: 1\n            }\n          },\n          \".pe-tabs__tab---icon\": {\n            \"&, .pe-button__content\": [\n              {\n                height: componentVars.tab_icon_label_height + \"px\"\n              },\n              {\n                \" .pe-button__content, .pe-icon\": {\n                  margin: \"0 auto\"\n                }\n              },\n              {\n                \" .pe-icon\": {\n                  marginBottom: componentVars.tab_icon_label_icon_spacing + \"px\"\n                }\n              }\n            ]\n          }\n        }\n      ],\n\n      \" .pe-tabs__tab-content\": [\n        flex.layoutCenterCenter,\n        flex.layoutVertical, {\n          height: \"inherit\"\n        }\n      ],\n\n      \".pe-tabs--autofit .pe-tabs__tab\": [\n        flex.flex(),\n        {\n          minWidth: \"initial\",\n          maxWidth: \"none\"\n        }\n      ],\n\n      \".pe-tabs__active-selectable\": {\n        \" .pe-tabs__tab.pe-button--selected\": {\n          cursor: \"pointer\",\n          pointerEvents: \"initial\",\n        }\n      },\n\n      \" .pe-tabs__indicator\": {\n        transform: \"translate3d(0,0,0)\",\n        transformOrigin: \"left 50%\",\n        transitionProperty: \"all\",\n        transitionTimingFunction: \"ease-out\",\n        position: \"absolute\",\n        height: componentVars.tab_indicator_height + \"px\",\n        bottom: 0,\n        left: 0,\n        width: \"100%\" // and transformed with js\n          // background-color defined in implementation/theme css\n      },\n\n      \" .pe-toolbar--tabs .pe-toolbar__bar &\": [\n        mixin.fit(),\n        {\n          width: \"auto\",\n          margin: 0,\n          top: \"auto\"\n        }\n      ]\n\n      // [\"@media (min-width: \" + vars.breakpoint_small_tablet_portrait + \"px)\"]: {\n      //   \":not(.pe-tabs--small):not(.pe-tabs--menu):not(.pe-tabs--autofit) .pe-tabs__tab\": {\n      //     minWidth: componentVars.tab_min_width_tablet + \"px\"\n      //   }\n      // }\n    }\n  ]\n}];\n","\nconst style = (scope, selector, componentVars, tint) => [{\n  [scope + selector]: {\n    color: componentVars[\"color_\" + tint],\n\n    \" .pe-tabs__tab.pe-button--selected\": {\n      color: componentVars[\"color_\" + tint + \"_selected\"],\n\n      \" .pe-button__content\": {\n        background: componentVars[\"color_\" + tint + \"_selected_background\"]\n      }\n    },\n    \" .pe-tabs__tab:not(.pe-button--selected) .pe-icon\": {\n      color: componentVars[\"color_\" + tint + \"_icon\"]\n    },\n    \" .pe-tabs__indicator\": {\n      backgroundColor: componentVars[\"color_\" + tint + \"_tab_indicator\"]\n    },\n    \" .pe-tabs__scroll-button\": {\n      color: \"inherit\"\n    }\n  }\n}];\n\nexport default (selector, componentVars) => [\n  style(\"\",                selector, componentVars, \"light\"),\n  style(\".pe-dark-theme \", selector, componentVars, \"dark\" ) // inside dark theme\n];\n","import m from \"mithril\";\n\nexport default m.trust(\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\\\"/></svg>\");\n","import m from \"mithril\";\n\nexport default m.trust(\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\\\"/></svg>\");\n","import { styler } from \"polythene-css\";\nimport vars from \"./vars\";\nimport layout from \"./layout\";\nimport color from \"./color\";\nimport iconArrowBackward from \"./chevron-left\";\nimport iconArrowForward  from \"./chevron-right\";\n\nexport const arrowBackward = {\n  msvg: iconArrowBackward\n};\nexport const arrowForward = {\n  msvg: iconArrowForward\n};\n\nconst fns = [layout, color];\nconst selector = \".pe-tabs\";\n\nexport const customTheme = (customSelector, customVars) => \n  styler.generateStyles([customSelector, selector], {...vars, ...customVars}, fns);\n\nstyler.generateStyles([selector], vars, fns);\n\n","import m from \"mithril\";\nimport button from \"polythene-button\";\nimport icon from \"polythene-icon\";\nimport { classes } from \"./tabs\";\n\nconst view = vnode => {\n  const attrs = vnode.attrs;\n  // Let internal onclick function co-exist with passed button option\n  attrs.events = attrs.events || {};\n  attrs.events.onclick = attrs.events.onclick || (() => {});\n  const tabButtonOptions = Object.assign(\n    {},\n    attrs,\n    {\n      content: m(\"div\", { class: classes.tabContent }, [\n        attrs.icon ? m(icon, attrs.icon) : null,\n        attrs.label\n          ? m(\"div\", { class: classes.label }, m(\"span\", attrs.label))\n          : null,\n      ]),\n      class: [\n        classes.tab,\n        attrs.icon && attrs.label ? classes.tabHasIcon : null,\n        attrs.class\n      ].join(\" \"),\n      wash: false,\n      ripple: true,\n      events: Object.assign(\n        {},\n        attrs.events,\n        {\n          onclick: e => {\n            attrs.onSelect();\n            attrs.events.onclick(e);\n          }\n        }\n      ),\n      oncreate: vnode => attrs.register(attrs.index, {\n        data: attrs,\n        el: vnode.dom\n      })\n    }\n  );\n  return m(button, tabButtonOptions);\n};\n\nexport default {\n  view\n};\n","import m from \"mithril\";\nimport iconButton from \"polythene-icon-button\";\nimport { arrowForward, arrowBackward } from \"./theme\";\nimport { classes } from \"./tabs\";\n\nconst view = vnode => {\n  const attrs = vnode.attrs;\n  const icon = attrs.position === \"start\"\n    ? attrs.icon || arrowBackward\n    : attrs.icon || arrowForward;\n  return m(iconButton, {\n    class: [\n      classes.scrollButton,\n      attrs.class\n    ].join(\" \"),\n    icon,\n    ripple: { center: true },\n    events: attrs.events,\n    oncreate: vnode => attrs.register(attrs.position, vnode.dom)\n  });\n};\n\nexport default {\n  view\n};\n","import m from \"mithril\";\nimport { filterSupportedAttributes } from \"polythene-core\";\nimport { isTouch, subscribe, unsubscribe } from \"polythene-core\";\nimport { scrollTo } from \"polythene-utilities\";\nimport { customTheme } from \"./theme\";\nimport tab from \"./tab\";\nimport scrollButton from \"./scroll-button\";\nimport vars from \"./theme/vars\";\n\nexport const classes = {\n  component:            \"pe-tabs\",\n  scrollButton:         \"pe-tabs__scroll-button\",\n  scrollButtonAtStart:  \"pe-tabs__scroll-button-start\",\n  scrollButtonAtEnd:    \"pe-tabs__scroll-button-end\",\n  scrollButtonOffset:   \"pe-tabs__scroll-button-offset\",\n  tabRow:               \"pe-tabs__row\",\n  tabRowCentered:       \"pe-tabs__row--centered\",\n  tabRowIndent:         \"pe-tabs__row--indent\",\n  tab:                  \"pe-tabs__tab\",\n  tabContent:           \"pe-tabs__tab-content\",\n  tabHasIcon:           \"pe-tabs__tab---icon\",\n  indicator:            \"pe-tabs__indicator\",\n  scrollable:           \"pe-tabs--scrollable\",\n  isAutofit:            \"pe-tabs--autofit\",\n  isAtStart:            \"pe-tabs--start\",\n  isAtEnd:              \"pe-tabs--end\",\n  smallTabs:            \"pe-tabs--small\",\n  isMenu:               \"pe-tabs--menu\",\n  activeSelectable:     \"pe-tabs__active-selectable\",\n  // reference:  \n  label:                \"pe-button__label\"\n};\n\nconst whenCreateDone = () => Promise.resolve();\n\nconst getNewIndex = (index, tabs) => {\n  const minTabIndex = 0;\n  const maxTabIndex = tabs.length - 1;\n  return {\n    backward: Math.max(index - 1, minTabIndex),\n    forward: Math.min(index + 1, maxTabIndex)\n  };\n};\n\nconst handleScrollButtonClick = (state, attrs, e, direction) => {\n  e.stopPropagation();\n  e.preventDefault();\n  const currentTabIndex = state.selectedTabIndex;\n  const newIndex = getNewIndex(currentTabIndex, state.tabs)[direction];\n  if (newIndex !== currentTabIndex) {\n    setSelectedTab(state, attrs, newIndex, true);\n    m.redraw();\n  } else {\n    scrollToTab(state, newIndex);\n  }\n};\n\n/*\nMoves the first tab to the left so that the text label is as position 0. \n*/\nconst alignToTitle = (state) => {\n  const firstTab = state.tabs[0].el;\n  const firstInnerLabel = firstTab.querySelector(`.${classes.label} span`);\n  const firstOuterLabelWidth = firstTab.getBoundingClientRect().width;\n  const firstInnerLabelWidth = firstInnerLabel.getBoundingClientRect().width;\n  const firstTabOffset = (firstOuterLabelWidth - firstInnerLabelWidth) / 2;\n  firstTab.style.marginLeft = `${-firstTabOffset}px`;\n};\n\nconst createRightButtonOffset = (state) => {\n  // add padding to right so that last item is not hidden behind scroll button\n  const scrollButtonAtEndWidth = state.scrollButtons[\"end\"].getBoundingClientRect().width;\n  const scrollButtonOffsetEl = state.tabsEl.querySelector(`.${classes.scrollButtonOffset}`);\n  scrollButtonOffsetEl.style.width = `${scrollButtonAtEndWidth}px`;\n};\n\nconst scrollToTab = (state, tabIndex) => {\n  const tabs = state.tabs;\n  const scroller = state.scrollerEl;\n  // Scroll to position of selected tab\n  const tabLeft = tabs.slice(0, tabIndex).reduce((totalWidth, tabData) => {\n    return totalWidth + tabData.el.getBoundingClientRect().width;\n  }, 0);\n  // Tabs at the far right will not fully move to the left\n  // because the scrollable row will stick to the right \n  // to get the max scroll left, we subtract the visible viewport from the scroll width\n  const scrollerWidth = scroller.getBoundingClientRect().width; // frame width\n  const scrollingWidth = scroller.scrollWidth;\n  const maxScroll = scrollingWidth - scrollerWidth;\n  const left = Math.min(tabLeft, maxScroll);\n  const currentLeft = scroller.scrollLeft;\n  if (currentLeft !== left) {\n    const duration = Math.abs(currentLeft - left) / vars.tabs_scroll_speed;\n    const delaySeconds = vars.tabs_scroll_delay || 0;\n    setTimeout(() => {\n      scrollTo({\n        element: scroller,\n        to: left,\n        duration: Math.max(vars.tabs_scroll_min_duration, duration),\n        direction: \"horizontal\"\n      });\n    }, delaySeconds * 1000);\n  }\n};\n\nconst updateScrollButtons = state => {\n  const scrollerEl = state.scrollerEl;\n  const scrollLeft = scrollerEl.scrollLeft;\n  const currentTabIndex = state.selectedTabIndex;\n  const tabsEl = state.tabsEl;\n  const minTabIndex = 0;\n  const maxTabIndex = state.tabs.length - 1;\n  const isAtStart = (scrollerEl.scrollLeft === 0) && (currentTabIndex === minTabIndex);\n  const isAtEnd = (scrollLeft >= (scrollerEl.scrollWidth - tabsEl.getBoundingClientRect().width - 1)) && (currentTabIndex === maxTabIndex);\n  state.scrollButtonStates.start = !isAtStart;\n  state.scrollButtonStates.end = !isAtEnd;\n};\n\nconst animateIndicator = (selectedTabEl, animate, state) => {\n  const parentRect = state.tabsEl.getBoundingClientRect();\n  const rect = selectedTabEl.getBoundingClientRect();\n  const style = state.tabIndicatorEl.style;\n  const translateX = rect.left - parentRect.left + state.scrollerEl.scrollLeft;\n  const transformCmd = `translate(${translateX}px, 0)`;\n  const duration = animate ? vars.indicator_slide_min_duration : 0;\n  // use width instead of scale to please IE10\n  style.width = rect.width + \"px\";\n  style[\"transition-duration\"] =\n    style[\"-webkit-transition-duration\"] =\n    style[\"-moz-transition-duration\"] =\n    style[\"-o-transition-duration\"] = duration + \"s\";\n  style.transform =\n    style[\"-webkit-transform\"] =\n    style[\"-moz-transform\"] =\n    style[\"-ms-transform\"] =\n    style[\"-o-transform\"] = transformCmd;\n};\n\nconst setSelectedTab = (state, attrs, index, animate) => {\n  state.selectedTabIndex = index;\n  if (!state.tabs.length) return;\n  const selectedTabEl = state.tabs[index].el;\n  if (selectedTabEl && state.tabIndicatorEl && state.tabsEl) {\n    animateIndicator(selectedTabEl, animate, state);\n  }\n  if (state.managesScroll) {\n    updateScrollButtons(state);\n    scrollToTab(state, index);\n  }\n  if (attrs.getState) {\n    attrs.getState({\n      index,\n      data: state.tabs[index].data,\n      el: selectedTabEl\n    });\n  }\n};\n\nconst sortByLargestWidth = (a, b) =>\n  a < b\n    ? 1\n    : a > b\n      ? -1\n      : 0;\n\nconst view = vnode => {\n  const attrs = vnode.attrs;\n  const state = vnode.state;\n  const element = attrs.element || \"div\";\n  const autofit = attrs.scrollable || attrs.centered\n    ? false\n    : attrs.autofit\n      ? true\n      : false;\n\n  // Keep selected tab up to date\n  if (attrs.selectedTab !== undefined && state.previousSelectedTab !== attrs.selectedTab) {\n    setSelectedTab(state, attrs, attrs.selectedTab, true);\n  }\n  state.previousSelectedTab = attrs.selectedTab;\n\n  const onResize = () => (\n    setSelectedTab(state, attrs, state.selectedTabIndex, false),\n    m.redraw()\n  );\n\n  const props = Object.assign(\n    {},\n    filterSupportedAttributes(attrs),\n    {\n      class: [\n        classes.component,\n        attrs.scrollable ? classes.scrollable : null,\n        state.selectedTabIndex === 0 ? classes.isAtStart : null,\n        state.selectedTabIndex === state.tabs.length - 1 ? classes.isAtEnd : null,\n        attrs.activeSelected ? classes.activeSelectable : null,\n        autofit ? classes.isAutofit : null,\n        attrs.small ? classes.smallTabs : null,\n        attrs.menu ? classes.isMenu : null,\n        attrs.class\n      ].join(\" \"),\n      oninit: () => subscribe(\"resize\", onResize),\n      oncreate: vnode => {\n        state.tabsEl = vnode.dom;\n        // A promise can't resolve during the oncreate loop\n        // The Mithril draw loop is synchronous - there is no delay between one this oncreate and the tab button's oncreate\n        whenCreateDone().then(() => {\n          if (attrs.largestWidth) {\n            const widths = state.tabs.map(tabData => tabData.el.getBoundingClientRect().width);\n            const largest = widths.sort(sortByLargestWidth)[0];\n            state.tabs.forEach(tabData => tabData.el.style.width = largest + \"px\");\n          }\n          // Align first scrollable tab to title\n          if (attrs.scrollable) {\n            alignToTitle(state);\n          }\n          // Handle scroll\n          if (attrs.scrollable && !isTouch) {\n            state.managesScroll = true;\n            createRightButtonOffset(state);\n          }\n          setSelectedTab(state, attrs, state.selectedTabIndex, false);\n          if (attrs.getState) {\n            // Give immediate feedback\n            setTimeout(m.redraw);\n          }\n        });\n      },\n      onremove: () => unsubscribe(\"resize\", onResize)\n    }\n  );\n\n  const buttons = attrs.content\n    ? attrs.content\n    : attrs.buttons\n      ? attrs.buttons\n      : attrs.children || vnode.children;\n\n  const tabRowButtons = buttons.map((buttonOpts = {}, index) => {\n    const buttonOptsCombined = Object.assign(\n      {},\n      buttonOpts,\n      {\n        // These options can be overridden by tabsOpts\n        selected: index === state.selectedTabIndex,\n        animateOnTap: (attrs.animateOnTap !== false) ? true : false\n      },\n      attrs.tabsOpts || {},\n      {\n        // Internal options, should never be overridden\n        index,\n        register: state.registerTabButton,\n        onSelect: () => setSelectedTab(state, attrs, index, attrs.noIndicatorSlide ? false : true)\n      }\n    );\n    return m(tab, buttonOptsCombined);\n  });\n\n  const tabRow = attrs.scrollable\n    ? tabRowButtons.concat([\n      // offset for right scroll button\n      m(\"div\", { class: classes.scrollButtonOffset })\n    ])\n    : tabRowButtons;\n\n  let scrollButtonAtStart, scrollButtonAtEnd;\n  if (attrs.scrollable) {\n    scrollButtonAtStart = m(scrollButton, Object.assign(\n      {},\n      {\n        icon: attrs.scrollIconBackward,\n        class: classes.scrollButtonAtStart,\n        position: \"start\",\n        register: state.registerScrollButton,\n        events: { onclick: e => handleScrollButtonClick(state, attrs, e, \"backward\") }\n      }\n    ));\n    scrollButtonAtEnd = m(scrollButton, Object.assign(\n      {},\n      {\n        icon: attrs.scrollIconForward,\n        class: classes.scrollButtonAtEnd,\n        position: \"end\",\n        register: state.registerScrollButton,\n        events: { onclick: e => handleScrollButtonClick(state, attrs, e, \"forward\") }\n      }\n    ));\n  }\n\n  const tabIndicator = attrs.hideIndicator\n    ? null\n    : m(\"div\", {\n      class: classes.indicator,\n      oncreate: vnode => state.tabIndicatorEl = vnode.dom\n    });\n\n  const content = [\n    attrs.scrollable ? scrollButtonAtStart : null,\n    m(\"div\", {\n      class: [\n        classes.tabRow,\n        attrs.centered ? classes.tabRowCentered : null,\n        attrs.scrollable ? classes.tabRowIndent : null\n      ].join(\" \"),\n      oncreate: vnode => state.scrollerEl = vnode.dom\n    }, [\n      tabRow,\n      tabIndicator\n    ]),\n    attrs.scrollable ? scrollButtonAtEnd : null\n  ];\n\n  return m(element, props, [attrs.before, content, attrs.after]);\n};\n\nexport default {\n  theme: customTheme, // accepts (selector, vars)\n  view,\n  oninit: vnode => {\n    const registerTabButton = (index, data) => vnode.state.tabs[index] = data;\n    const registerScrollButton = (position, dom) => vnode.state.scrollButtons[position] = dom;\n    vnode.state = Object.assign(vnode.state, {\n      tabsEl:                  undefined,\n      scrollerEl:              undefined,\n      tabs:                    [], // {data, el}\n      tabRow:                  undefined,\n      tabIndicatorEl:          undefined,\n      selectedTabIndex:        vnode.attrs.selectedTab || 0,\n      previousSelectedTab: undefined,\n      managesScroll:           false,\n      scrollButtonStates: {\n        start: false,\n        end: false\n      },\n      scrollButtons: {\n        start: undefined,\n        end: undefined\n      },\n      registerTabButton,\n      registerScrollButton\n    });\n  }\n};\n"],"names":["rgba","vars","fontSize","buttonVars","font_size","tab_label_line_height","unit_indent","color_primary","iconButtonVars","color_light","color_dark","selector","componentVars","mixin","vendorize","prefixes_user_select","menu_tab_height","menu_tab_icon_label_height","tab_menu_content_padding_v","tab_height","scrollbar_offset","tab_label_transition_property","scroll_button_fade_duration","scroll_button_fade_delay","scroll_button_opacity","flex","layoutHorizontal","tabs_indent","layoutCenterJustified","flexIndex","defaultTransition","isNaN","tab_min_width","tab_max_width","tab_content_padding_v","line_height","label_max_width","animation_duration","tab_label_vertical_offset","label_opacity","tab_icon_label_height","tab_icon_label_icon_spacing","layoutCenterCenter","layoutVertical","tab_indicator_height","fit","style","scope","tint","m","trust","arrowBackward","iconArrowBackward","arrowForward","iconArrowForward","fns","layout","color","customTheme","customSelector","customVars","styler","generateStyles","view","attrs","vnode","events","onclick","tabButtonOptions","_extends","class","classes","tabContent","icon","label","tab","tabHasIcon","join","onSelect","e","register","index","dom","button","position","iconButton","scrollButton","center","whenCreateDone","Promise","resolve","getNewIndex","tabs","minTabIndex","maxTabIndex","length","Math","max","min","handleScrollButtonClick","state","direction","stopPropagation","preventDefault","currentTabIndex","selectedTabIndex","newIndex","redraw","alignToTitle","firstTab","el","firstInnerLabel","querySelector","firstOuterLabelWidth","getBoundingClientRect","width","firstInnerLabelWidth","firstTabOffset","marginLeft","createRightButtonOffset","scrollButtonAtEndWidth","scrollButtons","scrollButtonOffsetEl","tabsEl","scrollButtonOffset","scrollToTab","tabIndex","scroller","scrollerEl","tabLeft","slice","reduce","totalWidth","tabData","scrollerWidth","scrollingWidth","scrollWidth","maxScroll","left","currentLeft","scrollLeft","duration","abs","tabs_scroll_speed","delaySeconds","tabs_scroll_delay","tabs_scroll_min_duration","updateScrollButtons","isAtStart","isAtEnd","scrollButtonStates","start","end","animateIndicator","selectedTabEl","animate","parentRect","rect","tabIndicatorEl","translateX","transformCmd","indicator_slide_min_duration","transform","setSelectedTab","managesScroll","getState","data","sortByLargestWidth","a","b","element","autofit","scrollable","centered","undefined","selectedTab","previousSelectedTab","onResize","props","filterSupportedAttributes","component","activeSelected","activeSelectable","isAutofit","small","smallTabs","menu","isMenu","subscribe","then","largestWidth","widths","map","largest","sort","forEach","isTouch","unsubscribe","buttons","content","children","tabRowButtons","buttonOpts","buttonOptsCombined","animateOnTap","tabsOpts","registerTabButton","noIndicatorSlide","tabRow","concat","scrollButtonAtStart","scrollButtonAtEnd","scrollIconBackward","registerScrollButton","scrollIconForward","tabIndicator","hideIndicator","indicator","tabRowCentered","tabRowIndent","before","after"],"mappings":"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"}