{"version":3,"file":"polythene-search.js","sources":["../src/theme/vars.js","../src/theme/layout.js","../src/theme/color.js","../src/theme/index.js","../src/search.js"],"sourcesContent":["import { vars } from \"polythene-theme\";\n\nconst rgba = vars.rgba;\n\nconst insetSideMargin = 8;\n\nconst line_height_input = 20;\nconst font_size_input = 20;\n\nconst inset_height = 48;\nconst inset_input_indent = 16;\nconst inset_input_right_padding = 0;\nconst inset_side_padding = 0;\nconst inset_border_radius = vars.unit_block_border_radius;\n\nconst full_width_side_margin = 0;\nconst full_width_height = 56;\nconst full_width_side_padding = insetSideMargin;\nconst full_width_input_right_padding = 0;\nconst full_width_border_radius = 0;\n\nexport default {\n  font_size_input,\n  line_height_input,\n\n  inset_height,\n  inset_input_indent,\n  inset_side_padding,\n  inset_input_right_padding,\n  inset_border_radius,\n\n  full_width_height,\n  full_width_side_margin,\n  full_width_side_padding,\n  full_width_input_right_padding,\n  full_width_border_radius,\n\n  color_light_label_text: rgba(vars.color_light_foreground, vars.blend_light_text_disabled),\n  color_light_input_text: rgba(vars.color_light_foreground, vars.blend_light_text_primary),\n  color_light_background: rgba(vars.color_light_background),\n\n  color_dark_label_text:  rgba(vars.color_dark_foreground, vars.blend_dark_text_disabled),\n  color_dark_input_text:  rgba(vars.color_dark_foreground, vars.blend_dark_text_primary),\n  color_dark_background:  rgba(vars.color_dark_background)\n};\n","import { flex } from \"polythene-css\";\nimport { vars } from \"polythene-theme\";\n\nexport default (selector, componentVars) => {\n  const inset_input_padding_v = ((componentVars.inset_height - componentVars.line_height_input) / 2);\n  const full_width_input_padding_v = ((componentVars.full_width_height - componentVars.line_height_input) / 2);\n  const full_width_input_indent = (vars.unit_indent - componentVars.full_width_side_padding) - vars.grid_unit_icon_button;\n\n  return [{\n    [selector]: [\n      flex.flex(), {\n        position: \"relative\", // necessary when a shadow is added\n\n        \" .pe-textfield\": [\n          flex.flex(),\n          {\n            padding: 0,\n            // prevent that neighboring icon button with ripple hides the cursor\n            position: \"relative\",\n            zIndex: 1,\n \n            \" .pe-textfield__input-area\": {\n              padding: 0,\n\n              \":after\": {\n                display: \"none\"\n              }\n            },\n\n            \" .pe-textfield__input, .pe-textfield__label\": {\n              fontSize: componentVars.font_size_input + \"px\",\n              lineHeight: componentVars.line_height_input + \"px\"\n            },\n\n            \" .pe-textfield__input\": {\n              // reset\n              border: \"none\"\n            },\n\n            \" .pe-textfield__label\": {\n              // reset\n              top: 0,\n              bottom: 0\n            }\n          }\n        ],\n\n        \" .pe-search__content\": flex.layoutHorizontal,\n\n        \" .pe-search__content > *\": [\n          flex.layoutVertical,\n          flex.selfCenter\n        ],\n\n        \".pe-search--inset\": {\n          \"border-radius\": componentVars.inset_border_radius + \"px\",\n          padding: \"0 \" + componentVars.inset_side_padding + \"px\",\n\n          \"&, .pe-textfield__input-area, .pe-textfield__input, .pe-textfield__label\": {\n            padding: 0,\n            height: componentVars.inset_height + \"px\"\n          },\n          \" .pe-textfield__input, .pe-textfield__label\": {\n            paddingTop: inset_input_padding_v + \"px\",\n            paddingBottom: inset_input_padding_v + \"px\",\n            paddingLeft: componentVars.inset_input_indent + \"px\",\n            paddingRight: componentVars.inset_input_right_padding + \"px\"\n          }\n        },\n\n        \".pe-search--full-width\": {\n          borderRadius: componentVars.full_width_border_radius + \"px\",\n          padding: \"0 \" + componentVars.full_width_side_padding + \"px\",\n\n          \"&, .pe-textfield__input-area, .pe-textfield__input, .pe-textfield__label\": {\n            height: componentVars.full_width_height + \"px\"\n          },\n          \" .pe-textfield__input, .pe-textfield__label\": {\n            paddingTop: full_width_input_padding_v + \"px\",\n            paddingBottom: full_width_input_padding_v + \"px\",\n            paddingLeft: full_width_input_indent + \"px\",\n            paddingRight: componentVars.full_width_input_right_padding + \"px\"\n          }\n        }\n      }\n    ]\n  }];\n};\n","\nconst style = (scopes, selector, componentVars, tint) => [{\n  [scopes.map(s => s + selector).join(\",\")]: {\n    backgroundColor: componentVars[\"color_\" + tint + \"_background\"],\n\n    \" .pe-textfield\": {\n      \" .pe-textfield__label\": {\n        color: componentVars[\"color_\" + tint + \"_label_text\"]\n      },\n      \" .pe-textfield__input\": {\n        color: componentVars[\"color_\" + tint + \"_input_text\"]\n      },\n      \" .pe-textfield__input-area\": {\n        backgroundColor: \"transparent\"\n      }\n    }\n  }\n}];\n\nexport default (selector, componentVars) => [\n  style([\".pe-dark-tone\", \".pe-dark-tone \"], selector, componentVars, \"dark\"), // has/inside dark theme\n  style([\"\", \".pe-light-tone\", \".pe-light-tone \"], selector, componentVars, \"light\"), // normal, has/inside light theme\n];\n\n","import { styler } from \"polythene-css\";\nimport vars from \"./vars\";\nimport layout from \"./layout\";\nimport color from \"./color\";\n\nconst fns = [layout, color];\nconst selector = \".pe-search\";\n\nexport const customTheme = (customSelector, customVars) => \n  styler.generateStyles([customSelector, selector], {...vars, ...customVars}, fns);\n\nstyler.generateStyles([selector], vars, fns);\n","import m from \"mithril\";\nimport textfield from \"polythene-textfield\";\nimport { filterSupportedAttributes } from \"polythene-core\";\nimport { customTheme } from \"./theme\";\n\nexport const classes = {\n  component:       \"pe-search\",\n  content:         \"pe-search__content\",\n  searchInset:     \"pe-search--inset\",\n  searchFullWidth: \"pe-search--full-width\"\n};\n\nconst getNameOfState = state =>\n  state.focus && state.dirty\n    ? \"focus_dirty\"\n    : state.focus\n      ? \"focus\"\n      : state.dirty\n        ? \"dirty\"\n        : \"none\";\n\nconst view = ({state, attrs}) => {\n  const element = attrs.element || \"div\";\n  const props = Object.assign(\n    {},\n    filterSupportedAttributes(attrs),\n    {\n      class: [\n        classes.component,\n        attrs.fullWidth ? classes.searchFullWidth : classes.searchInset,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.class\n      ].join(\" \")\n    },\n    attrs.events\n  );\n  const searchState = getNameOfState(state.searchState);\n  const buttons = (attrs.buttons || {})[searchState] || {};\n  const textfieldAttrs = attrs.textfield || {};\n  const content = m(\"div\", {\n    class: classes.content\n  }, [\n    buttons.before,\n    m(textfield, Object.assign(\n      {},\n      textfieldAttrs,\n      {\n        getState: newState => {\n          state.searchState = Object.assign({}, newState);\n          if (textfieldAttrs.getState) {\n            textfieldAttrs.getState(state.searchState);\n          }\n        }\n      }\n    )),\n    buttons.after\n  ]);\n  return m(element, props, [attrs.before, content, attrs.after]);\n};\n\nexport default {\n  theme: customTheme, // accepts (selector, vars)\n  oninit: vnode => {\n    vnode.state.searchState = {};\n  },\n  view\n};\n\n\n"],"names":["rgba","vars","inset_border_radius","unit_block_border_radius","insetSideMargin","color_light_foreground","blend_light_text_disabled","blend_light_text_primary","color_light_background","color_dark_foreground","blend_dark_text_disabled","blend_dark_text_primary","color_dark_background","selector","componentVars","inset_input_padding_v","inset_height","line_height_input","full_width_input_padding_v","full_width_height","full_width_input_indent","unit_indent","full_width_side_padding","grid_unit_icon_button","flex","font_size_input","layoutHorizontal","layoutVertical","selfCenter","inset_side_padding","inset_input_indent","inset_input_right_padding","full_width_border_radius","full_width_input_right_padding","style","scopes","tint","map","s","join","fns","layout","color","customTheme","customSelector","customVars","styler","generateStyles","classes","getNameOfState","state","focus","dirty","view","attrs","element","props","_extends","filterSupportedAttributes","component","fullWidth","searchFullWidth","searchInset","tone","class","events","searchState","buttons","textfieldAttrs","textfield","content","m","before","newState","getState","after"],"mappings":"syBAEA,IAAMA,GAAOC,OAAKD,KAWZE,EAAsBD,OAAKE,4CANT,qBADE,gBAGL,sBACM,sBAEA,4BADO,0CAKR,0BADK,0BAECC,iCACO,2BACN,yBAkBPJ,EAAKC,OAAKI,uBAAwBJ,OAAKK,kDACvCN,EAAKC,OAAKI,uBAAwBJ,OAAKM,iDACvCP,EAAKC,OAAKO,8CAEVR,EAAKC,OAAKQ,sBAAuBR,OAAKS,gDACtCV,EAAKC,OAAKQ,sBAAuBR,OAAKU,+CACtCX,EAAKC,OAAKW,mCCxCpBC,EAAUC,MAClBC,IAA0BD,EAAcE,aAAeF,EAAcG,mBAAqB,EAC1FC,GAA+BJ,EAAcK,kBAAoBL,EAAcG,mBAAqB,EACpGG,EAA2BnB,OAAKoB,YAAcP,EAAcQ,wBAA2BrB,OAAKsB,kCAG/FV,GACCW,OAAKA,iBACO,6BAGRA,OAAKA,gBAEM,WAEC,kBACF,wCAGG,oBAGE,iEAKDV,EAAcW,gBAAkB,gBAC9BX,EAAcG,kBAAoB,sCAKtC,qCAKH,SACG,4BAKUO,OAAKE,6CAG3BF,OAAKG,eACLH,OAAKI,iDAIYd,EAAcZ,oBAAsB,aAC5C,KAAOY,EAAce,mBAAqB,yFAGxC,SACDf,EAAcE,aAAe,gEAGzBD,EAAwB,mBACrBA,EAAwB,iBAC1BD,EAAcgB,mBAAqB,kBAClChB,EAAciB,0BAA4B,8CAK5CjB,EAAckB,yBAA2B,aAC9C,KAAOlB,EAAcQ,wBAA0B,wFAG9CR,EAAcK,kBAAoB,gEAG9BD,EAA6B,mBAC1BA,EAA6B,iBAC/BE,EAA0B,kBACzBN,EAAcmB,+BAAiC,YChFnEC,EAAQ,SAACC,EAAQtB,EAAUC,EAAesB,eAC7CD,EAAOE,IAAI,kBAAKC,GAAIzB,IAAU0B,KAAK,sBACjBzB,EAAc,SAAWsB,EAAO,gEAItCtB,EAAc,SAAWsB,EAAO,+CAGhCtB,EAAc,SAAWsB,EAAO,8DAGtB,+BAMTvB,EAAUC,UACxBoB,GAAO,gBAAiB,kBAAmBrB,EAAUC,EAAe,WAC7D,GAAI,iBAAkB,mBAAoBD,EAAUC,EAAe,+KChBtE0B,GAAOC,EAAQC,GAGRC,EAAc,SAACC,EAAgBC,SAC1CC,UAAOC,gBAAgBH,EAHR,mBAGuC3C,EAAS4C,GAAaL,GAE9EM,UAAOC,gBALU,cAKiB9C,EAAMuC,2KCN3BQ,aACM,oBACA,iCACA,mCACA,yBAGbC,EAAiB,kBACrBC,GAAMC,OAASD,EAAME,MACjB,cACAF,EAAMC,MACJ,QACAD,EAAME,MACJ,QACA,QAEJC,EAAO,eAAEH,KAAAA,MAAOI,IAAAA,MACdC,EAAUD,EAAMC,SAAW,MAC3BC,EAAQC,KAEZC,4BAA0BJ,WAGtBN,EAAQW,UACRL,EAAMM,UAAYZ,EAAQa,gBAAkBb,EAAQc,YACrC,SAAfR,EAAMS,KAAkB,eAAiB,KAC1B,UAAfT,EAAMS,KAAmB,gBAAkB,KAC3CT,EAAMU,OACNzB,KAAK,MAETe,EAAMW,QAEFC,EAAcjB,EAAeC,EAAMgB,aACnCC,GAAWb,EAAMa,aAAeD,OAChCE,EAAiBd,EAAMe,cACvBC,EAAUC,EAAE,aACTvB,EAAQsB,UAEfH,EAAQK,OACRD,EAAEF,EAAWZ,KAEXW,YAEY,cACFF,YAAcT,KAAkBgB,GAClCL,EAAeM,YACFA,SAASxB,EAAMgB,iBAKtCC,EAAQQ,cAEHJ,GAAEhB,EAASC,GAAQF,EAAMkB,OAAQF,EAAShB,EAAMqB,kBAIhDhC,SACC,cACAO,MAAMgB"}