{"version":3,"file":"polythene-search.js","sources":["../src/theme/vars.js","../src/theme/layout.js","../src/theme/color.js","../src/theme/index.js","../src/search.js"],"sourcesContent":["import { vars } from \"polythene-theme\";\n\nconst rgba = vars.rgba;\n\nconst insetSideMargin = 8;\n\nconst line_height_input = 20;\nconst font_size_input = 20;\n\nconst inset_height = 48;\nconst inset_input_indent = 16;\nconst inset_input_right_padding = 0;\nconst inset_border_radius = vars.unit_block_border_radius;\n\nconst full_width_side_margin = 0;\nconst full_width_height = 56;\nconst full_width_side_padding = insetSideMargin;\nconst full_width_input_right_padding = 0;\nconst full_width_border_radius = 0;\n\nexport default {\n  font_size_input,\n  line_height_input,\n\n  inset_height,\n  inset_input_indent,\n  inset_input_right_padding,\n  inset_border_radius,\n\n  full_width_height,\n  full_width_side_margin,\n  full_width_side_padding,\n  full_width_input_right_padding,\n  full_width_border_radius,\n\n  color_light_label_text: rgba(vars.color_light_foreground, vars.blend_light_text_disabled),\n  color_light_background: rgba(vars.color_light_background),\n\n  color_dark_label_text:  rgba(vars.color_dark_foreground, vars.blend_dark_text_disabled),\n  color_dark_background:  rgba(vars.color_dark_background)\n};\n","import { flex } from \"polythene-css\";\nimport { vars } from \"polythene-theme\";\n\nexport default (selector, componentVars) => {\n  const inset_input_padding_v = ((componentVars.inset_height - componentVars.line_height_input) / 2);\n  const full_width_input_padding_v = ((componentVars.full_width_height - componentVars.line_height_input) / 2);\n  const full_width_input_indent = (vars.unit_indent - componentVars.full_width_side_padding) - vars.grid_unit_icon_button;\n\n  return [{\n    [selector]: [\n      flex.flex(), {\n        position: \"relative\", // necessary when a shadow is added\n\n        \" .pe-textfield\": [\n          flex.flex(), {\n            padding: 0,\n            // prevent that neighboring icon button with ripple hides the cursor\n            position: \"relative\",\n            zIndex: 1\n          }\n        ],\n\n        \" .pe-textfield__input-area\": {\n          padding: 0,\n\n          \":after\": {\n            display: \"none\"\n          }\n        },\n\n        \" .pe-textfield__input, .pe-textfield__label\": {\n          fontSize: componentVars.font_size_input + \"px\",\n          lineHeight: componentVars.line_height_input + \"px\"\n        },\n\n        \" .pe-textfield__input\": {\n          // reset\n          border: \"none\"\n        },\n\n        \" .pe-textfield__label\": {\n          // reset\n          top: 0,\n          bottom: 0\n        },\n\n        \" .pe-search__content\": flex.layoutHorizontal,\n\n        \" .pe-search__content > *\": [\n          flex.layoutVertical,\n          flex.selfCenter\n        ],\n\n        \".pe-search--inset\": {\n          \"border-radius\": componentVars.inset_border_radius + \"px\",\n          padding: \"0 \" + componentVars.inset_side_padding + \"px\",\n\n          \"&, .pe-textfield__input-area, .pe-textfield__input, .pe-textfield__label\": {\n            height: componentVars.inset_height + \"px\"\n          },\n          \" .pe-textfield__input, .pe-textfield__label\": {\n            paddingTop: inset_input_padding_v + \"px\",\n            paddingBottom: inset_input_padding_v + \"px\",\n            paddingLeft: componentVars.inset_input_indent + \"px\",\n            paddingRight: componentVars.inset_input_right_padding + \"px\"\n          }\n        },\n\n        \".pe-search--full-width\": {\n          borderRadius: componentVars.full_width_border_radius + \"px\",\n          padding: \"0 \" + componentVars.full_width_side_padding + \"px\",\n\n          \"&, .pe-textfield__input-area, .pe-textfield__input, .pe-textfield__label\": {\n            height: componentVars.full_width_height + \"px\"\n          },\n          \" .pe-textfield__input, .pe-textfield__label\": {\n            paddingTop: full_width_input_padding_v + \"px\",\n            paddingBottom: full_width_input_padding_v + \"px\",\n            paddingLeft: full_width_input_indent + \"px\",\n            paddingRight: componentVars.full_width_input_right_padding + \"px\"\n          }\n        }\n      }\n    ]\n  }];\n};\n","\nconst style = (scope, selector, componentVars, tint) => [{\n  [scope + selector]: {\n    backgroundColor: componentVars[\"color_\" + tint + \"_background\"],\n\n    \" .pe-textfield__label\": {\n      color: componentVars[\"color_\" + tint + \"_label_text\"]\n    }\n  }\n}];\n\nexport default (selector, componentVars) => [\n  style(\"\",                selector, componentVars, \"light\"),\n  style(\".pe-dark-theme \", selector, componentVars, \"dark\" ), // inside dark theme\n];\n","import { styler } from \"polythene-css\";\nimport vars from \"./vars\";\nimport layout from \"./layout\";\nimport color from \"./color\";\n\nconst fns = [layout, color];\nconst selector = \".pe-search\";\n\nexport const customTheme = (customSelector, customVars) => \n  styler.generateStyles([customSelector, selector], {...vars, ...customVars}, fns);\n\nstyler.generateStyles([selector], vars, fns);\n","import m from \"mithril\";\nimport textfield from \"polythene-textfield\";\nimport { filterSupportedAttributes } from \"polythene-core\";\nimport { customTheme } from \"./theme\";\n\nexport const classes = {\n  component:       \"pe-search\",\n  content:         \"pe-search__content\",\n  searchInset:     \"pe-search--inset\",\n  searchFullWidth: \"pe-search--full-width\"\n};\n\nconst mapButtonState = (state = {}) =>\n  state.focus && state.dirty\n    ? \"focus_dirty\"\n    : state.focus\n      ? \"focus\"\n      : state.dirty\n        ? \"dirty\"\n        : \"none\";\n\nconst view = ({state, attrs}) => {\n  const element = attrs.element || \"div\";\n  const props = Object.assign(\n    {},\n    filterSupportedAttributes(attrs),\n    {\n      class: [\n        classes.component,\n        attrs.fullWidth ? classes.searchFullWidth : classes.searchInset,\n        attrs.class\n      ].join(\" \")\n    },\n    attrs.events\n  );\n  const searchState = mapButtonState(state.searchState);\n  const buttons = (attrs.buttons || {})[searchState] || {};\n  const textfieldAttrs = attrs.textfield || {};\n  const content = m(\"div\", {\n    class: classes.content\n  }, [\n    buttons.before,\n    m(textfield, Object.assign(\n      {},\n      textfieldAttrs,\n      {\n        getState: newState => {\n          state.searchState = Object.assign({}, newState);\n          if (textfieldAttrs.getState) {\n            textfieldAttrs.getState(state.searchState);\n          }\n        }\n      }\n    )),\n    buttons.after\n  ]);\n  return m(element, props, [attrs.before, content, attrs.after]);\n};\n\nexport default {\n  theme: customTheme, // accepts (selector, vars)\n  oninit: vnode => {\n    vnode.state.searchState = undefined;\n  },\n  view\n};\n\n\n"],"names":["rgba","vars","insetSideMargin","line_height_input","font_size_input","inset_height","inset_input_indent","inset_input_right_padding","inset_border_radius","unit_block_border_radius","full_width_side_margin","full_width_height","full_width_side_padding","full_width_input_right_padding","full_width_border_radius","color_light_foreground","blend_light_text_disabled","color_light_background","color_dark_foreground","blend_dark_text_disabled","color_dark_background","selector","componentVars","inset_input_padding_v","full_width_input_padding_v","full_width_input_indent","unit_indent","grid_unit_icon_button","flex","layoutHorizontal","layoutVertical","selfCenter","inset_side_padding","style","scope","tint","fns","layout","color","customTheme","customSelector","customVars","styler","generateStyles","classes","mapButtonState","state","focus","dirty","view","attrs","element","props","_extends","filterSupportedAttributes","component","fullWidth","searchFullWidth","searchInset","class","join","events","searchState","buttons","textfieldAttrs","textfield","content","m","before","newState","getState","after","undefined"],"mappings":"syBAEA,IAAMA,GAAOC,OAAKD,KAEZE,EAAkB,EAElBC,EAAoB,GACpBC,EAAkB,GAElBC,EAAe,GACfC,EAAqB,GACrBC,EAA4B,EAC5BC,EAAsBP,OAAKQ,yBAE3BC,EAAyB,EACzBC,EAAoB,GACpBC,EAA0BV,EAC1BW,EAAiC,EACjCC,EAA2B,2RAiBPd,EAAKC,OAAKc,uBAAwBd,OAAKe,kDACvChB,EAAKC,OAAKgB,8CAEVjB,EAAKC,OAAKiB,sBAAuBjB,OAAKkB,gDACtCnB,EAAKC,OAAKmB,mCCpCpBC,EAAUC,MAClBC,IAA0BD,EAAcjB,aAAeiB,EAAcnB,mBAAqB,EAC1FqB,GAA+BF,EAAcX,kBAAoBW,EAAcnB,mBAAqB,EACpGsB,EAA2BxB,OAAKyB,YAAcJ,EAAcV,wBAA2BX,OAAK0B,kCAG/FN,GACCO,OAAKA,iBACO,6BAGRA,OAAKA,gBACM,WAEC,kBACF,0CAKD,oBAGE,iEAKDN,EAAclB,gBAAkB,gBAC9BkB,EAAcnB,kBAAoB,sCAKtC,qCAKH,SACG,0BAGcyB,OAAKC,6CAG3BD,OAAKE,eACLF,OAAKG,iDAIYT,EAAcd,oBAAsB,aAC5C,KAAOc,EAAcU,mBAAqB,wFAGzCV,EAAcjB,aAAe,gEAGzBkB,EAAwB,mBACrBA,EAAwB,iBAC1BD,EAAchB,mBAAqB,kBAClCgB,EAAcf,0BAA4B,8CAK5Ce,EAAcR,yBAA2B,aAC9C,KAAOQ,EAAcV,wBAA0B,wFAG9CU,EAAcX,kBAAoB,gEAG9Ba,EAA6B,mBAC1BA,EAA6B,iBAC/BC,EAA0B,kBACzBH,EAAcT,+BAAiC,YC9EnEoB,EAAQ,SAACC,EAAOb,EAAUC,EAAea,eAC5CD,EAAQb,mBACUC,EAAc,SAAWa,EAAO,8CAGxCb,EAAc,SAAWa,EAAO,+BAK7Bd,EAAUC,UACxBW,EAAM,GAAmBZ,EAAUC,EAAe,SAClDW,EAAM,kBAAmBZ,EAAUC,EAAe,8KCR9Cc,GAAOC,EAAQC,GACfjB,EAAW,aAEJkB,EAAc,SAACC,EAAgBC,SAC1CC,UAAOC,gBAAgBH,EAAgBnB,QAAepB,EAASwC,GAAaL,GAE9EM,UAAOC,gBAAgBtB,GAAWpB,EAAMmC,2KCN3BQ,aACM,oBACA,iCACA,mCACA,yBAGbC,EAAiB,cAACC,mEACtBA,GAAMC,OAASD,EAAME,MACjB,cACAF,EAAMC,MACJ,QACAD,EAAME,MACJ,QACA,QAEJC,EAAO,eAAEH,KAAAA,MAAOI,IAAAA,MACdC,EAAUD,EAAMC,SAAW,MAC3BC,EAAQC,KAEZC,4BAA0BJ,WAGtBN,EAAQW,UACRL,EAAMM,UAAYZ,EAAQa,gBAAkBb,EAAQc,YACpDR,EAAMS,OACNC,KAAK,MAETV,EAAMW,QAEFC,EAAcjB,EAAeC,EAAMgB,aACnCC,GAAWb,EAAMa,aAAeD,OAChCE,EAAiBd,EAAMe,cACvBC,EAAUC,EAAE,aACTvB,EAAQsB,UAEfH,EAAQK,OACRD,EAAEF,EAAWZ,KAEXW,YAEY,cACFF,YAAcT,KAAkBgB,GAClCL,EAAeM,YACFA,SAASxB,EAAMgB,iBAKtCC,EAAQQ,cAEHJ,GAAEhB,EAASC,GAAQF,EAAMkB,OAAQF,EAAShB,EAAMqB,kBAIhDhC,SACC,cACAO,MAAMgB,YAAcU"}