{"version":3,"file":"polythene-utilities.js","sources":["../src/webfont-loader.js","../src/easing.js","../src/layout-styles/flex-classes.js","../src/layout-styles/common-classes.js","../src/layout-styles/index.js","../src/scroll-to.js","../src/timer.js"],"sourcesContent":["import { isServer } from \"polythene-core\";\n\nexport const addWebFont = (vendor, family, key) => {\n  if (isServer) return;\n  if (!window.WebFontConfig) {\n    window.WebFontConfig = {};\n    (function() {\n      let wf = document.createElement(\"script\");\n      wf.src = (document.location.protocol === \"https:\" ? \"https\" : \"http\") + \"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js\";\n      wf.type = \"text/javascript\";\n      wf.async = \"true\";\n      let s = document.getElementsByTagName(\"script\")[0];\n      if (s) {\n        s.parentNode.insertBefore(wf, s);\n      }\n    })();\n  }\n  const vendorCfg = window.WebFontConfig[vendor] || {};\n  vendorCfg.families = vendorCfg.families || [];\n  vendorCfg.families.push(family);\n  if (key) {\n    vendorCfg.key = key;\n  }\n  window.WebFontConfig[vendor] = vendorCfg;\n};\n","/*\nhttps://gist.github.com/gre/1650294\nEasing Functions - inspired from http://gizma.com/easing/\nOnly considering the t value for the range [0, 1] => [0, 1]\n*/\n\nexport const easing = {\n  // no easing, no acceleration\n  linear: t => t,\n  // accelerating from zero velocity\n  easeInQuad: t => t * t,\n  // decelerating to zero velocity\n  easeOutQuad: t => t * (2 - t),\n  // acceleration until halfway, then deceleration\n  easeInOutQuad: t => t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t,\n  // accelerating from zero velocity\n  easeInCubic: t => t * t * t,\n  // decelerating to zero velocity\n  easeOutCubic: t => (--t) * t * t + 1,\n  // acceleration until halfway, then deceleration\n  easeInOutCubic: t => t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1,\n  // accelerating from zero velocity\n  easeInQuart: t => t * t * t * t,\n  // decelerating to zero velocity\n  easeOutQuart: t => 1 - (--t) * t * t * t,\n  // acceleration until halfway, then deceleration\n  easeInOutQuart: t => t < .5 ? 8 * t * t * t * t : 1 - 8* (--t) * t * t * t,\n  // accelerating from zero velocity\n  easeInQuint: t => t * t * t * t * t,\n  // decelerating to zero velocity\n  easeOutQuint: t => 1 + (--t) * t * t * t * t,\n  // acceleration until halfway, then deceleration\n  easeInOutQuint: t => t < .5 ? 16 * t * t * t * t * t : 1 + 16 * (--t) * t * t * t * t\n};\n","import { flex } from \"polythene-core-css\";\n\nexport default [{\n  \".layout, .layout.horizontal\": flex.layout,\n  \".layout.horizontal.inline, .layout.vertical.inline\": flex.layoutInline,\n  \".layout.horizontal\": flex.layoutHorizontal,\n  \".layout.horizontal.reverse\": flex.layoutHorizontalReverse,\n  \".layout.vertical\": flex.layoutVertical,\n  \".layout.vertical.reverse\": flex.layoutVerticalReverse,\n  \".layout.wrap\": flex.layoutWrap,\n  \".layout.wrap.reverse\": flex.layoutWrapReverse,\n  \".flex\": flex.flex(1),\n  \".span.flex\": { \"display\": \"block\" }, // for IE 10\n  \".flex.auto-vertical\": flex.flexAutoVertical,\n  \".flex.auto\": flex.flexAuto,\n  \".flex.none\": flex.flexIndex(\"none\"),\n  \".flex.one\": flex.flexIndex(1),\n  \".flex.two\": flex.flexIndex(2),\n  \".flex.three\": flex.flexIndex(3),\n  \".flex.four\": flex.flexIndex(4),\n  \".flex.five\": flex.flexIndex(5),\n  \".flex.six\": flex.flexIndex(6),\n  \".flex.seven\": flex.flexIndex(7),\n  \".flex.eight\": flex.flexIndex(8),\n  \".flex.nine\": flex.flexIndex(9),\n  \".flex.ten\": flex.flexIndex(10),\n  \".flex.eleven\": flex.flexIndex(11),\n  \".flex.twelve\": flex.flexIndex(12),\n\n  // alignment in cross axis\n  \".layout.start\": flex.layoutStart,\n  \".layout.center, .layout.center-center\": flex.layoutCenter,\n  \".layout.end\": flex.layoutEnd,\n\n  // alignment in main axis\n  \".layout.start-justified\": flex.layoutStartJustified,\n  \".layout.center-justified, .layout.center-center\": flex.layoutCenterJustified,\n  \".layout.end-justified\": flex.layoutEndJustified,\n  \".layout.around-justified\": flex.layoutAroundJustified,\n  \".layout.justified\": flex.layoutJustified,\n\n  // self alignment\n  \".self-start\": flex.selfStart,\n  \".self-center\": flex.selfCenter,\n  \".self-end\": flex.selfEnd,\n  \".self-stretch\": flex.selfStretch\n}];\n\n","export default [{\n  \".pe-block\": {\n    display: \"block\"\n  },\n\n  \".pe-inline-block\": {\n    display: \"inline-block\"\n  },\n\n  // ie support for hidden\n  \".pe-hidden\": {\n    display: \"none !important\"\n  },\n\n  \".pe-relative\": {\n    position: \"relative\"\n  },\n\n  \".pe-absolute\": {\n    position: \"absolute\"\n  },\n\n  \".pe-fit\": {\n    position: \"absolute\",\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  },\n  \n  \".pe-fullbleed\": {\n    margin: 0,\n    height: \"100vh\"\n  }\n}];\n","import { styler } from \"polythene-core-css\";\nimport flex from \"./flex-classes\";\nimport commonStyle from \"./common-classes\";\n\nexport const layoutStyles = [flex, commonStyle];\n\nexport const addLayoutStyles = () => \n  styler.add(\"pe-layout\", flex, commonStyle);\n","/*\n Animated scroll to a position.\n Derived from https://github.com/madebysource/animated-scrollto\n Adapted to Mithril and rewritten to es6.\n*/\n\nimport { easing } from \"./easing\";\nimport { isServer } from \"polythene-core\";\n\nexport const scrollTo = opts => {\n  if (isServer) {\n    return;\n  }\n  const element = opts.element;\n  const which = (opts.direction === \"horizontal\") ? \"scrollLeft\" : \"scrollTop\";\n  const to = opts.to;\n  const duration = opts.duration * 1000;\n  const easingFn = opts.easing || easing.easeInOutCubic;\n  const start = element[which];\n  const change = to - start;\n  const animationStart = new Date().getTime();\n  let animating = true;\n  return new Promise(resolve => {\n    const animateScroll = () => {\n      if (!animating) {\n        return;\n      }\n      requestAnimFrame(animateScroll);\n      const now = new Date().getTime();\n      const percentage = ((now - animationStart) / duration);\n      const val = start + change * easingFn(percentage);\n      element[which] = val;\n      if (percentage >= 1) {\n        element[which] = to;\n        animating = false;\n        resolve();\n      }\n    };\n    requestAnimFrame(animateScroll);\n  });\n};\n\nconst requestAnimFrame = isServer\n  ? () => {}\n  : (() =>\n    window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || (callback =>\n      window.setTimeout(callback, 1000 / 60)\n    )\n  )();\n","\nimport { isClient } from \"polythene-core\";\n\nexport const Timer = () => {\n  let timerId, startTime, remaining, cb;\n\n  const stop = () => {\n    if (isClient) {\n      window.clearTimeout(timerId);\n    }\n  };\n\n  const pause = () => (\n    stop(),\n    remaining -= new Date() - startTime\n  );\n\n  const startTimer = () => {\n    if (isClient) {\n      stop();\n      startTime = new Date();\n      timerId = window.setTimeout(cb, remaining);\n    }\n  };\n\n  const start = (callback, delaySeconds) => (\n    cb = callback,\n    remaining = delaySeconds * 1000,\n    startTimer()\n  );\n\n  const resume = () =>\n    startTimer();\n\n  return {\n    start,\n    pause,\n    resume,\n    stop\n  };\n};\n"],"names":["addWebFont","vendor","family","key","isServer","window","WebFontConfig","wf","document","createElement","src","location","protocol","type","async","s","getElementsByTagName","parentNode","insertBefore","vendorCfg","families","push","easing","t","flex","layout","layoutInline","layoutHorizontal","layoutHorizontalReverse","layoutVertical","layoutVerticalReverse","layoutWrap","layoutWrapReverse","display","flexAutoVertical","flexAuto","flexIndex","layoutStart","layoutCenter","layoutEnd","layoutStartJustified","layoutCenterJustified","layoutEndJustified","layoutAroundJustified","layoutJustified","selfStart","selfCenter","selfEnd","selfStretch","layoutStyles","commonStyle","addLayoutStyles","styler","add","scrollTo","element","opts","which","direction","to","duration","easingFn","easeInOutCubic","start","change","animationStart","Date","getTime","animating","Promise","animateScroll","percentage","val","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","setTimeout","callback","Timer","timerId","startTime","remaining","cb","stop","isClient","clearTimeout","startTimer","delaySeconds"],"mappings":"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"}