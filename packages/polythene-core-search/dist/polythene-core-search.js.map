{"version":3,"file":"polythene-core-search.js","sources":["../src/classes.js","../src/theme/vars.js","../src/theme/layout.js","../src/theme/color.js","../src/theme/index.js","../src/search.js"],"sourcesContent":["\nexport default {\n  component:       \"pe-search\",\n\n  // elements\n  content:         \"pe-search__content\",\n\n  // states\n  searchFullWidth: \"pe-search--full-width\",\n  searchInset:     \"pe-search--inset\",\n};\n","import { vars } from \"polythene-theme\";\n\nconst rgba = vars.rgba;\n\nconst insetSideMargin = 8;\n\nconst line_height_input = 20;\nconst font_size_input = 20;\n\nconst inset_height = 48;\nconst inset_input_indent = 16;\nconst inset_input_right_padding = 0;\nconst inset_side_padding = 0;\nconst inset_border_radius = vars.unit_block_border_radius;\n\nconst full_width_side_margin = 0;\nconst full_width_height = 56;\nconst full_width_side_padding = insetSideMargin;\nconst full_width_input_right_padding = 0;\nconst full_width_border_radius = 0;\n\nexport default {\n  font_size_input,\n  line_height_input,\n\n  inset_height,\n  inset_input_indent,\n  inset_side_padding,\n  inset_input_right_padding,\n  inset_border_radius,\n\n  full_width_height,\n  full_width_side_margin,\n  full_width_side_padding,\n  full_width_input_right_padding,\n  full_width_border_radius,\n\n  color_light_label_text: rgba(vars.color_light_foreground, vars.blend_light_text_disabled),\n  color_light_input_text: rgba(vars.color_light_foreground, vars.blend_light_text_primary),\n  color_light_background: rgba(vars.color_light_background),\n\n  color_dark_label_text:  rgba(vars.color_dark_foreground, vars.blend_dark_text_disabled),\n  color_dark_input_text:  rgba(vars.color_dark_foreground, vars.blend_dark_text_primary),\n  color_dark_background:  rgba(vars.color_dark_background)\n};\n","import { flex } from \"polythene-core-css\";\nimport { vars } from \"polythene-theme\";\n\nexport default (selector, componentVars) => {\n  const inset_input_padding_v = ((componentVars.inset_height - componentVars.line_height_input) / 2);\n  const full_width_input_padding_v = ((componentVars.full_width_height - componentVars.line_height_input) / 2);\n  const full_width_input_indent = (vars.unit_indent - componentVars.full_width_side_padding) - vars.grid_unit_icon_button;\n\n  return [{\n    [selector]: [\n      flex.flex(), {\n        position: \"relative\", // necessary when a shadow is added\n\n        \" .pe-textfield\": [\n          flex.flex(),\n          {\n            alignItems: \"center\",\n            padding: 0,\n            // prevent that neighboring icon button with ripple hides the cursor\n            position: \"relative\",\n            zIndex: 1,\n \n            \" .pe-textfield__input-area\": {\n              padding: 0,\n\n              \":after\": {\n                display: \"none\"\n              }\n            },\n\n            \" .pe-textfield__input, .pe-textfield__label\": {\n              fontSize: componentVars.font_size_input + \"px\",\n              lineHeight: componentVars.line_height_input + \"px\"\n            },\n\n            \" .pe-textfield__input\": {\n              // reset\n              border: \"none\"\n            },\n\n            \" .pe-textfield__label\": {\n              // reset\n              top: 0,\n              bottom: 0\n            }\n          }\n        ],\n\n        \" .pe-search__content\": {\n          \"&, .pe-textfield\": flex.layoutHorizontal,\n          \"&, .pe-textfield__input-area\": {\n            flexGrow: 1\n          }\n        },\n\n        \" .pe-search__content > *\": [\n          flex.layoutVertical,\n          flex.selfCenter\n        ],\n\n        \".pe-search--inset\": {\n          \"border-radius\": componentVars.inset_border_radius + \"px\",\n          padding: \"0 \" + componentVars.inset_side_padding + \"px\",\n\n          \"&, .pe-textfield__input-area, .pe-textfield__input, .pe-textfield__label\": {\n            padding: 0,\n            height: componentVars.inset_height + \"px\"\n          },\n          \" .pe-textfield__input, .pe-textfield__label\": {\n            paddingTop: inset_input_padding_v + \"px\",\n            paddingBottom: inset_input_padding_v + \"px\",\n            paddingLeft: componentVars.inset_input_indent + \"px\",\n            paddingRight: componentVars.inset_input_right_padding + \"px\"\n          }\n        },\n\n        \".pe-search--full-width\": {\n          borderRadius: componentVars.full_width_border_radius + \"px\",\n          padding: \"0 \" + componentVars.full_width_side_padding + \"px\",\n\n          \"&, .pe-textfield__input-area, .pe-textfield__input, .pe-textfield__label\": {\n            height: componentVars.full_width_height + \"px\"\n          },\n          \" .pe-textfield__input, .pe-textfield__label\": {\n            paddingTop: full_width_input_padding_v + \"px\",\n            paddingBottom: full_width_input_padding_v + \"px\",\n            paddingLeft: full_width_input_indent + \"px\",\n            paddingRight: componentVars.full_width_input_right_padding + \"px\"\n          }\n        }\n      }\n    ]\n  }];\n};\n","\nconst style = (scopes, selector, componentVars, tint) => [{\n  [scopes.map(s => s + selector).join(\",\")]: {\n    backgroundColor: componentVars[\"color_\" + tint + \"_background\"],\n\n    \" .pe-textfield\": {\n      \" .pe-textfield__label\": {\n        color: componentVars[\"color_\" + tint + \"_label_text\"]\n      },\n      \" .pe-textfield__input\": {\n        color: componentVars[\"color_\" + tint + \"_input_text\"]\n      },\n      \" .pe-textfield__input-area\": {\n        backgroundColor: \"transparent\"\n      }\n    }\n  }\n}];\n\nexport default (selector, componentVars) => [\n  style([\".pe-dark-tone\", \".pe-dark-tone \"], selector, componentVars, \"dark\"), // has/inside dark tone\n  style([\"\", \".pe-light-tone\", \".pe-light-tone \"], selector, componentVars, \"light\"), // normal, has/inside light tone\n];\n\n","import { styler } from \"polythene-core-css\";\nimport classes from \"../classes\";\nimport vars from \"./vars\";\nimport layout from \"./layout\";\nimport color from \"./color\";\n\nconst fns = [layout, color];\nconst selector = `.${classes.component}`;\n\nexport const customTheme = (customSelector, customVars) => \n  styler.generateStyles([customSelector, selector], {...vars, ...customVars}, fns);\n\nstyler.generateStyles([selector], vars, fns);\n","import { filterSupportedAttributes } from \"polythene-core\";\nimport { customTheme } from \"./theme\";\nimport classes from \"./classes\";\n\nexport const getElement = vnode =>\n  vnode.attrs.element || \"div\";\n\nexport const theme = customTheme;\n\nconst getNameOfState = state =>\n  state.focus && state.dirty\n    ? \"focus_dirty\"\n    : state.focus\n      ? \"focus\"\n      : state.dirty\n        ? \"dirty\"\n        : \"none\";\n\nexport const getInitialState = (vnode, createStream) => {\n  const searchState = createStream({});\n  return {\n    searchState\n  };\n};\n\nexport const createProps = (vnode, { keys: k }) => {\n  const attrs = vnode.attrs;\n  return Object.assign(\n    {},\n    filterSupportedAttributes(attrs),\n    {\n      className: [\n        classes.component,\n        attrs.fullWidth ? classes.searchFullWidth : classes.searchInset,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \")\n    },\n    attrs.events\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, TextField }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const searchState = getNameOfState(state.searchState());\n  const buttons = (attrs.buttons || {})[searchState] || {};\n  const textfieldAttrs = attrs.textfield || {};\n  return h(\"div\",\n    { className: classes.content },\n    [\n      buttons.before,\n      h(TextField, Object.assign(\n        {},\n        textfieldAttrs,\n        {\n          key: \"input\",\n          onChange: newState => {\n            state.searchState(newState);\n            if (textfieldAttrs.onChange) {\n              textfieldAttrs.onChange(newState);\n            }\n          },\n        }\n      )),\n      buttons.after\n    ]\n  );\n};\n"],"names":["rgba","vars","unit_block_border_radius","color_light_foreground","blend_light_text_disabled","blend_light_text_primary","color_light_background","color_dark_foreground","blend_dark_text_disabled","blend_dark_text_primary","color_dark_background","selector","componentVars","inset_input_padding_v","inset_height","line_height_input","full_width_input_padding_v","full_width_height","full_width_input_indent","unit_indent","full_width_side_padding","grid_unit_icon_button","flex","font_size_input","layoutHorizontal","layoutVertical","selfCenter","inset_border_radius","inset_side_padding","inset_input_indent","inset_input_right_padding","full_width_border_radius","full_width_input_right_padding","style","scopes","tint","map","s","join","fns","layout","color","classes","component","customTheme","customSelector","customVars","styler","generateStyles","getElement","vnode","attrs","element","theme","getNameOfState","state","focus","dirty","getInitialState","createStream","createProps","k","keys","_extends","filterSupportedAttributes","fullWidth","searchFullWidth","searchInset","tone","className","class","events","createContent","h","renderer","TextField","searchState","buttons","textfieldAttrs","textfield","content","before","newState","onChange","after"],"mappings":"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"}