!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("polythene-core"),require("mithril"),require("polythene-css"),require("polythene-theme"),require("polythene-utilities")):"function"==typeof define&&define.amd?define(["exports","polythene-core","mithril","polythene-css","polythene-theme","polythene-utilities"],e):e(t.polythene=t.polythene||{},t["polythene-core"],t.m,t["polythene-css"],t["polythene-theme"],t["polythene-utilities"])}(this,function(t,e,i,n,o,r){"use strict";function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i="default"in i?i.default:i;var u={component:"pe-notification",holder:"pe-notification__holder",placeholder:"pe-notification__placeholder",content:"pe-notification__content",title:"pe-notification__title",multilineTitle:"pe-notification__title--multiline",action:"pe-notification__action",horizontal:"pe-notification--horizontal",vertical:"pe-notification--vertical",hasContainer:"pe-notification--container"},d=o.vars.rgba,s={width:274,min_height:80,border_radius:o.vars.unit_block_border_radius,title_padding_h:8,title_single_padding_v:14,title_multi_padding_v:20,side_padding:16,font_size:14,line_height:20,color_light_background:d(o.vars.color_light_background),color_light_text:d(o.vars.color_light_foreground,o.vars.blend_light_dark_primary),color_dark_background:d(o.vars.color_dark_background,.85),color_dark_text:d(o.vars.color_dark_foreground,o.vars.blend_light_text_primary)},p=function(t,e){return[l({},t,[n.flex.layoutCenter,{width:e.width+"px",minHeight:e.min_height+"px",position:"relative",padding:"0 "+e.side_padding+"px",margin:"0 auto",borderRadius:e.border_radius+"px",pointerEvents:"all"," .pe-notification__content":{width:"100%"}," .pe-notification__title":{padding:e.title_single_padding_v+"px "+e.title_padding_h+"px",fontSize:e.font_size+"px",lineHeight:e.line_height+"px"}," .pe-notification__action":{" .pe-button":{margin:0}},"&.pe-notification--horizontal":{" .pe-notification__content":n.flex.layoutHorizontal," .pe-notification__title":n.flex.flex()," .pe-notification__title--multi-line":{paddingTop:e.title_multi_padding_v+"px",paddingBottom:e.title_multi_padding_v+"px"}," .pe-notification__action":n.flex.layoutCenter},"&.pe-notification--vertical":{" .pe-notification__content":n.flex.layoutVertical," .pe-notification__title":{paddingBottom:"4px"}," .pe-notification__title--multi-line":{paddingTop:e.title_multi_padding_v+"px"}," .pe-notification__action":n.flex.layoutEndJustified}}])]},f=function(t,e,i,n){return[a({},t.map(function(t){return t+e}).join(","),{color:i["color_"+n+"_text"],background:i["color_"+n+"_background"]})]},h=function(t,e){return[f([".pe-dark-theme",".pe-dark-theme "],t,e,"dark"),f(["",".pe-light-theme",".pe-light-theme "],t,e,"light")]},_=function(t){return[c({},t,[n.flex.layoutCenterCenter,{top:0,right:0,bottom:0,left:0,zIndex:o.vars.z_notification,pointerEvents:"none",".pe-multiple--screen":{position:"fixed"},".pe-multiple--container":{position:"absolute"}}])]},g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},m=[p,h],y="."+u.component,v=[_],b="."+u.holder,w=function(t,e){return n.styler.generateStyles([t,y],g({},s,e),m),n.styler.generateStyles([t,b],g({},s,e),v)};n.styler.generateStyles([y],s,m),n.styler.generateStyles([b],s,v);var x=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},k=function(t){t.isPaused=!0,t.timer&&t.timer.pause()},S=function(t){t.isPaused=!1,t.timer&&t.timer.resume()},C=function(t){t.timer&&t.timer.stop()},j=function(t,e){if(t.containerEl=t.containerEl||document.querySelector(e.containerSelector||t.element),e.containerSelector){t.containerEl.querySelector(t.element).classList.add(u.hasContainer)}},P=function(t,i){j(t,i),C(t),t.transitioning=!0;var n=i.transitions||t.transitions;return e.show(x({},i,n.show(t.containerEl,i))).then(function(){t.transitioning=!1,t.didShow&&t.didShow(t.instanceId);var e=i.timeout;if(0===e);else{var n=void 0!==e?e:3;t.timer=new r.Timer(function(){z(t,i)},n)}})},z=function(t,n){C(t);var o=t.instanceId;t.transitioning=!0;var r=n.transitions||t.transitions;return e.hide(x({},n,r.hide(t.containerEl,n))).then(function(){C(t),t.transitioning=!1,t.didHide&&t.didHide(o),i.redraw()})},E=function(t,n){return i(n.element||"div",x({},e.filterSupportedAttributes(n),{class:[t.class,"light"===n.tone?null:"pe-dark-theme","light"===n.tone?"pe-light-theme":null,n.containerSelector?u.hasContainer:null,"vertical"===n.layout?u.vertical:u.horizontal,"dark"===n.tone?"pe-dark-theme":null,"light"===n.tone?"pe-light-theme":null,n.class].join(" "),oncreate:function(e){var i=e.dom;t.el=i,P(t,n)},onclick:function(t){return t.preventDefault()}}),i("div",{class:u.content},n.content||[n.title?i("div",{class:u.title,oncreate:function(t){var e=t.dom;e.getBoundingClientRect().height>parseInt(window.getComputedStyle(e).lineHeight,10)+parseInt(window.getComputedStyle(e).paddingTop,10)+parseInt(window.getComputedStyle(e).paddingBottom,10)&&e.classList.add(u.multilineTitle)}},n.title):null,n.action?i("div",{class:u.action},[n.action]):null]))},O={theme:w,oninit:function(t){var e=t.attrs;t.state=x(t.state,e,{el:null,containerEl:null,dismissEl:null,transitioning:!1,timer:null,isPaused:!1})},view:function(t){var e=t.state,i=t.attrs,n="function"==typeof i.opts?i.opts():i.opts;return i.hide&&!e.transitioning&&z(e,n),i.pause&&!e.isPaused?k(e):i.unpause&&e.isPaused&&S(e),E(e,n)}},D=function(t,e){return{el:t,showDuration:e.showDuration||.5,showDelay:e.showDelay||0,beforeShow:function(){return t.style.opacity=0},show:function(){return t.style.opacity=1}}},q=function(t,e){return{el:t,hideDuration:e.hideDuration||.5,hideDelay:e.hideDelay||0,hide:function(){return t.style.opacity=0}}},I={show:D,hide:q},H=e.multiple({instance:O,transitions:I,queue:!0,defaultId:"default_notification",class:u.component,element:"."+u.holder,placeholder:"span."+u.placeholder,bodyShowClass:u.open});t.default=H,t.instance=O,t.classes=u,t.vars=s,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-notification.js.map
